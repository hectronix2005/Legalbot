/*! For license information please see main.90411a74.js.LICENSE.txt */
(()=>{"use strict";var e={4:(e,a,t)=>{var n=t(853),r=t(43),l=t(950);function s(e){var a="https://react.dev/errors/"+e;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var t=2;t<arguments.length;t++)a+="&args[]="+encodeURIComponent(arguments[t])}return"Minified React error #"+e+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function o(e){var a=e,t=e;if(e.alternate)for(;a.return;)a=a.return;else{e=a;do{0!==(4098&(a=e).flags)&&(t=a.return),e=a.return}while(e)}return 3===a.tag?t:null}function c(e){if(13===e.tag){var a=e.memoizedState;if(null===a&&(null!==(e=e.alternate)&&(a=e.memoizedState)),null!==a)return a.dehydrated}return null}function d(e){if(31===e.tag){var a=e.memoizedState;if(null===a&&(null!==(e=e.alternate)&&(a=e.memoizedState)),null!==a)return a.dehydrated}return null}function u(e){if(o(e)!==e)throw Error(s(188))}function m(e){var a=e.tag;if(5===a||26===a||27===a||6===a)return e;for(e=e.child;null!==e;){if(null!==(a=m(e)))return a;e=e.sibling}return null}var p=Object.assign,h=Symbol.for("react.element"),f=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),y=Symbol.for("react.consumer"),j=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),w=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),S=Symbol.for("react.lazy");Symbol.for("react.scope");var k=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var E=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var T=Symbol.iterator;function P(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=T&&e[T]||e["@@iterator"])?e:null}var R=Symbol.for("react.client.reference");function L(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===R?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case g:return"Fragment";case b:return"Profiler";case x:return"StrictMode";case _:return"Suspense";case w:return"SuspenseList";case k:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case v:return"Portal";case j:return e.displayName||"Context";case y:return(e._context.displayName||"Context")+".Consumer";case N:var a=e.render;return(e=e.displayName)||(e=""!==(e=a.displayName||a.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case C:return null!==(a=e.displayName||null)?a:L(e.type)||"Memo";case S:a=e._payload,e=e._init;try{return L(e(a))}catch(t){}}return null}var A=Array.isArray,D=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z=l.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O={pending:!1,data:null,method:null,action:null},I=[],q=-1;function F(e){return{current:e}}function M(e){0>q||(e.current=I[q],I[q]=null,q--)}function U(e,a){q++,I[q]=e.current,e.current=a}var B,V,H=F(null),W=F(null),G=F(null),$=F(null);function Q(e,a){switch(U(G,a),U(W,e),U(H,null),a.nodeType){case 9:case 11:e=(e=a.documentElement)&&(e=e.namespaceURI)?gu(e):0;break;default:if(e=a.tagName,a=a.namespaceURI)e=xu(a=gu(a),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}M(H),U(H,e)}function K(){M(H),M(W),M(G)}function J(e){null!==e.memoizedState&&U($,e);var a=H.current,t=xu(a,e.type);a!==t&&(U(W,e),U(H,t))}function Y(e){W.current===e&&(M(H),M(W)),$.current===e&&(M($),dm._currentValue=O)}function X(e){if(void 0===B)try{throw Error()}catch(t){var a=t.stack.trim().match(/\n( *(at )?)/);B=a&&a[1]||"",V=-1<t.stack.indexOf("\n    at")?" (<anonymous>)":-1<t.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+B+e+V}var Z=!1;function ee(e,a){if(!e||Z)return"";Z=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(a){var t=function(){throw Error()};if(Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(r){var n=r}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){n=l}e.call(t.prototype)}}else{try{throw Error()}catch(s){n=s}(t=e())&&"function"===typeof t.catch&&t.catch(function(){})}}catch(i){if(i&&n&&"string"===typeof i.stack)return[i.stack,n.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var l=n.DetermineComponentFrameRoot(),s=l[0],i=l[1];if(s&&i){var o=s.split("\n"),c=i.split("\n");for(r=n=0;n<o.length&&!o[n].includes("DetermineComponentFrameRoot");)n++;for(;r<c.length&&!c[r].includes("DetermineComponentFrameRoot");)r++;if(n===o.length||r===c.length)for(n=o.length-1,r=c.length-1;1<=n&&0<=r&&o[n]!==c[r];)r--;for(;1<=n&&0<=r;n--,r--)if(o[n]!==c[r]){if(1!==n||1!==r)do{if(n--,0>--r||o[n]!==c[r]){var d="\n"+o[n].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}}while(1<=n&&0<=r);break}}}finally{Z=!1,Error.prepareStackTrace=t}return(t=e?e.displayName||e.name:"")?X(t):""}function ae(e,a){switch(e.tag){case 26:case 27:case 5:return X(e.type);case 16:return X("Lazy");case 13:return e.child!==a&&null!==a?X("Suspense Fallback"):X("Suspense");case 19:return X("SuspenseList");case 0:case 15:return ee(e.type,!1);case 11:return ee(e.type.render,!1);case 1:return ee(e.type,!0);case 31:return X("Activity");default:return""}}function te(e){try{var a="",t=null;do{a+=ae(e,t),t=e,e=e.return}while(e);return a}catch(n){return"\nError generating stack: "+n.message+"\n"+n.stack}}var ne=Object.prototype.hasOwnProperty,re=n.unstable_scheduleCallback,le=n.unstable_cancelCallback,se=n.unstable_shouldYield,ie=n.unstable_requestPaint,oe=n.unstable_now,ce=n.unstable_getCurrentPriorityLevel,de=n.unstable_ImmediatePriority,ue=n.unstable_UserBlockingPriority,me=n.unstable_NormalPriority,pe=n.unstable_LowPriority,he=n.unstable_IdlePriority,fe=n.log,ve=n.unstable_setDisableYieldValue,ge=null,xe=null;function be(e){if("function"===typeof fe&&ve(e),xe&&"function"===typeof xe.setStrictMode)try{xe.setStrictMode(ge,e)}catch(a){}}var ye=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(je(e)/Ne|0)|0},je=Math.log,Ne=Math.LN2;var _e=256,we=262144,Ce=4194304;function Se(e){var a=42&e;if(0!==a)return a;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return 261888&e;case 262144:case 524288:case 1048576:case 2097152:return 3932160&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ke(e,a,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,l=e.suspendedLanes,s=e.pingedLanes;e=e.warmLanes;var i=134217727&n;return 0!==i?0!==(n=i&~l)?r=Se(n):0!==(s&=i)?r=Se(s):t||0!==(t=i&~e)&&(r=Se(t)):0!==(i=n&~l)?r=Se(i):0!==s?r=Se(s):t||0!==(t=n&~e)&&(r=Se(t)),0===r?0:0!==a&&a!==r&&0===(a&l)&&((l=r&-r)>=(t=a&-a)||32===l&&0!==(4194048&t))?a:r}function Ee(e,a){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&a)}function Te(e,a){switch(e){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;default:return-1}}function Pe(){var e=Ce;return 0===(62914560&(Ce<<=1))&&(Ce=4194304),e}function Re(e){for(var a=[],t=0;31>t;t++)a.push(e);return a}function Le(e,a){e.pendingLanes|=a,268435456!==a&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ae(e,a,t){e.pendingLanes|=a,e.suspendedLanes&=~a;var n=31-ye(a);e.entangledLanes|=a,e.entanglements[n]=1073741824|e.entanglements[n]|261930&t}function De(e,a){var t=e.entangledLanes|=a;for(e=e.entanglements;t;){var n=31-ye(t),r=1<<n;r&a|e[n]&a&&(e[n]|=a),t&=~r}}function ze(e,a){var t=a&-a;return 0!==((t=0!==(42&t)?1:Oe(t))&(e.suspendedLanes|a))?0:t}function Oe(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ie(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function qe(){var e=z.p;return 0!==e?e:void 0===(e=window.event)?32:Sm(e.type)}function Fe(e,a){var t=z.p;try{return z.p=e,a()}finally{z.p=t}}var Me=Math.random().toString(36).slice(2),Ue="__reactFiber$"+Me,Be="__reactProps$"+Me,Ve="__reactContainer$"+Me,He="__reactEvents$"+Me,We="__reactListeners$"+Me,Ge="__reactHandles$"+Me,$e="__reactResources$"+Me,Qe="__reactMarker$"+Me;function Ke(e){delete e[Ue],delete e[Be],delete e[He],delete e[We],delete e[Ge]}function Je(e){var a=e[Ue];if(a)return a;for(var t=e.parentNode;t;){if(a=t[Ve]||t[Ue]){if(t=a.alternate,null!==a.child||null!==t&&null!==t.child)for(e=Ou(e);null!==e;){if(t=e[Ue])return t;e=Ou(e)}return a}t=(e=t).parentNode}return null}function Ye(e){if(e=e[Ue]||e[Ve]){var a=e.tag;if(5===a||6===a||13===a||31===a||26===a||27===a||3===a)return e}return null}function Xe(e){var a=e.tag;if(5===a||26===a||27===a||6===a)return e.stateNode;throw Error(s(33))}function Ze(e){var a=e[$e];return a||(a=e[$e]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function ea(e){e[Qe]=!0}var aa=new Set,ta={};function na(e,a){ra(e,a),ra(e+"Capture",a)}function ra(e,a){for(ta[e]=a,e=0;e<a.length;e++)aa.add(a[e])}var la=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),sa={},ia={};function oa(e,a,t){if(r=a,ne.call(ia,r)||!ne.call(sa,r)&&(la.test(r)?ia[r]=!0:(sa[r]=!0,0)))if(null===t)e.removeAttribute(a);else{switch(typeof t){case"undefined":case"function":case"symbol":return void e.removeAttribute(a);case"boolean":var n=a.toLowerCase().slice(0,5);if("data-"!==n&&"aria-"!==n)return void e.removeAttribute(a)}e.setAttribute(a,""+t)}var r}function ca(e,a,t){if(null===t)e.removeAttribute(a);else{switch(typeof t){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(a)}e.setAttribute(a,""+t)}}function da(e,a,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttributeNS(a,t,""+n)}}function ua(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ma(e){var a=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===a||"radio"===a)}function pa(e){if(!e._valueTracker){var a=ma(e)?"checked":"value";e._valueTracker=function(e,a,t){var n=Object.getOwnPropertyDescriptor(e.constructor.prototype,a);if(!e.hasOwnProperty(a)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,l=n.set;return Object.defineProperty(e,a,{configurable:!0,get:function(){return r.call(this)},set:function(e){t=""+e,l.call(this,e)}}),Object.defineProperty(e,a,{enumerable:n.enumerable}),{getValue:function(){return t},setValue:function(e){t=""+e},stopTracking:function(){e._valueTracker=null,delete e[a]}}}}(e,a,""+e[a])}}function ha(e){if(!e)return!1;var a=e._valueTracker;if(!a)return!0;var t=a.getValue(),n="";return e&&(n=ma(e)?e.checked?"true":"false":e.value),(e=n)!==t&&(a.setValue(e),!0)}function fa(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(a){return e.body}}var va=/[\n"\\]/g;function ga(e){return e.replace(va,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function xa(e,a,t,n,r,l,s,i){e.name="",null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s?e.type=s:e.removeAttribute("type"),null!=a?"number"===s?(0===a&&""===e.value||e.value!=a)&&(e.value=""+ua(a)):e.value!==""+ua(a)&&(e.value=""+ua(a)):"submit"!==s&&"reset"!==s||e.removeAttribute("value"),null!=a?ya(e,s,ua(a)):null!=t?ya(e,s,ua(t)):null!=n&&e.removeAttribute("value"),null==r&&null!=l&&(e.defaultChecked=!!l),null!=r&&(e.checked=r&&"function"!==typeof r&&"symbol"!==typeof r),null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i?e.name=""+ua(i):e.removeAttribute("name")}function ba(e,a,t,n,r,l,s,i){if(null!=l&&"function"!==typeof l&&"symbol"!==typeof l&&"boolean"!==typeof l&&(e.type=l),null!=a||null!=t){if(!("submit"!==l&&"reset"!==l||void 0!==a&&null!==a))return void pa(e);t=null!=t?""+ua(t):"",a=null!=a?""+ua(a):t,i||a===e.value||(e.value=a),e.defaultValue=a}n="function"!==typeof(n=null!=n?n:r)&&"symbol"!==typeof n&&!!n,e.checked=i?e.checked:!!n,e.defaultChecked=!!n,null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s&&(e.name=s),pa(e)}function ya(e,a,t){"number"===a&&fa(e.ownerDocument)===e||e.defaultValue===""+t||(e.defaultValue=""+t)}function ja(e,a,t,n){if(e=e.options,a){a={};for(var r=0;r<t.length;r++)a["$"+t[r]]=!0;for(t=0;t<e.length;t++)r=a.hasOwnProperty("$"+e[t].value),e[t].selected!==r&&(e[t].selected=r),r&&n&&(e[t].defaultSelected=!0)}else{for(t=""+ua(t),a=null,r=0;r<e.length;r++){if(e[r].value===t)return e[r].selected=!0,void(n&&(e[r].defaultSelected=!0));null!==a||e[r].disabled||(a=e[r])}null!==a&&(a.selected=!0)}}function Na(e,a,t){null==a||((a=""+ua(a))!==e.value&&(e.value=a),null!=t)?e.defaultValue=null!=t?""+ua(t):"":e.defaultValue!==a&&(e.defaultValue=a)}function _a(e,a,t,n){if(null==a){if(null!=n){if(null!=t)throw Error(s(92));if(A(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),a=t}t=ua(a),e.defaultValue=t,(n=e.textContent)===t&&""!==n&&null!==n&&(e.value=n),pa(e)}function wa(e,a){if(a){var t=e.firstChild;if(t&&t===e.lastChild&&3===t.nodeType)return void(t.nodeValue=a)}e.textContent=a}var Ca=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Sa(e,a,t){var n=0===a.indexOf("--");null==t||"boolean"===typeof t||""===t?n?e.setProperty(a,""):"float"===a?e.cssFloat="":e[a]="":n?e.setProperty(a,t):"number"!==typeof t||0===t||Ca.has(a)?"float"===a?e.cssFloat=t:e[a]=(""+t).trim():e[a]=t+"px"}function ka(e,a,t){if(null!=a&&"object"!==typeof a)throw Error(s(62));if(e=e.style,null!=t){for(var n in t)!t.hasOwnProperty(n)||null!=a&&a.hasOwnProperty(n)||(0===n.indexOf("--")?e.setProperty(n,""):"float"===n?e.cssFloat="":e[n]="");for(var r in a)n=a[r],a.hasOwnProperty(r)&&t[r]!==n&&Sa(e,r,n)}else for(var l in a)a.hasOwnProperty(l)&&Sa(e,l,a[l])}function Ea(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ta=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Pa=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ra(e){return Pa.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function La(){}var Aa=null;function Da(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var za=null,Oa=null;function Ia(e){var a=Ye(e);if(a&&(e=a.stateNode)){var t=e[Be]||null;e:switch(e=a.stateNode,a.type){case"input":if(xa(e,t.value,t.defaultValue,t.defaultValue,t.checked,t.defaultChecked,t.type,t.name),a=t.name,"radio"===t.type&&null!=a){for(t=e;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll('input[name="'+ga(""+a)+'"][type="radio"]'),a=0;a<t.length;a++){var n=t[a];if(n!==e&&n.form===e.form){var r=n[Be]||null;if(!r)throw Error(s(90));xa(n,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(a=0;a<t.length;a++)(n=t[a]).form===e.form&&ha(n)}break e;case"textarea":Na(e,t.value,t.defaultValue);break e;case"select":null!=(a=t.value)&&ja(e,!!t.multiple,a,!1)}}}var qa=!1;function Fa(e,a,t){if(qa)return e(a,t);qa=!0;try{return e(a)}finally{if(qa=!1,(null!==za||null!==Oa)&&(Zc(),za&&(a=za,e=Oa,Oa=za=null,Ia(a),e)))for(a=0;a<e.length;a++)Ia(e[a])}}function Ma(e,a){var t=e.stateNode;if(null===t)return null;var n=t[Be]||null;if(null===n)return null;t=n[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(t&&"function"!==typeof t)throw Error(s(231,a,typeof t));return t}var Ua=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Ba=!1;if(Ua)try{var Va={};Object.defineProperty(Va,"passive",{get:function(){Ba=!0}}),window.addEventListener("test",Va,Va),window.removeEventListener("test",Va,Va)}catch(Ym){Ba=!1}var Ha=null,Wa=null,Ga=null;function $a(){if(Ga)return Ga;var e,a,t=Wa,n=t.length,r="value"in Ha?Ha.value:Ha.textContent,l=r.length;for(e=0;e<n&&t[e]===r[e];e++);var s=n-e;for(a=1;a<=s&&t[n-a]===r[l-a];a++);return Ga=r.slice(e,1<a?1-a:void 0)}function Qa(e){var a=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===a&&(e=13):e=a,10===e&&(e=13),32<=e||13===e?e:0}function Ka(){return!0}function Ja(){return!1}function Ya(e){function a(a,t,n,r,l){for(var s in this._reactName=a,this._targetInst=n,this.type=t,this.nativeEvent=r,this.target=l,this.currentTarget=null,e)e.hasOwnProperty(s)&&(a=e[s],this[s]=a?a(r):r[s]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?Ka:Ja,this.isPropagationStopped=Ja,this}return p(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Ka)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Ka)},persist:function(){},isPersistent:Ka}),a}var Xa,Za,et,at={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tt=Ya(at),nt=p({},at,{view:0,detail:0}),rt=Ya(nt),lt=p({},nt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vt,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==et&&(et&&"mousemove"===e.type?(Xa=e.screenX-et.screenX,Za=e.screenY-et.screenY):Za=Xa=0,et=e),Xa)},movementY:function(e){return"movementY"in e?e.movementY:Za}}),st=Ya(lt),it=Ya(p({},lt,{dataTransfer:0})),ot=Ya(p({},nt,{relatedTarget:0})),ct=Ya(p({},at,{animationName:0,elapsedTime:0,pseudoElement:0})),dt=Ya(p({},at,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),ut=Ya(p({},at,{data:0})),mt={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ht={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ft(e){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(e):!!(e=ht[e])&&!!a[e]}function vt(){return ft}var gt=Ya(p({},nt,{key:function(e){if(e.key){var a=mt[e.key]||e.key;if("Unidentified"!==a)return a}return"keypress"===e.type?13===(e=Qa(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?pt[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vt,charCode:function(e){return"keypress"===e.type?Qa(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Qa(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),xt=Ya(p({},lt,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),bt=Ya(p({},nt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vt})),yt=Ya(p({},at,{propertyName:0,elapsedTime:0,pseudoElement:0})),jt=Ya(p({},lt,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Nt=Ya(p({},at,{newState:0,oldState:0})),_t=[9,13,27,32],wt=Ua&&"CompositionEvent"in window,Ct=null;Ua&&"documentMode"in document&&(Ct=document.documentMode);var St=Ua&&"TextEvent"in window&&!Ct,kt=Ua&&(!wt||Ct&&8<Ct&&11>=Ct),Et=String.fromCharCode(32),Tt=!1;function Pt(e,a){switch(e){case"keyup":return-1!==_t.indexOf(a.keyCode);case"keydown":return 229!==a.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rt(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Lt=!1;var At={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dt(e){var a=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===a?!!At[e.type]:"textarea"===a}function zt(e,a,t,n){za?Oa?Oa.push(n):Oa=[n]:za=n,0<(a=nu(a,"onChange")).length&&(t=new tt("onChange","change",null,t,n),e.push({event:t,listeners:a}))}var Ot=null,It=null;function qt(e){Kd(e,0)}function Ft(e){if(ha(Xe(e)))return e}function Mt(e,a){if("change"===e)return a}var Ut=!1;if(Ua){var Bt;if(Ua){var Vt="oninput"in document;if(!Vt){var Ht=document.createElement("div");Ht.setAttribute("oninput","return;"),Vt="function"===typeof Ht.oninput}Bt=Vt}else Bt=!1;Ut=Bt&&(!document.documentMode||9<document.documentMode)}function Wt(){Ot&&(Ot.detachEvent("onpropertychange",Gt),It=Ot=null)}function Gt(e){if("value"===e.propertyName&&Ft(It)){var a=[];zt(a,It,e,Da(e)),Fa(qt,a)}}function $t(e,a,t){"focusin"===e?(Wt(),It=t,(Ot=a).attachEvent("onpropertychange",Gt)):"focusout"===e&&Wt()}function Qt(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Ft(It)}function Kt(e,a){if("click"===e)return Ft(a)}function Jt(e,a){if("input"===e||"change"===e)return Ft(a)}var Yt="function"===typeof Object.is?Object.is:function(e,a){return e===a&&(0!==e||1/e===1/a)||e!==e&&a!==a};function Xt(e,a){if(Yt(e,a))return!0;if("object"!==typeof e||null===e||"object"!==typeof a||null===a)return!1;var t=Object.keys(e),n=Object.keys(a);if(t.length!==n.length)return!1;for(n=0;n<t.length;n++){var r=t[n];if(!ne.call(a,r)||!Yt(e[r],a[r]))return!1}return!0}function Zt(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function en(e,a){var t,n=Zt(e);for(e=0;n;){if(3===n.nodeType){if(t=e+n.textContent.length,e<=a&&t>=a)return{node:n,offset:a-e};e=t}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Zt(n)}}function an(e,a){return!(!e||!a)&&(e===a||(!e||3!==e.nodeType)&&(a&&3===a.nodeType?an(e,a.parentNode):"contains"in e?e.contains(a):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(a))))}function tn(e){for(var a=fa((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);a instanceof e.HTMLIFrameElement;){try{var t="string"===typeof a.contentWindow.location.href}catch(n){t=!1}if(!t)break;a=fa((e=a.contentWindow).document)}return a}function nn(e){var a=e&&e.nodeName&&e.nodeName.toLowerCase();return a&&("input"===a&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===a||"true"===e.contentEditable)}var rn=Ua&&"documentMode"in document&&11>=document.documentMode,ln=null,sn=null,on=null,cn=!1;function dn(e,a,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;cn||null==ln||ln!==fa(n)||("selectionStart"in(n=ln)&&nn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},on&&Xt(on,n)||(on=n,0<(n=nu(sn,"onSelect")).length&&(a=new tt("onSelect","select",null,a,t),e.push({event:a,listeners:n}),a.target=ln)))}function un(e,a){var t={};return t[e.toLowerCase()]=a.toLowerCase(),t["Webkit"+e]="webkit"+a,t["Moz"+e]="moz"+a,t}var mn={animationend:un("Animation","AnimationEnd"),animationiteration:un("Animation","AnimationIteration"),animationstart:un("Animation","AnimationStart"),transitionrun:un("Transition","TransitionRun"),transitionstart:un("Transition","TransitionStart"),transitioncancel:un("Transition","TransitionCancel"),transitionend:un("Transition","TransitionEnd")},pn={},hn={};function fn(e){if(pn[e])return pn[e];if(!mn[e])return e;var a,t=mn[e];for(a in t)if(t.hasOwnProperty(a)&&a in hn)return pn[e]=t[a];return e}Ua&&(hn=document.createElement("div").style,"AnimationEvent"in window||(delete mn.animationend.animation,delete mn.animationiteration.animation,delete mn.animationstart.animation),"TransitionEvent"in window||delete mn.transitionend.transition);var vn=fn("animationend"),gn=fn("animationiteration"),xn=fn("animationstart"),bn=fn("transitionrun"),yn=fn("transitionstart"),jn=fn("transitioncancel"),Nn=fn("transitionend"),_n=new Map,wn="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cn(e,a){_n.set(e,a),na(a,[e])}wn.push("scrollEnd");var Sn="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(a))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},kn=[],En=0,Tn=0;function Pn(){for(var e=En,a=Tn=En=0;a<e;){var t=kn[a];kn[a++]=null;var n=kn[a];kn[a++]=null;var r=kn[a];kn[a++]=null;var l=kn[a];if(kn[a++]=null,null!==n&&null!==r){var s=n.pending;null===s?r.next=r:(r.next=s.next,s.next=r),n.pending=r}0!==l&&Dn(t,r,l)}}function Rn(e,a,t,n){kn[En++]=e,kn[En++]=a,kn[En++]=t,kn[En++]=n,Tn|=n,e.lanes|=n,null!==(e=e.alternate)&&(e.lanes|=n)}function Ln(e,a,t,n){return Rn(e,a,t,n),zn(e)}function An(e,a){return Rn(e,null,null,a),zn(e)}function Dn(e,a,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t);for(var r=!1,l=e.return;null!==l;)l.childLanes|=t,null!==(n=l.alternate)&&(n.childLanes|=t),22===l.tag&&(null===(e=l.stateNode)||1&e._visibility||(r=!0)),e=l,l=l.return;return 3===e.tag?(l=e.stateNode,r&&null!==a&&(r=31-ye(t),null===(n=(e=l.hiddenUpdates)[r])?e[r]=[a]:n.push(a),a.lane=536870912|t),l):null}function zn(e){if(50<Hc)throw Hc=0,Wc=null,Error(s(185));for(var a=e.return;null!==a;)a=(e=a).return;return 3===e.tag?e.stateNode:null}var On={};function In(e,a,t,n){this.tag=e,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qn(e,a,t,n){return new In(e,a,t,n)}function Fn(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Mn(e,a){var t=e.alternate;return null===t?((t=qn(e.tag,a,e.key,e.mode)).elementType=e.elementType,t.type=e.type,t.stateNode=e.stateNode,t.alternate=e,e.alternate=t):(t.pendingProps=a,t.type=e.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=65011712&e.flags,t.childLanes=e.childLanes,t.lanes=e.lanes,t.child=e.child,t.memoizedProps=e.memoizedProps,t.memoizedState=e.memoizedState,t.updateQueue=e.updateQueue,a=e.dependencies,t.dependencies=null===a?null:{lanes:a.lanes,firstContext:a.firstContext},t.sibling=e.sibling,t.index=e.index,t.ref=e.ref,t.refCleanup=e.refCleanup,t}function Un(e,a){e.flags&=65011714;var t=e.alternate;return null===t?(e.childLanes=0,e.lanes=a,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=t.childLanes,e.lanes=t.lanes,e.child=t.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=t.memoizedProps,e.memoizedState=t.memoizedState,e.updateQueue=t.updateQueue,e.type=t.type,a=t.dependencies,e.dependencies=null===a?null:{lanes:a.lanes,firstContext:a.firstContext}),e}function Bn(e,a,t,n,r,l){var i=0;if(n=e,"function"===typeof e)Fn(e)&&(i=1);else if("string"===typeof e)i=function(e,a,t){if(1===t||null!=a.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof a.precedence||"string"!==typeof a.href||""===a.href)break;return!0;case"link":if("string"!==typeof a.rel||"string"!==typeof a.href||""===a.href||a.onLoad||a.onError)break;return"stylesheet"!==a.rel||(e=a.disabled,"string"===typeof a.precedence&&null==e);case"script":if(a.async&&"function"!==typeof a.async&&"symbol"!==typeof a.async&&!a.onLoad&&!a.onError&&a.src&&"string"===typeof a.src)return!0}return!1}(e,t,H.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case k:return(e=qn(31,t,a,r)).elementType=k,e.lanes=l,e;case g:return Vn(t.children,r,l,a);case x:i=8,r|=24;break;case b:return(e=qn(12,t,a,2|r)).elementType=b,e.lanes=l,e;case _:return(e=qn(13,t,a,r)).elementType=_,e.lanes=l,e;case w:return(e=qn(19,t,a,r)).elementType=w,e.lanes=l,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case j:i=10;break e;case y:i=9;break e;case N:i=11;break e;case C:i=14;break e;case S:i=16,n=null;break e}i=29,t=Error(s(130,null===e?"null":typeof e,"")),n=null}return(a=qn(i,t,a,r)).elementType=e,a.type=n,a.lanes=l,a}function Vn(e,a,t,n){return(e=qn(7,e,n,a)).lanes=t,e}function Hn(e,a,t){return(e=qn(6,e,null,a)).lanes=t,e}function Wn(e){var a=qn(18,null,null,0);return a.stateNode=e,a}function Gn(e,a,t){return(a=qn(4,null!==e.children?e.children:[],e.key,a)).lanes=t,a.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},a}var $n=new WeakMap;function Qn(e,a){if("object"===typeof e&&null!==e){var t=$n.get(e);return void 0!==t?t:(a={value:e,source:a,stack:te(a)},$n.set(e,a),a)}return{value:e,source:a,stack:te(a)}}var Kn=[],Jn=0,Yn=null,Xn=0,Zn=[],er=0,ar=null,tr=1,nr="";function rr(e,a){Kn[Jn++]=Xn,Kn[Jn++]=Yn,Yn=e,Xn=a}function lr(e,a,t){Zn[er++]=tr,Zn[er++]=nr,Zn[er++]=ar,ar=e;var n=tr;e=nr;var r=32-ye(n)-1;n&=~(1<<r),t+=1;var l=32-ye(a)+r;if(30<l){var s=r-r%5;l=(n&(1<<s)-1).toString(32),n>>=s,r-=s,tr=1<<32-ye(a)+r|t<<r|n,nr=l+e}else tr=1<<l|t<<r|n,nr=e}function sr(e){null!==e.return&&(rr(e,1),lr(e,1,0))}function ir(e){for(;e===Yn;)Yn=Kn[--Jn],Kn[Jn]=null,Xn=Kn[--Jn],Kn[Jn]=null;for(;e===ar;)ar=Zn[--er],Zn[er]=null,nr=Zn[--er],Zn[er]=null,tr=Zn[--er],Zn[er]=null}function or(e,a){Zn[er++]=tr,Zn[er++]=nr,Zn[er++]=ar,tr=a.id,nr=a.overflow,ar=e}var cr=null,dr=null,ur=!1,mr=null,pr=!1,hr=Error(s(519));function fr(e){throw jr(Qn(Error(s(418,1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"text":"HTML","")),e)),hr}function vr(e){var a=e.stateNode,t=e.type,n=e.memoizedProps;switch(a[Ue]=e,a[Be]=n,t){case"dialog":Jd("cancel",a),Jd("close",a);break;case"iframe":case"object":case"embed":Jd("load",a);break;case"video":case"audio":for(t=0;t<$d.length;t++)Jd($d[t],a);break;case"source":Jd("error",a);break;case"img":case"image":case"link":Jd("error",a),Jd("load",a);break;case"details":Jd("toggle",a);break;case"input":Jd("invalid",a),ba(a,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0);break;case"select":Jd("invalid",a);break;case"textarea":Jd("invalid",a),_a(a,n.value,n.defaultValue,n.children)}"string"!==typeof(t=n.children)&&"number"!==typeof t&&"bigint"!==typeof t||a.textContent===""+t||!0===n.suppressHydrationWarning||cu(a.textContent,t)?(null!=n.popover&&(Jd("beforetoggle",a),Jd("toggle",a)),null!=n.onScroll&&Jd("scroll",a),null!=n.onScrollEnd&&Jd("scrollend",a),null!=n.onClick&&(a.onclick=La),a=!0):a=!1,a||fr(e,!0)}function gr(e){for(cr=e.return;cr;)switch(cr.tag){case 5:case 31:case 13:return void(pr=!1);case 27:case 3:return void(pr=!0);default:cr=cr.return}}function xr(e){if(e!==cr)return!1;if(!ur)return gr(e),ur=!0,!1;var a,t=e.tag;if((a=3!==t&&27!==t)&&((a=5===t)&&(a=!("form"!==(a=e.type)&&"button"!==a)||bu(e.type,e.memoizedProps)),a=!a),a&&dr&&fr(e),gr(e),13===t){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));dr=zu(e)}else if(31===t){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));dr=zu(e)}else 27===t?(t=dr,Su(e.type)?(e=Du,Du=null,dr=e):dr=t):dr=cr?Au(e.stateNode.nextSibling):null;return!0}function br(){dr=cr=null,ur=!1}function yr(){var e=mr;return null!==e&&(null===Pc?Pc=e:Pc.push.apply(Pc,e),mr=null),e}function jr(e){null===mr?mr=[e]:mr.push(e)}var Nr=F(null),_r=null,wr=null;function Cr(e,a,t){U(Nr,a._currentValue),a._currentValue=t}function Sr(e){e._currentValue=Nr.current,M(Nr)}function kr(e,a,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&a)!==a?(e.childLanes|=a,null!==n&&(n.childLanes|=a)):null!==n&&(n.childLanes&a)!==a&&(n.childLanes|=a),e===t)break;e=e.return}}function Er(e,a,t,n){var r=e.child;for(null!==r&&(r.return=e);null!==r;){var l=r.dependencies;if(null!==l){var i=r.child;l=l.firstContext;e:for(;null!==l;){var o=l;l=r;for(var c=0;c<a.length;c++)if(o.context===a[c]){l.lanes|=t,null!==(o=l.alternate)&&(o.lanes|=t),kr(l.return,t,e),n||(i=null);break e}l=o.next}}else if(18===r.tag){if(null===(i=r.return))throw Error(s(341));i.lanes|=t,null!==(l=i.alternate)&&(l.lanes|=t),kr(i,t,e),i=null}else i=r.child;if(null!==i)i.return=r;else for(i=r;null!==i;){if(i===e){i=null;break}if(null!==(r=i.sibling)){r.return=i.return,i=r;break}i=i.return}r=i}}function Tr(e,a,t,n){e=null;for(var r=a,l=!1;null!==r;){if(!l)if(0!==(524288&r.flags))l=!0;else if(0!==(262144&r.flags))break;if(10===r.tag){var i=r.alternate;if(null===i)throw Error(s(387));if(null!==(i=i.memoizedProps)){var o=r.type;Yt(r.pendingProps.value,i.value)||(null!==e?e.push(o):e=[o])}}else if(r===$.current){if(null===(i=r.alternate))throw Error(s(387));i.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(null!==e?e.push(dm):e=[dm])}r=r.return}null!==e&&Er(a,e,t,n),a.flags|=262144}function Pr(e){for(e=e.firstContext;null!==e;){if(!Yt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Rr(e){_r=e,wr=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Lr(e){return Dr(_r,e)}function Ar(e,a){return null===_r&&Rr(e),Dr(e,a)}function Dr(e,a){var t=a._currentValue;if(a={context:a,memoizedValue:t,next:null},null===wr){if(null===e)throw Error(s(308));wr=a,e.dependencies={lanes:0,firstContext:a},e.flags|=524288}else wr=wr.next=a;return t}var zr="undefined"!==typeof AbortController?AbortController:function(){var e=[],a=this.signal={aborted:!1,addEventListener:function(a,t){e.push(t)}};this.abort=function(){a.aborted=!0,e.forEach(function(e){return e()})}},Or=n.unstable_scheduleCallback,Ir=n.unstable_NormalPriority,qr={$$typeof:j,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Fr(){return{controller:new zr,data:new Map,refCount:0}}function Mr(e){e.refCount--,0===e.refCount&&Or(Ir,function(){e.controller.abort()})}var Ur=null,Br=0,Vr=0,Hr=null;function Wr(){if(0===--Br&&null!==Ur){null!==Hr&&(Hr.status="fulfilled");var e=Ur;Ur=null,Vr=0,Hr=null;for(var a=0;a<e.length;a++)(0,e[a])()}}var Gr=D.S;D.S=function(e,a){Ac=oe(),"object"===typeof a&&null!==a&&"function"===typeof a.then&&function(e,a){if(null===Ur){var t=Ur=[];Br=0,Vr=Bd(),Hr={status:"pending",value:void 0,then:function(e){t.push(e)}}}Br++,a.then(Wr,Wr)}(0,a),null!==Gr&&Gr(e,a)};var $r=F(null);function Qr(){var e=$r.current;return null!==e?e:hc.pooledCache}function Kr(e,a){U($r,null===a?$r.current:a.pool)}function Jr(){var e=Qr();return null===e?null:{parent:qr._currentValue,pool:e}}var Yr=Error(s(460)),Xr=Error(s(474)),Zr=Error(s(542)),el={then:function(){}};function al(e){return"fulfilled"===(e=e.status)||"rejected"===e}function tl(e,a,t){switch(void 0===(t=e[t])?e.push(a):t!==a&&(a.then(La,La),a=t),a.status){case"fulfilled":return a.value;case"rejected":throw sl(e=a.reason),e;default:if("string"===typeof a.status)a.then(La,La);else{if(null!==(e=hc)&&100<e.shellSuspendCounter)throw Error(s(482));(e=a).status="pending",e.then(function(e){if("pending"===a.status){var t=a;t.status="fulfilled",t.value=e}},function(e){if("pending"===a.status){var t=a;t.status="rejected",t.reason=e}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw sl(e=a.reason),e}throw rl=a,Yr}}function nl(e){try{return(0,e._init)(e._payload)}catch(a){if(null!==a&&"object"===typeof a&&"function"===typeof a.then)throw rl=a,Yr;throw a}}var rl=null;function ll(){if(null===rl)throw Error(s(459));var e=rl;return rl=null,e}function sl(e){if(e===Yr||e===Zr)throw Error(s(483))}var il=null,ol=0;function cl(e){var a=ol;return ol+=1,null===il&&(il=[]),tl(il,e,a)}function dl(e,a){a=a.props.ref,e.ref=void 0!==a?a:null}function ul(e,a){if(a.$$typeof===h)throw Error(s(525));throw e=Object.prototype.toString.call(a),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(a).join(", ")+"}":e))}function ml(e){function a(a,t){if(e){var n=a.deletions;null===n?(a.deletions=[t],a.flags|=16):n.push(t)}}function t(t,n){if(!e)return null;for(;null!==n;)a(t,n),n=n.sibling;return null}function n(e){for(var a=new Map;null!==e;)null!==e.key?a.set(e.key,e):a.set(e.index,e),e=e.sibling;return a}function r(e,a){return(e=Mn(e,a)).index=0,e.sibling=null,e}function l(a,t,n){return a.index=n,e?null!==(n=a.alternate)?(n=n.index)<t?(a.flags|=67108866,t):n:(a.flags|=67108866,t):(a.flags|=1048576,t)}function i(a){return e&&null===a.alternate&&(a.flags|=67108866),a}function o(e,a,t,n){return null===a||6!==a.tag?((a=Hn(t,e.mode,n)).return=e,a):((a=r(a,t)).return=e,a)}function c(e,a,t,n){var l=t.type;return l===g?u(e,a,t.props.children,n,t.key):null!==a&&(a.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===S&&nl(l)===a.type)?(dl(a=r(a,t.props),t),a.return=e,a):(dl(a=Bn(t.type,t.key,t.props,null,e.mode,n),t),a.return=e,a)}function d(e,a,t,n){return null===a||4!==a.tag||a.stateNode.containerInfo!==t.containerInfo||a.stateNode.implementation!==t.implementation?((a=Gn(t,e.mode,n)).return=e,a):((a=r(a,t.children||[])).return=e,a)}function u(e,a,t,n,l){return null===a||7!==a.tag?((a=Vn(t,e.mode,n,l)).return=e,a):((a=r(a,t)).return=e,a)}function m(e,a,t){if("string"===typeof a&&""!==a||"number"===typeof a||"bigint"===typeof a)return(a=Hn(""+a,e.mode,t)).return=e,a;if("object"===typeof a&&null!==a){switch(a.$$typeof){case f:return dl(t=Bn(a.type,a.key,a.props,null,e.mode,t),a),t.return=e,t;case v:return(a=Gn(a,e.mode,t)).return=e,a;case S:return m(e,a=nl(a),t)}if(A(a)||P(a))return(a=Vn(a,e.mode,t,null)).return=e,a;if("function"===typeof a.then)return m(e,cl(a),t);if(a.$$typeof===j)return m(e,Ar(e,a),t);ul(e,a)}return null}function p(e,a,t,n){var r=null!==a?a.key:null;if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return null!==r?null:o(e,a,""+t,n);if("object"===typeof t&&null!==t){switch(t.$$typeof){case f:return t.key===r?c(e,a,t,n):null;case v:return t.key===r?d(e,a,t,n):null;case S:return p(e,a,t=nl(t),n)}if(A(t)||P(t))return null!==r?null:u(e,a,t,n,null);if("function"===typeof t.then)return p(e,a,cl(t),n);if(t.$$typeof===j)return p(e,a,Ar(e,t),n);ul(e,t)}return null}function h(e,a,t,n,r){if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return o(a,e=e.get(t)||null,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case f:return c(a,e=e.get(null===n.key?t:n.key)||null,n,r);case v:return d(a,e=e.get(null===n.key?t:n.key)||null,n,r);case S:return h(e,a,t,n=nl(n),r)}if(A(n)||P(n))return u(a,e=e.get(t)||null,n,r,null);if("function"===typeof n.then)return h(e,a,t,cl(n),r);if(n.$$typeof===j)return h(e,a,t,Ar(a,n),r);ul(a,n)}return null}function x(o,c,d,u){if("object"===typeof d&&null!==d&&d.type===g&&null===d.key&&(d=d.props.children),"object"===typeof d&&null!==d){switch(d.$$typeof){case f:e:{for(var b=d.key;null!==c;){if(c.key===b){if((b=d.type)===g){if(7===c.tag){t(o,c.sibling),(u=r(c,d.props.children)).return=o,o=u;break e}}else if(c.elementType===b||"object"===typeof b&&null!==b&&b.$$typeof===S&&nl(b)===c.type){t(o,c.sibling),dl(u=r(c,d.props),d),u.return=o,o=u;break e}t(o,c);break}a(o,c),c=c.sibling}d.type===g?((u=Vn(d.props.children,o.mode,u,d.key)).return=o,o=u):(dl(u=Bn(d.type,d.key,d.props,null,o.mode,u),d),u.return=o,o=u)}return i(o);case v:e:{for(b=d.key;null!==c;){if(c.key===b){if(4===c.tag&&c.stateNode.containerInfo===d.containerInfo&&c.stateNode.implementation===d.implementation){t(o,c.sibling),(u=r(c,d.children||[])).return=o,o=u;break e}t(o,c);break}a(o,c),c=c.sibling}(u=Gn(d,o.mode,u)).return=o,o=u}return i(o);case S:return x(o,c,d=nl(d),u)}if(A(d))return function(r,s,i,o){for(var c=null,d=null,u=s,f=s=0,v=null;null!==u&&f<i.length;f++){u.index>f?(v=u,u=null):v=u.sibling;var g=p(r,u,i[f],o);if(null===g){null===u&&(u=v);break}e&&u&&null===g.alternate&&a(r,u),s=l(g,s,f),null===d?c=g:d.sibling=g,d=g,u=v}if(f===i.length)return t(r,u),ur&&rr(r,f),c;if(null===u){for(;f<i.length;f++)null!==(u=m(r,i[f],o))&&(s=l(u,s,f),null===d?c=u:d.sibling=u,d=u);return ur&&rr(r,f),c}for(u=n(u);f<i.length;f++)null!==(v=h(u,r,f,i[f],o))&&(e&&null!==v.alternate&&u.delete(null===v.key?f:v.key),s=l(v,s,f),null===d?c=v:d.sibling=v,d=v);return e&&u.forEach(function(e){return a(r,e)}),ur&&rr(r,f),c}(o,c,d,u);if(P(d)){if("function"!==typeof(b=P(d)))throw Error(s(150));return function(r,i,o,c){if(null==o)throw Error(s(151));for(var d=null,u=null,f=i,v=i=0,g=null,x=o.next();null!==f&&!x.done;v++,x=o.next()){f.index>v?(g=f,f=null):g=f.sibling;var b=p(r,f,x.value,c);if(null===b){null===f&&(f=g);break}e&&f&&null===b.alternate&&a(r,f),i=l(b,i,v),null===u?d=b:u.sibling=b,u=b,f=g}if(x.done)return t(r,f),ur&&rr(r,v),d;if(null===f){for(;!x.done;v++,x=o.next())null!==(x=m(r,x.value,c))&&(i=l(x,i,v),null===u?d=x:u.sibling=x,u=x);return ur&&rr(r,v),d}for(f=n(f);!x.done;v++,x=o.next())null!==(x=h(f,r,v,x.value,c))&&(e&&null!==x.alternate&&f.delete(null===x.key?v:x.key),i=l(x,i,v),null===u?d=x:u.sibling=x,u=x);return e&&f.forEach(function(e){return a(r,e)}),ur&&rr(r,v),d}(o,c,d=b.call(d),u)}if("function"===typeof d.then)return x(o,c,cl(d),u);if(d.$$typeof===j)return x(o,c,Ar(o,d),u);ul(o,d)}return"string"===typeof d&&""!==d||"number"===typeof d||"bigint"===typeof d?(d=""+d,null!==c&&6===c.tag?(t(o,c.sibling),(u=r(c,d)).return=o,o=u):(t(o,c),(u=Hn(d,o.mode,u)).return=o,o=u),i(o)):t(o,c)}return function(e,a,t,n){try{ol=0;var r=x(e,a,t,n);return il=null,r}catch(s){if(s===Yr||s===Zr)throw s;var l=qn(29,s,null,e.mode);return l.lanes=n,l.return=e,l}}}var pl=ml(!0),hl=ml(!1),fl=!1;function vl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function gl(e,a){e=e.updateQueue,a.updateQueue===e&&(a.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function xl(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function bl(e,a,t){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!==(2&pc)){var r=n.pending;return null===r?a.next=a:(a.next=r.next,r.next=a),n.pending=a,a=zn(e),Dn(e,null,t),a}return Rn(e,n,a,t),zn(e)}function yl(e,a,t){if(null!==(a=a.updateQueue)&&(a=a.shared,0!==(4194048&t))){var n=a.lanes;t|=n&=e.pendingLanes,a.lanes=t,De(e,t)}}function jl(e,a){var t=e.updateQueue,n=e.alternate;if(null!==n&&t===(n=n.updateQueue)){var r=null,l=null;if(null!==(t=t.firstBaseUpdate)){do{var s={lane:t.lane,tag:t.tag,payload:t.payload,callback:null,next:null};null===l?r=l=s:l=l.next=s,t=t.next}while(null!==t);null===l?r=l=a:l=l.next=a}else r=l=a;return t={baseState:n.baseState,firstBaseUpdate:r,lastBaseUpdate:l,shared:n.shared,callbacks:n.callbacks},void(e.updateQueue=t)}null===(e=t.lastBaseUpdate)?t.firstBaseUpdate=a:e.next=a,t.lastBaseUpdate=a}var Nl=!1;function _l(){if(Nl){if(null!==Hr)throw Hr}}function wl(e,a,t,n){Nl=!1;var r=e.updateQueue;fl=!1;var l=r.firstBaseUpdate,s=r.lastBaseUpdate,i=r.shared.pending;if(null!==i){r.shared.pending=null;var o=i,c=o.next;o.next=null,null===s?l=c:s.next=c,s=o;var d=e.alternate;null!==d&&((i=(d=d.updateQueue).lastBaseUpdate)!==s&&(null===i?d.firstBaseUpdate=c:i.next=c,d.lastBaseUpdate=o))}if(null!==l){var u=r.baseState;for(s=0,d=c=o=null,i=l;;){var m=-536870913&i.lane,h=m!==i.lane;if(h?(vc&m)===m:(n&m)===m){0!==m&&m===Vr&&(Nl=!0),null!==d&&(d=d.next={lane:0,tag:i.tag,payload:i.payload,callback:null,next:null});e:{var f=e,v=i;m=a;var g=t;switch(v.tag){case 1:if("function"===typeof(f=v.payload)){u=f.call(g,u,m);break e}u=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(m="function"===typeof(f=v.payload)?f.call(g,u,m):f)||void 0===m)break e;u=p({},u,m);break e;case 2:fl=!0}}null!==(m=i.callback)&&(e.flags|=64,h&&(e.flags|=8192),null===(h=r.callbacks)?r.callbacks=[m]:h.push(m))}else h={lane:m,tag:i.tag,payload:i.payload,callback:i.callback,next:null},null===d?(c=d=h,o=u):d=d.next=h,s|=m;if(null===(i=i.next)){if(null===(i=r.shared.pending))break;i=(h=i).next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}null===d&&(o=u),r.baseState=o,r.firstBaseUpdate=c,r.lastBaseUpdate=d,null===l&&(r.shared.lanes=0),wc|=s,e.lanes=s,e.memoizedState=u}}function Cl(e,a){if("function"!==typeof e)throw Error(s(191,e));e.call(a)}function Sl(e,a){var t=e.callbacks;if(null!==t)for(e.callbacks=null,e=0;e<t.length;e++)Cl(t[e],a)}var kl=F(null),El=F(0);function Tl(e,a){U(El,e=Nc),U(kl,a),Nc=e|a.baseLanes}function Pl(){U(El,Nc),U(kl,kl.current)}function Rl(){Nc=El.current,M(kl),M(El)}var Ll=F(null),Al=null;function Dl(e){var a=e.alternate;U(Fl,1&Fl.current),U(Ll,e),null===Al&&(null===a||null!==kl.current||null!==a.memoizedState)&&(Al=e)}function zl(e){U(Fl,Fl.current),U(Ll,e),null===Al&&(Al=e)}function Ol(e){22===e.tag?(U(Fl,Fl.current),U(Ll,e),null===Al&&(Al=e)):Il()}function Il(){U(Fl,Fl.current),U(Ll,Ll.current)}function ql(e){M(Ll),Al===e&&(Al=null),M(Fl)}var Fl=F(0);function Ml(e){for(var a=e;null!==a;){if(13===a.tag){var t=a.memoizedState;if(null!==t&&(null===(t=t.dehydrated)||Ru(t)||Lu(t)))return a}else if(19!==a.tag||"forwards"!==a.memoizedProps.revealOrder&&"backwards"!==a.memoizedProps.revealOrder&&"unstable_legacy-backwards"!==a.memoizedProps.revealOrder&&"together"!==a.memoizedProps.revealOrder){if(null!==a.child){a.child.return=a,a=a.child;continue}}else if(0!==(128&a.flags))return a;if(a===e)break;for(;null===a.sibling;){if(null===a.return||a.return===e)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Ul=0,Bl=null,Vl=null,Hl=null,Wl=!1,Gl=!1,$l=!1,Ql=0,Kl=0,Jl=null,Yl=0;function Xl(){throw Error(s(321))}function Zl(e,a){if(null===a)return!1;for(var t=0;t<a.length&&t<e.length;t++)if(!Yt(e[t],a[t]))return!1;return!0}function es(e,a,t,n,r,l){return Ul=l,Bl=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,D.H=null===e||null===e.memoizedState?fi:vi,$l=!1,l=t(n,r),$l=!1,Gl&&(l=ts(a,t,n,r)),as(e),l}function as(e){D.H=hi;var a=null!==Vl&&null!==Vl.next;if(Ul=0,Hl=Vl=Bl=null,Wl=!1,Kl=0,Jl=null,a)throw Error(s(300));null===e||Li||null!==(e=e.dependencies)&&Pr(e)&&(Li=!0)}function ts(e,a,t,n){Bl=e;var r=0;do{if(Gl&&(Jl=null),Kl=0,Gl=!1,25<=r)throw Error(s(301));if(r+=1,Hl=Vl=null,null!=e.updateQueue){var l=e.updateQueue;l.lastEffect=null,l.events=null,l.stores=null,null!=l.memoCache&&(l.memoCache.index=0)}D.H=gi,l=a(t,n)}while(Gl);return l}function ns(){var e=D.H,a=e.useState()[0];return a="function"===typeof a.then?cs(a):a,e=e.useState()[0],(null!==Vl?Vl.memoizedState:null)!==e&&(Bl.flags|=1024),a}function rs(){var e=0!==Ql;return Ql=0,e}function ls(e,a,t){a.updateQueue=e.updateQueue,a.flags&=-2053,e.lanes&=~t}function ss(e){if(Wl){for(e=e.memoizedState;null!==e;){var a=e.queue;null!==a&&(a.pending=null),e=e.next}Wl=!1}Ul=0,Hl=Vl=Bl=null,Gl=!1,Kl=Ql=0,Jl=null}function is(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Hl?Bl.memoizedState=Hl=e:Hl=Hl.next=e,Hl}function os(){if(null===Vl){var e=Bl.alternate;e=null!==e?e.memoizedState:null}else e=Vl.next;var a=null===Hl?Bl.memoizedState:Hl.next;if(null!==a)Hl=a,Vl=e;else{if(null===e){if(null===Bl.alternate)throw Error(s(467));throw Error(s(310))}e={memoizedState:(Vl=e).memoizedState,baseState:Vl.baseState,baseQueue:Vl.baseQueue,queue:Vl.queue,next:null},null===Hl?Bl.memoizedState=Hl=e:Hl=Hl.next=e}return Hl}function cs(e){var a=Kl;return Kl+=1,null===Jl&&(Jl=[]),e=tl(Jl,e,a),a=Bl,null===(null===Hl?a.memoizedState:Hl.next)&&(a=a.alternate,D.H=null===a||null===a.memoizedState?fi:vi),e}function ds(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return cs(e);if(e.$$typeof===j)return Lr(e)}throw Error(s(438,String(e)))}function us(e){var a=null,t=Bl.updateQueue;if(null!==t&&(a=t.memoCache),null==a){var n=Bl.alternate;null!==n&&(null!==(n=n.updateQueue)&&(null!=(n=n.memoCache)&&(a={data:n.data.map(function(e){return e.slice()}),index:0})))}if(null==a&&(a={data:[],index:0}),null===t&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Bl.updateQueue=t),t.memoCache=a,void 0===(t=a.data[a.index]))for(t=a.data[a.index]=Array(e),n=0;n<e;n++)t[n]=E;return a.index++,t}function ms(e,a){return"function"===typeof a?a(e):a}function ps(e){return hs(os(),Vl,e)}function hs(e,a,t){var n=e.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=t;var r=e.baseQueue,l=n.pending;if(null!==l){if(null!==r){var i=r.next;r.next=l.next,l.next=i}a.baseQueue=r=l,n.pending=null}if(l=e.baseState,null===r)e.memoizedState=l;else{var o=i=null,c=null,d=a=r.next,u=!1;do{var m=-536870913&d.lane;if(m!==d.lane?(vc&m)===m:(Ul&m)===m){var p=d.revertLane;if(0===p)null!==c&&(c=c.next={lane:0,revertLane:0,gesture:null,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),m===Vr&&(u=!0);else{if((Ul&p)===p){d=d.next,p===Vr&&(u=!0);continue}m={lane:0,revertLane:d.revertLane,gesture:null,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},null===c?(o=c=m,i=l):c=c.next=m,Bl.lanes|=p,wc|=p}m=d.action,$l&&t(l,m),l=d.hasEagerState?d.eagerState:t(l,m)}else p={lane:m,revertLane:d.revertLane,gesture:d.gesture,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},null===c?(o=c=p,i=l):c=c.next=p,Bl.lanes|=m,wc|=m;d=d.next}while(null!==d&&d!==a);if(null===c?i=l:c.next=o,!Yt(l,e.memoizedState)&&(Li=!0,u&&null!==(t=Hr)))throw t;e.memoizedState=l,e.baseState=i,e.baseQueue=c,n.lastRenderedState=l}return null===r&&(n.lanes=0),[e.memoizedState,n.dispatch]}function fs(e){var a=os(),t=a.queue;if(null===t)throw Error(s(311));t.lastRenderedReducer=e;var n=t.dispatch,r=t.pending,l=a.memoizedState;if(null!==r){t.pending=null;var i=r=r.next;do{l=e(l,i.action),i=i.next}while(i!==r);Yt(l,a.memoizedState)||(Li=!0),a.memoizedState=l,null===a.baseQueue&&(a.baseState=l),t.lastRenderedState=l}return[l,n]}function vs(e,a,t){var n=Bl,r=os(),l=ur;if(l){if(void 0===t)throw Error(s(407));t=t()}else t=a();var i=!Yt((Vl||r).memoizedState,t);if(i&&(r.memoizedState=t,Li=!0),r=r.queue,Us(bs.bind(null,n,r,e),[e]),r.getSnapshot!==a||i||null!==Hl&&1&Hl.memoizedState.tag){if(n.flags|=2048,Os(9,{destroy:void 0},xs.bind(null,n,r,t,a),null),null===hc)throw Error(s(349));l||0!==(127&Ul)||gs(n,a,t)}return t}function gs(e,a,t){e.flags|=16384,e={getSnapshot:a,value:t},null===(a=Bl.updateQueue)?(a={lastEffect:null,events:null,stores:null,memoCache:null},Bl.updateQueue=a,a.stores=[e]):null===(t=a.stores)?a.stores=[e]:t.push(e)}function xs(e,a,t,n){a.value=t,a.getSnapshot=n,ys(a)&&js(e)}function bs(e,a,t){return t(function(){ys(a)&&js(e)})}function ys(e){var a=e.getSnapshot;e=e.value;try{var t=a();return!Yt(e,t)}catch(n){return!0}}function js(e){var a=An(e,2);null!==a&&Qc(a,e,2)}function Ns(e){var a=is();if("function"===typeof e){var t=e;if(e=t(),$l){be(!0);try{t()}finally{be(!1)}}}return a.memoizedState=a.baseState=e,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ms,lastRenderedState:e},a}function _s(e,a,t,n){return e.baseState=t,hs(e,Vl,"function"===typeof n?n:ms)}function ws(e,a,t,n,r){if(ui(e))throw Error(s(485));if(null!==(e=a.action)){var l={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){l.listeners.push(e)}};null!==D.T?t(!0):l.isTransition=!1,n(l),null===(t=a.pending)?(l.next=a.pending=l,Cs(a,l)):(l.next=t.next,a.pending=t.next=l)}}function Cs(e,a){var t=a.action,n=a.payload,r=e.state;if(a.isTransition){var l=D.T,s={};D.T=s;try{var i=t(r,n),o=D.S;null!==o&&o(s,i),Ss(e,a,i)}catch(c){Es(e,a,c)}finally{null!==l&&null!==s.types&&(l.types=s.types),D.T=l}}else try{Ss(e,a,l=t(r,n))}catch(d){Es(e,a,d)}}function Ss(e,a,t){null!==t&&"object"===typeof t&&"function"===typeof t.then?t.then(function(t){ks(e,a,t)},function(t){return Es(e,a,t)}):ks(e,a,t)}function ks(e,a,t){a.status="fulfilled",a.value=t,Ts(a),e.state=t,null!==(a=e.pending)&&((t=a.next)===a?e.pending=null:(t=t.next,a.next=t,Cs(e,t)))}function Es(e,a,t){var n=e.pending;if(e.pending=null,null!==n){n=n.next;do{a.status="rejected",a.reason=t,Ts(a),a=a.next}while(a!==n)}e.action=null}function Ts(e){e=e.listeners;for(var a=0;a<e.length;a++)(0,e[a])()}function Ps(e,a){return a}function Rs(e,a){if(ur){var t=hc.formState;if(null!==t){e:{var n=Bl;if(ur){if(dr){a:{for(var r=dr,l=pr;8!==r.nodeType;){if(!l){r=null;break a}if(null===(r=Au(r.nextSibling))){r=null;break a}}r="F!"===(l=r.data)||"F"===l?r:null}if(r){dr=Au(r.nextSibling),n="F!"===r.data;break e}}fr(n)}n=!1}n&&(a=t[0])}}return(t=is()).memoizedState=t.baseState=a,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ps,lastRenderedState:a},t.queue=n,t=oi.bind(null,Bl,n),n.dispatch=t,n=Ns(!1),l=di.bind(null,Bl,!1,n.queue),r={state:a,dispatch:null,action:e,pending:null},(n=is()).queue=r,t=ws.bind(null,Bl,r,l,t),r.dispatch=t,n.memoizedState=e,[a,t,!1]}function Ls(e){return As(os(),Vl,e)}function As(e,a,t){if(a=hs(e,a,Ps)[0],e=ps(ms)[0],"object"===typeof a&&null!==a&&"function"===typeof a.then)try{var n=cs(a)}catch(s){if(s===Yr)throw Zr;throw s}else n=a;var r=(a=os()).queue,l=r.dispatch;return t!==a.memoizedState&&(Bl.flags|=2048,Os(9,{destroy:void 0},Ds.bind(null,r,t),null)),[n,l,e]}function Ds(e,a){e.action=a}function zs(e){var a=os(),t=Vl;if(null!==t)return As(a,t,e);os(),a=a.memoizedState;var n=(t=os()).queue.dispatch;return t.memoizedState=e,[a,n,!1]}function Os(e,a,t,n){return e={tag:e,create:t,deps:n,inst:a,next:null},null===(a=Bl.updateQueue)&&(a={lastEffect:null,events:null,stores:null,memoCache:null},Bl.updateQueue=a),null===(t=a.lastEffect)?a.lastEffect=e.next=e:(n=t.next,t.next=e,e.next=n,a.lastEffect=e),e}function Is(){return os().memoizedState}function qs(e,a,t,n){var r=is();Bl.flags|=e,r.memoizedState=Os(1|a,{destroy:void 0},t,void 0===n?null:n)}function Fs(e,a,t,n){var r=os();n=void 0===n?null:n;var l=r.memoizedState.inst;null!==Vl&&null!==n&&Zl(n,Vl.memoizedState.deps)?r.memoizedState=Os(a,l,t,n):(Bl.flags|=e,r.memoizedState=Os(1|a,l,t,n))}function Ms(e,a){qs(8390656,8,e,a)}function Us(e,a){Fs(2048,8,e,a)}function Bs(e){var a=os().memoizedState;return function(e){Bl.flags|=4;var a=Bl.updateQueue;if(null===a)a={lastEffect:null,events:null,stores:null,memoCache:null},Bl.updateQueue=a,a.events=[e];else{var t=a.events;null===t?a.events=[e]:t.push(e)}}({ref:a,nextImpl:e}),function(){if(0!==(2&pc))throw Error(s(440));return a.impl.apply(void 0,arguments)}}function Vs(e,a){return Fs(4,2,e,a)}function Hs(e,a){return Fs(4,4,e,a)}function Ws(e,a){if("function"===typeof a){e=e();var t=a(e);return function(){"function"===typeof t?t():a(null)}}if(null!==a&&void 0!==a)return e=e(),a.current=e,function(){a.current=null}}function Gs(e,a,t){t=null!==t&&void 0!==t?t.concat([e]):null,Fs(4,4,Ws.bind(null,a,e),t)}function $s(){}function Qs(e,a){var t=os();a=void 0===a?null:a;var n=t.memoizedState;return null!==a&&Zl(a,n[1])?n[0]:(t.memoizedState=[e,a],e)}function Ks(e,a){var t=os();a=void 0===a?null:a;var n=t.memoizedState;if(null!==a&&Zl(a,n[1]))return n[0];if(n=e(),$l){be(!0);try{e()}finally{be(!1)}}return t.memoizedState=[n,a],n}function Js(e,a,t){return void 0===t||0!==(1073741824&Ul)&&0===(261930&vc)?e.memoizedState=a:(e.memoizedState=t,e=$c(),Bl.lanes|=e,wc|=e,t)}function Ys(e,a,t,n){return Yt(t,a)?t:null!==kl.current?(e=Js(e,t,n),Yt(e,a)||(Li=!0),e):0===(42&Ul)||0!==(1073741824&Ul)&&0===(261930&vc)?(Li=!0,e.memoizedState=t):(e=$c(),Bl.lanes|=e,wc|=e,a)}function Xs(e,a,t,n,r){var l=z.p;z.p=0!==l&&8>l?l:8;var s=D.T,i={};D.T=i,di(e,!1,a,t);try{var o=r(),c=D.S;if(null!==c&&c(i,o),null!==o&&"object"===typeof o&&"function"===typeof o.then)ci(e,a,function(e,a){var t=[],n={status:"pending",value:null,reason:null,then:function(e){t.push(e)}};return e.then(function(){n.status="fulfilled",n.value=a;for(var e=0;e<t.length;e++)(0,t[e])(a)},function(e){for(n.status="rejected",n.reason=e,e=0;e<t.length;e++)(0,t[e])(void 0)}),n}(o,n),Gc());else ci(e,a,n,Gc())}catch(d){ci(e,a,{then:function(){},status:"rejected",reason:d},Gc())}finally{z.p=l,null!==s&&null!==i.types&&(s.types=i.types),D.T=s}}function Zs(){}function ei(e,a,t,n){if(5!==e.tag)throw Error(s(476));var r=ai(e).queue;Xs(e,r,a,O,null===t?Zs:function(){return ti(e),t(n)})}function ai(e){var a=e.memoizedState;if(null!==a)return a;var t={};return(a={memoizedState:O,baseState:O,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ms,lastRenderedState:O},next:null}).next={memoizedState:t,baseState:t,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ms,lastRenderedState:t},next:null},e.memoizedState=a,null!==(e=e.alternate)&&(e.memoizedState=a),a}function ti(e){var a=ai(e);null===a.next&&(a=e.alternate.memoizedState),ci(e,a.next.queue,{},Gc())}function ni(){return Lr(dm)}function ri(){return os().memoizedState}function li(){return os().memoizedState}function si(e){for(var a=e.return;null!==a;){switch(a.tag){case 24:case 3:var t=Gc(),n=bl(a,e=xl(t),t);return null!==n&&(Qc(n,a,t),yl(n,a,t)),a={cache:Fr()},void(e.payload=a)}a=a.return}}function ii(e,a,t){var n=Gc();t={lane:n,revertLane:0,gesture:null,action:t,hasEagerState:!1,eagerState:null,next:null},ui(e)?mi(a,t):null!==(t=Ln(e,a,t,n))&&(Qc(t,e,n),pi(t,a,n))}function oi(e,a,t){ci(e,a,t,Gc())}function ci(e,a,t,n){var r={lane:n,revertLane:0,gesture:null,action:t,hasEagerState:!1,eagerState:null,next:null};if(ui(e))mi(a,r);else{var l=e.alternate;if(0===e.lanes&&(null===l||0===l.lanes)&&null!==(l=a.lastRenderedReducer))try{var s=a.lastRenderedState,i=l(s,t);if(r.hasEagerState=!0,r.eagerState=i,Yt(i,s))return Rn(e,a,r,0),null===hc&&Pn(),!1}catch(o){}if(null!==(t=Ln(e,a,r,n)))return Qc(t,e,n),pi(t,a,n),!0}return!1}function di(e,a,t,n){if(n={lane:2,revertLane:Bd(),gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},ui(e)){if(a)throw Error(s(479))}else null!==(a=Ln(e,t,n,2))&&Qc(a,e,2)}function ui(e){var a=e.alternate;return e===Bl||null!==a&&a===Bl}function mi(e,a){Gl=Wl=!0;var t=e.pending;null===t?a.next=a:(a.next=t.next,t.next=a),e.pending=a}function pi(e,a,t){if(0!==(4194048&t)){var n=a.lanes;t|=n&=e.pendingLanes,a.lanes=t,De(e,t)}}var hi={readContext:Lr,use:ds,useCallback:Xl,useContext:Xl,useEffect:Xl,useImperativeHandle:Xl,useLayoutEffect:Xl,useInsertionEffect:Xl,useMemo:Xl,useReducer:Xl,useRef:Xl,useState:Xl,useDebugValue:Xl,useDeferredValue:Xl,useTransition:Xl,useSyncExternalStore:Xl,useId:Xl,useHostTransitionStatus:Xl,useFormState:Xl,useActionState:Xl,useOptimistic:Xl,useMemoCache:Xl,useCacheRefresh:Xl};hi.useEffectEvent=Xl;var fi={readContext:Lr,use:ds,useCallback:function(e,a){return is().memoizedState=[e,void 0===a?null:a],e},useContext:Lr,useEffect:Ms,useImperativeHandle:function(e,a,t){t=null!==t&&void 0!==t?t.concat([e]):null,qs(4194308,4,Ws.bind(null,a,e),t)},useLayoutEffect:function(e,a){return qs(4194308,4,e,a)},useInsertionEffect:function(e,a){qs(4,2,e,a)},useMemo:function(e,a){var t=is();a=void 0===a?null:a;var n=e();if($l){be(!0);try{e()}finally{be(!1)}}return t.memoizedState=[n,a],n},useReducer:function(e,a,t){var n=is();if(void 0!==t){var r=t(a);if($l){be(!0);try{t(a)}finally{be(!1)}}}else r=a;return n.memoizedState=n.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},n.queue=e,e=e.dispatch=ii.bind(null,Bl,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},is().memoizedState=e},useState:function(e){var a=(e=Ns(e)).queue,t=oi.bind(null,Bl,a);return a.dispatch=t,[e.memoizedState,t]},useDebugValue:$s,useDeferredValue:function(e,a){return Js(is(),e,a)},useTransition:function(){var e=Ns(!1);return e=Xs.bind(null,Bl,e.queue,!0,!1),is().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,a,t){var n=Bl,r=is();if(ur){if(void 0===t)throw Error(s(407));t=t()}else{if(t=a(),null===hc)throw Error(s(349));0!==(127&vc)||gs(n,a,t)}r.memoizedState=t;var l={value:t,getSnapshot:a};return r.queue=l,Ms(bs.bind(null,n,l,e),[e]),n.flags|=2048,Os(9,{destroy:void 0},xs.bind(null,n,l,t,a),null),t},useId:function(){var e=is(),a=hc.identifierPrefix;if(ur){var t=nr;a="_"+a+"R_"+(t=(tr&~(1<<32-ye(tr)-1)).toString(32)+t),0<(t=Ql++)&&(a+="H"+t.toString(32)),a+="_"}else a="_"+a+"r_"+(t=Yl++).toString(32)+"_";return e.memoizedState=a},useHostTransitionStatus:ni,useFormState:Rs,useActionState:Rs,useOptimistic:function(e){var a=is();a.memoizedState=a.baseState=e;var t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=t,a=di.bind(null,Bl,!0,t),t.dispatch=a,[e,a]},useMemoCache:us,useCacheRefresh:function(){return is().memoizedState=si.bind(null,Bl)},useEffectEvent:function(e){var a=is(),t={impl:e};return a.memoizedState=t,function(){if(0!==(2&pc))throw Error(s(440));return t.impl.apply(void 0,arguments)}}},vi={readContext:Lr,use:ds,useCallback:Qs,useContext:Lr,useEffect:Us,useImperativeHandle:Gs,useInsertionEffect:Vs,useLayoutEffect:Hs,useMemo:Ks,useReducer:ps,useRef:Is,useState:function(){return ps(ms)},useDebugValue:$s,useDeferredValue:function(e,a){return Ys(os(),Vl.memoizedState,e,a)},useTransition:function(){var e=ps(ms)[0],a=os().memoizedState;return["boolean"===typeof e?e:cs(e),a]},useSyncExternalStore:vs,useId:ri,useHostTransitionStatus:ni,useFormState:Ls,useActionState:Ls,useOptimistic:function(e,a){return _s(os(),0,e,a)},useMemoCache:us,useCacheRefresh:li};vi.useEffectEvent=Bs;var gi={readContext:Lr,use:ds,useCallback:Qs,useContext:Lr,useEffect:Us,useImperativeHandle:Gs,useInsertionEffect:Vs,useLayoutEffect:Hs,useMemo:Ks,useReducer:fs,useRef:Is,useState:function(){return fs(ms)},useDebugValue:$s,useDeferredValue:function(e,a){var t=os();return null===Vl?Js(t,e,a):Ys(t,Vl.memoizedState,e,a)},useTransition:function(){var e=fs(ms)[0],a=os().memoizedState;return["boolean"===typeof e?e:cs(e),a]},useSyncExternalStore:vs,useId:ri,useHostTransitionStatus:ni,useFormState:zs,useActionState:zs,useOptimistic:function(e,a){var t=os();return null!==Vl?_s(t,0,e,a):(t.baseState=e,[e,t.queue.dispatch])},useMemoCache:us,useCacheRefresh:li};function xi(e,a,t,n){t=null===(t=t(n,a=e.memoizedState))||void 0===t?a:p({},a,t),e.memoizedState=t,0===e.lanes&&(e.updateQueue.baseState=t)}gi.useEffectEvent=Bs;var bi={enqueueSetState:function(e,a,t){e=e._reactInternals;var n=Gc(),r=xl(n);r.payload=a,void 0!==t&&null!==t&&(r.callback=t),null!==(a=bl(e,r,n))&&(Qc(a,e,n),yl(a,e,n))},enqueueReplaceState:function(e,a,t){e=e._reactInternals;var n=Gc(),r=xl(n);r.tag=1,r.payload=a,void 0!==t&&null!==t&&(r.callback=t),null!==(a=bl(e,r,n))&&(Qc(a,e,n),yl(a,e,n))},enqueueForceUpdate:function(e,a){e=e._reactInternals;var t=Gc(),n=xl(t);n.tag=2,void 0!==a&&null!==a&&(n.callback=a),null!==(a=bl(e,n,t))&&(Qc(a,e,t),yl(a,e,t))}};function yi(e,a,t,n,r,l,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,l,s):!a.prototype||!a.prototype.isPureReactComponent||(!Xt(t,n)||!Xt(r,l))}function ji(e,a,t,n){e=a.state,"function"===typeof a.componentWillReceiveProps&&a.componentWillReceiveProps(t,n),"function"===typeof a.UNSAFE_componentWillReceiveProps&&a.UNSAFE_componentWillReceiveProps(t,n),a.state!==e&&bi.enqueueReplaceState(a,a.state,null)}function Ni(e,a){var t=a;if("ref"in a)for(var n in t={},a)"ref"!==n&&(t[n]=a[n]);if(e=e.defaultProps)for(var r in t===a&&(t=p({},t)),e)void 0===t[r]&&(t[r]=e[r]);return t}function _i(e){Sn(e)}function wi(e){console.error(e)}function Ci(e){Sn(e)}function Si(e,a){try{(0,e.onUncaughtError)(a.value,{componentStack:a.stack})}catch(t){setTimeout(function(){throw t})}}function ki(e,a,t){try{(0,e.onCaughtError)(t.value,{componentStack:t.stack,errorBoundary:1===a.tag?a.stateNode:null})}catch(n){setTimeout(function(){throw n})}}function Ei(e,a,t){return(t=xl(t)).tag=3,t.payload={element:null},t.callback=function(){Si(e,a)},t}function Ti(e){return(e=xl(e)).tag=3,e}function Pi(e,a,t,n){var r=t.type.getDerivedStateFromError;if("function"===typeof r){var l=n.value;e.payload=function(){return r(l)},e.callback=function(){ki(a,t,n)}}var s=t.stateNode;null!==s&&"function"===typeof s.componentDidCatch&&(e.callback=function(){ki(a,t,n),"function"!==typeof r&&(null===Oc?Oc=new Set([this]):Oc.add(this));var e=n.stack;this.componentDidCatch(n.value,{componentStack:null!==e?e:""})})}var Ri=Error(s(461)),Li=!1;function Ai(e,a,t,n){a.child=null===e?hl(a,null,t,n):pl(a,e.child,t,n)}function Di(e,a,t,n,r){t=t.render;var l=a.ref;if("ref"in n){var s={};for(var i in n)"ref"!==i&&(s[i]=n[i])}else s=n;return Rr(a),n=es(e,a,t,s,l,r),i=rs(),null===e||Li?(ur&&i&&sr(a),a.flags|=1,Ai(e,a,n,r),a.child):(ls(e,a,r),no(e,a,r))}function zi(e,a,t,n,r){if(null===e){var l=t.type;return"function"!==typeof l||Fn(l)||void 0!==l.defaultProps||null!==t.compare?((e=Bn(t.type,null,n,a,a.mode,r)).ref=a.ref,e.return=a,a.child=e):(a.tag=15,a.type=l,Oi(e,a,l,n,r))}if(l=e.child,!ro(e,r)){var s=l.memoizedProps;if((t=null!==(t=t.compare)?t:Xt)(s,n)&&e.ref===a.ref)return no(e,a,r)}return a.flags|=1,(e=Mn(l,n)).ref=a.ref,e.return=a,a.child=e}function Oi(e,a,t,n,r){if(null!==e){var l=e.memoizedProps;if(Xt(l,n)&&e.ref===a.ref){if(Li=!1,a.pendingProps=n=l,!ro(e,r))return a.lanes=e.lanes,no(e,a,r);0!==(131072&e.flags)&&(Li=!0)}}return Vi(e,a,t,n,r)}function Ii(e,a,t,n){var r=n.children,l=null!==e?e.memoizedState:null;if(null===e&&null===a.stateNode&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),"hidden"===n.mode){if(0!==(128&a.flags)){if(l=null!==l?l.baseLanes|t:t,null!==e){for(n=a.child=e.child,r=0;null!==n;)r=r|n.lanes|n.childLanes,n=n.sibling;n=r&~l}else n=0,a.child=null;return Fi(e,a,l,t,n)}if(0===(536870912&t))return n=a.lanes=536870912,Fi(e,a,null!==l?l.baseLanes|t:t,t,n);a.memoizedState={baseLanes:0,cachePool:null},null!==e&&Kr(0,null!==l?l.cachePool:null),null!==l?Tl(a,l):Pl(),Ol(a)}else null!==l?(Kr(0,l.cachePool),Tl(a,l),Il(),a.memoizedState=null):(null!==e&&Kr(0,null),Pl(),Il());return Ai(e,a,r,t),a.child}function qi(e,a){return null!==e&&22===e.tag||null!==a.stateNode||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function Fi(e,a,t,n,r){var l=Qr();return l=null===l?null:{parent:qr._currentValue,pool:l},a.memoizedState={baseLanes:t,cachePool:l},null!==e&&Kr(0,null),Pl(),Ol(a),null!==e&&Tr(e,a,n,!0),a.childLanes=r,null}function Mi(e,a){return(a=Xi({mode:a.mode,children:a.children},e.mode)).ref=e.ref,e.child=a,a.return=e,a}function Ui(e,a,t){return pl(a,e.child,null,t),(e=Mi(a,a.pendingProps)).flags|=2,ql(a),a.memoizedState=null,e}function Bi(e,a){var t=a.ref;if(null===t)null!==e&&null!==e.ref&&(a.flags|=4194816);else{if("function"!==typeof t&&"object"!==typeof t)throw Error(s(284));null!==e&&e.ref===t||(a.flags|=4194816)}}function Vi(e,a,t,n,r){return Rr(a),t=es(e,a,t,n,void 0,r),n=rs(),null===e||Li?(ur&&n&&sr(a),a.flags|=1,Ai(e,a,t,r),a.child):(ls(e,a,r),no(e,a,r))}function Hi(e,a,t,n,r,l){return Rr(a),a.updateQueue=null,t=ts(a,n,t,r),as(e),n=rs(),null===e||Li?(ur&&n&&sr(a),a.flags|=1,Ai(e,a,t,l),a.child):(ls(e,a,l),no(e,a,l))}function Wi(e,a,t,n,r){if(Rr(a),null===a.stateNode){var l=On,s=t.contextType;"object"===typeof s&&null!==s&&(l=Lr(s)),l=new t(n,l),a.memoizedState=null!==l.state&&void 0!==l.state?l.state:null,l.updater=bi,a.stateNode=l,l._reactInternals=a,(l=a.stateNode).props=n,l.state=a.memoizedState,l.refs={},vl(a),s=t.contextType,l.context="object"===typeof s&&null!==s?Lr(s):On,l.state=a.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(xi(a,t,s,n),l.state=a.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof l.getSnapshotBeforeUpdate||"function"!==typeof l.UNSAFE_componentWillMount&&"function"!==typeof l.componentWillMount||(s=l.state,"function"===typeof l.componentWillMount&&l.componentWillMount(),"function"===typeof l.UNSAFE_componentWillMount&&l.UNSAFE_componentWillMount(),s!==l.state&&bi.enqueueReplaceState(l,l.state,null),wl(a,n,l,r),_l(),l.state=a.memoizedState),"function"===typeof l.componentDidMount&&(a.flags|=4194308),n=!0}else if(null===e){l=a.stateNode;var i=a.memoizedProps,o=Ni(t,i);l.props=o;var c=l.context,d=t.contextType;s=On,"object"===typeof d&&null!==d&&(s=Lr(d));var u=t.getDerivedStateFromProps;d="function"===typeof u||"function"===typeof l.getSnapshotBeforeUpdate,i=a.pendingProps!==i,d||"function"!==typeof l.UNSAFE_componentWillReceiveProps&&"function"!==typeof l.componentWillReceiveProps||(i||c!==s)&&ji(a,l,n,s),fl=!1;var m=a.memoizedState;l.state=m,wl(a,n,l,r),_l(),c=a.memoizedState,i||m!==c||fl?("function"===typeof u&&(xi(a,t,u,n),c=a.memoizedState),(o=fl||yi(a,t,o,n,m,c,s))?(d||"function"!==typeof l.UNSAFE_componentWillMount&&"function"!==typeof l.componentWillMount||("function"===typeof l.componentWillMount&&l.componentWillMount(),"function"===typeof l.UNSAFE_componentWillMount&&l.UNSAFE_componentWillMount()),"function"===typeof l.componentDidMount&&(a.flags|=4194308)):("function"===typeof l.componentDidMount&&(a.flags|=4194308),a.memoizedProps=n,a.memoizedState=c),l.props=n,l.state=c,l.context=s,n=o):("function"===typeof l.componentDidMount&&(a.flags|=4194308),n=!1)}else{l=a.stateNode,gl(e,a),d=Ni(t,s=a.memoizedProps),l.props=d,u=a.pendingProps,m=l.context,c=t.contextType,o=On,"object"===typeof c&&null!==c&&(o=Lr(c)),(c="function"===typeof(i=t.getDerivedStateFromProps)||"function"===typeof l.getSnapshotBeforeUpdate)||"function"!==typeof l.UNSAFE_componentWillReceiveProps&&"function"!==typeof l.componentWillReceiveProps||(s!==u||m!==o)&&ji(a,l,n,o),fl=!1,m=a.memoizedState,l.state=m,wl(a,n,l,r),_l();var p=a.memoizedState;s!==u||m!==p||fl||null!==e&&null!==e.dependencies&&Pr(e.dependencies)?("function"===typeof i&&(xi(a,t,i,n),p=a.memoizedState),(d=fl||yi(a,t,d,n,m,p,o)||null!==e&&null!==e.dependencies&&Pr(e.dependencies))?(c||"function"!==typeof l.UNSAFE_componentWillUpdate&&"function"!==typeof l.componentWillUpdate||("function"===typeof l.componentWillUpdate&&l.componentWillUpdate(n,p,o),"function"===typeof l.UNSAFE_componentWillUpdate&&l.UNSAFE_componentWillUpdate(n,p,o)),"function"===typeof l.componentDidUpdate&&(a.flags|=4),"function"===typeof l.getSnapshotBeforeUpdate&&(a.flags|=1024)):("function"!==typeof l.componentDidUpdate||s===e.memoizedProps&&m===e.memoizedState||(a.flags|=4),"function"!==typeof l.getSnapshotBeforeUpdate||s===e.memoizedProps&&m===e.memoizedState||(a.flags|=1024),a.memoizedProps=n,a.memoizedState=p),l.props=n,l.state=p,l.context=o,n=d):("function"!==typeof l.componentDidUpdate||s===e.memoizedProps&&m===e.memoizedState||(a.flags|=4),"function"!==typeof l.getSnapshotBeforeUpdate||s===e.memoizedProps&&m===e.memoizedState||(a.flags|=1024),n=!1)}return l=n,Bi(e,a),n=0!==(128&a.flags),l||n?(l=a.stateNode,t=n&&"function"!==typeof t.getDerivedStateFromError?null:l.render(),a.flags|=1,null!==e&&n?(a.child=pl(a,e.child,null,r),a.child=pl(a,null,t,r)):Ai(e,a,t,r),a.memoizedState=l.state,e=a.child):e=no(e,a,r),e}function Gi(e,a,t,n){return br(),a.flags|=256,Ai(e,a,t,n),a.child}var $i={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Qi(e){return{baseLanes:e,cachePool:Jr()}}function Ki(e,a,t){return e=null!==e?e.childLanes&~t:0,a&&(e|=kc),e}function Ji(e,a,t){var n,r=a.pendingProps,l=!1,i=0!==(128&a.flags);if((n=i)||(n=(null===e||null!==e.memoizedState)&&0!==(2&Fl.current)),n&&(l=!0,a.flags&=-129),n=0!==(32&a.flags),a.flags&=-33,null===e){if(ur){if(l?Dl(a):Il(),(e=dr)?null!==(e=null!==(e=Pu(e,pr))&&"&"!==e.data?e:null)&&(a.memoizedState={dehydrated:e,treeContext:null!==ar?{id:tr,overflow:nr}:null,retryLane:536870912,hydrationErrors:null},(t=Wn(e)).return=a,a.child=t,cr=a,dr=null):e=null,null===e)throw fr(a);return Lu(e)?a.lanes=32:a.lanes=536870912,null}var o=r.children;return r=r.fallback,l?(Il(),o=Xi({mode:"hidden",children:o},l=a.mode),r=Vn(r,l,t,null),o.return=a,r.return=a,o.sibling=r,a.child=o,(r=a.child).memoizedState=Qi(t),r.childLanes=Ki(e,n,t),a.memoizedState=$i,qi(null,r)):(Dl(a),Yi(a,o))}var c=e.memoizedState;if(null!==c&&null!==(o=c.dehydrated)){if(i)256&a.flags?(Dl(a),a.flags&=-257,a=Zi(e,a,t)):null!==a.memoizedState?(Il(),a.child=e.child,a.flags|=128,a=null):(Il(),o=r.fallback,l=a.mode,r=Xi({mode:"visible",children:r.children},l),(o=Vn(o,l,t,null)).flags|=2,r.return=a,o.return=a,r.sibling=o,a.child=r,pl(a,e.child,null,t),(r=a.child).memoizedState=Qi(t),r.childLanes=Ki(e,n,t),a.memoizedState=$i,a=qi(null,r));else if(Dl(a),Lu(o)){if(n=o.nextSibling&&o.nextSibling.dataset)var d=n.dgst;n=d,(r=Error(s(419))).stack="",r.digest=n,jr({value:r,source:null,stack:null}),a=Zi(e,a,t)}else if(Li||Tr(e,a,t,!1),n=0!==(t&e.childLanes),Li||n){if(null!==(n=hc)&&(0!==(r=ze(n,t))&&r!==c.retryLane))throw c.retryLane=r,An(e,r),Qc(n,e,r),Ri;Ru(o)||sd(),a=Zi(e,a,t)}else Ru(o)?(a.flags|=192,a.child=e.child,a=null):(e=c.treeContext,dr=Au(o.nextSibling),cr=a,ur=!0,mr=null,pr=!1,null!==e&&or(a,e),(a=Yi(a,r.children)).flags|=4096);return a}return l?(Il(),o=r.fallback,l=a.mode,d=(c=e.child).sibling,(r=Mn(c,{mode:"hidden",children:r.children})).subtreeFlags=65011712&c.subtreeFlags,null!==d?o=Mn(d,o):(o=Vn(o,l,t,null)).flags|=2,o.return=a,r.return=a,r.sibling=o,a.child=r,qi(null,r),r=a.child,null===(o=e.child.memoizedState)?o=Qi(t):(null!==(l=o.cachePool)?(c=qr._currentValue,l=l.parent!==c?{parent:c,pool:c}:l):l=Jr(),o={baseLanes:o.baseLanes|t,cachePool:l}),r.memoizedState=o,r.childLanes=Ki(e,n,t),a.memoizedState=$i,qi(e.child,r)):(Dl(a),e=(t=e.child).sibling,(t=Mn(t,{mode:"visible",children:r.children})).return=a,t.sibling=null,null!==e&&(null===(n=a.deletions)?(a.deletions=[e],a.flags|=16):n.push(e)),a.child=t,a.memoizedState=null,t)}function Yi(e,a){return(a=Xi({mode:"visible",children:a},e.mode)).return=e,e.child=a}function Xi(e,a){return(e=qn(22,e,null,a)).lanes=0,e}function Zi(e,a,t){return pl(a,e.child,null,t),(e=Yi(a,a.pendingProps.children)).flags|=2,a.memoizedState=null,e}function eo(e,a,t){e.lanes|=a;var n=e.alternate;null!==n&&(n.lanes|=a),kr(e.return,a,t)}function ao(e,a,t,n,r,l){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:n,tail:t,tailMode:r,treeForkCount:l}:(s.isBackwards=a,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=t,s.tailMode=r,s.treeForkCount=l)}function to(e,a,t){var n=a.pendingProps,r=n.revealOrder,l=n.tail;n=n.children;var s=Fl.current,i=0!==(2&s);if(i?(s=1&s|2,a.flags|=128):s&=1,U(Fl,s),Ai(e,a,n,t),n=ur?Xn:0,!i&&null!==e&&0!==(128&e.flags))e:for(e=a.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&eo(e,t,a);else if(19===e.tag)eo(e,t,a);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===a)break e;for(;null===e.sibling;){if(null===e.return||e.return===a)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(r){case"forwards":for(t=a.child,r=null;null!==t;)null!==(e=t.alternate)&&null===Ml(e)&&(r=t),t=t.sibling;null===(t=r)?(r=a.child,a.child=null):(r=t.sibling,t.sibling=null),ao(a,!1,r,t,l,n);break;case"backwards":case"unstable_legacy-backwards":for(t=null,r=a.child,a.child=null;null!==r;){if(null!==(e=r.alternate)&&null===Ml(e)){a.child=r;break}e=r.sibling,r.sibling=t,t=r,r=e}ao(a,!0,t,null,l,n);break;case"together":ao(a,!1,null,null,void 0,n);break;default:a.memoizedState=null}return a.child}function no(e,a,t){if(null!==e&&(a.dependencies=e.dependencies),wc|=a.lanes,0===(t&a.childLanes)){if(null===e)return null;if(Tr(e,a,t,!1),0===(t&a.childLanes))return null}if(null!==e&&a.child!==e.child)throw Error(s(153));if(null!==a.child){for(t=Mn(e=a.child,e.pendingProps),a.child=t,t.return=a;null!==e.sibling;)e=e.sibling,(t=t.sibling=Mn(e,e.pendingProps)).return=a;t.sibling=null}return a.child}function ro(e,a){return 0!==(e.lanes&a)||!(null===(e=e.dependencies)||!Pr(e))}function lo(e,a,t){if(null!==e)if(e.memoizedProps!==a.pendingProps)Li=!0;else{if(!ro(e,t)&&0===(128&a.flags))return Li=!1,function(e,a,t){switch(a.tag){case 3:Q(a,a.stateNode.containerInfo),Cr(0,qr,e.memoizedState.cache),br();break;case 27:case 5:J(a);break;case 4:Q(a,a.stateNode.containerInfo);break;case 10:Cr(0,a.type,a.memoizedProps.value);break;case 31:if(null!==a.memoizedState)return a.flags|=128,zl(a),null;break;case 13:var n=a.memoizedState;if(null!==n)return null!==n.dehydrated?(Dl(a),a.flags|=128,null):0!==(t&a.child.childLanes)?Ji(e,a,t):(Dl(a),null!==(e=no(e,a,t))?e.sibling:null);Dl(a);break;case 19:var r=0!==(128&e.flags);if((n=0!==(t&a.childLanes))||(Tr(e,a,t,!1),n=0!==(t&a.childLanes)),r){if(n)return to(e,a,t);a.flags|=128}if(null!==(r=a.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),U(Fl,Fl.current),n)break;return null;case 22:return a.lanes=0,Ii(e,a,t,a.pendingProps);case 24:Cr(0,qr,e.memoizedState.cache)}return no(e,a,t)}(e,a,t);Li=0!==(131072&e.flags)}else Li=!1,ur&&0!==(1048576&a.flags)&&lr(a,Xn,a.index);switch(a.lanes=0,a.tag){case 16:e:{var n=a.pendingProps;if(e=nl(a.elementType),a.type=e,"function"!==typeof e){if(void 0!==e&&null!==e){var r=e.$$typeof;if(r===N){a.tag=11,a=Di(null,a,e,n,t);break e}if(r===C){a.tag=14,a=zi(null,a,e,n,t);break e}}throw a=L(e)||e,Error(s(306,a,""))}Fn(e)?(n=Ni(e,n),a.tag=1,a=Wi(null,a,e,n,t)):(a.tag=0,a=Vi(null,a,e,n,t))}return a;case 0:return Vi(e,a,a.type,a.pendingProps,t);case 1:return Wi(e,a,n=a.type,r=Ni(n,a.pendingProps),t);case 3:e:{if(Q(a,a.stateNode.containerInfo),null===e)throw Error(s(387));n=a.pendingProps;var l=a.memoizedState;r=l.element,gl(e,a),wl(a,n,null,t);var i=a.memoizedState;if(n=i.cache,Cr(0,qr,n),n!==l.cache&&Er(a,[qr],t,!0),_l(),n=i.element,l.isDehydrated){if(l={element:n,isDehydrated:!1,cache:i.cache},a.updateQueue.baseState=l,a.memoizedState=l,256&a.flags){a=Gi(e,a,n,t);break e}if(n!==r){jr(r=Qn(Error(s(424)),a)),a=Gi(e,a,n,t);break e}if(9===(e=a.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(dr=Au(e.firstChild),cr=a,ur=!0,mr=null,pr=!0,t=hl(a,null,n,t),a.child=t;t;)t.flags=-3&t.flags|4096,t=t.sibling}else{if(br(),n===r){a=no(e,a,t);break e}Ai(e,a,n,t)}a=a.child}return a;case 26:return Bi(e,a),null===e?(t=Wu(a.type,null,a.pendingProps,null))?a.memoizedState=t:ur||(t=a.type,e=a.pendingProps,(n=vu(G.current).createElement(t))[Ue]=a,n[Be]=e,mu(n,t,e),ea(n),a.stateNode=n):a.memoizedState=Wu(a.type,e.memoizedProps,a.pendingProps,e.memoizedState),null;case 27:return J(a),null===e&&ur&&(n=a.stateNode=Iu(a.type,a.pendingProps,G.current),cr=a,pr=!0,r=dr,Su(a.type)?(Du=r,dr=Au(n.firstChild)):dr=r),Ai(e,a,a.pendingProps.children,t),Bi(e,a),null===e&&(a.flags|=4194304),a.child;case 5:return null===e&&ur&&((r=n=dr)&&(null!==(n=function(e,a,t,n){for(;1===e.nodeType;){var r=t;if(e.nodeName.toLowerCase()!==a.toLowerCase()){if(!n&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(n){if(!e[Qe])switch(a){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(l=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(l!==r.rel||e.getAttribute("href")!==(null==r.href||""===r.href?null:r.href)||e.getAttribute("crossorigin")!==(null==r.crossOrigin?null:r.crossOrigin)||e.getAttribute("title")!==(null==r.title?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((l=e.getAttribute("src"))!==(null==r.src?null:r.src)||e.getAttribute("type")!==(null==r.type?null:r.type)||e.getAttribute("crossorigin")!==(null==r.crossOrigin?null:r.crossOrigin))&&l&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==a||"hidden"!==e.type)return e;var l=null==r.name?null:""+r.name;if("hidden"===r.type&&e.getAttribute("name")===l)return e}if(null===(e=Au(e.nextSibling)))break}return null}(n,a.type,a.pendingProps,pr))?(a.stateNode=n,cr=a,dr=Au(n.firstChild),pr=!1,r=!0):r=!1),r||fr(a)),J(a),r=a.type,l=a.pendingProps,i=null!==e?e.memoizedProps:null,n=l.children,bu(r,l)?n=null:null!==i&&bu(r,i)&&(a.flags|=32),null!==a.memoizedState&&(r=es(e,a,ns,null,null,t),dm._currentValue=r),Bi(e,a),Ai(e,a,n,t),a.child;case 6:return null===e&&ur&&((e=t=dr)&&(null!==(t=function(e,a,t){if(""===a)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!t)return null;if(null===(e=Au(e.nextSibling)))return null}return e}(t,a.pendingProps,pr))?(a.stateNode=t,cr=a,dr=null,e=!0):e=!1),e||fr(a)),null;case 13:return Ji(e,a,t);case 4:return Q(a,a.stateNode.containerInfo),n=a.pendingProps,null===e?a.child=pl(a,null,n,t):Ai(e,a,n,t),a.child;case 11:return Di(e,a,a.type,a.pendingProps,t);case 7:return Ai(e,a,a.pendingProps,t),a.child;case 8:case 12:return Ai(e,a,a.pendingProps.children,t),a.child;case 10:return n=a.pendingProps,Cr(0,a.type,n.value),Ai(e,a,n.children,t),a.child;case 9:return r=a.type._context,n=a.pendingProps.children,Rr(a),n=n(r=Lr(r)),a.flags|=1,Ai(e,a,n,t),a.child;case 14:return zi(e,a,a.type,a.pendingProps,t);case 15:return Oi(e,a,a.type,a.pendingProps,t);case 19:return to(e,a,t);case 31:return function(e,a,t){var n=a.pendingProps,r=0!==(128&a.flags);if(a.flags&=-129,null===e){if(ur){if("hidden"===n.mode)return e=Mi(a,n),a.lanes=536870912,qi(null,e);if(zl(a),(e=dr)?null!==(e=null!==(e=Pu(e,pr))&&"&"===e.data?e:null)&&(a.memoizedState={dehydrated:e,treeContext:null!==ar?{id:tr,overflow:nr}:null,retryLane:536870912,hydrationErrors:null},(t=Wn(e)).return=a,a.child=t,cr=a,dr=null):e=null,null===e)throw fr(a);return a.lanes=536870912,null}return Mi(a,n)}var l=e.memoizedState;if(null!==l){var i=l.dehydrated;if(zl(a),r)if(256&a.flags)a.flags&=-257,a=Ui(e,a,t);else{if(null===a.memoizedState)throw Error(s(558));a.child=e.child,a.flags|=128,a=null}else if(Li||Tr(e,a,t,!1),r=0!==(t&e.childLanes),Li||r){if(null!==(n=hc)&&0!==(i=ze(n,t))&&i!==l.retryLane)throw l.retryLane=i,An(e,i),Qc(n,e,i),Ri;sd(),a=Ui(e,a,t)}else e=l.treeContext,dr=Au(i.nextSibling),cr=a,ur=!0,mr=null,pr=!1,null!==e&&or(a,e),(a=Mi(a,n)).flags|=4096;return a}return(e=Mn(e.child,{mode:n.mode,children:n.children})).ref=a.ref,a.child=e,e.return=a,e}(e,a,t);case 22:return Ii(e,a,t,a.pendingProps);case 24:return Rr(a),n=Lr(qr),null===e?(null===(r=Qr())&&(r=hc,l=Fr(),r.pooledCache=l,l.refCount++,null!==l&&(r.pooledCacheLanes|=t),r=l),a.memoizedState={parent:n,cache:r},vl(a),Cr(0,qr,r)):(0!==(e.lanes&t)&&(gl(e,a),wl(a,null,null,t),_l()),r=e.memoizedState,l=a.memoizedState,r.parent!==n?(r={parent:n,cache:n},a.memoizedState=r,0===a.lanes&&(a.memoizedState=a.updateQueue.baseState=r),Cr(0,qr,n)):(n=l.cache,Cr(0,qr,n),n!==r.cache&&Er(a,[qr],t,!0))),Ai(e,a,a.pendingProps.children,t),a.child;case 29:throw a.pendingProps}throw Error(s(156,a.tag))}function so(e){e.flags|=4}function io(e,a,t,n,r){if((a=0!==(32&e.mode))&&(a=!1),a){if(e.flags|=16777216,(335544128&r)===r)if(e.stateNode.complete)e.flags|=8192;else{if(!nd())throw rl=el,Xr;e.flags|=8192}}else e.flags&=-16777217}function oo(e,a){if("stylesheet"!==a.type||0!==(4&a.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!rm(a)){if(!nd())throw rl=el,Xr;e.flags|=8192}}function co(e,a){null!==a&&(e.flags|=4),16384&e.flags&&(a=22!==e.tag?Pe():536870912,e.lanes|=a,Ec|=a)}function uo(e,a){if(!ur)switch(e.tailMode){case"hidden":a=e.tail;for(var t=null;null!==a;)null!==a.alternate&&(t=a),a=a.sibling;null===t?e.tail=null:t.sibling=null;break;case"collapsed":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?a||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function mo(e){var a=null!==e.alternate&&e.alternate.child===e.child,t=0,n=0;if(a)for(var r=e.child;null!==r;)t|=r.lanes|r.childLanes,n|=65011712&r.subtreeFlags,n|=65011712&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)t|=r.lanes|r.childLanes,n|=r.subtreeFlags,n|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=n,e.childLanes=t,a}function po(e,a,t){var n=a.pendingProps;switch(ir(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return mo(a),null;case 3:return t=a.stateNode,n=null,null!==e&&(n=e.memoizedState.cache),a.memoizedState.cache!==n&&(a.flags|=2048),Sr(qr),K(),t.pendingContext&&(t.context=t.pendingContext,t.pendingContext=null),null!==e&&null!==e.child||(xr(a)?so(a):null===e||e.memoizedState.isDehydrated&&0===(256&a.flags)||(a.flags|=1024,yr())),mo(a),null;case 26:var r=a.type,l=a.memoizedState;return null===e?(so(a),null!==l?(mo(a),oo(a,l)):(mo(a),io(a,r,0,0,t))):l?l!==e.memoizedState?(so(a),mo(a),oo(a,l)):(mo(a),a.flags&=-16777217):((e=e.memoizedProps)!==n&&so(a),mo(a),io(a,r,0,0,t)),null;case 27:if(Y(a),t=G.current,r=a.type,null!==e&&null!=a.stateNode)e.memoizedProps!==n&&so(a);else{if(!n){if(null===a.stateNode)throw Error(s(166));return mo(a),null}e=H.current,xr(a)?vr(a):(e=Iu(r,n,t),a.stateNode=e,so(a))}return mo(a),null;case 5:if(Y(a),r=a.type,null!==e&&null!=a.stateNode)e.memoizedProps!==n&&so(a);else{if(!n){if(null===a.stateNode)throw Error(s(166));return mo(a),null}if(l=H.current,xr(a))vr(a);else{var i=vu(G.current);switch(l){case 1:l=i.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:l=i.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":l=i.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":l=i.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":(l=i.createElement("div")).innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l="string"===typeof n.is?i.createElement("select",{is:n.is}):i.createElement("select"),n.multiple?l.multiple=!0:n.size&&(l.size=n.size);break;default:l="string"===typeof n.is?i.createElement(r,{is:n.is}):i.createElement(r)}}l[Ue]=a,l[Be]=n;e:for(i=a.child;null!==i;){if(5===i.tag||6===i.tag)l.appendChild(i.stateNode);else if(4!==i.tag&&27!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;null===i.sibling;){if(null===i.return||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}a.stateNode=l;e:switch(mu(l,r,n),r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&so(a)}}return mo(a),io(a,a.type,null===e||e.memoizedProps,a.pendingProps,t),null;case 6:if(e&&null!=a.stateNode)e.memoizedProps!==n&&so(a);else{if("string"!==typeof n&&null===a.stateNode)throw Error(s(166));if(e=G.current,xr(a)){if(e=a.stateNode,t=a.memoizedProps,n=null,null!==(r=cr))switch(r.tag){case 27:case 5:n=r.memoizedProps}e[Ue]=a,(e=!!(e.nodeValue===t||null!==n&&!0===n.suppressHydrationWarning||cu(e.nodeValue,t)))||fr(a,!0)}else(e=vu(e).createTextNode(n))[Ue]=a,a.stateNode=e}return mo(a),null;case 31:if(t=a.memoizedState,null===e||null!==e.memoizedState){if(n=xr(a),null!==t){if(null===e){if(!n)throw Error(s(318));if(!(e=null!==(e=a.memoizedState)?e.dehydrated:null))throw Error(s(557));e[Ue]=a}else br(),0===(128&a.flags)&&(a.memoizedState=null),a.flags|=4;mo(a),e=!1}else t=yr(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=t),e=!0;if(!e)return 256&a.flags?(ql(a),a):(ql(a),null);if(0!==(128&a.flags))throw Error(s(558))}return mo(a),null;case 13:if(n=a.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(r=xr(a),null!==n&&null!==n.dehydrated){if(null===e){if(!r)throw Error(s(318));if(!(r=null!==(r=a.memoizedState)?r.dehydrated:null))throw Error(s(317));r[Ue]=a}else br(),0===(128&a.flags)&&(a.memoizedState=null),a.flags|=4;mo(a),r=!1}else r=yr(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return 256&a.flags?(ql(a),a):(ql(a),null)}return ql(a),0!==(128&a.flags)?(a.lanes=t,a):(t=null!==n,e=null!==e&&null!==e.memoizedState,t&&(r=null,null!==(n=a.child).alternate&&null!==n.alternate.memoizedState&&null!==n.alternate.memoizedState.cachePool&&(r=n.alternate.memoizedState.cachePool.pool),l=null,null!==n.memoizedState&&null!==n.memoizedState.cachePool&&(l=n.memoizedState.cachePool.pool),l!==r&&(n.flags|=2048)),t!==e&&t&&(a.child.flags|=8192),co(a,a.updateQueue),mo(a),null);case 4:return K(),null===e&&Zd(a.stateNode.containerInfo),mo(a),null;case 10:return Sr(a.type),mo(a),null;case 19:if(M(Fl),null===(n=a.memoizedState))return mo(a),null;if(r=0!==(128&a.flags),null===(l=n.rendering))if(r)uo(n,!1);else{if(0!==_c||null!==e&&0!==(128&e.flags))for(e=a.child;null!==e;){if(null!==(l=Ml(e))){for(a.flags|=128,uo(n,!1),e=l.updateQueue,a.updateQueue=e,co(a,e),a.subtreeFlags=0,e=t,t=a.child;null!==t;)Un(t,e),t=t.sibling;return U(Fl,1&Fl.current|2),ur&&rr(a,n.treeForkCount),a.child}e=e.sibling}null!==n.tail&&oe()>Dc&&(a.flags|=128,r=!0,uo(n,!1),a.lanes=4194304)}else{if(!r)if(null!==(e=Ml(l))){if(a.flags|=128,r=!0,e=e.updateQueue,a.updateQueue=e,co(a,e),uo(n,!0),null===n.tail&&"hidden"===n.tailMode&&!l.alternate&&!ur)return mo(a),null}else 2*oe()-n.renderingStartTime>Dc&&536870912!==t&&(a.flags|=128,r=!0,uo(n,!1),a.lanes=4194304);n.isBackwards?(l.sibling=a.child,a.child=l):(null!==(e=n.last)?e.sibling=l:a.child=l,n.last=l)}return null!==n.tail?(e=n.tail,n.rendering=e,n.tail=e.sibling,n.renderingStartTime=oe(),e.sibling=null,t=Fl.current,U(Fl,r?1&t|2:1&t),ur&&rr(a,n.treeForkCount),e):(mo(a),null);case 22:case 23:return ql(a),Rl(),n=null!==a.memoizedState,null!==e?null!==e.memoizedState!==n&&(a.flags|=8192):n&&(a.flags|=8192),n?0!==(536870912&t)&&0===(128&a.flags)&&(mo(a),6&a.subtreeFlags&&(a.flags|=8192)):mo(a),null!==(t=a.updateQueue)&&co(a,t.retryQueue),t=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(t=e.memoizedState.cachePool.pool),n=null,null!==a.memoizedState&&null!==a.memoizedState.cachePool&&(n=a.memoizedState.cachePool.pool),n!==t&&(a.flags|=2048),null!==e&&M($r),null;case 24:return t=null,null!==e&&(t=e.memoizedState.cache),a.memoizedState.cache!==t&&(a.flags|=2048),Sr(qr),mo(a),null;case 25:case 30:return null}throw Error(s(156,a.tag))}function ho(e,a){switch(ir(a),a.tag){case 1:return 65536&(e=a.flags)?(a.flags=-65537&e|128,a):null;case 3:return Sr(qr),K(),0!==(65536&(e=a.flags))&&0===(128&e)?(a.flags=-65537&e|128,a):null;case 26:case 27:case 5:return Y(a),null;case 31:if(null!==a.memoizedState){if(ql(a),null===a.alternate)throw Error(s(340));br()}return 65536&(e=a.flags)?(a.flags=-65537&e|128,a):null;case 13:if(ql(a),null!==(e=a.memoizedState)&&null!==e.dehydrated){if(null===a.alternate)throw Error(s(340));br()}return 65536&(e=a.flags)?(a.flags=-65537&e|128,a):null;case 19:return M(Fl),null;case 4:return K(),null;case 10:return Sr(a.type),null;case 22:case 23:return ql(a),Rl(),null!==e&&M($r),65536&(e=a.flags)?(a.flags=-65537&e|128,a):null;case 24:return Sr(qr),null;default:return null}}function fo(e,a){switch(ir(a),a.tag){case 3:Sr(qr),K();break;case 26:case 27:case 5:Y(a);break;case 4:K();break;case 31:null!==a.memoizedState&&ql(a);break;case 13:ql(a);break;case 19:M(Fl);break;case 10:Sr(a.type);break;case 22:case 23:ql(a),Rl(),null!==e&&M($r);break;case 24:Sr(qr)}}function vo(e,a){try{var t=a.updateQueue,n=null!==t?t.lastEffect:null;if(null!==n){var r=n.next;t=r;do{if((t.tag&e)===e){n=void 0;var l=t.create,s=t.inst;n=l(),s.destroy=n}t=t.next}while(t!==r)}}catch(i){_d(a,a.return,i)}}function go(e,a,t){try{var n=a.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var l=r.next;n=l;do{if((n.tag&e)===e){var s=n.inst,i=s.destroy;if(void 0!==i){s.destroy=void 0,r=a;var o=t,c=i;try{c()}catch(d){_d(r,o,d)}}}n=n.next}while(n!==l)}}catch(d){_d(a,a.return,d)}}function xo(e){var a=e.updateQueue;if(null!==a){var t=e.stateNode;try{Sl(a,t)}catch(n){_d(e,e.return,n)}}}function bo(e,a,t){t.props=Ni(e.type,e.memoizedProps),t.state=e.memoizedState;try{t.componentWillUnmount()}catch(n){_d(e,a,n)}}function yo(e,a){try{var t=e.ref;if(null!==t){switch(e.tag){case 26:case 27:case 5:var n=e.stateNode;break;default:n=e.stateNode}"function"===typeof t?e.refCleanup=t(n):t.current=n}}catch(r){_d(e,a,r)}}function jo(e,a){var t=e.ref,n=e.refCleanup;if(null!==t)if("function"===typeof n)try{n()}catch(r){_d(e,a,r)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof t)try{t(null)}catch(l){_d(e,a,l)}else t.current=null}function No(e){var a=e.type,t=e.memoizedProps,n=e.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":t.autoFocus&&n.focus();break e;case"img":t.src?n.src=t.src:t.srcSet&&(n.srcset=t.srcSet)}}catch(r){_d(e,e.return,r)}}function _o(e,a,t){try{var n=e.stateNode;!function(e,a,t,n){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,l=null,i=null,o=null,c=null,d=null,u=null;for(h in t){var m=t[h];if(t.hasOwnProperty(h)&&null!=m)switch(h){case"checked":case"value":break;case"defaultValue":c=m;default:n.hasOwnProperty(h)||du(e,a,h,null,n,m)}}for(var p in n){var h=n[p];if(m=t[p],n.hasOwnProperty(p)&&(null!=h||null!=m))switch(p){case"type":l=h;break;case"name":r=h;break;case"checked":d=h;break;case"defaultChecked":u=h;break;case"value":i=h;break;case"defaultValue":o=h;break;case"children":case"dangerouslySetInnerHTML":if(null!=h)throw Error(s(137,a));break;default:h!==m&&du(e,a,p,h,n,m)}}return void xa(e,i,o,c,d,u,l,r);case"select":for(l in h=i=o=p=null,t)if(c=t[l],t.hasOwnProperty(l)&&null!=c)switch(l){case"value":break;case"multiple":h=c;default:n.hasOwnProperty(l)||du(e,a,l,null,n,c)}for(r in n)if(l=n[r],c=t[r],n.hasOwnProperty(r)&&(null!=l||null!=c))switch(r){case"value":p=l;break;case"defaultValue":o=l;break;case"multiple":i=l;default:l!==c&&du(e,a,r,l,n,c)}return a=o,t=i,n=h,void(null!=p?ja(e,!!t,p,!1):!!n!==!!t&&(null!=a?ja(e,!!t,a,!0):ja(e,!!t,t?[]:"",!1)));case"textarea":for(o in h=p=null,t)if(r=t[o],t.hasOwnProperty(o)&&null!=r&&!n.hasOwnProperty(o))switch(o){case"value":case"children":break;default:du(e,a,o,null,n,r)}for(i in n)if(r=n[i],l=t[i],n.hasOwnProperty(i)&&(null!=r||null!=l))switch(i){case"value":p=r;break;case"defaultValue":h=r;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=r)throw Error(s(91));break;default:r!==l&&du(e,a,i,r,n,l)}return void Na(e,p,h);case"option":for(var f in t)if(p=t[f],t.hasOwnProperty(f)&&null!=p&&!n.hasOwnProperty(f))if("selected"===f)e.selected=!1;else du(e,a,f,null,n,p);for(c in n)if(p=n[c],h=t[c],n.hasOwnProperty(c)&&p!==h&&(null!=p||null!=h))if("selected"===c)e.selected=p&&"function"!==typeof p&&"symbol"!==typeof p;else du(e,a,c,p,n,h);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var v in t)p=t[v],t.hasOwnProperty(v)&&null!=p&&!n.hasOwnProperty(v)&&du(e,a,v,null,n,p);for(d in n)if(p=n[d],h=t[d],n.hasOwnProperty(d)&&p!==h&&(null!=p||null!=h))switch(d){case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(s(137,a));break;default:du(e,a,d,p,n,h)}return;default:if(Ea(a)){for(var g in t)p=t[g],t.hasOwnProperty(g)&&void 0!==p&&!n.hasOwnProperty(g)&&uu(e,a,g,void 0,n,p);for(u in n)p=n[u],h=t[u],!n.hasOwnProperty(u)||p===h||void 0===p&&void 0===h||uu(e,a,u,p,n,h);return}}for(var x in t)p=t[x],t.hasOwnProperty(x)&&null!=p&&!n.hasOwnProperty(x)&&du(e,a,x,null,n,p);for(m in n)p=n[m],h=t[m],!n.hasOwnProperty(m)||p===h||null==p&&null==h||du(e,a,m,p,n,h)}(n,e.type,t,a),n[Be]=a}catch(r){_d(e,e.return,r)}}function wo(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&Su(e.type)||4===e.tag}function Co(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||wo(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&Su(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function So(e,a,t){var n=e.tag;if(5===n||6===n)e=e.stateNode,a?(9===t.nodeType?t.body:"HTML"===t.nodeName?t.ownerDocument.body:t).insertBefore(e,a):((a=9===t.nodeType?t.body:"HTML"===t.nodeName?t.ownerDocument.body:t).appendChild(e),null!==(t=t._reactRootContainer)&&void 0!==t||null!==a.onclick||(a.onclick=La));else if(4!==n&&(27===n&&Su(e.type)&&(t=e.stateNode,a=null),null!==(e=e.child)))for(So(e,a,t),e=e.sibling;null!==e;)So(e,a,t),e=e.sibling}function ko(e,a,t){var n=e.tag;if(5===n||6===n)e=e.stateNode,a?t.insertBefore(e,a):t.appendChild(e);else if(4!==n&&(27===n&&Su(e.type)&&(t=e.stateNode),null!==(e=e.child)))for(ko(e,a,t),e=e.sibling;null!==e;)ko(e,a,t),e=e.sibling}function Eo(e){var a=e.stateNode,t=e.memoizedProps;try{for(var n=e.type,r=a.attributes;r.length;)a.removeAttributeNode(r[0]);mu(a,n,t),a[Ue]=e,a[Be]=t}catch(l){_d(e,e.return,l)}}var To=!1,Po=!1,Ro=!1,Lo="function"===typeof WeakSet?WeakSet:Set,Ao=null;function Do(e,a,t){var n=t.flags;switch(t.tag){case 0:case 11:case 15:Qo(e,t),4&n&&vo(5,t);break;case 1:if(Qo(e,t),4&n)if(e=t.stateNode,null===a)try{e.componentDidMount()}catch(s){_d(t,t.return,s)}else{var r=Ni(t.type,a.memoizedProps);a=a.memoizedState;try{e.componentDidUpdate(r,a,e.__reactInternalSnapshotBeforeUpdate)}catch(i){_d(t,t.return,i)}}64&n&&xo(t),512&n&&yo(t,t.return);break;case 3:if(Qo(e,t),64&n&&null!==(e=t.updateQueue)){if(a=null,null!==t.child)switch(t.child.tag){case 27:case 5:case 1:a=t.child.stateNode}try{Sl(e,a)}catch(s){_d(t,t.return,s)}}break;case 27:null===a&&4&n&&Eo(t);case 26:case 5:Qo(e,t),null===a&&4&n&&No(t),512&n&&yo(t,t.return);break;case 12:Qo(e,t);break;case 31:Qo(e,t),4&n&&Mo(e,t);break;case 13:Qo(e,t),4&n&&Uo(e,t),64&n&&(null!==(e=t.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,a){var t=e.ownerDocument;if("$~"===e.data)e._reactRetry=a;else if("$?"!==e.data||"loading"!==t.readyState)a();else{var n=function(){a(),t.removeEventListener("DOMContentLoaded",n)};t.addEventListener("DOMContentLoaded",n),e._reactRetry=n}}(e,t=kd.bind(null,t))));break;case 22:if(!(n=null!==t.memoizedState||To)){a=null!==a&&null!==a.memoizedState||Po,r=To;var l=Po;To=n,(Po=a)&&!l?Jo(e,t,0!==(8772&t.subtreeFlags)):Qo(e,t),To=r,Po=l}break;case 30:break;default:Qo(e,t)}}function zo(e){var a=e.alternate;null!==a&&(e.alternate=null,zo(a)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(a=e.stateNode)&&Ke(a)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Oo=null,Io=!1;function qo(e,a,t){for(t=t.child;null!==t;)Fo(e,a,t),t=t.sibling}function Fo(e,a,t){if(xe&&"function"===typeof xe.onCommitFiberUnmount)try{xe.onCommitFiberUnmount(ge,t)}catch(l){}switch(t.tag){case 26:Po||jo(t,a),qo(e,a,t),t.memoizedState?t.memoizedState.count--:t.stateNode&&(t=t.stateNode).parentNode.removeChild(t);break;case 27:Po||jo(t,a);var n=Oo,r=Io;Su(t.type)&&(Oo=t.stateNode,Io=!1),qo(e,a,t),qu(t.stateNode),Oo=n,Io=r;break;case 5:Po||jo(t,a);case 6:if(n=Oo,r=Io,Oo=null,qo(e,a,t),Io=r,null!==(Oo=n))if(Io)try{(9===Oo.nodeType?Oo.body:"HTML"===Oo.nodeName?Oo.ownerDocument.body:Oo).removeChild(t.stateNode)}catch(s){_d(t,a,s)}else try{Oo.removeChild(t.stateNode)}catch(s){_d(t,a,s)}break;case 18:null!==Oo&&(Io?(ku(9===(e=Oo).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,t.stateNode),Hm(e)):ku(Oo,t.stateNode));break;case 4:n=Oo,r=Io,Oo=t.stateNode.containerInfo,Io=!0,qo(e,a,t),Oo=n,Io=r;break;case 0:case 11:case 14:case 15:go(2,t,a),Po||go(4,t,a),qo(e,a,t);break;case 1:Po||(jo(t,a),"function"===typeof(n=t.stateNode).componentWillUnmount&&bo(t,a,n)),qo(e,a,t);break;case 21:qo(e,a,t);break;case 22:Po=(n=Po)||null!==t.memoizedState,qo(e,a,t),Po=n;break;default:qo(e,a,t)}}function Mo(e,a){if(null===a.memoizedState&&(null!==(e=a.alternate)&&null!==(e=e.memoizedState))){e=e.dehydrated;try{Hm(e)}catch(t){_d(a,a.return,t)}}}function Uo(e,a){if(null===a.memoizedState&&(null!==(e=a.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Hm(e)}catch(t){_d(a,a.return,t)}}function Bo(e,a){var t=function(e){switch(e.tag){case 31:case 13:case 19:var a=e.stateNode;return null===a&&(a=e.stateNode=new Lo),a;case 22:return null===(a=(e=e.stateNode)._retryCache)&&(a=e._retryCache=new Lo),a;default:throw Error(s(435,e.tag))}}(e);a.forEach(function(a){if(!t.has(a)){t.add(a);var n=Ed.bind(null,e,a);a.then(n,n)}})}function Vo(e,a){var t=a.deletions;if(null!==t)for(var n=0;n<t.length;n++){var r=t[n],l=e,i=a,o=i;e:for(;null!==o;){switch(o.tag){case 27:if(Su(o.type)){Oo=o.stateNode,Io=!1;break e}break;case 5:Oo=o.stateNode,Io=!1;break e;case 3:case 4:Oo=o.stateNode.containerInfo,Io=!0;break e}o=o.return}if(null===Oo)throw Error(s(160));Fo(l,i,r),Oo=null,Io=!1,null!==(l=r.alternate)&&(l.return=null),r.return=null}if(13886&a.subtreeFlags)for(a=a.child;null!==a;)Wo(a,e),a=a.sibling}var Ho=null;function Wo(e,a){var t=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Vo(a,e),Go(e),4&n&&(go(3,e,e.return),vo(3,e),go(5,e,e.return));break;case 1:Vo(a,e),Go(e),512&n&&(Po||null===t||jo(t,t.return)),64&n&&To&&(null!==(e=e.updateQueue)&&(null!==(n=e.callbacks)&&(t=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===t?n:t.concat(n))));break;case 26:var r=Ho;if(Vo(a,e),Go(e),512&n&&(Po||null===t||jo(t,t.return)),4&n){var l=null!==t?t.memoizedState:null;if(n=e.memoizedState,null===t)if(null===n)if(null===e.stateNode){e:{n=e.type,t=e.memoizedProps,r=r.ownerDocument||r;a:switch(n){case"title":(!(l=r.getElementsByTagName("title")[0])||l[Qe]||l[Ue]||"http://www.w3.org/2000/svg"===l.namespaceURI||l.hasAttribute("itemprop"))&&(l=r.createElement(n),r.head.insertBefore(l,r.querySelector("head > title"))),mu(l,n,t),l[Ue]=e,ea(l),n=l;break e;case"link":var i=tm("link","href",r).get(n+(t.href||""));if(i)for(var o=0;o<i.length;o++)if((l=i[o]).getAttribute("href")===(null==t.href||""===t.href?null:t.href)&&l.getAttribute("rel")===(null==t.rel?null:t.rel)&&l.getAttribute("title")===(null==t.title?null:t.title)&&l.getAttribute("crossorigin")===(null==t.crossOrigin?null:t.crossOrigin)){i.splice(o,1);break a}mu(l=r.createElement(n),n,t),r.head.appendChild(l);break;case"meta":if(i=tm("meta","content",r).get(n+(t.content||"")))for(o=0;o<i.length;o++)if((l=i[o]).getAttribute("content")===(null==t.content?null:""+t.content)&&l.getAttribute("name")===(null==t.name?null:t.name)&&l.getAttribute("property")===(null==t.property?null:t.property)&&l.getAttribute("http-equiv")===(null==t.httpEquiv?null:t.httpEquiv)&&l.getAttribute("charset")===(null==t.charSet?null:t.charSet)){i.splice(o,1);break a}mu(l=r.createElement(n),n,t),r.head.appendChild(l);break;default:throw Error(s(468,n))}l[Ue]=e,ea(l),n=l}e.stateNode=n}else nm(r,e.type,e.stateNode);else e.stateNode=Yu(r,n,e.memoizedProps);else l!==n?(null===l?null!==t.stateNode&&(t=t.stateNode).parentNode.removeChild(t):l.count--,null===n?nm(r,e.type,e.stateNode):Yu(r,n,e.memoizedProps)):null===n&&null!==e.stateNode&&_o(e,e.memoizedProps,t.memoizedProps)}break;case 27:Vo(a,e),Go(e),512&n&&(Po||null===t||jo(t,t.return)),null!==t&&4&n&&_o(e,e.memoizedProps,t.memoizedProps);break;case 5:if(Vo(a,e),Go(e),512&n&&(Po||null===t||jo(t,t.return)),32&e.flags){r=e.stateNode;try{wa(r,"")}catch(f){_d(e,e.return,f)}}4&n&&null!=e.stateNode&&_o(e,r=e.memoizedProps,null!==t?t.memoizedProps:r),1024&n&&(Ro=!0);break;case 6:if(Vo(a,e),Go(e),4&n){if(null===e.stateNode)throw Error(s(162));n=e.memoizedProps,t=e.stateNode;try{t.nodeValue=n}catch(f){_d(e,e.return,f)}}break;case 3:if(am=null,r=Ho,Ho=Uu(a.containerInfo),Vo(a,e),Ho=r,Go(e),4&n&&null!==t&&t.memoizedState.isDehydrated)try{Hm(a.containerInfo)}catch(f){_d(e,e.return,f)}Ro&&(Ro=!1,$o(e));break;case 4:n=Ho,Ho=Uu(e.stateNode.containerInfo),Vo(a,e),Go(e),Ho=n;break;case 12:default:Vo(a,e),Go(e);break;case 31:case 19:Vo(a,e),Go(e),4&n&&(null!==(n=e.updateQueue)&&(e.updateQueue=null,Bo(e,n)));break;case 13:Vo(a,e),Go(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==t&&null!==t.memoizedState)&&(Lc=oe()),4&n&&(null!==(n=e.updateQueue)&&(e.updateQueue=null,Bo(e,n)));break;case 22:r=null!==e.memoizedState;var c=null!==t&&null!==t.memoizedState,d=To,u=Po;if(To=d||r,Po=u||c,Vo(a,e),Po=u,To=d,Go(e),8192&n)e:for(a=e.stateNode,a._visibility=r?-2&a._visibility:1|a._visibility,r&&(null===t||c||To||Po||Ko(e)),t=null,a=e;;){if(5===a.tag||26===a.tag){if(null===t){c=t=a;try{if(l=c.stateNode,r)"function"===typeof(i=l.style).setProperty?i.setProperty("display","none","important"):i.display="none";else{o=c.stateNode;var m=c.memoizedProps.style,p=void 0!==m&&null!==m&&m.hasOwnProperty("display")?m.display:null;o.style.display=null==p||"boolean"===typeof p?"":(""+p).trim()}}catch(f){_d(c,c.return,f)}}}else if(6===a.tag){if(null===t){c=a;try{c.stateNode.nodeValue=r?"":c.memoizedProps}catch(f){_d(c,c.return,f)}}}else if(18===a.tag){if(null===t){c=a;try{var h=c.stateNode;r?Eu(h,!0):Eu(c.stateNode,!1)}catch(f){_d(c,c.return,f)}}}else if((22!==a.tag&&23!==a.tag||null===a.memoizedState||a===e)&&null!==a.child){a.child.return=a,a=a.child;continue}if(a===e)break e;for(;null===a.sibling;){if(null===a.return||a.return===e)break e;t===a&&(t=null),a=a.return}t===a&&(t=null),a.sibling.return=a.return,a=a.sibling}4&n&&(null!==(n=e.updateQueue)&&(null!==(t=n.retryQueue)&&(n.retryQueue=null,Bo(e,t))));case 30:case 21:}}function Go(e){var a=e.flags;if(2&a){try{for(var t,n=e.return;null!==n;){if(wo(n)){t=n;break}n=n.return}if(null==t)throw Error(s(160));switch(t.tag){case 27:var r=t.stateNode;ko(e,Co(e),r);break;case 5:var l=t.stateNode;32&t.flags&&(wa(l,""),t.flags&=-33),ko(e,Co(e),l);break;case 3:case 4:var i=t.stateNode.containerInfo;So(e,Co(e),i);break;default:throw Error(s(161))}}catch(o){_d(e,e.return,o)}e.flags&=-3}4096&a&&(e.flags&=-4097)}function $o(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var a=e;$o(a),5===a.tag&&1024&a.flags&&a.stateNode.reset(),e=e.sibling}}function Qo(e,a){if(8772&a.subtreeFlags)for(a=a.child;null!==a;)Do(e,a.alternate,a),a=a.sibling}function Ko(e){for(e=e.child;null!==e;){var a=e;switch(a.tag){case 0:case 11:case 14:case 15:go(4,a,a.return),Ko(a);break;case 1:jo(a,a.return);var t=a.stateNode;"function"===typeof t.componentWillUnmount&&bo(a,a.return,t),Ko(a);break;case 27:qu(a.stateNode);case 26:case 5:jo(a,a.return),Ko(a);break;case 22:null===a.memoizedState&&Ko(a);break;default:Ko(a)}e=e.sibling}}function Jo(e,a,t){for(t=t&&0!==(8772&a.subtreeFlags),a=a.child;null!==a;){var n=a.alternate,r=e,l=a,s=l.flags;switch(l.tag){case 0:case 11:case 15:Jo(r,l,t),vo(4,l);break;case 1:if(Jo(r,l,t),"function"===typeof(r=(n=l).stateNode).componentDidMount)try{r.componentDidMount()}catch(c){_d(n,n.return,c)}if(null!==(r=(n=l).updateQueue)){var i=n.stateNode;try{var o=r.shared.hiddenCallbacks;if(null!==o)for(r.shared.hiddenCallbacks=null,r=0;r<o.length;r++)Cl(o[r],i)}catch(c){_d(n,n.return,c)}}t&&64&s&&xo(l),yo(l,l.return);break;case 27:Eo(l);case 26:case 5:Jo(r,l,t),t&&null===n&&4&s&&No(l),yo(l,l.return);break;case 12:Jo(r,l,t);break;case 31:Jo(r,l,t),t&&4&s&&Mo(r,l);break;case 13:Jo(r,l,t),t&&4&s&&Uo(r,l);break;case 22:null===l.memoizedState&&Jo(r,l,t),yo(l,l.return);break;case 30:break;default:Jo(r,l,t)}a=a.sibling}}function Yo(e,a){var t=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(t=e.memoizedState.cachePool.pool),e=null,null!==a.memoizedState&&null!==a.memoizedState.cachePool&&(e=a.memoizedState.cachePool.pool),e!==t&&(null!=e&&e.refCount++,null!=t&&Mr(t))}function Xo(e,a){e=null,null!==a.alternate&&(e=a.alternate.memoizedState.cache),(a=a.memoizedState.cache)!==e&&(a.refCount++,null!=e&&Mr(e))}function Zo(e,a,t,n){if(10256&a.subtreeFlags)for(a=a.child;null!==a;)ec(e,a,t,n),a=a.sibling}function ec(e,a,t,n){var r=a.flags;switch(a.tag){case 0:case 11:case 15:Zo(e,a,t,n),2048&r&&vo(9,a);break;case 1:case 31:case 13:default:Zo(e,a,t,n);break;case 3:Zo(e,a,t,n),2048&r&&(e=null,null!==a.alternate&&(e=a.alternate.memoizedState.cache),(a=a.memoizedState.cache)!==e&&(a.refCount++,null!=e&&Mr(e)));break;case 12:if(2048&r){Zo(e,a,t,n),e=a.stateNode;try{var l=a.memoizedProps,s=l.id,i=l.onPostCommit;"function"===typeof i&&i(s,null===a.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(o){_d(a,a.return,o)}}else Zo(e,a,t,n);break;case 23:break;case 22:l=a.stateNode,s=a.alternate,null!==a.memoizedState?2&l._visibility?Zo(e,a,t,n):tc(e,a):2&l._visibility?Zo(e,a,t,n):(l._visibility|=2,ac(e,a,t,n,0!==(10256&a.subtreeFlags)||!1)),2048&r&&Yo(s,a);break;case 24:Zo(e,a,t,n),2048&r&&Xo(a.alternate,a)}}function ac(e,a,t,n,r){for(r=r&&(0!==(10256&a.subtreeFlags)||!1),a=a.child;null!==a;){var l=e,s=a,i=t,o=n,c=s.flags;switch(s.tag){case 0:case 11:case 15:ac(l,s,i,o,r),vo(8,s);break;case 23:break;case 22:var d=s.stateNode;null!==s.memoizedState?2&d._visibility?ac(l,s,i,o,r):tc(l,s):(d._visibility|=2,ac(l,s,i,o,r)),r&&2048&c&&Yo(s.alternate,s);break;case 24:ac(l,s,i,o,r),r&&2048&c&&Xo(s.alternate,s);break;default:ac(l,s,i,o,r)}a=a.sibling}}function tc(e,a){if(10256&a.subtreeFlags)for(a=a.child;null!==a;){var t=e,n=a,r=n.flags;switch(n.tag){case 22:tc(t,n),2048&r&&Yo(n.alternate,n);break;case 24:tc(t,n),2048&r&&Xo(n.alternate,n);break;default:tc(t,n)}a=a.sibling}}var nc=8192;function rc(e,a,t){if(e.subtreeFlags&nc)for(e=e.child;null!==e;)lc(e,a,t),e=e.sibling}function lc(e,a,t){switch(e.tag){case 26:rc(e,a,t),e.flags&nc&&null!==e.memoizedState&&function(e,a,t,n){if("stylesheet"===t.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var r=Gu(n.href),l=a.querySelector($u(r));if(l)return null!==(a=l._p)&&"object"===typeof a&&"function"===typeof a.then&&(e.count++,e=sm.bind(e),a.then(e,e)),t.state.loading|=4,t.instance=l,void ea(l);l=a.ownerDocument||a,n=Qu(n),(r=Fu.get(r))&&Zu(n,r),ea(l=l.createElement("link"));var s=l;s._p=new Promise(function(e,a){s.onload=e,s.onerror=a}),mu(l,"link",n),t.instance=l}null===e.stylesheets&&(e.stylesheets=new Map),e.stylesheets.set(t,a),(a=t.state.preload)&&0===(3&t.state.loading)&&(e.count++,t=sm.bind(e),a.addEventListener("load",t),a.addEventListener("error",t))}}(t,Ho,e.memoizedState,e.memoizedProps);break;case 5:default:rc(e,a,t);break;case 3:case 4:var n=Ho;Ho=Uu(e.stateNode.containerInfo),rc(e,a,t),Ho=n;break;case 22:null===e.memoizedState&&(null!==(n=e.alternate)&&null!==n.memoizedState?(n=nc,nc=16777216,rc(e,a,t),nc=n):rc(e,a,t))}}function sc(e){var a=e.alternate;if(null!==a&&null!==(e=a.child)){a.child=null;do{a=e.sibling,e.sibling=null,e=a}while(null!==e)}}function ic(e){var a=e.deletions;if(0!==(16&e.flags)){if(null!==a)for(var t=0;t<a.length;t++){var n=a[t];Ao=n,dc(n,e)}sc(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)oc(e),e=e.sibling}function oc(e){switch(e.tag){case 0:case 11:case 15:ic(e),2048&e.flags&&go(9,e,e.return);break;case 3:case 12:default:ic(e);break;case 22:var a=e.stateNode;null!==e.memoizedState&&2&a._visibility&&(null===e.return||13!==e.return.tag)?(a._visibility&=-3,cc(e)):ic(e)}}function cc(e){var a=e.deletions;if(0!==(16&e.flags)){if(null!==a)for(var t=0;t<a.length;t++){var n=a[t];Ao=n,dc(n,e)}sc(e)}for(e=e.child;null!==e;){switch((a=e).tag){case 0:case 11:case 15:go(8,a,a.return),cc(a);break;case 22:2&(t=a.stateNode)._visibility&&(t._visibility&=-3,cc(a));break;default:cc(a)}e=e.sibling}}function dc(e,a){for(;null!==Ao;){var t=Ao;switch(t.tag){case 0:case 11:case 15:go(8,t,a);break;case 23:case 22:if(null!==t.memoizedState&&null!==t.memoizedState.cachePool){var n=t.memoizedState.cachePool.pool;null!=n&&n.refCount++}break;case 24:Mr(t.memoizedState.cache)}if(null!==(n=t.child))n.return=t,Ao=n;else e:for(t=e;null!==Ao;){var r=(n=Ao).sibling,l=n.return;if(zo(n),n===t){Ao=null;break e}if(null!==r){r.return=l,Ao=r;break e}Ao=l}}}var uc={getCacheForType:function(e){var a=Lr(qr),t=a.data.get(e);return void 0===t&&(t=e(),a.data.set(e,t)),t},cacheSignal:function(){return Lr(qr).controller.signal}},mc="function"===typeof WeakMap?WeakMap:Map,pc=0,hc=null,fc=null,vc=0,gc=0,xc=null,bc=!1,yc=!1,jc=!1,Nc=0,_c=0,wc=0,Cc=0,Sc=0,kc=0,Ec=0,Tc=null,Pc=null,Rc=!1,Lc=0,Ac=0,Dc=1/0,zc=null,Oc=null,Ic=0,qc=null,Fc=null,Mc=0,Uc=0,Bc=null,Vc=null,Hc=0,Wc=null;function Gc(){return 0!==(2&pc)&&0!==vc?vc&-vc:null!==D.T?Bd():qe()}function $c(){if(0===kc)if(0===(536870912&vc)||ur){var e=we;0===(3932160&(we<<=1))&&(we=262144),kc=e}else kc=536870912;return null!==(e=Ll.current)&&(e.flags|=32),kc}function Qc(e,a,t){(e!==hc||2!==gc&&9!==gc)&&null===e.cancelPendingCommit||(ad(e,0),Xc(e,vc,kc,!1)),Le(e,t),0!==(2&pc)&&e===hc||(e===hc&&(0===(2&pc)&&(Cc|=t),4===_c&&Xc(e,vc,kc,!1)),zd(e))}function Kc(e,a,t){if(0!==(6&pc))throw Error(s(327));for(var n=!t&&0===(127&a)&&0===(a&e.expiredLanes)||Ee(e,a),r=n?function(e,a){var t=pc;pc|=2;var n=rd(),r=ld();hc!==e||vc!==a?(zc=null,Dc=oe()+500,ad(e,a)):yc=Ee(e,a);e:for(;;)try{if(0!==gc&&null!==fc){a=fc;var l=xc;a:switch(gc){case 1:gc=0,xc=null,md(e,a,l,1);break;case 2:case 9:if(al(l)){gc=0,xc=null,ud(a);break}a=function(){2!==gc&&9!==gc||hc!==e||(gc=7),zd(e)},l.then(a,a);break e;case 3:gc=7;break e;case 4:gc=5;break e;case 7:al(l)?(gc=0,xc=null,ud(a)):(gc=0,xc=null,md(e,a,l,7));break;case 5:var i=null;switch(fc.tag){case 26:i=fc.memoizedState;case 5:case 27:var o=fc;if(i?rm(i):o.stateNode.complete){gc=0,xc=null;var c=o.sibling;if(null!==c)fc=c;else{var d=o.return;null!==d?(fc=d,pd(d)):fc=null}break a}}gc=0,xc=null,md(e,a,l,5);break;case 6:gc=0,xc=null,md(e,a,l,6);break;case 8:ed(),_c=6;break e;default:throw Error(s(462))}}cd();break}catch(u){td(e,u)}return wr=_r=null,D.H=n,D.A=r,pc=t,null!==fc?0:(hc=null,vc=0,Pn(),_c)}(e,a):id(e,a,!0),l=n;;){if(0===r){yc&&!n&&Xc(e,a,0,!1);break}if(t=e.current.alternate,!l||Yc(t)){if(2===r){if(l=a,e.errorRecoveryDisabledLanes&l)var i=0;else i=0!==(i=-536870913&e.pendingLanes)?i:536870912&i?536870912:0;if(0!==i){a=i;e:{var o=e;r=Tc;var c=o.current.memoizedState.isDehydrated;if(c&&(ad(o,i).flags|=256),2!==(i=id(o,i,!1))){if(jc&&!c){o.errorRecoveryDisabledLanes|=l,Cc|=l,r=4;break e}l=Pc,Pc=r,null!==l&&(null===Pc?Pc=l:Pc.push.apply(Pc,l))}r=i}if(l=!1,2!==r)continue}}if(1===r){ad(e,0),Xc(e,a,0,!0);break}e:{switch(n=e,l=r){case 0:case 1:throw Error(s(345));case 4:if((4194048&a)!==a)break;case 6:Xc(n,a,kc,!bc);break e;case 2:Pc=null;break;case 3:case 5:break;default:throw Error(s(329))}if((62914560&a)===a&&10<(r=Lc+300-oe())){if(Xc(n,a,kc,!bc),0!==ke(n,0,!0))break e;Mc=a,n.timeoutHandle=ju(Jc.bind(null,n,t,Pc,zc,Rc,a,kc,Cc,Ec,bc,l,"Throttled",-0,0),r)}else Jc(n,t,Pc,zc,Rc,a,kc,Cc,Ec,bc,l,null,-0,0)}break}r=id(e,a,!1),l=!1}zd(e)}function Jc(e,a,t,n,r,l,s,i,o,c,d,u,m,p){if(e.timeoutHandle=-1,8192&(u=a.subtreeFlags)||16785408===(16785408&u)){lc(a,l,u={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:La});var h=(62914560&l)===l?Lc-oe():(4194048&l)===l?Ac-oe():0;if(null!==(h=function(e,a){return e.stylesheets&&0===e.count&&om(e,e.stylesheets),0<e.count||0<e.imgCount?function(t){var n=setTimeout(function(){if(e.stylesheets&&om(e,e.stylesheets),e.unsuspend){var a=e.unsuspend;e.unsuspend=null,a()}},6e4+a);0<e.imgBytes&&0===lm&&(lm=62500*function(){if("function"===typeof performance.getEntriesByType){for(var e=0,a=0,t=performance.getEntriesByType("resource"),n=0;n<t.length;n++){var r=t[n],l=r.transferSize,s=r.initiatorType,i=r.duration;if(l&&i&&pu(s)){for(s=0,i=r.responseEnd,n+=1;n<t.length;n++){var o=t[n],c=o.startTime;if(c>i)break;var d=o.transferSize,u=o.initiatorType;d&&pu(u)&&(s+=d*((o=o.responseEnd)<i?1:(i-c)/(o-c)))}if(--n,a+=8*(l+s)/(r.duration/1e3),10<++e)break}}if(0<e)return a/e/1e6}return navigator.connection&&"number"===typeof(e=navigator.connection.downlink)?e:5}());var r=setTimeout(function(){if(e.waitingForImages=!1,0===e.count&&(e.stylesheets&&om(e,e.stylesheets),e.unsuspend)){var a=e.unsuspend;e.unsuspend=null,a()}},(e.imgBytes>lm?50:800)+a);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n),clearTimeout(r)}}:null}(u,h)))return Mc=l,e.cancelPendingCommit=h(fd.bind(null,e,a,l,t,n,r,s,i,o,d,u,null,m,p)),void Xc(e,l,s,!c)}fd(e,a,l,t,n,r,s,i,o)}function Yc(e){for(var a=e;;){var t=a.tag;if((0===t||11===t||15===t)&&16384&a.flags&&(null!==(t=a.updateQueue)&&null!==(t=t.stores)))for(var n=0;n<t.length;n++){var r=t[n],l=r.getSnapshot;r=r.value;try{if(!Yt(l(),r))return!1}catch(s){return!1}}if(t=a.child,16384&a.subtreeFlags&&null!==t)t.return=a,a=t;else{if(a===e)break;for(;null===a.sibling;){if(null===a.return||a.return===e)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Xc(e,a,t,n){a&=~Sc,a&=~Cc,e.suspendedLanes|=a,e.pingedLanes&=~a,n&&(e.warmLanes|=a),n=e.expirationTimes;for(var r=a;0<r;){var l=31-ye(r),s=1<<l;n[l]=-1,r&=~s}0!==t&&Ae(e,t,a)}function Zc(){return 0!==(6&pc)||(Od(0,!1),!1)}function ed(){if(null!==fc){if(0===gc)var e=fc.return;else wr=_r=null,ss(e=fc),il=null,ol=0,e=fc;for(;null!==e;)fo(e.alternate,e),e=e.return;fc=null}}function ad(e,a){var t=e.timeoutHandle;-1!==t&&(e.timeoutHandle=-1,Nu(t)),null!==(t=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,t()),Mc=0,ed(),hc=e,fc=t=Mn(e.current,null),vc=a,gc=0,xc=null,bc=!1,yc=Ee(e,a),jc=!1,Ec=kc=Sc=Cc=wc=_c=0,Pc=Tc=null,Rc=!1,0!==(8&a)&&(a|=32&a);var n=e.entangledLanes;if(0!==n)for(e=e.entanglements,n&=a;0<n;){var r=31-ye(n),l=1<<r;a|=e[r],n&=~l}return Nc=a,Pn(),t}function td(e,a){Bl=null,D.H=hi,a===Yr||a===Zr?(a=ll(),gc=3):a===Xr?(a=ll(),gc=4):gc=a===Ri?8:null!==a&&"object"===typeof a&&"function"===typeof a.then?6:1,xc=a,null===fc&&(_c=1,Si(e,Qn(a,e.current)))}function nd(){var e=Ll.current;return null===e||((4194048&vc)===vc?null===Al:((62914560&vc)===vc||0!==(536870912&vc))&&e===Al)}function rd(){var e=D.H;return D.H=hi,null===e?hi:e}function ld(){var e=D.A;return D.A=uc,e}function sd(){_c=4,bc||(4194048&vc)!==vc&&null!==Ll.current||(yc=!0),0===(134217727&wc)&&0===(134217727&Cc)||null===hc||Xc(hc,vc,kc,!1)}function id(e,a,t){var n=pc;pc|=2;var r=rd(),l=ld();hc===e&&vc===a||(zc=null,ad(e,a)),a=!1;var s=_c;e:for(;;)try{if(0!==gc&&null!==fc){var i=fc,o=xc;switch(gc){case 8:ed(),s=6;break e;case 3:case 2:case 9:case 6:null===Ll.current&&(a=!0);var c=gc;if(gc=0,xc=null,md(e,i,o,c),t&&yc){s=0;break e}break;default:c=gc,gc=0,xc=null,md(e,i,o,c)}}od(),s=_c;break}catch(d){td(e,d)}return a&&e.shellSuspendCounter++,wr=_r=null,pc=n,D.H=r,D.A=l,null===fc&&(hc=null,vc=0,Pn()),s}function od(){for(;null!==fc;)dd(fc)}function cd(){for(;null!==fc&&!se();)dd(fc)}function dd(e){var a=lo(e.alternate,e,Nc);e.memoizedProps=e.pendingProps,null===a?pd(e):fc=a}function ud(e){var a=e,t=a.alternate;switch(a.tag){case 15:case 0:a=Hi(t,a,a.pendingProps,a.type,void 0,vc);break;case 11:a=Hi(t,a,a.pendingProps,a.type.render,a.ref,vc);break;case 5:ss(a);default:fo(t,a),a=lo(t,a=fc=Un(a,Nc),Nc)}e.memoizedProps=e.pendingProps,null===a?pd(e):fc=a}function md(e,a,t,n){wr=_r=null,ss(a),il=null,ol=0;var r=a.return;try{if(function(e,a,t,n,r){if(t.flags|=32768,null!==n&&"object"===typeof n&&"function"===typeof n.then){if(null!==(a=t.alternate)&&Tr(a,t,r,!0),null!==(t=Ll.current)){switch(t.tag){case 31:case 13:return null===Al?sd():null===t.alternate&&0===_c&&(_c=3),t.flags&=-257,t.flags|=65536,t.lanes=r,n===el?t.flags|=16384:(null===(a=t.updateQueue)?t.updateQueue=new Set([n]):a.add(n),wd(e,n,r)),!1;case 22:return t.flags|=65536,n===el?t.flags|=16384:(null===(a=t.updateQueue)?(a={transitions:null,markerInstances:null,retryQueue:new Set([n])},t.updateQueue=a):null===(t=a.retryQueue)?a.retryQueue=new Set([n]):t.add(n),wd(e,n,r)),!1}throw Error(s(435,t.tag))}return wd(e,n,r),sd(),!1}if(ur)return null!==(a=Ll.current)?(0===(65536&a.flags)&&(a.flags|=256),a.flags|=65536,a.lanes=r,n!==hr&&jr(Qn(e=Error(s(422),{cause:n}),t))):(n!==hr&&jr(Qn(a=Error(s(423),{cause:n}),t)),(e=e.current.alternate).flags|=65536,r&=-r,e.lanes|=r,n=Qn(n,t),jl(e,r=Ei(e.stateNode,n,r)),4!==_c&&(_c=2)),!1;var l=Error(s(520),{cause:n});if(l=Qn(l,t),null===Tc?Tc=[l]:Tc.push(l),4!==_c&&(_c=2),null===a)return!0;n=Qn(n,t),t=a;do{switch(t.tag){case 3:return t.flags|=65536,e=r&-r,t.lanes|=e,jl(t,e=Ei(t.stateNode,n,e)),!1;case 1:if(a=t.type,l=t.stateNode,0===(128&t.flags)&&("function"===typeof a.getDerivedStateFromError||null!==l&&"function"===typeof l.componentDidCatch&&(null===Oc||!Oc.has(l))))return t.flags|=65536,r&=-r,t.lanes|=r,Pi(r=Ti(r),e,t,n),jl(t,r),!1}t=t.return}while(null!==t);return!1}(e,r,a,t,vc))return _c=1,Si(e,Qn(t,e.current)),void(fc=null)}catch(l){if(null!==r)throw fc=r,l;return _c=1,Si(e,Qn(t,e.current)),void(fc=null)}32768&a.flags?(ur||1===n?e=!0:yc||0!==(536870912&vc)?e=!1:(bc=e=!0,(2===n||9===n||3===n||6===n)&&(null!==(n=Ll.current)&&13===n.tag&&(n.flags|=16384))),hd(a,e)):pd(a)}function pd(e){var a=e;do{if(0!==(32768&a.flags))return void hd(a,bc);e=a.return;var t=po(a.alternate,a,Nc);if(null!==t)return void(fc=t);if(null!==(a=a.sibling))return void(fc=a);fc=a=e}while(null!==a);0===_c&&(_c=5)}function hd(e,a){do{var t=ho(e.alternate,e);if(null!==t)return t.flags&=32767,void(fc=t);if(null!==(t=e.return)&&(t.flags|=32768,t.subtreeFlags=0,t.deletions=null),!a&&null!==(e=e.sibling))return void(fc=e);fc=e=t}while(null!==e);_c=6,fc=null}function fd(e,a,t,n,r,l,i,o,c){e.cancelPendingCommit=null;do{yd()}while(0!==Ic);if(0!==(6&pc))throw Error(s(327));if(null!==a){if(a===e.current)throw Error(s(177));if(l=a.lanes|a.childLanes,function(e,a,t,n,r,l){var s=e.pendingLanes;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=t,e.entangledLanes&=t,e.errorRecoveryDisabledLanes&=t,e.shellSuspendCounter=0;var i=e.entanglements,o=e.expirationTimes,c=e.hiddenUpdates;for(t=s&~t;0<t;){var d=31-ye(t),u=1<<d;i[d]=0,o[d]=-1;var m=c[d];if(null!==m)for(c[d]=null,d=0;d<m.length;d++){var p=m[d];null!==p&&(p.lane&=-536870913)}t&=~u}0!==n&&Ae(e,n,0),0!==l&&0===r&&0!==e.tag&&(e.suspendedLanes|=l&~(s&~a))}(e,t,l|=Tn,i,o,c),e===hc&&(fc=hc=null,vc=0),Fc=a,qc=e,Mc=t,Uc=l,Bc=r,Vc=n,0!==(10256&a.subtreeFlags)||0!==(10256&a.flags)?(e.callbackNode=null,e.callbackPriority=0,re(me,function(){return jd(),null})):(e.callbackNode=null,e.callbackPriority=0),n=0!==(13878&a.flags),0!==(13878&a.subtreeFlags)||n){n=D.T,D.T=null,r=z.p,z.p=2,i=pc,pc|=4;try{!function(e,a){if(e=e.containerInfo,hu=bm,nn(e=tn(e))){if("selectionStart"in e)var t={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(t=(t=e.ownerDocument)&&t.defaultView||window).getSelection&&t.getSelection();if(n&&0!==n.rangeCount){t=n.anchorNode;var r=n.anchorOffset,l=n.focusNode;n=n.focusOffset;try{t.nodeType,l.nodeType}catch(v){t=null;break e}var i=0,o=-1,c=-1,d=0,u=0,m=e,p=null;a:for(;;){for(var h;m!==t||0!==r&&3!==m.nodeType||(o=i+r),m!==l||0!==n&&3!==m.nodeType||(c=i+n),3===m.nodeType&&(i+=m.nodeValue.length),null!==(h=m.firstChild);)p=m,m=h;for(;;){if(m===e)break a;if(p===t&&++d===r&&(o=i),p===l&&++u===n&&(c=i),null!==(h=m.nextSibling))break;p=(m=p).parentNode}m=h}t=-1===o||-1===c?null:{start:o,end:c}}else t=null}t=t||{start:0,end:0}}else t=null;for(fu={focusedElem:e,selectionRange:t},bm=!1,Ao=a;null!==Ao;)if(e=(a=Ao).child,0!==(1028&a.subtreeFlags)&&null!==e)e.return=a,Ao=e;else for(;null!==Ao;){switch(l=(a=Ao).alternate,e=a.flags,a.tag){case 0:if(0!==(4&e)&&null!==(e=null!==(e=a.updateQueue)?e.events:null))for(t=0;t<e.length;t++)(r=e[t]).ref.impl=r.nextImpl;break;case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==l){e=void 0,t=a,r=l.memoizedProps,l=l.memoizedState,n=t.stateNode;try{var f=Ni(t.type,r);e=n.getSnapshotBeforeUpdate(f,l),n.__reactInternalSnapshotBeforeUpdate=e}catch(g){_d(t,t.return,g)}}break;case 3:if(0!==(1024&e))if(9===(t=(e=a.stateNode.containerInfo).nodeType))Tu(e);else if(1===t)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Tu(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(s(163))}if(null!==(e=a.sibling)){e.return=a.return,Ao=e;break}Ao=a.return}}(e,a)}finally{pc=i,z.p=r,D.T=n}}Ic=1,vd(),gd(),xd()}}function vd(){if(1===Ic){Ic=0;var e=qc,a=Fc,t=0!==(13878&a.flags);if(0!==(13878&a.subtreeFlags)||t){t=D.T,D.T=null;var n=z.p;z.p=2;var r=pc;pc|=4;try{Wo(a,e);var l=fu,s=tn(e.containerInfo),i=l.focusedElem,o=l.selectionRange;if(s!==i&&i&&i.ownerDocument&&an(i.ownerDocument.documentElement,i)){if(null!==o&&nn(i)){var c=o.start,d=o.end;if(void 0===d&&(d=c),"selectionStart"in i)i.selectionStart=c,i.selectionEnd=Math.min(d,i.value.length);else{var u=i.ownerDocument||document,m=u&&u.defaultView||window;if(m.getSelection){var p=m.getSelection(),h=i.textContent.length,f=Math.min(o.start,h),v=void 0===o.end?f:Math.min(o.end,h);!p.extend&&f>v&&(s=v,v=f,f=s);var g=en(i,f),x=en(i,v);if(g&&x&&(1!==p.rangeCount||p.anchorNode!==g.node||p.anchorOffset!==g.offset||p.focusNode!==x.node||p.focusOffset!==x.offset)){var b=u.createRange();b.setStart(g.node,g.offset),p.removeAllRanges(),f>v?(p.addRange(b),p.extend(x.node,x.offset)):(b.setEnd(x.node,x.offset),p.addRange(b))}}}}for(u=[],p=i;p=p.parentNode;)1===p.nodeType&&u.push({element:p,left:p.scrollLeft,top:p.scrollTop});for("function"===typeof i.focus&&i.focus(),i=0;i<u.length;i++){var y=u[i];y.element.scrollLeft=y.left,y.element.scrollTop=y.top}}bm=!!hu,fu=hu=null}finally{pc=r,z.p=n,D.T=t}}e.current=a,Ic=2}}function gd(){if(2===Ic){Ic=0;var e=qc,a=Fc,t=0!==(8772&a.flags);if(0!==(8772&a.subtreeFlags)||t){t=D.T,D.T=null;var n=z.p;z.p=2;var r=pc;pc|=4;try{Do(e,a.alternate,a)}finally{pc=r,z.p=n,D.T=t}}Ic=3}}function xd(){if(4===Ic||3===Ic){Ic=0,ie();var e=qc,a=Fc,t=Mc,n=Vc;0!==(10256&a.subtreeFlags)||0!==(10256&a.flags)?Ic=5:(Ic=0,Fc=qc=null,bd(e,e.pendingLanes));var r=e.pendingLanes;if(0===r&&(Oc=null),Ie(t),a=a.stateNode,xe&&"function"===typeof xe.onCommitFiberRoot)try{xe.onCommitFiberRoot(ge,a,void 0,128===(128&a.current.flags))}catch(o){}if(null!==n){a=D.T,r=z.p,z.p=2,D.T=null;try{for(var l=e.onRecoverableError,s=0;s<n.length;s++){var i=n[s];l(i.value,{componentStack:i.stack})}}finally{D.T=a,z.p=r}}0!==(3&Mc)&&yd(),zd(e),r=e.pendingLanes,0!==(261930&t)&&0!==(42&r)?e===Wc?Hc++:(Hc=0,Wc=e):Hc=0,Od(0,!1)}}function bd(e,a){0===(e.pooledCacheLanes&=a)&&(null!=(a=e.pooledCache)&&(e.pooledCache=null,Mr(a)))}function yd(){return vd(),gd(),xd(),jd()}function jd(){if(5!==Ic)return!1;var e=qc,a=Uc;Uc=0;var t=Ie(Mc),n=D.T,r=z.p;try{z.p=32>t?32:t,D.T=null,t=Bc,Bc=null;var l=qc,i=Mc;if(Ic=0,Fc=qc=null,Mc=0,0!==(6&pc))throw Error(s(331));var o=pc;if(pc|=4,oc(l.current),ec(l,l.current,i,t),pc=o,Od(0,!1),xe&&"function"===typeof xe.onPostCommitFiberRoot)try{xe.onPostCommitFiberRoot(ge,l)}catch(c){}return!0}finally{z.p=r,D.T=n,bd(e,a)}}function Nd(e,a,t){a=Qn(t,a),null!==(e=bl(e,a=Ei(e.stateNode,a,2),2))&&(Le(e,2),zd(e))}function _d(e,a,t){if(3===e.tag)Nd(e,e,t);else for(;null!==a;){if(3===a.tag){Nd(a,e,t);break}if(1===a.tag){var n=a.stateNode;if("function"===typeof a.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===Oc||!Oc.has(n))){e=Qn(t,e),null!==(n=bl(a,t=Ti(2),2))&&(Pi(t,n,a,e),Le(n,2),zd(n));break}}a=a.return}}function wd(e,a,t){var n=e.pingCache;if(null===n){n=e.pingCache=new mc;var r=new Set;n.set(a,r)}else void 0===(r=n.get(a))&&(r=new Set,n.set(a,r));r.has(t)||(jc=!0,r.add(t),e=Cd.bind(null,e,a,t),a.then(e,e))}function Cd(e,a,t){var n=e.pingCache;null!==n&&n.delete(a),e.pingedLanes|=e.suspendedLanes&t,e.warmLanes&=~t,hc===e&&(vc&t)===t&&(4===_c||3===_c&&(62914560&vc)===vc&&300>oe()-Lc?0===(2&pc)&&ad(e,0):Sc|=t,Ec===vc&&(Ec=0)),zd(e)}function Sd(e,a){0===a&&(a=Pe()),null!==(e=An(e,a))&&(Le(e,a),zd(e))}function kd(e){var a=e.memoizedState,t=0;null!==a&&(t=a.retryLane),Sd(e,t)}function Ed(e,a){var t=0;switch(e.tag){case 31:case 13:var n=e.stateNode,r=e.memoizedState;null!==r&&(t=r.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(s(314))}null!==n&&n.delete(a),Sd(e,t)}var Td=null,Pd=null,Rd=!1,Ld=!1,Ad=!1,Dd=0;function zd(e){e!==Pd&&null===e.next&&(null===Pd?Td=Pd=e:Pd=Pd.next=e),Ld=!0,Rd||(Rd=!0,wu(function(){0!==(6&pc)?re(de,Id):qd()}))}function Od(e,a){if(!Ad&&Ld){Ad=!0;do{for(var t=!1,n=Td;null!==n;){if(!a)if(0!==e){var r=n.pendingLanes;if(0===r)var l=0;else{var s=n.suspendedLanes,i=n.pingedLanes;l=(1<<31-ye(42|e)+1)-1,l=201326741&(l&=r&~(s&~i))?201326741&l|1:l?2|l:0}0!==l&&(t=!0,Ud(n,l))}else l=vc,0===(3&(l=ke(n,n===hc?l:0,null!==n.cancelPendingCommit||-1!==n.timeoutHandle)))||Ee(n,l)||(t=!0,Ud(n,l));n=n.next}}while(t);Ad=!1}}function Id(){qd()}function qd(){Ld=Rd=!1;var e=0;0!==Dd&&function(){var e=window.event;if(e&&"popstate"===e.type)return e!==yu&&(yu=e,!0);return yu=null,!1}()&&(e=Dd);for(var a=oe(),t=null,n=Td;null!==n;){var r=n.next,l=Fd(n,a);0===l?(n.next=null,null===t?Td=r:t.next=r,null===r&&(Pd=t)):(t=n,(0!==e||0!==(3&l))&&(Ld=!0)),n=r}0!==Ic&&5!==Ic||Od(e,!1),0!==Dd&&(Dd=0)}function Fd(e,a){for(var t=e.suspendedLanes,n=e.pingedLanes,r=e.expirationTimes,l=-62914561&e.pendingLanes;0<l;){var s=31-ye(l),i=1<<s,o=r[s];-1===o?0!==(i&t)&&0===(i&n)||(r[s]=Te(i,a)):o<=a&&(e.expiredLanes|=i),l&=~i}if(t=vc,t=ke(e,e===(a=hc)?t:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),n=e.callbackNode,0===t||e===a&&(2===gc||9===gc)||null!==e.cancelPendingCommit)return null!==n&&null!==n&&le(n),e.callbackNode=null,e.callbackPriority=0;if(0===(3&t)||Ee(e,t)){if((a=t&-t)===e.callbackPriority)return a;switch(null!==n&&le(n),Ie(t)){case 2:case 8:t=ue;break;case 32:default:t=me;break;case 268435456:t=he}return n=Md.bind(null,e),t=re(t,n),e.callbackPriority=a,e.callbackNode=t,a}return null!==n&&null!==n&&le(n),e.callbackPriority=2,e.callbackNode=null,2}function Md(e,a){if(0!==Ic&&5!==Ic)return e.callbackNode=null,e.callbackPriority=0,null;var t=e.callbackNode;if(yd()&&e.callbackNode!==t)return null;var n=vc;return 0===(n=ke(e,e===hc?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Kc(e,n,a),Fd(e,oe()),null!=e.callbackNode&&e.callbackNode===t?Md.bind(null,e):null)}function Ud(e,a){if(yd())return null;Kc(e,a,!0)}function Bd(){if(0===Dd){var e=Vr;0===e&&(e=_e,0===(261888&(_e<<=1))&&(_e=256)),Dd=e}return Dd}function Vd(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Ra(""+e)}function Hd(e,a){var t=a.ownerDocument.createElement("input");return t.name=a.name,t.value=a.value,e.id&&t.setAttribute("form",e.id),a.parentNode.insertBefore(t,a),e=new FormData(e),t.parentNode.removeChild(t),e}for(var Wd=0;Wd<wn.length;Wd++){var Gd=wn[Wd];Cn(Gd.toLowerCase(),"on"+(Gd[0].toUpperCase()+Gd.slice(1)))}Cn(vn,"onAnimationEnd"),Cn(gn,"onAnimationIteration"),Cn(xn,"onAnimationStart"),Cn("dblclick","onDoubleClick"),Cn("focusin","onFocus"),Cn("focusout","onBlur"),Cn(bn,"onTransitionRun"),Cn(yn,"onTransitionStart"),Cn(jn,"onTransitionCancel"),Cn(Nn,"onTransitionEnd"),ra("onMouseEnter",["mouseout","mouseover"]),ra("onMouseLeave",["mouseout","mouseover"]),ra("onPointerEnter",["pointerout","pointerover"]),ra("onPointerLeave",["pointerout","pointerover"]),na("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),na("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),na("onBeforeInput",["compositionend","keypress","textInput","paste"]),na("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),na("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),na("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $d="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qd=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat($d));function Kd(e,a){a=0!==(4&a);for(var t=0;t<e.length;t++){var n=e[t],r=n.event;n=n.listeners;e:{var l=void 0;if(a)for(var s=n.length-1;0<=s;s--){var i=n[s],o=i.instance,c=i.currentTarget;if(i=i.listener,o!==l&&r.isPropagationStopped())break e;l=i,r.currentTarget=c;try{l(r)}catch(d){Sn(d)}r.currentTarget=null,l=o}else for(s=0;s<n.length;s++){if(o=(i=n[s]).instance,c=i.currentTarget,i=i.listener,o!==l&&r.isPropagationStopped())break e;l=i,r.currentTarget=c;try{l(r)}catch(d){Sn(d)}r.currentTarget=null,l=o}}}}function Jd(e,a){var t=a[He];void 0===t&&(t=a[He]=new Set);var n=e+"__bubble";t.has(n)||(eu(a,e,2,!1),t.add(n))}function Yd(e,a,t){var n=0;a&&(n|=4),eu(t,e,n,a)}var Xd="_reactListening"+Math.random().toString(36).slice(2);function Zd(e){if(!e[Xd]){e[Xd]=!0,aa.forEach(function(a){"selectionchange"!==a&&(Qd.has(a)||Yd(a,!1,e),Yd(a,!0,e))});var a=9===e.nodeType?e:e.ownerDocument;null===a||a[Xd]||(a[Xd]=!0,Yd("selectionchange",!1,a))}}function eu(e,a,t,n){switch(Sm(a)){case 2:var r=ym;break;case 8:r=jm;break;default:r=Nm}t=r.bind(null,a,t,e),r=void 0,!Ba||"touchstart"!==a&&"touchmove"!==a&&"wheel"!==a||(r=!0),n?void 0!==r?e.addEventListener(a,t,{capture:!0,passive:r}):e.addEventListener(a,t,!0):void 0!==r?e.addEventListener(a,t,{passive:r}):e.addEventListener(a,t,!1)}function au(e,a,t,n,r){var l=n;if(0===(1&a)&&0===(2&a)&&null!==n)e:for(;;){if(null===n)return;var s=n.tag;if(3===s||4===s){var i=n.stateNode.containerInfo;if(i===r)break;if(4===s)for(s=n.return;null!==s;){var c=s.tag;if((3===c||4===c)&&s.stateNode.containerInfo===r)return;s=s.return}for(;null!==i;){if(null===(s=Je(i)))return;if(5===(c=s.tag)||6===c||26===c||27===c){n=l=s;continue e}i=i.parentNode}}n=n.return}Fa(function(){var n=l,r=Da(t),s=[];e:{var i=_n.get(e);if(void 0!==i){var c=tt,d=e;switch(e){case"keypress":if(0===Qa(t))break e;case"keydown":case"keyup":c=gt;break;case"focusin":d="focus",c=ot;break;case"focusout":d="blur",c=ot;break;case"beforeblur":case"afterblur":c=ot;break;case"click":if(2===t.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=st;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=it;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=bt;break;case vn:case gn:case xn:c=ct;break;case Nn:c=yt;break;case"scroll":case"scrollend":c=rt;break;case"wheel":c=jt;break;case"copy":case"cut":case"paste":c=dt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=xt;break;case"toggle":case"beforetoggle":c=Nt}var u=0!==(4&a),m=!u&&("scroll"===e||"scrollend"===e),p=u?null!==i?i+"Capture":null:i;u=[];for(var h,f=n;null!==f;){var v=f;if(h=v.stateNode,5!==(v=v.tag)&&26!==v&&27!==v||null===h||null===p||null!=(v=Ma(f,p))&&u.push(tu(f,v,h)),m)break;f=f.return}0<u.length&&(i=new c(i,d,null,t,r),s.push({event:i,listeners:u}))}}if(0===(7&a)){if(c="mouseout"===e||"pointerout"===e,(!(i="mouseover"===e||"pointerover"===e)||t===Aa||!(d=t.relatedTarget||t.fromElement)||!Je(d)&&!d[Ve])&&(c||i)&&(i=r.window===r?r:(i=r.ownerDocument)?i.defaultView||i.parentWindow:window,c?(c=n,null!==(d=(d=t.relatedTarget||t.toElement)?Je(d):null)&&(m=o(d),u=d.tag,d!==m||5!==u&&27!==u&&6!==u)&&(d=null)):(c=null,d=n),c!==d)){if(u=st,v="onMouseLeave",p="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=xt,v="onPointerLeave",p="onPointerEnter",f="pointer"),m=null==c?i:Xe(c),h=null==d?i:Xe(d),(i=new u(v,f+"leave",c,t,r)).target=m,i.relatedTarget=h,v=null,Je(r)===n&&((u=new u(p,f+"enter",d,t,r)).target=h,u.relatedTarget=m,v=u),m=v,c&&d)e:{for(u=ru,f=d,h=0,v=p=c;v;v=u(v))h++;v=0;for(var g=f;g;g=u(g))v++;for(;0<h-v;)p=u(p),h--;for(;0<v-h;)f=u(f),v--;for(;h--;){if(p===f||null!==f&&p===f.alternate){u=p;break e}p=u(p),f=u(f)}u=null}else u=null;null!==c&&lu(s,i,c,u,!1),null!==d&&null!==m&&lu(s,m,d,u,!0)}if("select"===(c=(i=n?Xe(n):window).nodeName&&i.nodeName.toLowerCase())||"input"===c&&"file"===i.type)var x=Mt;else if(Dt(i))if(Ut)x=Jt;else{x=Qt;var b=$t}else!(c=i.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==i.type&&"radio"!==i.type?n&&Ea(n.elementType)&&(x=Mt):x=Kt;switch(x&&(x=x(e,n))?zt(s,x,t,r):(b&&b(e,i,n),"focusout"===e&&n&&"number"===i.type&&null!=n.memoizedProps.value&&ya(i,"number",i.value)),b=n?Xe(n):window,e){case"focusin":(Dt(b)||"true"===b.contentEditable)&&(ln=b,sn=n,on=null);break;case"focusout":on=sn=ln=null;break;case"mousedown":cn=!0;break;case"contextmenu":case"mouseup":case"dragend":cn=!1,dn(s,t,r);break;case"selectionchange":if(rn)break;case"keydown":case"keyup":dn(s,t,r)}var y;if(wt)e:{switch(e){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else Lt?Pt(e,t)&&(j="onCompositionEnd"):"keydown"===e&&229===t.keyCode&&(j="onCompositionStart");j&&(kt&&"ko"!==t.locale&&(Lt||"onCompositionStart"!==j?"onCompositionEnd"===j&&Lt&&(y=$a()):(Wa="value"in(Ha=r)?Ha.value:Ha.textContent,Lt=!0)),0<(b=nu(n,j)).length&&(j=new ut(j,e,null,t,r),s.push({event:j,listeners:b}),y?j.data=y:null!==(y=Rt(t))&&(j.data=y))),(y=St?function(e,a){switch(e){case"compositionend":return Rt(a);case"keypress":return 32!==a.which?null:(Tt=!0,Et);case"textInput":return(e=a.data)===Et&&Tt?null:e;default:return null}}(e,t):function(e,a){if(Lt)return"compositionend"===e||!wt&&Pt(e,a)?(e=$a(),Ga=Wa=Ha=null,Lt=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return kt&&"ko"!==a.locale?null:a.data}}(e,t))&&(0<(j=nu(n,"onBeforeInput")).length&&(b=new ut("onBeforeInput","beforeinput",null,t,r),s.push({event:b,listeners:j}),b.data=y)),function(e,a,t,n,r){if("submit"===a&&t&&t.stateNode===r){var l=Vd((r[Be]||null).action),s=n.submitter;s&&null!==(a=(a=s[Be]||null)?Vd(a.formAction):s.getAttribute("formAction"))&&(l=a,s=null);var i=new tt("action","action",null,n,r);e.push({event:i,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(0!==Dd){var e=s?Hd(r,s):new FormData(r);ei(t,{pending:!0,data:e,method:r.method,action:l},null,e)}}else"function"===typeof l&&(i.preventDefault(),e=s?Hd(r,s):new FormData(r),ei(t,{pending:!0,data:e,method:r.method,action:l},l,e))},currentTarget:r}]})}}(s,e,n,t,r)}Kd(s,a)})}function tu(e,a,t){return{instance:e,listener:a,currentTarget:t}}function nu(e,a){for(var t=a+"Capture",n=[];null!==e;){var r=e,l=r.stateNode;if(5!==(r=r.tag)&&26!==r&&27!==r||null===l||(null!=(r=Ma(e,t))&&n.unshift(tu(e,r,l)),null!=(r=Ma(e,a))&&n.push(tu(e,r,l))),3===e.tag)return n;e=e.return}return[]}function ru(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function lu(e,a,t,n,r){for(var l=a._reactName,s=[];null!==t&&t!==n;){var i=t,o=i.alternate,c=i.stateNode;if(i=i.tag,null!==o&&o===n)break;5!==i&&26!==i&&27!==i||null===c||(o=c,r?null!=(c=Ma(t,l))&&s.unshift(tu(t,c,o)):r||null!=(c=Ma(t,l))&&s.push(tu(t,c,o))),t=t.return}0!==s.length&&e.push({event:a,listeners:s})}var su=/\r\n?/g,iu=/\u0000|\uFFFD/g;function ou(e){return("string"===typeof e?e:""+e).replace(su,"\n").replace(iu,"")}function cu(e,a){return a=ou(a),ou(e)===a}function du(e,a,t,n,r,l){switch(t){case"children":"string"===typeof n?"body"===a||"textarea"===a&&""===n||wa(e,n):("number"===typeof n||"bigint"===typeof n)&&"body"!==a&&wa(e,""+n);break;case"className":ca(e,"class",n);break;case"tabIndex":ca(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":ca(e,t,n);break;case"style":ka(e,n,l);break;case"data":if("object"!==a){ca(e,"data",n);break}case"src":case"href":if(""===n&&("a"!==a||"href"!==t)){e.removeAttribute(t);break}if(null==n||"function"===typeof n||"symbol"===typeof n||"boolean"===typeof n){e.removeAttribute(t);break}n=Ra(""+n),e.setAttribute(t,n);break;case"action":case"formAction":if("function"===typeof n){e.setAttribute(t,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof l&&("formAction"===t?("input"!==a&&du(e,a,"name",r.name,r,null),du(e,a,"formEncType",r.formEncType,r,null),du(e,a,"formMethod",r.formMethod,r,null),du(e,a,"formTarget",r.formTarget,r,null)):(du(e,a,"encType",r.encType,r,null),du(e,a,"method",r.method,r,null),du(e,a,"target",r.target,r,null))),null==n||"symbol"===typeof n||"boolean"===typeof n){e.removeAttribute(t);break}n=Ra(""+n),e.setAttribute(t,n);break;case"onClick":null!=n&&(e.onclick=La);break;case"onScroll":null!=n&&Jd("scroll",e);break;case"onScrollEnd":null!=n&&Jd("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=n){if("object"!==typeof n||!("__html"in n))throw Error(s(61));if(null!=(t=n.__html)){if(null!=r.children)throw Error(s(60));e.innerHTML=t}}break;case"multiple":e.multiple=n&&"function"!==typeof n&&"symbol"!==typeof n;break;case"muted":e.muted=n&&"function"!==typeof n&&"symbol"!==typeof n;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==n||"function"===typeof n||"boolean"===typeof n||"symbol"===typeof n){e.removeAttribute("xlink:href");break}t=Ra(""+n),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=n&&"function"!==typeof n&&"symbol"!==typeof n?e.setAttribute(t,""+n):e.removeAttribute(t);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&"function"!==typeof n&&"symbol"!==typeof n?e.setAttribute(t,""):e.removeAttribute(t);break;case"capture":case"download":!0===n?e.setAttribute(t,""):!1!==n&&null!=n&&"function"!==typeof n&&"symbol"!==typeof n?e.setAttribute(t,n):e.removeAttribute(t);break;case"cols":case"rows":case"size":case"span":null!=n&&"function"!==typeof n&&"symbol"!==typeof n&&!isNaN(n)&&1<=n?e.setAttribute(t,n):e.removeAttribute(t);break;case"rowSpan":case"start":null==n||"function"===typeof n||"symbol"===typeof n||isNaN(n)?e.removeAttribute(t):e.setAttribute(t,n);break;case"popover":Jd("beforetoggle",e),Jd("toggle",e),oa(e,"popover",n);break;case"xlinkActuate":da(e,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":da(e,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":da(e,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":da(e,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":da(e,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":da(e,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":da(e,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":da(e,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":da(e,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":oa(e,"is",n);break;case"innerText":case"textContent":break;default:(!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&oa(e,t=Ta.get(t)||t,n)}}function uu(e,a,t,n,r,l){switch(t){case"style":ka(e,n,l);break;case"dangerouslySetInnerHTML":if(null!=n){if("object"!==typeof n||!("__html"in n))throw Error(s(61));if(null!=(t=n.__html)){if(null!=r.children)throw Error(s(60));e.innerHTML=t}}break;case"children":"string"===typeof n?wa(e,n):("number"===typeof n||"bigint"===typeof n)&&wa(e,""+n);break;case"onScroll":null!=n&&Jd("scroll",e);break;case"onScrollEnd":null!=n&&Jd("scrollend",e);break;case"onClick":null!=n&&(e.onclick=La);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:ta.hasOwnProperty(t)||("o"!==t[0]||"n"!==t[1]||(r=t.endsWith("Capture"),a=t.slice(2,r?t.length-7:void 0),"function"===typeof(l=null!=(l=e[Be]||null)?l[t]:null)&&e.removeEventListener(a,l,r),"function"!==typeof n)?t in e?e[t]=n:!0===n?e.setAttribute(t,""):oa(e,t,n):("function"!==typeof l&&null!==l&&(t in e?e[t]=null:e.hasAttribute(t)&&e.removeAttribute(t)),e.addEventListener(a,n,r)))}}function mu(e,a,t){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Jd("error",e),Jd("load",e);var n,r=!1,l=!1;for(n in t)if(t.hasOwnProperty(n)){var i=t[n];if(null!=i)switch(n){case"src":r=!0;break;case"srcSet":l=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:du(e,a,n,i,t,null)}}return l&&du(e,a,"srcSet",t.srcSet,t,null),void(r&&du(e,a,"src",t.src,t,null));case"input":Jd("invalid",e);var o=n=i=l=null,c=null,d=null;for(r in t)if(t.hasOwnProperty(r)){var u=t[r];if(null!=u)switch(r){case"name":l=u;break;case"type":i=u;break;case"checked":c=u;break;case"defaultChecked":d=u;break;case"value":n=u;break;case"defaultValue":o=u;break;case"children":case"dangerouslySetInnerHTML":if(null!=u)throw Error(s(137,a));break;default:du(e,a,r,u,t,null)}}return void ba(e,n,o,c,d,i,l,!1);case"select":for(l in Jd("invalid",e),r=i=n=null,t)if(t.hasOwnProperty(l)&&null!=(o=t[l]))switch(l){case"value":n=o;break;case"defaultValue":i=o;break;case"multiple":r=o;default:du(e,a,l,o,t,null)}return a=n,t=i,e.multiple=!!r,void(null!=a?ja(e,!!r,a,!1):null!=t&&ja(e,!!r,t,!0));case"textarea":for(i in Jd("invalid",e),n=l=r=null,t)if(t.hasOwnProperty(i)&&null!=(o=t[i]))switch(i){case"value":r=o;break;case"defaultValue":l=o;break;case"children":n=o;break;case"dangerouslySetInnerHTML":if(null!=o)throw Error(s(91));break;default:du(e,a,i,o,t,null)}return void _a(e,r,l,n);case"option":for(c in t)if(t.hasOwnProperty(c)&&null!=(r=t[c]))if("selected"===c)e.selected=r&&"function"!==typeof r&&"symbol"!==typeof r;else du(e,a,c,r,t,null);return;case"dialog":Jd("beforetoggle",e),Jd("toggle",e),Jd("cancel",e),Jd("close",e);break;case"iframe":case"object":Jd("load",e);break;case"video":case"audio":for(r=0;r<$d.length;r++)Jd($d[r],e);break;case"image":Jd("error",e),Jd("load",e);break;case"details":Jd("toggle",e);break;case"embed":case"source":case"link":Jd("error",e),Jd("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(d in t)if(t.hasOwnProperty(d)&&null!=(r=t[d]))switch(d){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:du(e,a,d,r,t,null)}return;default:if(Ea(a)){for(u in t)t.hasOwnProperty(u)&&(void 0!==(r=t[u])&&uu(e,a,u,r,t,void 0));return}}for(o in t)t.hasOwnProperty(o)&&(null!=(r=t[o])&&du(e,a,o,r,t,null))}function pu(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}var hu=null,fu=null;function vu(e){return 9===e.nodeType?e:e.ownerDocument}function gu(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function xu(e,a){if(0===e)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===a?0:e}function bu(e,a){return"textarea"===e||"noscript"===e||"string"===typeof a.children||"number"===typeof a.children||"bigint"===typeof a.children||"object"===typeof a.dangerouslySetInnerHTML&&null!==a.dangerouslySetInnerHTML&&null!=a.dangerouslySetInnerHTML.__html}var yu=null;var ju="function"===typeof setTimeout?setTimeout:void 0,Nu="function"===typeof clearTimeout?clearTimeout:void 0,_u="function"===typeof Promise?Promise:void 0,wu="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof _u?function(e){return _u.resolve(null).then(e).catch(Cu)}:ju;function Cu(e){setTimeout(function(){throw e})}function Su(e){return"head"===e}function ku(e,a){var t=a,n=0;do{var r=t.nextSibling;if(e.removeChild(t),r&&8===r.nodeType)if("/$"===(t=r.data)||"/&"===t){if(0===n)return e.removeChild(r),void Hm(a);n--}else if("$"===t||"$?"===t||"$~"===t||"$!"===t||"&"===t)n++;else if("html"===t)qu(e.ownerDocument.documentElement);else if("head"===t){qu(t=e.ownerDocument.head);for(var l=t.firstChild;l;){var s=l.nextSibling,i=l.nodeName;l[Qe]||"SCRIPT"===i||"STYLE"===i||"LINK"===i&&"stylesheet"===l.rel.toLowerCase()||t.removeChild(l),l=s}}else"body"===t&&qu(e.ownerDocument.body);t=r}while(t);Hm(a)}function Eu(e,a){var t=e;e=0;do{var n=t.nextSibling;if(1===t.nodeType?a?(t._stashedDisplay=t.style.display,t.style.display="none"):(t.style.display=t._stashedDisplay||"",""===t.getAttribute("style")&&t.removeAttribute("style")):3===t.nodeType&&(a?(t._stashedText=t.nodeValue,t.nodeValue=""):t.nodeValue=t._stashedText||""),n&&8===n.nodeType)if("/$"===(t=n.data)){if(0===e)break;e--}else"$"!==t&&"$?"!==t&&"$~"!==t&&"$!"!==t||e++;t=n}while(t)}function Tu(e){var a=e.firstChild;for(a&&10===a.nodeType&&(a=a.nextSibling);a;){var t=a;switch(a=a.nextSibling,t.nodeName){case"HTML":case"HEAD":case"BODY":Tu(t),Ke(t);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===t.rel.toLowerCase())continue}e.removeChild(t)}}function Pu(e,a){for(;8!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!a)return null;if(null===(e=Au(e.nextSibling)))return null}return e}function Ru(e){return"$?"===e.data||"$~"===e.data}function Lu(e){return"$!"===e.data||"$?"===e.data&&"loading"!==e.ownerDocument.readyState}function Au(e){for(;null!=e;e=e.nextSibling){var a=e.nodeType;if(1===a||3===a)break;if(8===a){if("$"===(a=e.data)||"$!"===a||"$?"===a||"$~"===a||"&"===a||"F!"===a||"F"===a)break;if("/$"===a||"/&"===a)return null}}return e}var Du=null;function zu(e){e=e.nextSibling;for(var a=0;e;){if(8===e.nodeType){var t=e.data;if("/$"===t||"/&"===t){if(0===a)return Au(e.nextSibling);a--}else"$"!==t&&"$!"!==t&&"$?"!==t&&"$~"!==t&&"&"!==t||a++}e=e.nextSibling}return null}function Ou(e){e=e.previousSibling;for(var a=0;e;){if(8===e.nodeType){var t=e.data;if("$"===t||"$!"===t||"$?"===t||"$~"===t||"&"===t){if(0===a)return e;a--}else"/$"!==t&&"/&"!==t||a++}e=e.previousSibling}return null}function Iu(e,a,t){switch(a=vu(t),e){case"html":if(!(e=a.documentElement))throw Error(s(452));return e;case"head":if(!(e=a.head))throw Error(s(453));return e;case"body":if(!(e=a.body))throw Error(s(454));return e;default:throw Error(s(451))}}function qu(e){for(var a=e.attributes;a.length;)e.removeAttributeNode(a[0]);Ke(e)}var Fu=new Map,Mu=new Set;function Uu(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Bu=z.d;z.d={f:function(){var e=Bu.f(),a=Zc();return e||a},r:function(e){var a=Ye(e);null!==a&&5===a.tag&&"form"===a.type?ti(a):Bu.r(e)},D:function(e){Bu.D(e),Hu("dns-prefetch",e,null)},C:function(e,a){Bu.C(e,a),Hu("preconnect",e,a)},L:function(e,a,t){Bu.L(e,a,t);var n=Vu;if(n&&e&&a){var r='link[rel="preload"][as="'+ga(a)+'"]';"image"===a&&t&&t.imageSrcSet?(r+='[imagesrcset="'+ga(t.imageSrcSet)+'"]',"string"===typeof t.imageSizes&&(r+='[imagesizes="'+ga(t.imageSizes)+'"]')):r+='[href="'+ga(e)+'"]';var l=r;switch(a){case"style":l=Gu(e);break;case"script":l=Ku(e)}Fu.has(l)||(e=p({rel:"preload",href:"image"===a&&t&&t.imageSrcSet?void 0:e,as:a},t),Fu.set(l,e),null!==n.querySelector(r)||"style"===a&&n.querySelector($u(l))||"script"===a&&n.querySelector(Ju(l))||(mu(a=n.createElement("link"),"link",e),ea(a),n.head.appendChild(a)))}},m:function(e,a){Bu.m(e,a);var t=Vu;if(t&&e){var n=a&&"string"===typeof a.as?a.as:"script",r='link[rel="modulepreload"][as="'+ga(n)+'"][href="'+ga(e)+'"]',l=r;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":l=Ku(e)}if(!Fu.has(l)&&(e=p({rel:"modulepreload",href:e},a),Fu.set(l,e),null===t.querySelector(r))){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(t.querySelector(Ju(l)))return}mu(n=t.createElement("link"),"link",e),ea(n),t.head.appendChild(n)}}},X:function(e,a){Bu.X(e,a);var t=Vu;if(t&&e){var n=Ze(t).hoistableScripts,r=Ku(e),l=n.get(r);l||((l=t.querySelector(Ju(r)))||(e=p({src:e,async:!0},a),(a=Fu.get(r))&&em(e,a),ea(l=t.createElement("script")),mu(l,"link",e),t.head.appendChild(l)),l={type:"script",instance:l,count:1,state:null},n.set(r,l))}},S:function(e,a,t){Bu.S(e,a,t);var n=Vu;if(n&&e){var r=Ze(n).hoistableStyles,l=Gu(e);a=a||"default";var s=r.get(l);if(!s){var i={loading:0,preload:null};if(s=n.querySelector($u(l)))i.loading=5;else{e=p({rel:"stylesheet",href:e,"data-precedence":a},t),(t=Fu.get(l))&&Zu(e,t);var o=s=n.createElement("link");ea(o),mu(o,"link",e),o._p=new Promise(function(e,a){o.onload=e,o.onerror=a}),o.addEventListener("load",function(){i.loading|=1}),o.addEventListener("error",function(){i.loading|=2}),i.loading|=4,Xu(s,a,n)}s={type:"stylesheet",instance:s,count:1,state:i},r.set(l,s)}}},M:function(e,a){Bu.M(e,a);var t=Vu;if(t&&e){var n=Ze(t).hoistableScripts,r=Ku(e),l=n.get(r);l||((l=t.querySelector(Ju(r)))||(e=p({src:e,async:!0,type:"module"},a),(a=Fu.get(r))&&em(e,a),ea(l=t.createElement("script")),mu(l,"link",e),t.head.appendChild(l)),l={type:"script",instance:l,count:1,state:null},n.set(r,l))}}};var Vu="undefined"===typeof document?null:document;function Hu(e,a,t){var n=Vu;if(n&&"string"===typeof a&&a){var r=ga(a);r='link[rel="'+e+'"][href="'+r+'"]',"string"===typeof t&&(r+='[crossorigin="'+t+'"]'),Mu.has(r)||(Mu.add(r),e={rel:e,crossOrigin:t,href:a},null===n.querySelector(r)&&(mu(a=n.createElement("link"),"link",e),ea(a),n.head.appendChild(a)))}}function Wu(e,a,t,n){var r,l,i,o,c=(c=G.current)?Uu(c):null;if(!c)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof t.precedence&&"string"===typeof t.href?(a=Gu(t.href),(n=(t=Ze(c).hoistableStyles).get(a))||(n={type:"style",instance:null,count:0,state:null},t.set(a,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===t.rel&&"string"===typeof t.href&&"string"===typeof t.precedence){e=Gu(t.href);var d=Ze(c).hoistableStyles,u=d.get(e);if(u||(c=c.ownerDocument||c,u={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,u),(d=c.querySelector($u(e)))&&!d._p&&(u.instance=d,u.state.loading=5),Fu.has(e)||(t={rel:"preload",as:"style",href:t.href,crossOrigin:t.crossOrigin,integrity:t.integrity,media:t.media,hrefLang:t.hrefLang,referrerPolicy:t.referrerPolicy},Fu.set(e,t),d||(r=c,l=e,i=t,o=u.state,r.querySelector('link[rel="preload"][as="style"]['+l+"]")?o.loading=1:(l=r.createElement("link"),o.preload=l,l.addEventListener("load",function(){return o.loading|=1}),l.addEventListener("error",function(){return o.loading|=2}),mu(l,"link",i),ea(l),r.head.appendChild(l))))),a&&null===n)throw Error(s(528,""));return u}if(a&&null!==n)throw Error(s(529,""));return null;case"script":return a=t.async,"string"===typeof(t=t.src)&&a&&"function"!==typeof a&&"symbol"!==typeof a?(a=Ku(t),(n=(t=Ze(c).hoistableScripts).get(a))||(n={type:"script",instance:null,count:0,state:null},t.set(a,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Gu(e){return'href="'+ga(e)+'"'}function $u(e){return'link[rel="stylesheet"]['+e+"]"}function Qu(e){return p({},e,{"data-precedence":e.precedence,precedence:null})}function Ku(e){return'[src="'+ga(e)+'"]'}function Ju(e){return"script[async]"+e}function Yu(e,a,t){if(a.count++,null===a.instance)switch(a.type){case"style":var n=e.querySelector('style[data-href~="'+ga(t.href)+'"]');if(n)return a.instance=n,ea(n),n;var r=p({},t,{"data-href":t.href,"data-precedence":t.precedence,href:null,precedence:null});return ea(n=(e.ownerDocument||e).createElement("style")),mu(n,"style",r),Xu(n,t.precedence,e),a.instance=n;case"stylesheet":r=Gu(t.href);var l=e.querySelector($u(r));if(l)return a.state.loading|=4,a.instance=l,ea(l),l;n=Qu(t),(r=Fu.get(r))&&Zu(n,r),ea(l=(e.ownerDocument||e).createElement("link"));var i=l;return i._p=new Promise(function(e,a){i.onload=e,i.onerror=a}),mu(l,"link",n),a.state.loading|=4,Xu(l,t.precedence,e),a.instance=l;case"script":return l=Ku(t.src),(r=e.querySelector(Ju(l)))?(a.instance=r,ea(r),r):(n=t,(r=Fu.get(l))&&em(n=p({},t),r),ea(r=(e=e.ownerDocument||e).createElement("script")),mu(r,"link",n),e.head.appendChild(r),a.instance=r);case"void":return null;default:throw Error(s(443,a.type))}else"stylesheet"===a.type&&0===(4&a.state.loading)&&(n=a.instance,a.state.loading|=4,Xu(n,t.precedence,e));return a.instance}function Xu(e,a,t){for(var n=t.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=n.length?n[n.length-1]:null,l=r,s=0;s<n.length;s++){var i=n[s];if(i.dataset.precedence===a)l=i;else if(l!==r)break}l?l.parentNode.insertBefore(e,l.nextSibling):(a=9===t.nodeType?t.head:t).insertBefore(e,a.firstChild)}function Zu(e,a){null==e.crossOrigin&&(e.crossOrigin=a.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=a.referrerPolicy),null==e.title&&(e.title=a.title)}function em(e,a){null==e.crossOrigin&&(e.crossOrigin=a.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=a.referrerPolicy),null==e.integrity&&(e.integrity=a.integrity)}var am=null;function tm(e,a,t){if(null===am){var n=new Map,r=am=new Map;r.set(t,n)}else(n=(r=am).get(t))||(n=new Map,r.set(t,n));if(n.has(e))return n;for(n.set(e,null),t=t.getElementsByTagName(e),r=0;r<t.length;r++){var l=t[r];if(!(l[Qe]||l[Ue]||"link"===e&&"stylesheet"===l.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==l.namespaceURI){var s=l.getAttribute(a)||"";s=e+s;var i=n.get(s);i?i.push(l):n.set(s,[l])}}return n}function nm(e,a,t){(e=e.ownerDocument||e).head.insertBefore(t,"title"===a?e.querySelector("head > title"):null)}function rm(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var lm=0;function sm(){if(this.count--,0===this.count&&(0===this.imgCount||!this.waitingForImages))if(this.stylesheets)om(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var im=null;function om(e,a){e.stylesheets=null,null!==e.unsuspend&&(e.count++,im=new Map,a.forEach(cm,e),im=null,sm.call(e))}function cm(e,a){if(!(4&a.state.loading)){var t=im.get(e);if(t)var n=t.get(null);else{t=new Map,im.set(e,t);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),l=0;l<r.length;l++){var s=r[l];"LINK"!==s.nodeName&&"not all"===s.getAttribute("media")||(t.set(s.dataset.precedence,s),n=s)}n&&t.set(null,n)}s=(r=a.instance).getAttribute("data-precedence"),(l=t.get(s)||n)===n&&t.set(null,r),t.set(s,r),this.count++,n=sm.bind(this),r.addEventListener("load",n),r.addEventListener("error",n),l?l.parentNode.insertBefore(r,l.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(r,e.firstChild),a.state.loading|=4}}var dm={$$typeof:j,Provider:null,Consumer:null,_currentValue:O,_currentValue2:O,_threadCount:0};function um(e,a,t,n,r,l,s,i,o){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Re(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Re(0),this.hiddenUpdates=Re(null),this.identifierPrefix=n,this.onUncaughtError=r,this.onCaughtError=l,this.onRecoverableError=s,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function mm(e,a,t,n,r,l,s,i,o,c,d,u){return e=new um(e,a,t,s,o,c,d,u,i),a=1,!0===l&&(a|=24),l=qn(3,null,null,a),e.current=l,l.stateNode=e,(a=Fr()).refCount++,e.pooledCache=a,a.refCount++,l.memoizedState={element:n,isDehydrated:t,cache:a},vl(l),e}function pm(e){return e?e=On:On}function hm(e,a,t,n,r,l){r=pm(r),null===n.context?n.context=r:n.pendingContext=r,(n=xl(a)).payload={element:t},null!==(l=void 0===l?null:l)&&(n.callback=l),null!==(t=bl(e,n,a))&&(Qc(t,0,a),yl(t,e,a))}function fm(e,a){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var t=e.retryLane;e.retryLane=0!==t&&t<a?t:a}}function vm(e,a){fm(e,a),(e=e.alternate)&&fm(e,a)}function gm(e){if(13===e.tag||31===e.tag){var a=An(e,67108864);null!==a&&Qc(a,0,67108864),vm(e,67108864)}}function xm(e){if(13===e.tag||31===e.tag){var a=Gc(),t=An(e,a=Oe(a));null!==t&&Qc(t,0,a),vm(e,a)}}var bm=!0;function ym(e,a,t,n){var r=D.T;D.T=null;var l=z.p;try{z.p=2,Nm(e,a,t,n)}finally{z.p=l,D.T=r}}function jm(e,a,t,n){var r=D.T;D.T=null;var l=z.p;try{z.p=8,Nm(e,a,t,n)}finally{z.p=l,D.T=r}}function Nm(e,a,t,n){if(bm){var r=_m(n);if(null===r)au(e,a,n,wm,t),zm(e,n);else if(function(e,a,t,n,r){switch(a){case"focusin":return Em=Om(Em,e,a,t,n,r),!0;case"dragenter":return Tm=Om(Tm,e,a,t,n,r),!0;case"mouseover":return Pm=Om(Pm,e,a,t,n,r),!0;case"pointerover":var l=r.pointerId;return Rm.set(l,Om(Rm.get(l)||null,e,a,t,n,r)),!0;case"gotpointercapture":return l=r.pointerId,Lm.set(l,Om(Lm.get(l)||null,e,a,t,n,r)),!0}return!1}(r,e,a,t,n))n.stopPropagation();else if(zm(e,n),4&a&&-1<Dm.indexOf(e)){for(;null!==r;){var l=Ye(r);if(null!==l)switch(l.tag){case 3:if((l=l.stateNode).current.memoizedState.isDehydrated){var s=Se(l.pendingLanes);if(0!==s){var i=l;for(i.pendingLanes|=2,i.entangledLanes|=2;s;){var o=1<<31-ye(s);i.entanglements[1]|=o,s&=~o}zd(l),0===(6&pc)&&(Dc=oe()+500,Od(0,!1))}}break;case 31:case 13:null!==(i=An(l,2))&&Qc(i,0,2),Zc(),vm(l,2)}if(null===(l=_m(n))&&au(e,a,n,wm,t),l===r)break;r=l}null!==r&&n.stopPropagation()}else au(e,a,n,null,t)}}function _m(e){return Cm(e=Da(e))}var wm=null;function Cm(e){if(wm=null,null!==(e=Je(e))){var a=o(e);if(null===a)e=null;else{var t=a.tag;if(13===t){if(null!==(e=c(a)))return e;e=null}else if(31===t){if(null!==(e=d(a)))return e;e=null}else if(3===t){if(a.stateNode.current.memoizedState.isDehydrated)return 3===a.tag?a.stateNode.containerInfo:null;e=null}else a!==e&&(e=null)}}return wm=e,null}function Sm(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ce()){case de:return 2;case ue:return 8;case me:case pe:return 32;case he:return 268435456;default:return 32}default:return 32}}var km=!1,Em=null,Tm=null,Pm=null,Rm=new Map,Lm=new Map,Am=[],Dm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function zm(e,a){switch(e){case"focusin":case"focusout":Em=null;break;case"dragenter":case"dragleave":Tm=null;break;case"mouseover":case"mouseout":Pm=null;break;case"pointerover":case"pointerout":Rm.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lm.delete(a.pointerId)}}function Om(e,a,t,n,r,l){return null===e||e.nativeEvent!==l?(e={blockedOn:a,domEventName:t,eventSystemFlags:n,nativeEvent:l,targetContainers:[r]},null!==a&&(null!==(a=Ye(a))&&gm(a)),e):(e.eventSystemFlags|=n,a=e.targetContainers,null!==r&&-1===a.indexOf(r)&&a.push(r),e)}function Im(e){var a=Je(e.target);if(null!==a){var t=o(a);if(null!==t)if(13===(a=t.tag)){if(null!==(a=c(t)))return e.blockedOn=a,void Fe(e.priority,function(){xm(t)})}else if(31===a){if(null!==(a=d(t)))return e.blockedOn=a,void Fe(e.priority,function(){xm(t)})}else if(3===a&&t.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===t.tag?t.stateNode.containerInfo:null)}e.blockedOn=null}function qm(e){if(null!==e.blockedOn)return!1;for(var a=e.targetContainers;0<a.length;){var t=_m(e.nativeEvent);if(null!==t)return null!==(a=Ye(t))&&gm(a),e.blockedOn=t,!1;var n=new(t=e.nativeEvent).constructor(t.type,t);Aa=n,t.target.dispatchEvent(n),Aa=null,a.shift()}return!0}function Fm(e,a,t){qm(e)&&t.delete(a)}function Mm(){km=!1,null!==Em&&qm(Em)&&(Em=null),null!==Tm&&qm(Tm)&&(Tm=null),null!==Pm&&qm(Pm)&&(Pm=null),Rm.forEach(Fm),Lm.forEach(Fm)}function Um(e,a){e.blockedOn===a&&(e.blockedOn=null,km||(km=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Mm)))}var Bm=null;function Vm(e){Bm!==e&&(Bm=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Bm===e&&(Bm=null);for(var a=0;a<e.length;a+=3){var t=e[a],n=e[a+1],r=e[a+2];if("function"!==typeof n){if(null===Cm(n||t))continue;break}var l=Ye(t);null!==l&&(e.splice(a,3),a-=3,ei(l,{pending:!0,data:r,method:t.method,action:n},n,r))}}))}function Hm(e){function a(a){return Um(a,e)}null!==Em&&Um(Em,e),null!==Tm&&Um(Tm,e),null!==Pm&&Um(Pm,e),Rm.forEach(a),Lm.forEach(a);for(var t=0;t<Am.length;t++){var n=Am[t];n.blockedOn===e&&(n.blockedOn=null)}for(;0<Am.length&&null===(t=Am[0]).blockedOn;)Im(t),null===t.blockedOn&&Am.shift();if(null!=(t=(e.ownerDocument||e).$$reactFormReplay))for(n=0;n<t.length;n+=3){var r=t[n],l=t[n+1],s=r[Be]||null;if("function"===typeof l)s||Vm(t);else if(s){var i=null;if(l&&l.hasAttribute("formAction")){if(r=l,s=l[Be]||null)i=s.formAction;else if(null!==Cm(r))continue}else i=s.action;"function"===typeof i?t[n+1]=i:(t.splice(n,3),n-=3),Vm(t)}}}function Wm(){function e(e){e.canIntercept&&"react-transition"===e.info&&e.intercept({handler:function(){return new Promise(function(e){return r=e})},focusReset:"manual",scroll:"manual"})}function a(){null!==r&&(r(),r=null),n||setTimeout(t,20)}function t(){if(!n&&!navigation.transition){var e=navigation.currentEntry;e&&null!=e.url&&navigation.navigate(e.url,{state:e.getState(),info:"react-transition",history:"replace"})}}if("object"===typeof navigation){var n=!1,r=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(t,100),function(){n=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),null!==r&&(r(),r=null)}}}function Gm(e){this._internalRoot=e}function $m(e){this._internalRoot=e}$m.prototype.render=Gm.prototype.render=function(e){var a=this._internalRoot;if(null===a)throw Error(s(409));hm(a.current,Gc(),e,a,null,null)},$m.prototype.unmount=Gm.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var a=e.containerInfo;hm(e.current,2,null,e,null,null),Zc(),a[Ve]=null}},$m.prototype.unstable_scheduleHydration=function(e){if(e){var a=qe();e={blockedOn:null,target:e,priority:a};for(var t=0;t<Am.length&&0!==a&&a<Am[t].priority;t++);Am.splice(t,0,e),0===t&&Im(e)}};var Qm=r.version;if("19.2.0"!==Qm)throw Error(s(527,Qm,"19.2.0"));z.findDOMNode=function(e){var a=e._reactInternals;if(void 0===a){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=function(e){var a=e.alternate;if(!a){if(null===(a=o(e)))throw Error(s(188));return a!==e?null:e}for(var t=e,n=a;;){var r=t.return;if(null===r)break;var l=r.alternate;if(null===l){if(null!==(n=r.return)){t=n;continue}break}if(r.child===l.child){for(l=r.child;l;){if(l===t)return u(r),e;if(l===n)return u(r),a;l=l.sibling}throw Error(s(188))}if(t.return!==n.return)t=r,n=l;else{for(var i=!1,c=r.child;c;){if(c===t){i=!0,t=r,n=l;break}if(c===n){i=!0,n=r,t=l;break}c=c.sibling}if(!i){for(c=l.child;c;){if(c===t){i=!0,t=l,n=r;break}if(c===n){i=!0,n=l,t=r;break}c=c.sibling}if(!i)throw Error(s(189))}}if(t.alternate!==n)throw Error(s(190))}if(3!==t.tag)throw Error(s(188));return t.stateNode.current===t?e:a}(a),e=null===(e=null!==e?m(e):null)?null:e.stateNode};var Km={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.2.0"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Jm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jm.isDisabled&&Jm.supportsFiber)try{ge=Jm.inject(Km),xe=Jm}catch(Xm){}}a.createRoot=function(e,a){if(!i(e))throw Error(s(299));var t=!1,n="",r=_i,l=wi,o=Ci;return null!==a&&void 0!==a&&(!0===a.unstable_strictMode&&(t=!0),void 0!==a.identifierPrefix&&(n=a.identifierPrefix),void 0!==a.onUncaughtError&&(r=a.onUncaughtError),void 0!==a.onCaughtError&&(l=a.onCaughtError),void 0!==a.onRecoverableError&&(o=a.onRecoverableError)),a=mm(e,1,!1,null,0,t,n,null,r,l,o,Wm),e[Ve]=a.current,Zd(e),new Gm(a)},a.hydrateRoot=function(e,a,t){if(!i(e))throw Error(s(299));var n=!1,r="",l=_i,o=wi,c=Ci,d=null;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(l=t.onUncaughtError),void 0!==t.onCaughtError&&(o=t.onCaughtError),void 0!==t.onRecoverableError&&(c=t.onRecoverableError),void 0!==t.formState&&(d=t.formState)),(a=mm(e,1,!0,a,0,n,r,d,l,o,c,Wm)).context=pm(null),t=a.current,(r=xl(n=Oe(n=Gc()))).callback=null,bl(t,r,n),t=n,a.current.lanes=t,Le(a,t),zd(a),e[Ve]=a.current,Zd(e),new $m(a)},a.version="19.2.0"},43:(e,a,t)=>{e.exports=t(288)},288:(e,a)=>{var t=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),h=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,g={};function x(e,a,t){this.props=e,this.context=a,this.refs=g,this.updater=t||f}function b(){}function y(e,a,t){this.props=e,this.context=a,this.refs=g,this.updater=t||f}x.prototype.isReactComponent={},x.prototype.setState=function(e,a){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,a,"setState")},x.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=x.prototype;var j=y.prototype=new b;j.constructor=y,v(j,x.prototype),j.isPureReactComponent=!0;var N=Array.isArray;function _(){}var w={H:null,A:null,T:null,S:null},C=Object.prototype.hasOwnProperty;function S(e,a,n){var r=n.ref;return{$$typeof:t,type:e,key:a,ref:void 0!==r?r:null,props:n}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===t}var E=/\/+/g;function T(e,a){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var a={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return a[e]})}(""+e.key):a.toString(36)}function P(e,a,r,l,s){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var o,c,d=!1;if(null===e)d=!0;else switch(i){case"bigint":case"string":case"number":d=!0;break;case"object":switch(e.$$typeof){case t:case n:d=!0;break;case m:return P((d=e._init)(e._payload),a,r,l,s)}}if(d)return s=s(e),d=""===l?"."+T(e,0):l,N(s)?(r="",null!=d&&(r=d.replace(E,"$&/")+"/"),P(s,a,r,"",function(e){return e})):null!=s&&(k(s)&&(o=s,c=r+(null==s.key||e&&e.key===s.key?"":(""+s.key).replace(E,"$&/")+"/")+d,s=S(o.type,c,o.props)),a.push(s)),1;d=0;var u,p=""===l?".":l+":";if(N(e))for(var f=0;f<e.length;f++)d+=P(l=e[f],a,r,i=p+T(l,f),s);else if("function"===typeof(f=null===(u=e)||"object"!==typeof u?null:"function"===typeof(u=h&&u[h]||u["@@iterator"])?u:null))for(e=f.call(e),f=0;!(l=e.next()).done;)d+=P(l=l.value,a,r,i=p+T(l,f++),s);else if("object"===i){if("function"===typeof e.then)return P(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(_,_):(e.status="pending",e.then(function(a){"pending"===e.status&&(e.status="fulfilled",e.value=a)},function(a){"pending"===e.status&&(e.status="rejected",e.reason=a)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),a,r,l,s);throw a=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===a?"object with keys {"+Object.keys(e).join(", ")+"}":a)+"). If you meant to render a collection of children, use an array instead.")}return d}function R(e,a,t){if(null==e)return e;var n=[],r=0;return P(e,n,"","",function(e){return a.call(t,e,r++)}),n}function L(e){if(-1===e._status){var a=e._result;(a=a()).then(function(a){0!==e._status&&-1!==e._status||(e._status=1,e._result=a)},function(a){0!==e._status&&-1!==e._status||(e._status=2,e._result=a)}),-1===e._status&&(e._status=0,e._result=a)}if(1===e._status)return e._result.default;throw e._result}var A="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(a))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},D={map:R,forEach:function(e,a,t){R(e,function(){a.apply(this,arguments)},t)},count:function(e){var a=0;return R(e,function(){a++}),a},toArray:function(e){return R(e,function(e){return e})||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};a.Activity=p,a.Children=D,a.Component=x,a.Fragment=r,a.Profiler=s,a.PureComponent=y,a.StrictMode=l,a.Suspense=d,a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=w,a.__COMPILER_RUNTIME={__proto__:null,c:function(e){return w.H.useMemoCache(e)}},a.cache=function(e){return function(){return e.apply(null,arguments)}},a.cacheSignal=function(){return null},a.cloneElement=function(e,a,t){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var n=v({},e.props),r=e.key;if(null!=a)for(l in void 0!==a.key&&(r=""+a.key),a)!C.call(a,l)||"key"===l||"__self"===l||"__source"===l||"ref"===l&&void 0===a.ref||(n[l]=a[l]);var l=arguments.length-2;if(1===l)n.children=t;else if(1<l){for(var s=Array(l),i=0;i<l;i++)s[i]=arguments[i+2];n.children=s}return S(e.type,r,n)},a.createContext=function(e){return(e={$$typeof:o,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:i,_context:e},e},a.createElement=function(e,a,t){var n,r={},l=null;if(null!=a)for(n in void 0!==a.key&&(l=""+a.key),a)C.call(a,n)&&"key"!==n&&"__self"!==n&&"__source"!==n&&(r[n]=a[n]);var s=arguments.length-2;if(1===s)r.children=t;else if(1<s){for(var i=Array(s),o=0;o<s;o++)i[o]=arguments[o+2];r.children=i}if(e&&e.defaultProps)for(n in s=e.defaultProps)void 0===r[n]&&(r[n]=s[n]);return S(e,l,r)},a.createRef=function(){return{current:null}},a.forwardRef=function(e){return{$$typeof:c,render:e}},a.isValidElement=k,a.lazy=function(e){return{$$typeof:m,_payload:{_status:-1,_result:e},_init:L}},a.memo=function(e,a){return{$$typeof:u,type:e,compare:void 0===a?null:a}},a.startTransition=function(e){var a=w.T,t={};w.T=t;try{var n=e(),r=w.S;null!==r&&r(t,n),"object"===typeof n&&null!==n&&"function"===typeof n.then&&n.then(_,A)}catch(l){A(l)}finally{null!==a&&null!==t.types&&(a.types=t.types),w.T=a}},a.unstable_useCacheRefresh=function(){return w.H.useCacheRefresh()},a.use=function(e){return w.H.use(e)},a.useActionState=function(e,a,t){return w.H.useActionState(e,a,t)},a.useCallback=function(e,a){return w.H.useCallback(e,a)},a.useContext=function(e){return w.H.useContext(e)},a.useDebugValue=function(){},a.useDeferredValue=function(e,a){return w.H.useDeferredValue(e,a)},a.useEffect=function(e,a){return w.H.useEffect(e,a)},a.useEffectEvent=function(e){return w.H.useEffectEvent(e)},a.useId=function(){return w.H.useId()},a.useImperativeHandle=function(e,a,t){return w.H.useImperativeHandle(e,a,t)},a.useInsertionEffect=function(e,a){return w.H.useInsertionEffect(e,a)},a.useLayoutEffect=function(e,a){return w.H.useLayoutEffect(e,a)},a.useMemo=function(e,a){return w.H.useMemo(e,a)},a.useOptimistic=function(e,a){return w.H.useOptimistic(e,a)},a.useReducer=function(e,a,t){return w.H.useReducer(e,a,t)},a.useRef=function(e){return w.H.useRef(e)},a.useState=function(e){return w.H.useState(e)},a.useSyncExternalStore=function(e,a,t){return w.H.useSyncExternalStore(e,a,t)},a.useTransition=function(){return w.H.useTransition()},a.version="19.2.0"},391:(e,a,t)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(a){console.error(a)}}(),e.exports=t(4)},579:(e,a,t)=>{e.exports=t(799)},672:(e,a,t)=>{var n=t(43);function r(e){var a="https://react.dev/errors/"+e;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var t=2;t<arguments.length;t++)a+="&args[]="+encodeURIComponent(arguments[t])}return"Minified React error #"+e+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(){}var s={d:{f:l,r:function(){throw Error(r(522))},D:l,C:l,L:l,m:l,X:l,S:l,M:l},p:0,findDOMNode:null},i=Symbol.for("react.portal");var o=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,a){return"font"===e?"":"string"===typeof a?"use-credentials"===a?a:"":void 0}a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,a.createPortal=function(e,a){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType)throw Error(r(299));return function(e,a,t){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:i,key:null==n?null:""+n,children:e,containerInfo:a,implementation:t}}(e,a,null,t)},a.flushSync=function(e){var a=o.T,t=s.p;try{if(o.T=null,s.p=2,e)return e()}finally{o.T=a,s.p=t,s.d.f()}},a.preconnect=function(e,a){"string"===typeof e&&(a?a="string"===typeof(a=a.crossOrigin)?"use-credentials"===a?a:"":void 0:a=null,s.d.C(e,a))},a.prefetchDNS=function(e){"string"===typeof e&&s.d.D(e)},a.preinit=function(e,a){if("string"===typeof e&&a&&"string"===typeof a.as){var t=a.as,n=c(t,a.crossOrigin),r="string"===typeof a.integrity?a.integrity:void 0,l="string"===typeof a.fetchPriority?a.fetchPriority:void 0;"style"===t?s.d.S(e,"string"===typeof a.precedence?a.precedence:void 0,{crossOrigin:n,integrity:r,fetchPriority:l}):"script"===t&&s.d.X(e,{crossOrigin:n,integrity:r,fetchPriority:l,nonce:"string"===typeof a.nonce?a.nonce:void 0})}},a.preinitModule=function(e,a){if("string"===typeof e)if("object"===typeof a&&null!==a){if(null==a.as||"script"===a.as){var t=c(a.as,a.crossOrigin);s.d.M(e,{crossOrigin:t,integrity:"string"===typeof a.integrity?a.integrity:void 0,nonce:"string"===typeof a.nonce?a.nonce:void 0})}}else null==a&&s.d.M(e)},a.preload=function(e,a){if("string"===typeof e&&"object"===typeof a&&null!==a&&"string"===typeof a.as){var t=a.as,n=c(t,a.crossOrigin);s.d.L(e,t,{crossOrigin:n,integrity:"string"===typeof a.integrity?a.integrity:void 0,nonce:"string"===typeof a.nonce?a.nonce:void 0,type:"string"===typeof a.type?a.type:void 0,fetchPriority:"string"===typeof a.fetchPriority?a.fetchPriority:void 0,referrerPolicy:"string"===typeof a.referrerPolicy?a.referrerPolicy:void 0,imageSrcSet:"string"===typeof a.imageSrcSet?a.imageSrcSet:void 0,imageSizes:"string"===typeof a.imageSizes?a.imageSizes:void 0,media:"string"===typeof a.media?a.media:void 0})}},a.preloadModule=function(e,a){if("string"===typeof e)if(a){var t=c(a.as,a.crossOrigin);s.d.m(e,{as:"string"===typeof a.as&&"script"!==a.as?a.as:void 0,crossOrigin:t,integrity:"string"===typeof a.integrity?a.integrity:void 0})}else s.d.m(e)},a.requestFormReset=function(e){s.d.r(e)},a.unstable_batchedUpdates=function(e,a){return e(a)},a.useFormState=function(e,a,t){return o.H.useFormState(e,a,t)},a.useFormStatus=function(){return o.H.useHostTransitionStatus()},a.version="19.2.0"},799:(e,a)=>{var t=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function r(e,a,n){var r=null;if(void 0!==n&&(r=""+n),void 0!==a.key&&(r=""+a.key),"key"in a)for(var l in n={},a)"key"!==l&&(n[l]=a[l]);else n=a;return a=n.ref,{$$typeof:t,type:e,key:r,ref:void 0!==a?a:null,props:n}}a.Fragment=n,a.jsx=r,a.jsxs=r},853:(e,a,t)=>{e.exports=t(896)},896:(e,a)=>{function t(e,a){var t=e.length;e.push(a);e:for(;0<t;){var n=t-1>>>1,r=e[n];if(!(0<l(r,a)))break e;e[n]=a,e[t]=r,t=n}}function n(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var a=e[0],t=e.pop();if(t!==a){e[0]=t;e:for(var n=0,r=e.length,s=r>>>1;n<s;){var i=2*(n+1)-1,o=e[i],c=i+1,d=e[c];if(0>l(o,t))c<r&&0>l(d,o)?(e[n]=d,e[c]=t,n=c):(e[n]=o,e[i]=t,n=i);else{if(!(c<r&&0>l(d,t)))break e;e[n]=d,e[c]=t,n=c}}}return a}function l(e,a){var t=e.sortIndex-a.sortIndex;return 0!==t?t:e.id-a.id}if(a.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var s=performance;a.unstable_now=function(){return s.now()}}else{var i=Date,o=i.now();a.unstable_now=function(){return i.now()-o}}var c=[],d=[],u=1,m=null,p=3,h=!1,f=!1,v=!1,g=!1,x="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function j(e){for(var a=n(d);null!==a;){if(null===a.callback)r(d);else{if(!(a.startTime<=e))break;r(d),a.sortIndex=a.expirationTime,t(c,a)}a=n(d)}}function N(e){if(v=!1,j(e),!f)if(null!==n(c))f=!0,w||(w=!0,_());else{var a=n(d);null!==a&&L(N,a.startTime-e)}}var _,w=!1,C=-1,S=5,k=-1;function E(){return!!g||!(a.unstable_now()-k<S)}function T(){if(g=!1,w){var e=a.unstable_now();k=e;var t=!0;try{e:{f=!1,v&&(v=!1,b(C),C=-1),h=!0;var l=p;try{a:{for(j(e),m=n(c);null!==m&&!(m.expirationTime>e&&E());){var s=m.callback;if("function"===typeof s){m.callback=null,p=m.priorityLevel;var i=s(m.expirationTime<=e);if(e=a.unstable_now(),"function"===typeof i){m.callback=i,j(e),t=!0;break a}m===n(c)&&r(c),j(e)}else r(c);m=n(c)}if(null!==m)t=!0;else{var o=n(d);null!==o&&L(N,o.startTime-e),t=!1}}break e}finally{m=null,p=l,h=!1}t=void 0}}finally{t?_():w=!1}}}if("function"===typeof y)_=function(){y(T)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,R=P.port2;P.port1.onmessage=T,_=function(){R.postMessage(null)}}else _=function(){x(T,0)};function L(e,t){C=x(function(){e(a.unstable_now())},t)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(e){e.callback=null},a.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<e?Math.floor(1e3/e):5},a.unstable_getCurrentPriorityLevel=function(){return p},a.unstable_next=function(e){switch(p){case 1:case 2:case 3:var a=3;break;default:a=p}var t=p;p=a;try{return e()}finally{p=t}},a.unstable_requestPaint=function(){g=!0},a.unstable_runWithPriority=function(e,a){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var t=p;p=e;try{return a()}finally{p=t}},a.unstable_scheduleCallback=function(e,r,l){var s=a.unstable_now();switch("object"===typeof l&&null!==l?l="number"===typeof(l=l.delay)&&0<l?s+l:s:l=s,e){case 1:var i=-1;break;case 2:i=250;break;case 5:i=1073741823;break;case 4:i=1e4;break;default:i=5e3}return e={id:u++,callback:r,priorityLevel:e,startTime:l,expirationTime:i=l+i,sortIndex:-1},l>s?(e.sortIndex=l,t(d,e),null===n(c)&&e===n(d)&&(v?(b(C),C=-1):v=!0,L(N,l-s))):(e.sortIndex=i,t(c,e),f||h||(f=!0,w||(w=!0,_()))),e},a.unstable_shouldYield=E,a.unstable_wrapCallback=function(e){var a=p;return function(){var t=p;p=a;try{return e.apply(this,arguments)}finally{p=t}}}},950:(e,a,t)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(a){console.error(a)}}(),e.exports=t(672)}},a={};function t(n){var r=a[n];if(void 0!==r)return r.exports;var l=a[n]={exports:{}};return e[n](l,l.exports,t),l.exports}t.d=(e,a)=>{for(var n in a)t.o(a,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:a[n]})},t.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a),t.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};t.r(n),t.d(n,{hasBrowserEnv:()=>Tt,hasStandardBrowserEnv:()=>Rt,hasStandardBrowserWebWorkerEnv:()=>Lt,navigator:()=>Pt,origin:()=>At});var r=t(43),l=t(391);function s(e,a){if(null==e)return{};var t,n,r=function(e,a){if(null==e)return{};var t={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==a.indexOf(n))continue;t[n]=e[n]}return t}(e,a);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)t=l[n],-1===a.indexOf(t)&&{}.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e){var a=function(e,a){if("object"!=i(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,a||"default");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(e)}(e,"string");return"symbol"==i(a)?a:a+""}function c(e,a,t){return(a=o(a))in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function d(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function u(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?d(Object(t),!0).forEach(function(a){c(e,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})}return e}const m=["sri"],p=["page"],h=["page","matches"],f=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],v=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],g=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"];var x="popstate";function b(){return S(function(e,a){let{pathname:t,search:n,hash:r}=e.location;return _("",{pathname:t,search:n,hash:r},a.state&&a.state.usr||null,a.state&&a.state.key||"default")},function(e,a){return"string"===typeof a?a:w(a)},null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function y(e,a){if(!1===e||null===e||"undefined"===typeof e)throw new Error(a)}function j(e,a){if(!e){"undefined"!==typeof console&&console.warn(a);try{throw new Error(a)}catch(t){}}}function N(e,a){return{usr:e.state,key:e.key,idx:a}}function _(e,a){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3?arguments[3]:void 0;return u(u({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof a?C(a):a),{},{state:t,key:a&&a.key||n||Math.random().toString(36).substring(2,10)})}function w(e){let{pathname:a="/",search:t="",hash:n=""}=e;return t&&"?"!==t&&(a+="?"===t.charAt(0)?t:"?"+t),n&&"#"!==n&&(a+="#"===n.charAt(0)?n:"#"+n),a}function C(e){let a={};if(e){let t=e.indexOf("#");t>=0&&(a.hash=e.substring(t),e=e.substring(0,t));let n=e.indexOf("?");n>=0&&(a.search=e.substring(n),e=e.substring(0,n)),e&&(a.pathname=e)}return a}function S(e,a,t){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:r=document.defaultView,v5Compat:l=!1}=n,s=r.history,i="POP",o=null,c=d();function d(){return(s.state||{idx:null}).idx}function m(){i="POP";let e=d(),a=null==e?null:e-c;c=e,o&&o({action:i,location:h.location,delta:a})}function p(e){return k(e)}null==c&&(c=0,s.replaceState(u(u({},s.state),{},{idx:c}),""));let h={get action(){return i},get location(){return e(r,s)},listen(e){if(o)throw new Error("A history only accepts one active listener");return r.addEventListener(x,m),o=e,()=>{r.removeEventListener(x,m),o=null}},createHref:e=>a(r,e),createURL:p,encodeLocation(e){let a=p(e);return{pathname:a.pathname,search:a.search,hash:a.hash}},push:function(e,a){i="PUSH";let n=_(h.location,e,a);t&&t(n,e),c=d()+1;let u=N(n,c),m=h.createHref(n);try{s.pushState(u,"",m)}catch(p){if(p instanceof DOMException&&"DataCloneError"===p.name)throw p;r.location.assign(m)}l&&o&&o({action:i,location:h.location,delta:1})},replace:function(e,a){i="REPLACE";let n=_(h.location,e,a);t&&t(n,e),c=d();let r=N(n,c),u=h.createHref(n);s.replaceState(r,"",u),l&&o&&o({action:i,location:h.location,delta:0})},go:e=>s.go(e)};return h}function k(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t="http://localhost";"undefined"!==typeof window&&(t="null"!==window.location.origin?window.location.origin:window.location.href),y(t,"No window.location.(origin|href) available to create URL");let n="string"===typeof e?e:w(e);return n=n.replace(/ $/,"%20"),!a&&n.startsWith("//")&&(n=t+n),new URL(n,t)}new WeakMap;function E(e,a){return T(e,a,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function T(e,a,t,n){let r=H(("string"===typeof a?C(a):a).pathname||"/",t);if(null==r)return null;let l=P(e);!function(e){e.sort((e,a)=>e.score!==a.score?a.score-e.score:function(e,a){let t=e.length===a.length&&e.slice(0,-1).every((e,t)=>e===a[t]);return t?e[e.length-1]-a[a.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),a.routesMeta.map(e=>e.childrenIndex)))}(l);let s=null;for(let i=0;null==s&&i<l.length;++i){let e=V(r);s=M(l[i],e,n)}return s}function P(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=function(e,l){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r,i=arguments.length>3?arguments[3]:void 0,o={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:l,route:e};if(o.relativePath.startsWith("/")){if(!o.relativePath.startsWith(n)&&s)return;y(o.relativePath.startsWith(n),'Absolute route path "'.concat(o.relativePath,'" nested under path "').concat(n,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),o.relativePath=o.relativePath.slice(n.length)}let c=K([n,o.relativePath]),d=t.concat(o);e.children&&e.children.length>0&&(y(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(c,'".')),P(e.children,a,d,c,s)),(null!=e.path||e.index)&&a.push({path:c,score:F(c,e.index),routesMeta:d})};return e.forEach((e,a)=>{var t;if(""!==e.path&&null!==(t=e.path)&&void 0!==t&&t.includes("?"))for(let n of R(e.path))l(e,a,!0,n);else l(e,a)}),a}function R(e){let a=e.split("/");if(0===a.length)return[];let[t,...n]=a,r=t.endsWith("?"),l=t.replace(/\?$/,"");if(0===n.length)return r?[l,""]:[l];let s=R(n.join("/")),i=[];return i.push(...s.map(e=>""===e?l:[l,e].join("/"))),r&&i.push(...s),i.map(a=>e.startsWith("/")&&""===a?"/":a)}var L=/^:[\w-]+$/,A=3,D=2,z=1,O=10,I=-2,q=e=>"*"===e;function F(e,a){let t=e.split("/"),n=t.length;return t.some(q)&&(n+=I),a&&(n+=D),t.filter(e=>!q(e)).reduce((e,a)=>e+(L.test(a)?A:""===a?z:O),n)}function M(e,a){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:n}=e,r={},l="/",s=[];for(let i=0;i<n.length;++i){let e=n[i],o=i===n.length-1,c="/"===l?a:a.slice(l.length)||"/",d=U({path:e.relativePath,caseSensitive:e.caseSensitive,end:o},c),u=e.route;if(!d&&o&&t&&!n[n.length-1].route.index&&(d=U({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(r,d.params),s.push({params:r,pathname:K([l,d.pathname]),pathnameBase:J(K([l,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(l=K([l,d.pathnameBase]))}return s}function U(e,a){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[t,n]=B(e.path,e.caseSensitive,e.end),r=a.match(t);if(!r)return null;let l=r[0],s=l.replace(/(.)\/+$/,"$1"),i=r.slice(1);return{params:n.reduce((e,a,t)=>{let{paramName:n,isOptional:r}=a;if("*"===n){let e=i[t]||"";s=l.slice(0,l.length-e.length).replace(/(.)\/+$/,"$1")}const o=i[t];return e[n]=r&&!o?void 0:(o||"").replace(/%2F/g,"/"),e},{}),pathname:l,pathnameBase:s,pattern:e}}function B(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];j("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let n=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,a,t)=>(n.push({paramName:a,isOptional:null!=t}),t?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),r+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":""!==e&&"/"!==e&&(r+="(?:(?=\\/|$))"),[new RegExp(r,a?void 0:"i"),n]}function V(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(a){return j(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(a,").")),e}}function H(e,a){if("/"===a)return e;if(!e.toLowerCase().startsWith(a.toLowerCase()))return null;let t=a.endsWith("/")?a.length-1:a.length,n=e.charAt(t);return n&&"/"!==n?null:e.slice(t)||"/"}function W(e,a,t,n){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(a,"` field [").concat(JSON.stringify(n),"].  Please separate it out to the `to.").concat(t,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function G(e){return e.filter((e,a)=>0===a||e.route.path&&e.route.path.length>0)}function $(e){let a=G(e);return a.map((e,t)=>t===a.length-1?e.pathname:e.pathnameBase)}function Q(e,a,t){let n,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?n=C(e):(n=u({},e),y(!n.pathname||!n.pathname.includes("?"),W("?","pathname","search",n)),y(!n.pathname||!n.pathname.includes("#"),W("#","pathname","hash",n)),y(!n.search||!n.search.includes("#"),W("#","search","hash",n)));let l,s=""===e||""===n.pathname,i=s?"/":n.pathname;if(null==i)l=t;else{let e=a.length-1;if(!r&&i.startsWith("..")){let a=i.split("/");for(;".."===a[0];)a.shift(),e-=1;n.pathname=a.join("/")}l=e>=0?a[e]:"/"}let o=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:t,search:n="",hash:r=""}="string"===typeof e?C(e):e,l=t?t.startsWith("/")?t:function(e,a){let t=a.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?t.length>1&&t.pop():"."!==e&&t.push(e)}),t.length>1?t.join("/"):"/"}(t,a):a;return{pathname:l,search:Y(n),hash:X(r)}}(n,l),c=i&&"/"!==i&&i.endsWith("/"),d=(s||"."===i)&&t.endsWith("/");return o.pathname.endsWith("/")||!c&&!d||(o.pathname+="/"),o}var K=e=>e.join("/").replace(/\/\/+/g,"/"),J=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Y=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",X=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function Z(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var ee=["POST","PUT","PATCH","DELETE"],ae=(new Set(ee),["GET",...ee]);new Set(ae),Symbol("ResetLoaderData");var te=r.createContext(null);te.displayName="DataRouter";var ne=r.createContext(null);ne.displayName="DataRouterState";var re=r.createContext(!1);var le=r.createContext({isTransitioning:!1});le.displayName="ViewTransition";var se=r.createContext(new Map);se.displayName="Fetchers";var ie=r.createContext(null);ie.displayName="Await";var oe=r.createContext(null);oe.displayName="Navigation";var ce=r.createContext(null);ce.displayName="Location";var de=r.createContext({outlet:null,matches:[],isDataRoute:!1});de.displayName="Route";var ue=r.createContext(null);ue.displayName="RouteError";function me(){return null!=r.useContext(ce)}function pe(){return y(me(),"useLocation() may be used only in the context of a <Router> component."),r.useContext(ce).location}var he="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function fe(e){r.useContext(oe).static||r.useLayoutEffect(e)}function ve(){let{isDataRoute:e}=r.useContext(de);return e?function(){let{router:e}=Ce("useNavigate"),a=ke("useNavigate"),t=r.useRef(!1);fe(()=>{t.current=!0});let n=r.useCallback(async function(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};j(t.current,he),t.current&&("number"===typeof n?e.navigate(n):await e.navigate(n,u({fromRouteId:a},r)))},[e,a]);return n}():function(){y(me(),"useNavigate() may be used only in the context of a <Router> component.");let e=r.useContext(te),{basename:a,navigator:t}=r.useContext(oe),{matches:n}=r.useContext(de),{pathname:l}=pe(),s=JSON.stringify($(n)),i=r.useRef(!1);fe(()=>{i.current=!0});let o=r.useCallback(function(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(j(i.current,he),!i.current)return;if("number"===typeof n)return void t.go(n);let o=Q(n,JSON.parse(s),l,"path"===r.relative);null==e&&"/"!==a&&(o.pathname="/"===o.pathname?a:K([a,o.pathname])),(r.replace?t.replace:t.push)(o,r.state,r)},[a,t,s,l,e]);return o}()}r.createContext(null);function ge(e){let{relative:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:t}=r.useContext(de),{pathname:n}=pe(),l=JSON.stringify($(t));return r.useMemo(()=>Q(e,JSON.parse(l),n,"path"===a),[e,l,n,a])}function xe(e,a,t,n,l){y(me(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=r.useContext(oe),{matches:i}=r.useContext(de),o=i[i.length-1],c=o?o.params:{},d=o?o.pathname:"/",m=o?o.pathnameBase:"/",p=o&&o.route;{let e=p&&p.path||"";Pe(d,!p||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(d,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let h,f=pe();if(a){var v;let e="string"===typeof a?C(a):a;y("/"===m||(null===(v=e.pathname)||void 0===v?void 0:v.startsWith(m)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(m,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),h=e}else h=f;let g=h.pathname||"/",x=g;if("/"!==m){let e=m.replace(/^\//,"").split("/");x="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let b=E(e,{pathname:x});j(p||null!=b,'No routes matched location "'.concat(h.pathname).concat(h.search).concat(h.hash,'" ')),j(null==b||void 0!==b[b.length-1].route.element||void 0!==b[b.length-1].route.Component||void 0!==b[b.length-1].route.lazy,'Matched leaf route at location "'.concat(h.pathname).concat(h.search).concat(h.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let N=_e(b&&b.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:K([m,s.encodeLocation?s.encodeLocation(e.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?m:K([m,s.encodeLocation?s.encodeLocation(e.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathnameBase])})),i,t,n,l);return a&&N?r.createElement(ce.Provider,{value:{location:u({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:"POP"}},N):N}function be(){let e=Ee(),a=Z(e)?"".concat(e.status," ").concat(e.statusText):e instanceof Error?e.message:JSON.stringify(e),t=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:n},s={padding:"2px 4px",backgroundColor:n},i=null;return console.error("Error handled by React Router default ErrorBoundary:",e),i=r.createElement(r.Fragment,null,r.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),r.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",r.createElement("code",{style:s},"ErrorBoundary")," or"," ",r.createElement("code",{style:s},"errorElement")," prop on your route.")),r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},a),t?r.createElement("pre",{style:l},t):null,i)}var ye=r.createElement(be,null),je=class extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,a){return a.location!==e.location||"idle"!==a.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:a.error,location:a.location,revalidation:e.revalidation||a.revalidation}}componentDidCatch(e,a){this.props.unstable_onError?this.props.unstable_onError(e,a):console.error("React Router caught the following error during render",e)}render(){return void 0!==this.state.error?r.createElement(de.Provider,{value:this.props.routeContext},r.createElement(ue.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Ne(e){let{routeContext:a,match:t,children:n}=e,l=r.useContext(te);return l&&l.static&&l.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=t.route.id),r.createElement(de.Provider,{value:a},n)}function _e(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null==e){if(!t)return null;if(t.errors)e=t.matches;else{if(0!==a.length||t.initialized||!(t.matches.length>0))return null;e=t.matches}}let l=e,s=null===t||void 0===t?void 0:t.errors;if(null!=s){let e=l.findIndex(e=>e.route.id&&void 0!==(null===s||void 0===s?void 0:s[e.route.id]));y(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(s).join(","))),l=l.slice(0,Math.min(l.length,e+1))}let i=!1,o=-1;if(t)for(let r=0;r<l.length;r++){let e=l[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(o=r),e.route.id){let{loaderData:a,errors:n}=t,r=e.route.loader&&!a.hasOwnProperty(e.route.id)&&(!n||void 0===n[e.route.id]);if(e.route.lazy||r){i=!0,l=o>=0?l.slice(0,o+1):[l[0]];break}}}return l.reduceRight((e,c,d)=>{let u,m=!1,p=null,h=null;t&&(u=s&&c.route.id?s[c.route.id]:void 0,p=c.route.errorElement||ye,i&&(o<0&&0===d?(Pe("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,h=null):o===d&&(m=!0,h=c.route.hydrateFallbackElement||null)));let f=a.concat(l.slice(0,d+1)),v=()=>{let a;return a=u?p:m?h:c.route.Component?r.createElement(c.route.Component,null):c.route.element?c.route.element:e,r.createElement(Ne,{match:c,routeContext:{outlet:e,matches:f,isDataRoute:null!=t},children:a})};return t&&(c.route.ErrorBoundary||c.route.errorElement||0===d)?r.createElement(je,{location:t.location,revalidation:t.revalidation,component:p,error:u,children:v(),routeContext:{outlet:null,matches:f,isDataRoute:!0},unstable_onError:n}):v()},null)}function we(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function Ce(e){let a=r.useContext(te);return y(a,we(e)),a}function Se(e){let a=r.useContext(ne);return y(a,we(e)),a}function ke(e){let a=function(e){let a=r.useContext(de);return y(a,we(e)),a}(e),t=a.matches[a.matches.length-1];return y(t.route.id,"".concat(e,' can only be used on routes that contain a unique "id"')),t.route.id}function Ee(){var e;let a=r.useContext(ue),t=Se("useRouteError"),n=ke("useRouteError");return void 0!==a?a:null===(e=t.errors)||void 0===e?void 0:e[n]}var Te={};function Pe(e,a,t){a||Te[e]||(Te[e]=!0,j(!1,t))}var Re={};function Le(e,a){e||Re[a]||(Re[a]=!0,console.warn(a))}r.memo(function(e){let{routes:a,future:t,state:n,unstable_onError:r}=e;return xe(a,void 0,n,r,t)});function Ae(e){let{to:a,replace:t,state:n,relative:l}=e;y(me(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=r.useContext(oe);j(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=r.useContext(de),{pathname:o}=pe(),c=ve(),d=Q(a,$(i),o,"path"===l),u=JSON.stringify(d);return r.useEffect(()=>{c(JSON.parse(u),{replace:t,state:n,relative:l})},[c,u,l,t,n]),null}function De(e){y(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ze(e){let{basename:a="/",children:t=null,location:n,navigationType:l="POP",navigator:s,static:i=!1}=e;y(!me(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=a.replace(/^\/*/,"/"),c=r.useMemo(()=>({basename:o,navigator:s,static:i,future:{}}),[o,s,i]);"string"===typeof n&&(n=C(n));let{pathname:d="/",search:u="",hash:m="",state:p=null,key:h="default"}=n,f=r.useMemo(()=>{let e=H(d,o);return null==e?null:{location:{pathname:e,search:u,hash:m,state:p,key:h},navigationType:l}},[o,d,u,m,p,h,l]);return j(null!=f,'<Router basename="'.concat(o,'"> is not able to match the URL "').concat(d).concat(u).concat(m,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==f?null:r.createElement(oe.Provider,{value:c},r.createElement(ce.Provider,{children:t,value:f}))}function Oe(e){let{children:a,location:t}=e;return xe(Ie(a),t)}r.Component;function Ie(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=[];return r.Children.forEach(e,(e,n)=>{if(!r.isValidElement(e))return;let l=[...a,n];if(e.type===r.Fragment)return void t.push.apply(t,Ie(e.props.children,l));y(e.type===De,"[".concat("string"===typeof e.type?e.type:e.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),y(!e.props.index||!e.props.children,"An index route cannot have child routes.");let s={id:e.props.id||l.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,middleware:e.props.middleware,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(s.children=Ie(e.props.children,l)),t.push(s)}),t}var qe="get",Fe="application/x-www-form-urlencoded";function Me(e){return null!=e&&"string"===typeof e.tagName}var Ue=null;var Be=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ve(e){return null==e||Be.has(e)?e:(j(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(Fe,'"')),null)}function He(e,a){let t,n,r,l,s;if(Me(i=e)&&"form"===i.tagName.toLowerCase()){let s=e.getAttribute("action");n=s?H(s,a):null,t=e.getAttribute("method")||qe,r=Ve(e.getAttribute("enctype"))||Fe,l=new FormData(e)}else if(function(e){return Me(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Me(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let s=e.form;if(null==s)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let i=e.getAttribute("formaction")||s.getAttribute("action");if(n=i?H(i,a):null,t=e.getAttribute("formmethod")||s.getAttribute("method")||qe,r=Ve(e.getAttribute("formenctype"))||Ve(s.getAttribute("enctype"))||Fe,l=new FormData(s,e),!function(){if(null===Ue)try{new FormData(document.createElement("form"),0),Ue=!1}catch(e){Ue=!0}return Ue}()){let{name:a,type:t,value:n}=e;if("image"===t){let e=a?"".concat(a,"."):"";l.append("".concat(e,"x"),"0"),l.append("".concat(e,"y"),"0")}else a&&l.append(a,n)}}else{if(Me(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=qe,n=null,r=Fe,s=e}var i;return l&&"text/plain"===r&&(s=l,l=void 0),{action:n,method:t.toLowerCase(),encType:r,formData:l,body:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;function We(e,a){if(!1===e||null===e||"undefined"===typeof e)throw new Error(a)}Symbol("SingleFetchRedirect");function Ge(e,a,t){let n="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===n.pathname?n.pathname="_root.".concat(t):a&&"/"===H(n.pathname,a)?n.pathname="".concat(a.replace(/\/$/,""),"/_root.").concat(t):n.pathname="".concat(n.pathname.replace(/\/$/,""),".").concat(t),n}async function $e(e,a){if(e.id in a)return a[e.id];try{let t=await import(e.module);return a[e.id]=t,t}catch(t){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Qe(e){return null!=e&&"string"===typeof e.page}function Ke(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function Je(e,a,t,n,r,l){let s=(e,a)=>!t[a]||e.route.id!==t[a].route.id,i=(e,a)=>{var n;return t[a].pathname!==e.pathname||(null===(n=t[a].route.path)||void 0===n?void 0:n.endsWith("*"))&&t[a].params["*"]!==e.params["*"]};return"assets"===l?a.filter((e,a)=>s(e,a)||i(e,a)):"data"===l?a.filter((a,l)=>{let o=n.routes[a.route.id];if(!o||!o.hasLoader)return!1;if(s(a,l)||i(a,l))return!0;if(a.route.shouldRevalidate){var c;let n=a.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:(null===(c=t[0])||void 0===c?void 0:c.params)||{},nextUrl:new URL(e,window.origin),nextParams:a.params,defaultShouldRevalidate:!0});if("boolean"===typeof n)return n}return!0}):[]}function Ye(e,a){let{includeHydrateFallback:t}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n=e.map(e=>{let n=a.routes[e.route.id];if(!n)return[];let r=[n.module];return n.clientActionModule&&(r=r.concat(n.clientActionModule)),n.clientLoaderModule&&(r=r.concat(n.clientLoaderModule)),t&&n.hydrateFallbackModule&&(r=r.concat(n.hydrateFallbackModule)),n.imports&&(r=r.concat(n.imports)),r}).flat(1),[...new Set(n)];var n}function Xe(e,a){let t=new Set,n=new Set(a);return e.reduce((e,r)=>{if(a&&!Qe(r)&&"script"===r.as&&r.href&&n.has(r.href))return e;let l=JSON.stringify(function(e){let a={},t=Object.keys(e).sort();for(let n of t)a[n]=e[n];return a}(r));return t.has(l)||(t.add(l),e.push({key:l,link:r})),e},[])}function Ze(e,a){return"lazy"===e.mode&&!0===a}function ea(){let e=r.useContext(te);return We(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function aa(){let e=r.useContext(ne);return We(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var ta=r.createContext(void 0);function na(){let e=r.useContext(ta);return We(e,"You must render this element inside a <HydratedRouter> element"),e}function ra(e,a){return t=>{e&&e(t),t.defaultPrevented||a(t)}}function la(e,a,t){if(t&&!ca)return[e[0]];if(a){let t=e.findIndex(e=>void 0!==a[e.route.id]);return e.slice(0,t+1)}return e}ta.displayName="FrameworkContext";function sa(e){let{page:a}=e,t=s(e,p),{router:n}=ea(),l=r.useMemo(()=>E(n.routes,a,n.basename),[n.routes,a,n.basename]);return l?r.createElement(oa,u({page:a,matches:l},t)):null}function ia(e){let{manifest:a,routeModules:t}=na(),[n,l]=r.useState([]);return r.useEffect(()=>{let n=!1;return async function(e,a,t){return Xe((await Promise.all(e.map(async e=>{let n=a.routes[e.route.id];if(n){let e=await $e(n,t);return e.links?e.links():[]}return[]}))).flat(1).filter(Ke).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?u(u({},e),{},{rel:"prefetch",as:"style"}):u(u({},e),{},{rel:"prefetch"})))}(e,a,t).then(e=>{n||l(e)}),()=>{n=!0}},[e,a,t]),n}function oa(e){let{page:a,matches:t}=e,n=s(e,h),l=pe(),{manifest:i,routeModules:o}=na(),{basename:c}=ea(),{loaderData:d,matches:m}=aa(),p=r.useMemo(()=>Je(a,t,m,i,l,"data"),[a,t,m,i,l]),f=r.useMemo(()=>Je(a,t,m,i,l,"assets"),[a,t,m,i,l]),v=r.useMemo(()=>{if(a===l.pathname+l.search+l.hash)return[];let e=new Set,n=!1;if(t.forEach(a=>{var t;let r=i.routes[a.route.id];r&&r.hasLoader&&(!p.some(e=>e.route.id===a.route.id)&&a.route.id in d&&null!==(t=o[a.route.id])&&void 0!==t&&t.shouldRevalidate||r.hasClientLoader?n=!0:e.add(a.route.id))}),0===e.size)return[];let r=Ge(a,c,"data");return n&&e.size>0&&r.searchParams.set("_routes",t.filter(a=>e.has(a.route.id)).map(e=>e.route.id).join(",")),[r.pathname+r.search]},[c,d,l,i,p,t,a,o]),g=r.useMemo(()=>Ye(f,i),[f,i]),x=ia(f);return r.createElement(r.Fragment,null,v.map(e=>r.createElement("link",u({key:e,rel:"prefetch",as:"fetch",href:e},n))),g.map(e=>r.createElement("link",u({key:e,rel:"modulepreload",href:e},n))),x.map(e=>{let{key:a,link:t}=e;return r.createElement("link",u({key:a,nonce:n.nonce},t))}))}var ca=!1;function da(e){let{manifest:a,serverHandoffString:t,isSpaMode:n,renderMeta:l,routeDiscovery:i,ssr:o}=na(),{router:c,static:d,staticContext:p}=ea(),{matches:h}=aa(),f=r.useContext(re),v=Ze(i,o);l&&(l.didRenderScripts=!0);let g=la(h,null,n);r.useEffect(()=>{ca=!0},[]);let x=r.useMemo(()=>{var n;if(f)return null;let l=p?"window.__reactRouterContext = ".concat(t,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",i=d?"".concat(null!==(n=a.hmr)&&void 0!==n&&n.runtime?"import ".concat(JSON.stringify(a.hmr.runtime),";"):"").concat(v?"":"import ".concat(JSON.stringify(a.url)),";\n").concat(g.map((e,t)=>{let n="route".concat(t),r=a.routes[e.route.id];We(r,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:l,clientLoaderModule:s,clientMiddlewareModule:i,hydrateFallbackModule:o,module:c}=r,d=[...l?[{module:l,varName:"".concat(n,"_clientAction")}]:[],...s?[{module:s,varName:"".concat(n,"_clientLoader")}]:[],...i?[{module:i,varName:"".concat(n,"_clientMiddleware")}]:[],...o?[{module:o,varName:"".concat(n,"_HydrateFallback")}]:[],{module:c,varName:"".concat(n,"_main")}];return 1===d.length?"import * as ".concat(n," from ").concat(JSON.stringify(c),";"):[d.map(e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";')).join("\n"),"const ".concat(n," = {").concat(d.map(e=>"...".concat(e.varName)).join(","),"};")].join("\n")}).join("\n"),"\n  ").concat(v?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,a){let{sri:t}=e,n=s(e,m),r=new Set(a.state.matches.map(e=>e.route.id)),l=a.state.location.pathname.split("/").filter(Boolean),i=["/"];for(l.pop();l.length>0;)i.push("/".concat(l.join("/"))),l.pop();i.forEach(e=>{let t=E(a.routes,e,a.basename);t&&t.forEach(e=>r.add(e.route.id))});let o=[...r].reduce((e,a)=>Object.assign(e,{[a]:n.routes[a]}),{});return u(u({},n),{},{routes:o,sri:!!t||void 0})}(a,c),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(g.map((e,a)=>"".concat(JSON.stringify(e.route.id),":route").concat(a)).join(","),"};\n\nimport(").concat(JSON.stringify(a.entry.module),");"):" ";return r.createElement(r.Fragment,null,r.createElement("script",u(u({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:l},type:void 0})),r.createElement("script",u(u({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:i},type:"module",async:!0})))},[]),b=ca||f?[]:(y=a.entry.imports.concat(Ye(g,a,{includeHydrateFallback:!0})),[...new Set(y)]);var y;let j="object"===typeof a.sri?a.sri:{};return Le(!f,"The <Scripts /> element is a no-op when using RSC and can be safely removed."),ca||f?null:r.createElement(r.Fragment,null,"object"===typeof a.sri?r.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:j})}}):null,v?null:r.createElement("link",{rel:"modulepreload",href:a.url,crossOrigin:e.crossOrigin,integrity:j[a.url],suppressHydrationWarning:!0}),r.createElement("link",{rel:"modulepreload",href:a.entry.module,crossOrigin:e.crossOrigin,integrity:j[a.entry.module],suppressHydrationWarning:!0}),b.map(a=>r.createElement("link",{key:a,rel:"modulepreload",href:a,crossOrigin:e.crossOrigin,integrity:j[a],suppressHydrationWarning:!0})),x)}function ua(){for(var e=arguments.length,a=new Array(e),t=0;t<e;t++)a[t]=arguments[t];return e=>{a.forEach(a=>{"function"===typeof a?a(e):null!=a&&(a.current=e)})}}r.Component;function ma(e){let{error:a,isOutsideRemixApp:t}=e;console.error(a);let n,l=r.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(Z(a))return r.createElement(pa,{title:"Unhandled Thrown Response!"},r.createElement("h1",{style:{fontSize:"24px"}},a.status," ",a.statusText),l);if(a instanceof Error)n=a;else{let e=null==a?"Unknown Error":"object"===typeof a&&"toString"in a?a.toString():JSON.stringify(a);n=new Error(e)}return r.createElement(pa,{title:"Application Error!",isOutsideRemixApp:t},r.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),r.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},n.stack),l)}function pa(e){var a;let{title:t,renderScripts:n,isOutsideRemixApp:l,children:s}=e,{routeModules:i}=na();return null!==(a=i.root)&&void 0!==a&&a.Layout&&!l?s:r.createElement("html",{lang:"en"},r.createElement("head",null,r.createElement("meta",{charSet:"utf-8"}),r.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),r.createElement("title",null,t)),r.createElement("body",null,r.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},s,n?r.createElement(da,null):null)))}var ha="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{ha&&(window.__reactRouterVersion="7.9.4")}catch(el){}function fa(e){let{basename:a,children:t,window:n}=e,l=r.useRef();null==l.current&&(l.current=b({window:n,v5Compat:!0}));let s=l.current,[i,o]=r.useState({action:s.action,location:s.location}),c=r.useCallback(e=>{r.startTransition(()=>o(e))},[o]);return r.useLayoutEffect(()=>s.listen(c),[s,c]),r.createElement(ze,{basename:a,children:t,location:i.location,navigationType:i.action,navigator:s})}var va=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ga=r.forwardRef(function(e,a){let t,{onClick:n,discover:l="render",prefetch:i="none",relative:o,reloadDocument:c,replace:d,state:m,target:p,to:h,preventScrollReset:v,viewTransition:g}=e,x=s(e,f),{basename:b}=r.useContext(oe),N="string"===typeof h&&va.test(h),_=!1;if("string"===typeof h&&N&&(t=h,ha))try{let e=new URL(window.location.href),a=h.startsWith("//")?new URL(e.protocol+h):new URL(h),t=H(a.pathname,b);a.origin===e.origin&&null!=t?h=t+a.search+a.hash:_=!0}catch(el){j(!1,'<Link to="'.concat(h,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}let C=function(e){let{relative:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};y(me(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=r.useContext(oe),{hash:l,pathname:s,search:i}=ge(e,{relative:a}),o=s;return"/"!==t&&(o="/"===s?t:K([t,s])),n.createHref({pathname:o,search:i,hash:l})}(h,{relative:o}),[S,k,E]=function(e,a){let t=r.useContext(ta),[n,l]=r.useState(!1),[s,i]=r.useState(!1),{onFocus:o,onBlur:c,onMouseEnter:d,onMouseLeave:u,onTouchStart:m}=a,p=r.useRef(null);r.useEffect(()=>{if("render"===e&&i(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{i(e.isIntersecting)})},{threshold:.5});return p.current&&e.observe(p.current),()=>{e.disconnect()}}},[e]),r.useEffect(()=>{if(n){let e=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(e)}}},[n]);let h=()=>{l(!0)},f=()=>{l(!1),i(!1)};return t?"intent"!==e?[s,p,{}]:[s,p,{onFocus:ra(o,h),onBlur:ra(c,f),onMouseEnter:ra(d,h),onMouseLeave:ra(u,f),onTouchStart:ra(m,h)}]:[!1,p,{}]}(i,x),T=function(e){let{target:a,replace:t,state:n,preventScrollReset:l,relative:s,viewTransition:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=ve(),c=pe(),d=ge(e,{relative:s});return r.useCallback(r=>{if(function(e,a){return 0===e.button&&(!a||"_self"===a)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(r,a)){r.preventDefault();let a=void 0!==t?t:w(c)===w(d);o(e,{replace:a,state:n,preventScrollReset:l,relative:s,viewTransition:i})}},[c,o,d,t,n,a,e,l,s,i])}(h,{replace:d,state:m,target:p,preventScrollReset:v,relative:o,viewTransition:g});let P=r.createElement("a",u(u(u({},x),E),{},{href:t||C,onClick:_||c?n:function(e){n&&n(e),e.defaultPrevented||T(e)},ref:ua(a,k),target:p,"data-discover":N||"render"!==l?void 0:"true"}));return S&&!N?r.createElement(r.Fragment,null,P,r.createElement(sa,{page:C})):P});ga.displayName="Link",r.forwardRef(function(e,a){let{"aria-current":t="page",caseSensitive:n=!1,className:l="",end:i=!1,style:o,to:c,viewTransition:d,children:m}=e,p=s(e,v),h=ge(c,{relative:p.relative}),f=pe(),g=r.useContext(ne),{navigator:x,basename:b}=r.useContext(oe),j=null!=g&&function(e){let{relative:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=r.useContext(le);y(null!=t,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=ya("useViewTransitionState"),l=ge(e,{relative:a});if(!t.isTransitioning)return!1;let s=H(t.currentLocation.pathname,n)||t.currentLocation.pathname,i=H(t.nextLocation.pathname,n)||t.nextLocation.pathname;return null!=U(l.pathname,i)||null!=U(l.pathname,s)}(h)&&!0===d,N=x.encodeLocation?x.encodeLocation(h).pathname:h.pathname,_=f.pathname,w=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;n||(_=_.toLowerCase(),w=w?w.toLowerCase():null,N=N.toLowerCase()),w&&b&&(w=H(w,b)||w);const C="/"!==N&&N.endsWith("/")?N.length-1:N.length;let S,k=_===N||!i&&_.startsWith(N)&&"/"===_.charAt(C),E=null!=w&&(w===N||!i&&w.startsWith(N)&&"/"===w.charAt(N.length)),T={isActive:k,isPending:E,isTransitioning:j},P=k?t:void 0;S="function"===typeof l?l(T):[l,k?"active":null,E?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let R="function"===typeof o?o(T):o;return r.createElement(ga,u(u({},p),{},{"aria-current":P,className:S,ref:a,style:R,to:c,viewTransition:d}),"function"===typeof m?m(T):m)}).displayName="NavLink";var xa=r.forwardRef((e,a)=>{let{discover:t="render",fetcherKey:n,navigate:l,reloadDocument:i,replace:o,state:c,method:d=qe,action:m,onSubmit:p,relative:h,preventScrollReset:f,viewTransition:v}=e,x=s(e,g),b=_a(),j=function(e){let{relative:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:t}=r.useContext(oe),n=r.useContext(de);y(n,"useFormAction must be used inside a RouteContext");let[l]=n.matches.slice(-1),s=u({},ge(e||".",{relative:a})),i=pe();if(null==e){s.search=i.search;let e=new URLSearchParams(s.search),a=e.getAll("index");if(a.some(e=>""===e)){e.delete("index"),a.filter(e=>e).forEach(a=>e.append("index",a));let t=e.toString();s.search=t?"?".concat(t):""}}e&&"."!==e||!l.route.index||(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index");"/"!==t&&(s.pathname="/"===s.pathname?t:K([t,s.pathname]));return w(s)}(m,{relative:h}),N="get"===d.toLowerCase()?"get":"post",_="string"===typeof m&&va.test(m);return r.createElement("form",u(u({ref:a,method:N,action:j,onSubmit:i?p:e=>{if(p&&p(e),e.defaultPrevented)return;e.preventDefault();let a=e.nativeEvent.submitter,t=(null===a||void 0===a?void 0:a.getAttribute("formmethod"))||d;b(a||e.currentTarget,{fetcherKey:n,method:t,navigate:l,replace:o,state:c,relative:h,preventScrollReset:f,viewTransition:v})}},x),{},{"data-discover":_||"render"!==t?void 0:"true"}))});function ba(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function ya(e){let a=r.useContext(te);return y(a,ba(e)),a}xa.displayName="Form";var ja=0,Na=()=>"__".concat(String(++ja),"__");function _a(){let{router:e}=ya("useSubmit"),{basename:a}=r.useContext(oe),t=ke("useRouteId");return r.useCallback(async function(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:l,method:s,encType:i,formData:o,body:c}=He(n,a);if(!1===r.navigate){let a=r.fetcherKey||Na();await e.fetch(a,t,r.action||l,{preventScrollReset:r.preventScrollReset,formData:o,body:c,formMethod:r.method||s,formEncType:r.encType||i,flushSync:r.flushSync})}else await e.navigate(r.action||l,{preventScrollReset:r.preventScrollReset,formData:o,body:c,formMethod:r.method||s,formEncType:r.encType||i,replace:r.replace,state:r.state,fromRouteId:t,flushSync:r.flushSync,viewTransition:r.viewTransition})},[e,a,t])}function wa(e,a){return function(){return e.apply(a,arguments)}}const{toString:Ca}=Object.prototype,{getPrototypeOf:Sa}=Object,{iterator:ka,toStringTag:Ea}=Symbol,Ta=(Pa=Object.create(null),e=>{const a=Ca.call(e);return Pa[a]||(Pa[a]=a.slice(8,-1).toLowerCase())});var Pa;const Ra=e=>(e=e.toLowerCase(),a=>Ta(a)===e),La=e=>a=>typeof a===e,{isArray:Aa}=Array,Da=La("undefined");function za(e){return null!==e&&!Da(e)&&null!==e.constructor&&!Da(e.constructor)&&qa(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Oa=Ra("ArrayBuffer");const Ia=La("string"),qa=La("function"),Fa=La("number"),Ma=e=>null!==e&&"object"===typeof e,Ua=e=>{if("object"!==Ta(e))return!1;const a=Sa(e);return(null===a||a===Object.prototype||null===Object.getPrototypeOf(a))&&!(Ea in e)&&!(ka in e)},Ba=Ra("Date"),Va=Ra("File"),Ha=Ra("Blob"),Wa=Ra("FileList"),Ga=Ra("URLSearchParams"),[$a,Qa,Ka,Ja]=["ReadableStream","Request","Response","Headers"].map(Ra);function Ya(e,a){let t,n,{allOwnKeys:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),Aa(e))for(t=0,n=e.length;t<n;t++)a.call(null,e[t],t,e);else{if(za(e))return;const n=r?Object.getOwnPropertyNames(e):Object.keys(e),l=n.length;let s;for(t=0;t<l;t++)s=n[t],a.call(null,e[s],s,e)}}function Xa(e,a){if(za(e))return null;a=a.toLowerCase();const t=Object.keys(e);let n,r=t.length;for(;r-- >0;)if(n=t[r],a===n.toLowerCase())return n;return null}const Za="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,et=e=>!Da(e)&&e!==Za;const at=(tt="undefined"!==typeof Uint8Array&&Sa(Uint8Array),e=>tt&&e instanceof tt);var tt;const nt=Ra("HTMLFormElement"),rt=(e=>{let{hasOwnProperty:a}=e;return(e,t)=>a.call(e,t)})(Object.prototype),lt=Ra("RegExp"),st=(e,a)=>{const t=Object.getOwnPropertyDescriptors(e),n={};Ya(t,(t,r)=>{let l;!1!==(l=a(t,r,e))&&(n[r]=l||t)}),Object.defineProperties(e,n)};const it=Ra("AsyncFunction"),ot=((e,a)=>{return e?setImmediate:a?(t="axios@".concat(Math.random()),n=[],Za.addEventListener("message",e=>{let{source:a,data:r}=e;a===Za&&r===t&&n.length&&n.shift()()},!1),e=>{n.push(e),Za.postMessage(t,"*")}):e=>setTimeout(e);var t,n})("function"===typeof setImmediate,qa(Za.postMessage)),ct="undefined"!==typeof queueMicrotask?queueMicrotask.bind(Za):"undefined"!==typeof process&&process.nextTick||ot,dt={isArray:Aa,isArrayBuffer:Oa,isBuffer:za,isFormData:e=>{let a;return e&&("function"===typeof FormData&&e instanceof FormData||qa(e.append)&&("formdata"===(a=Ta(e))||"object"===a&&qa(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let a;return a="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Oa(e.buffer),a},isString:Ia,isNumber:Fa,isBoolean:e=>!0===e||!1===e,isObject:Ma,isPlainObject:Ua,isEmptyObject:e=>{if(!Ma(e)||za(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(el){return!1}},isReadableStream:$a,isRequest:Qa,isResponse:Ka,isHeaders:Ja,isUndefined:Da,isDate:Ba,isFile:Va,isBlob:Ha,isRegExp:lt,isFunction:qa,isStream:e=>Ma(e)&&qa(e.pipe),isURLSearchParams:Ga,isTypedArray:at,isFileList:Wa,forEach:Ya,merge:function e(){const{caseless:a,skipUndefined:t}=et(this)&&this||{},n={},r=(r,l)=>{const s=a&&Xa(n,l)||l;Ua(n[s])&&Ua(r)?n[s]=e(n[s],r):Ua(r)?n[s]=e({},r):Aa(r)?n[s]=r.slice():t&&Da(r)||(n[s]=r)};for(let l=0,s=arguments.length;l<s;l++)arguments[l]&&Ya(arguments[l],r);return n},extend:function(e,a,t){let{allOwnKeys:n}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Ya(a,(a,n)=>{t&&qa(a)?e[n]=wa(a,t):e[n]=a},{allOwnKeys:n}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,a,t,n)=>{e.prototype=Object.create(a.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:a.prototype}),t&&Object.assign(e.prototype,t)},toFlatObject:(e,a,t,n)=>{let r,l,s;const i={};if(a=a||{},null==e)return a;do{for(r=Object.getOwnPropertyNames(e),l=r.length;l-- >0;)s=r[l],n&&!n(s,e,a)||i[s]||(a[s]=e[s],i[s]=!0);e=!1!==t&&Sa(e)}while(e&&(!t||t(e,a))&&e!==Object.prototype);return a},kindOf:Ta,kindOfTest:Ra,endsWith:(e,a,t)=>{e=String(e),(void 0===t||t>e.length)&&(t=e.length),t-=a.length;const n=e.indexOf(a,t);return-1!==n&&n===t},toArray:e=>{if(!e)return null;if(Aa(e))return e;let a=e.length;if(!Fa(a))return null;const t=new Array(a);for(;a-- >0;)t[a]=e[a];return t},forEachEntry:(e,a)=>{const t=(e&&e[ka]).call(e);let n;for(;(n=t.next())&&!n.done;){const t=n.value;a.call(e,t[0],t[1])}},matchAll:(e,a)=>{let t;const n=[];for(;null!==(t=e.exec(a));)n.push(t);return n},isHTMLForm:nt,hasOwnProperty:rt,hasOwnProp:rt,reduceDescriptors:st,freezeMethods:e=>{st(e,(a,t)=>{if(qa(e)&&-1!==["arguments","caller","callee"].indexOf(t))return!1;const n=e[t];qa(n)&&(a.enumerable=!1,"writable"in a?a.writable=!1:a.set||(a.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")}))})},toObjectSet:(e,a)=>{const t={},n=e=>{e.forEach(e=>{t[e]=!0})};return Aa(e)?n(e):n(String(e).split(a)),t},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,a,t){return a.toUpperCase()+t}),noop:()=>{},toFiniteNumber:(e,a)=>null!=e&&Number.isFinite(e=+e)?e:a,findKey:Xa,global:Za,isContextDefined:et,isSpecCompliantForm:function(e){return!!(e&&qa(e.append)&&"FormData"===e[Ea]&&e[ka])},toJSONObject:e=>{const a=new Array(10),t=(e,n)=>{if(Ma(e)){if(a.indexOf(e)>=0)return;if(za(e))return e;if(!("toJSON"in e)){a[n]=e;const r=Aa(e)?[]:{};return Ya(e,(e,a)=>{const l=t(e,n+1);!Da(l)&&(r[a]=l)}),a[n]=void 0,r}}return e};return t(e,0)},isAsyncFn:it,isThenable:e=>e&&(Ma(e)||qa(e))&&qa(e.then)&&qa(e.catch),setImmediate:ot,asap:ct,isIterable:e=>null!=e&&qa(e[ka])};function ut(e,a,t,n,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",a&&(this.code=a),t&&(this.config=t),n&&(this.request=n),r&&(this.response=r,this.status=r.status?r.status:null)}dt.inherits(ut,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:dt.toJSONObject(this.config),code:this.code,status:this.status}}});const mt=ut.prototype,pt={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{pt[e]={value:e}}),Object.defineProperties(ut,pt),Object.defineProperty(mt,"isAxiosError",{value:!0}),ut.from=(e,a,t,n,r,l)=>{const s=Object.create(mt);dt.toFlatObject(e,s,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e);const i=e&&e.message?e.message:"Error",o=null==a&&e?e.code:a;return ut.call(s,i,o,t,n,r),e&&null==s.cause&&Object.defineProperty(s,"cause",{value:e,configurable:!0}),s.name=e&&e.name||"Error",l&&Object.assign(s,l),s};const ht=ut;function ft(e){return dt.isPlainObject(e)||dt.isArray(e)}function vt(e){return dt.endsWith(e,"[]")?e.slice(0,-2):e}function gt(e,a,t){return e?e.concat(a).map(function(e,a){return e=vt(e),!t&&a?"["+e+"]":e}).join(t?".":""):a}const xt=dt.toFlatObject(dt,{},null,function(e){return/^is[A-Z]/.test(e)});const bt=function(e,a,t){if(!dt.isObject(e))throw new TypeError("target must be an object");a=a||new FormData;const n=(t=dt.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,a){return!dt.isUndefined(a[e])})).metaTokens,r=t.visitor||c,l=t.dots,s=t.indexes,i=(t.Blob||"undefined"!==typeof Blob&&Blob)&&dt.isSpecCompliantForm(a);if(!dt.isFunction(r))throw new TypeError("visitor must be a function");function o(e){if(null===e)return"";if(dt.isDate(e))return e.toISOString();if(dt.isBoolean(e))return e.toString();if(!i&&dt.isBlob(e))throw new ht("Blob is not supported. Use a Buffer instead.");return dt.isArrayBuffer(e)||dt.isTypedArray(e)?i&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,t,r){let i=e;if(e&&!r&&"object"===typeof e)if(dt.endsWith(t,"{}"))t=n?t:t.slice(0,-2),e=JSON.stringify(e);else if(dt.isArray(e)&&function(e){return dt.isArray(e)&&!e.some(ft)}(e)||(dt.isFileList(e)||dt.endsWith(t,"[]"))&&(i=dt.toArray(e)))return t=vt(t),i.forEach(function(e,n){!dt.isUndefined(e)&&null!==e&&a.append(!0===s?gt([t],n,l):null===s?t:t+"[]",o(e))}),!1;return!!ft(e)||(a.append(gt(r,t,l),o(e)),!1)}const d=[],u=Object.assign(xt,{defaultVisitor:c,convertValue:o,isVisitable:ft});if(!dt.isObject(e))throw new TypeError("data must be an object");return function e(t,n){if(!dt.isUndefined(t)){if(-1!==d.indexOf(t))throw Error("Circular reference detected in "+n.join("."));d.push(t),dt.forEach(t,function(t,l){!0===(!(dt.isUndefined(t)||null===t)&&r.call(a,t,dt.isString(l)?l.trim():l,n,u))&&e(t,n?n.concat(l):[l])}),d.pop()}}(e),a};function yt(e){const a={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return a[e]})}function jt(e,a){this._pairs=[],e&&bt(e,this,a)}const Nt=jt.prototype;Nt.append=function(e,a){this._pairs.push([e,a])},Nt.toString=function(e){const a=e?function(a){return e.call(this,a,yt)}:yt;return this._pairs.map(function(e){return a(e[0])+"="+a(e[1])},"").join("&")};const _t=jt;function wt(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Ct(e,a,t){if(!a)return e;const n=t&&t.encode||wt;dt.isFunction(t)&&(t={serialize:t});const r=t&&t.serialize;let l;if(l=r?r(a,t):dt.isURLSearchParams(a)?a.toString():new _t(a,t).toString(n),l){const a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+l}return e}const St=class{constructor(){this.handlers=[]}use(e,a,t){return this.handlers.push({fulfilled:e,rejected:a,synchronous:!!t&&t.synchronous,runWhen:t?t.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){dt.forEach(this.handlers,function(a){null!==a&&e(a)})}},kt={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Et={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:_t,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Tt="undefined"!==typeof window&&"undefined"!==typeof document,Pt="object"===typeof navigator&&navigator||void 0,Rt=Tt&&(!Pt||["ReactNative","NativeScript","NS"].indexOf(Pt.product)<0),Lt="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,At=Tt&&window.location.href||"http://localhost",Dt=u(u({},n),Et);const zt=function(e){function a(e,t,n,r){let l=e[r++];if("__proto__"===l)return!0;const s=Number.isFinite(+l),i=r>=e.length;if(l=!l&&dt.isArray(n)?n.length:l,i)return dt.hasOwnProp(n,l)?n[l]=[n[l],t]:n[l]=t,!s;n[l]&&dt.isObject(n[l])||(n[l]=[]);return a(e,t,n[l],r)&&dt.isArray(n[l])&&(n[l]=function(e){const a={},t=Object.keys(e);let n;const r=t.length;let l;for(n=0;n<r;n++)l=t[n],a[l]=e[l];return a}(n[l])),!s}if(dt.isFormData(e)&&dt.isFunction(e.entries)){const t={};return dt.forEachEntry(e,(e,n)=>{a(function(e){return dt.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),n,t,0)}),t}return null};const Ot={transitional:kt,adapter:["xhr","http","fetch"],transformRequest:[function(e,a){const t=a.getContentType()||"",n=t.indexOf("application/json")>-1,r=dt.isObject(e);r&&dt.isHTMLForm(e)&&(e=new FormData(e));if(dt.isFormData(e))return n?JSON.stringify(zt(e)):e;if(dt.isArrayBuffer(e)||dt.isBuffer(e)||dt.isStream(e)||dt.isFile(e)||dt.isBlob(e)||dt.isReadableStream(e))return e;if(dt.isArrayBufferView(e))return e.buffer;if(dt.isURLSearchParams(e))return a.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(r){if(t.indexOf("application/x-www-form-urlencoded")>-1)return function(e,a){return bt(e,new Dt.classes.URLSearchParams,u({visitor:function(e,a,t,n){return Dt.isNode&&dt.isBuffer(e)?(this.append(a,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},a))}(e,this.formSerializer).toString();if((l=dt.isFileList(e))||t.indexOf("multipart/form-data")>-1){const a=this.env&&this.env.FormData;return bt(l?{"files[]":e}:e,a&&new a,this.formSerializer)}}return r||n?(a.setContentType("application/json",!1),function(e,a,t){if(dt.isString(e))try{return(a||JSON.parse)(e),dt.trim(e)}catch(el){if("SyntaxError"!==el.name)throw el}return(t||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const a=this.transitional||Ot.transitional,t=a&&a.forcedJSONParsing,n="json"===this.responseType;if(dt.isResponse(e)||dt.isReadableStream(e))return e;if(e&&dt.isString(e)&&(t&&!this.responseType||n)){const t=!(a&&a.silentJSONParsing)&&n;try{return JSON.parse(e,this.parseReviver)}catch(el){if(t){if("SyntaxError"===el.name)throw ht.from(el,ht.ERR_BAD_RESPONSE,this,null,this.response);throw el}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Dt.classes.FormData,Blob:Dt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};dt.forEach(["delete","get","head","post","put","patch"],e=>{Ot.headers[e]={}});const It=Ot,qt=dt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Ft=Symbol("internals");function Mt(e){return e&&String(e).trim().toLowerCase()}function Ut(e){return!1===e||null==e?e:dt.isArray(e)?e.map(Ut):String(e)}function Bt(e,a,t,n,r){return dt.isFunction(n)?n.call(this,a,t):(r&&(a=t),dt.isString(a)?dt.isString(n)?-1!==a.indexOf(n):dt.isRegExp(n)?n.test(a):void 0:void 0)}class Vt{constructor(e){e&&this.set(e)}set(e,a,t){const n=this;function r(e,a,t){const r=Mt(a);if(!r)throw new Error("header name must be a non-empty string");const l=dt.findKey(n,r);(!l||void 0===n[l]||!0===t||void 0===t&&!1!==n[l])&&(n[l||a]=Ut(e))}const l=(e,a)=>dt.forEach(e,(e,t)=>r(e,t,a));if(dt.isPlainObject(e)||e instanceof this.constructor)l(e,a);else if(dt.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))l((e=>{const a={};let t,n,r;return e&&e.split("\n").forEach(function(e){r=e.indexOf(":"),t=e.substring(0,r).trim().toLowerCase(),n=e.substring(r+1).trim(),!t||a[t]&&qt[t]||("set-cookie"===t?a[t]?a[t].push(n):a[t]=[n]:a[t]=a[t]?a[t]+", "+n:n)}),a})(e),a);else if(dt.isObject(e)&&dt.isIterable(e)){let t,n,r={};for(const a of e){if(!dt.isArray(a))throw TypeError("Object iterator must return a key-value pair");r[n=a[0]]=(t=r[n])?dt.isArray(t)?[...t,a[1]]:[t,a[1]]:a[1]}l(r,a)}else null!=e&&r(a,e,t);return this}get(e,a){if(e=Mt(e)){const t=dt.findKey(this,e);if(t){const e=this[t];if(!a)return e;if(!0===a)return function(e){const a=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=t.exec(e);)a[n[1]]=n[2];return a}(e);if(dt.isFunction(a))return a.call(this,e,t);if(dt.isRegExp(a))return a.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,a){if(e=Mt(e)){const t=dt.findKey(this,e);return!(!t||void 0===this[t]||a&&!Bt(0,this[t],t,a))}return!1}delete(e,a){const t=this;let n=!1;function r(e){if(e=Mt(e)){const r=dt.findKey(t,e);!r||a&&!Bt(0,t[r],r,a)||(delete t[r],n=!0)}}return dt.isArray(e)?e.forEach(r):r(e),n}clear(e){const a=Object.keys(this);let t=a.length,n=!1;for(;t--;){const r=a[t];e&&!Bt(0,this[r],r,e,!0)||(delete this[r],n=!0)}return n}normalize(e){const a=this,t={};return dt.forEach(this,(n,r)=>{const l=dt.findKey(t,r);if(l)return a[l]=Ut(n),void delete a[r];const s=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,a,t)=>a.toUpperCase()+t)}(r):String(r).trim();s!==r&&delete a[r],a[s]=Ut(n),t[s]=!0}),this}concat(){for(var e=arguments.length,a=new Array(e),t=0;t<e;t++)a[t]=arguments[t];return this.constructor.concat(this,...a)}toJSON(e){const a=Object.create(null);return dt.forEach(this,(t,n)=>{null!=t&&!1!==t&&(a[n]=e&&dt.isArray(t)?t.join(", "):t)}),a}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(e=>{let[a,t]=e;return a+": "+t}).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const a=new this(e);for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.forEach(e=>a.set(e)),a}static accessor(e){const a=(this[Ft]=this[Ft]={accessors:{}}).accessors,t=this.prototype;function n(e){const n=Mt(e);a[n]||(!function(e,a){const t=dt.toCamelCase(" "+a);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+t,{value:function(e,t,r){return this[n].call(this,a,e,t,r)},configurable:!0})})}(t,e),a[n]=!0)}return dt.isArray(e)?e.forEach(n):n(e),this}}Vt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),dt.reduceDescriptors(Vt.prototype,(e,a)=>{let{value:t}=e,n=a[0].toUpperCase()+a.slice(1);return{get:()=>t,set(e){this[n]=e}}}),dt.freezeMethods(Vt);const Ht=Vt;function Wt(e,a){const t=this||It,n=a||t,r=Ht.from(n.headers);let l=n.data;return dt.forEach(e,function(e){l=e.call(t,l,r.normalize(),a?a.status:void 0)}),r.normalize(),l}function Gt(e){return!(!e||!e.__CANCEL__)}function $t(e,a,t){ht.call(this,null==e?"canceled":e,ht.ERR_CANCELED,a,t),this.name="CanceledError"}dt.inherits($t,ht,{__CANCEL__:!0});const Qt=$t;function Kt(e,a,t){const n=t.config.validateStatus;t.status&&n&&!n(t.status)?a(new ht("Request failed with status code "+t.status,[ht.ERR_BAD_REQUEST,ht.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t)):e(t)}const Jt=function(e,a){e=e||10;const t=new Array(e),n=new Array(e);let r,l=0,s=0;return a=void 0!==a?a:1e3,function(i){const o=Date.now(),c=n[s];r||(r=o),t[l]=i,n[l]=o;let d=s,u=0;for(;d!==l;)u+=t[d++],d%=e;if(l=(l+1)%e,l===s&&(s=(s+1)%e),o-r<a)return;const m=c&&o-c;return m?Math.round(1e3*u/m):void 0}};const Yt=function(e,a){let t,n,r=0,l=1e3/a;const s=function(a){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();r=l,t=null,n&&(clearTimeout(n),n=null),e(...a)};return[function(){const e=Date.now(),a=e-r;for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];a>=l?s(o,e):(t=o,n||(n=setTimeout(()=>{n=null,s(t)},l-a)))},()=>t&&s(t)]},Xt=function(e,a){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,n=0;const r=Jt(50,250);return Yt(t=>{const l=t.loaded,s=t.lengthComputable?t.total:void 0,i=l-n,o=r(i);n=l;e({loaded:l,total:s,progress:s?l/s:void 0,bytes:i,rate:o||void 0,estimated:o&&s&&l<=s?(s-l)/o:void 0,event:t,lengthComputable:null!=s,[a?"download":"upload"]:!0})},t)},Zt=(e,a)=>{const t=null!=e;return[n=>a[0]({lengthComputable:t,total:e,loaded:n}),a[1]]},en=e=>function(){for(var a=arguments.length,t=new Array(a),n=0;n<a;n++)t[n]=arguments[n];return dt.asap(()=>e(...t))},an=Dt.hasStandardBrowserEnv?((e,a)=>t=>(t=new URL(t,Dt.origin),e.protocol===t.protocol&&e.host===t.host&&(a||e.port===t.port)))(new URL(Dt.origin),Dt.navigator&&/(msie|trident)/i.test(Dt.navigator.userAgent)):()=>!0,tn=Dt.hasStandardBrowserEnv?{write(e,a,t,n,r,l){const s=[e+"="+encodeURIComponent(a)];dt.isNumber(t)&&s.push("expires="+new Date(t).toGMTString()),dt.isString(n)&&s.push("path="+n),dt.isString(r)&&s.push("domain="+r),!0===l&&s.push("secure"),document.cookie=s.join("; ")},read(e){const a=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return a?decodeURIComponent(a[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function nn(e,a,t){let n=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(a);return e&&(n||0==t)?function(e,a){return a?e.replace(/\/?\/$/,"")+"/"+a.replace(/^\/+/,""):e}(e,a):a}const rn=e=>e instanceof Ht?u({},e):e;function ln(e,a){a=a||{};const t={};function n(e,a,t,n){return dt.isPlainObject(e)&&dt.isPlainObject(a)?dt.merge.call({caseless:n},e,a):dt.isPlainObject(a)?dt.merge({},a):dt.isArray(a)?a.slice():a}function r(e,a,t,r){return dt.isUndefined(a)?dt.isUndefined(e)?void 0:n(void 0,e,0,r):n(e,a,0,r)}function l(e,a){if(!dt.isUndefined(a))return n(void 0,a)}function s(e,a){return dt.isUndefined(a)?dt.isUndefined(e)?void 0:n(void 0,e):n(void 0,a)}function i(t,r,l){return l in a?n(t,r):l in e?n(void 0,t):void 0}const o={url:l,method:l,data:l,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:i,headers:(e,a,t)=>r(rn(e),rn(a),0,!0)};return dt.forEach(Object.keys(u(u({},e),a)),function(n){const l=o[n]||r,s=l(e[n],a[n],n);dt.isUndefined(s)&&l!==i||(t[n]=s)}),t}const sn=e=>{const a=ln({},e);let{data:t,withXSRFToken:n,xsrfHeaderName:r,xsrfCookieName:l,headers:s,auth:i}=a;if(a.headers=s=Ht.from(s),a.url=Ct(nn(a.baseURL,a.url,a.allowAbsoluteUrls),e.params,e.paramsSerializer),i&&s.set("Authorization","Basic "+btoa((i.username||"")+":"+(i.password?unescape(encodeURIComponent(i.password)):""))),dt.isFormData(t))if(Dt.hasStandardBrowserEnv||Dt.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if(dt.isFunction(t.getHeaders)){const e=t.getHeaders(),a=["content-type","content-length"];Object.entries(e).forEach(e=>{let[t,n]=e;a.includes(t.toLowerCase())&&s.set(t,n)})}if(Dt.hasStandardBrowserEnv&&(n&&dt.isFunction(n)&&(n=n(a)),n||!1!==n&&an(a.url))){const e=r&&l&&tn.read(l);e&&s.set(r,e)}return a},on="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise(function(a,t){const n=sn(e);let r=n.data;const l=Ht.from(n.headers).normalize();let s,i,o,c,d,{responseType:u,onUploadProgress:m,onDownloadProgress:p}=n;function h(){c&&c(),d&&d(),n.cancelToken&&n.cancelToken.unsubscribe(s),n.signal&&n.signal.removeEventListener("abort",s)}let f=new XMLHttpRequest;function v(){if(!f)return;const n=Ht.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders());Kt(function(e){a(e),h()},function(e){t(e),h()},{data:u&&"text"!==u&&"json"!==u?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:n,config:e,request:f}),f=null}f.open(n.method.toUpperCase(),n.url,!0),f.timeout=n.timeout,"onloadend"in f?f.onloadend=v:f.onreadystatechange=function(){f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))&&setTimeout(v)},f.onabort=function(){f&&(t(new ht("Request aborted",ht.ECONNABORTED,e,f)),f=null)},f.onerror=function(a){const n=a&&a.message?a.message:"Network Error",r=new ht(n,ht.ERR_NETWORK,e,f);r.event=a||null,t(r),f=null},f.ontimeout=function(){let a=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const r=n.transitional||kt;n.timeoutErrorMessage&&(a=n.timeoutErrorMessage),t(new ht(a,r.clarifyTimeoutError?ht.ETIMEDOUT:ht.ECONNABORTED,e,f)),f=null},void 0===r&&l.setContentType(null),"setRequestHeader"in f&&dt.forEach(l.toJSON(),function(e,a){f.setRequestHeader(a,e)}),dt.isUndefined(n.withCredentials)||(f.withCredentials=!!n.withCredentials),u&&"json"!==u&&(f.responseType=n.responseType),p&&([o,d]=Xt(p,!0),f.addEventListener("progress",o)),m&&f.upload&&([i,c]=Xt(m),f.upload.addEventListener("progress",i),f.upload.addEventListener("loadend",c)),(n.cancelToken||n.signal)&&(s=a=>{f&&(t(!a||a.type?new Qt(null,e,f):a),f.abort(),f=null)},n.cancelToken&&n.cancelToken.subscribe(s),n.signal&&(n.signal.aborted?s():n.signal.addEventListener("abort",s)));const g=function(e){const a=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return a&&a[1]||""}(n.url);g&&-1===Dt.protocols.indexOf(g)?t(new ht("Unsupported protocol "+g+":",ht.ERR_BAD_REQUEST,e)):f.send(r||null)})},cn=(e,a)=>{const{length:t}=e=e?e.filter(Boolean):[];if(a||t){let t,n=new AbortController;const r=function(e){if(!t){t=!0,s();const a=e instanceof Error?e:this.reason;n.abort(a instanceof ht?a:new Qt(a instanceof Error?a.message:a))}};let l=a&&setTimeout(()=>{l=null,r(new ht("timeout ".concat(a," of ms exceeded"),ht.ETIMEDOUT))},a);const s=()=>{e&&(l&&clearTimeout(l),l=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(r):e.removeEventListener("abort",r)}),e=null)};e.forEach(e=>e.addEventListener("abort",r));const{signal:i}=n;return i.unsubscribe=()=>dt.asap(s),i}};function dn(e,a){this.v=e,this.k=a}function un(e){return function(){return new mn(e.apply(this,arguments))}}function mn(e){var a,t;function n(a,t){try{var l=e[a](t),s=l.value,i=s instanceof dn;Promise.resolve(i?s.v:s).then(function(t){if(i){var o="return"===a?"return":"next";if(!s.k||t.done)return n(o,t);t=e[o](t).value}r(l.done?"return":"normal",t)},function(e){n("throw",e)})}catch(e){r("throw",e)}}function r(e,r){switch(e){case"return":a.resolve({value:r,done:!0});break;case"throw":a.reject(r);break;default:a.resolve({value:r,done:!1})}(a=a.next)?n(a.key,a.arg):t=null}this._invoke=function(e,r){return new Promise(function(l,s){var i={key:e,arg:r,resolve:l,reject:s,next:null};t?t=t.next=i:(a=t=i,n(e,r))})},"function"!=typeof e.return&&(this.return=void 0)}function pn(e){return new dn(e,0)}function hn(e){var a={},t=!1;function n(a,n){return t=!0,n=new Promise(function(t){t(e[a](n))}),{done:!1,value:new dn(n,1)}}return a["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},a.next=function(e){return t?(t=!1,e):n("next",e)},"function"==typeof e.throw&&(a.throw=function(e){if(t)throw t=!1,e;return n("throw",e)}),"function"==typeof e.return&&(a.return=function(e){return t?(t=!1,e):n("return",e)}),a}function fn(e){var a,t,n,r=2;for("undefined"!=typeof Symbol&&(t=Symbol.asyncIterator,n=Symbol.iterator);r--;){if(t&&null!=(a=e[t]))return a.call(e);if(n&&null!=(a=e[n]))return new vn(a.call(e));t="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function vn(e){function a(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var a=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:a}})}return vn=function(e){this.s=e,this.n=e.next},vn.prototype={s:null,n:null,next:function(){return a(this.n.apply(this.s,arguments))},return:function(e){var t=this.s.return;return void 0===t?Promise.resolve({value:e,done:!0}):a(t.apply(this.s,arguments))},throw:function(e){var t=this.s.return;return void 0===t?Promise.reject(e):a(t.apply(this.s,arguments))}},new vn(e)}mn.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},mn.prototype.next=function(e){return this._invoke("next",e)},mn.prototype.throw=function(e){return this._invoke("throw",e)},mn.prototype.return=function(e){return this._invoke("return",e)};const gn=function*(e,a){let t=e.byteLength;if(!a||t<a)return void(yield e);let n,r=0;for(;r<t;)n=r+a,yield e.slice(r,n),r=n},xn=function(){var e=un(function*(e,a){var t,n=!1,r=!1;try{for(var l,s=fn(bn(e));n=!(l=yield pn(s.next())).done;n=!1){const e=l.value;yield*hn(fn(gn(e,a)))}}catch(i){r=!0,t=i}finally{try{n&&null!=s.return&&(yield pn(s.return()))}finally{if(r)throw t}}});return function(a,t){return e.apply(this,arguments)}}(),bn=function(){var e=un(function*(e){if(e[Symbol.asyncIterator])return void(yield*hn(fn(e)));const a=e.getReader();try{for(;;){const{done:e,value:t}=yield pn(a.read());if(e)break;yield t}}finally{yield pn(a.cancel())}});return function(a){return e.apply(this,arguments)}}(),yn=(e,a,t,n)=>{const r=xn(e,a);let l,s=0,i=e=>{l||(l=!0,n&&n(e))};return new ReadableStream({async pull(e){try{const{done:a,value:n}=await r.next();if(a)return i(),void e.close();let l=n.byteLength;if(t){let e=s+=l;t(e)}e.enqueue(new Uint8Array(n))}catch(a){throw i(a),a}},cancel:e=>(i(e),r.return())},{highWaterMark:2})},{isFunction:jn}=dt,Nn=(e=>{let{Request:a,Response:t}=e;return{Request:a,Response:t}})(dt.global),{ReadableStream:_n,TextEncoder:wn}=dt.global,Cn=function(e){try{for(var a=arguments.length,t=new Array(a>1?a-1:0),n=1;n<a;n++)t[n-1]=arguments[n];return!!e(...t)}catch(el){return!1}},Sn=e=>{e=dt.merge.call({skipUndefined:!0},Nn,e);const{fetch:a,Request:t,Response:n}=e,r=a?jn(a):"function"===typeof fetch,l=jn(t),s=jn(n);if(!r)return!1;const i=r&&jn(_n),o=r&&("function"===typeof wn?(c=new wn,e=>c.encode(e)):async e=>new Uint8Array(await new t(e).arrayBuffer()));var c;const d=l&&i&&Cn(()=>{let e=!1;const a=new t(Dt.origin,{body:new _n,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!a}),m=s&&i&&Cn(()=>dt.isReadableStream(new n("").body)),p={stream:m&&(e=>e.body)};r&&["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!p[e]&&(p[e]=(a,t)=>{let n=a&&a[e];if(n)return n.call(a);throw new ht("Response type '".concat(e,"' is not supported"),ht.ERR_NOT_SUPPORT,t)})});const h=async(e,a)=>{const n=dt.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(dt.isBlob(e))return e.size;if(dt.isSpecCompliantForm(e)){const a=new t(Dt.origin,{method:"POST",body:e});return(await a.arrayBuffer()).byteLength}return dt.isArrayBufferView(e)||dt.isArrayBuffer(e)?e.byteLength:(dt.isURLSearchParams(e)&&(e+=""),dt.isString(e)?(await o(e)).byteLength:void 0)})(a):n};return async e=>{let{url:r,method:s,data:i,signal:o,cancelToken:c,timeout:f,onDownloadProgress:v,onUploadProgress:g,responseType:x,headers:b,withCredentials:y="same-origin",fetchOptions:j}=sn(e),N=a||fetch;x=x?(x+"").toLowerCase():"text";let _=cn([o,c&&c.toAbortSignal()],f),w=null;const C=_&&_.unsubscribe&&(()=>{_.unsubscribe()});let S;try{if(g&&d&&"get"!==s&&"head"!==s&&0!==(S=await h(b,i))){let e,a=new t(r,{method:"POST",body:i,duplex:"half"});if(dt.isFormData(i)&&(e=a.headers.get("content-type"))&&b.setContentType(e),a.body){const[e,t]=Zt(S,Xt(en(g)));i=yn(a.body,65536,e,t)}}dt.isString(y)||(y=y?"include":"omit");const a=l&&"credentials"in t.prototype,o=u(u({},j),{},{signal:_,method:s.toUpperCase(),headers:b.normalize().toJSON(),body:i,duplex:"half",credentials:a?y:void 0});w=l&&new t(r,o);let c=await(l?N(w,j):N(r,o));const f=m&&("stream"===x||"response"===x);if(m&&(v||f&&C)){const e={};["status","statusText","headers"].forEach(a=>{e[a]=c[a]});const a=dt.toFiniteNumber(c.headers.get("content-length")),[t,r]=v&&Zt(a,Xt(en(v),!0))||[];c=new n(yn(c.body,65536,t,()=>{r&&r(),C&&C()}),e)}x=x||"text";let k=await p[dt.findKey(p,x)||"text"](c,e);return!f&&C&&C(),await new Promise((a,t)=>{Kt(a,t,{data:k,headers:Ht.from(c.headers),status:c.status,statusText:c.statusText,config:e,request:w})})}catch(k){if(C&&C(),k&&"TypeError"===k.name&&/Load failed|fetch/i.test(k.message))throw Object.assign(new ht("Network Error",ht.ERR_NETWORK,e,w),{cause:k.cause||k});throw ht.from(k,k&&k.code,e,w)}}},kn=new Map,En=e=>{let a=e?e.env:{};const{fetch:t,Request:n,Response:r}=a,l=[n,r,t];let s,i,o=l.length,c=kn;for(;o--;)s=l[o],i=c.get(s),void 0===i&&c.set(s,i=o?new Map:Sn(a)),c=i;return i},Tn=(En(),{http:null,xhr:on,fetch:{get:En}});dt.forEach(Tn,(e,a)=>{if(e){try{Object.defineProperty(e,"name",{value:a})}catch(el){}Object.defineProperty(e,"adapterName",{value:a})}});const Pn=e=>"- ".concat(e),Rn=e=>dt.isFunction(e)||null===e||!1===e,Ln=(e,a)=>{e=dt.isArray(e)?e:[e];const{length:t}=e;let n,r;const l={};for(let s=0;s<t;s++){let t;if(n=e[s],r=n,!Rn(n)&&(r=Tn[(t=String(n)).toLowerCase()],void 0===r))throw new ht("Unknown adapter '".concat(t,"'"));if(r&&(dt.isFunction(r)||(r=r.get(a))))break;l[t||"#"+s]=r}if(!r){const e=Object.entries(l).map(e=>{let[a,t]=e;return"adapter ".concat(a," ")+(!1===t?"is not supported by the environment":"is not available in the build")});let a=t?e.length>1?"since :\n"+e.map(Pn).join("\n"):" "+Pn(e[0]):"as no adapter specified";throw new ht("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return r};function An(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Qt(null,e)}function Dn(e){An(e),e.headers=Ht.from(e.headers),e.data=Wt.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Ln(e.adapter||It.adapter,e)(e).then(function(a){return An(e),a.data=Wt.call(e,e.transformResponse,a),a.headers=Ht.from(a.headers),a},function(a){return Gt(a)||(An(e),a&&a.response&&(a.response.data=Wt.call(e,e.transformResponse,a.response),a.response.headers=Ht.from(a.response.headers))),Promise.reject(a)})}const zn="1.12.2",On={};["object","boolean","number","function","string","symbol"].forEach((e,a)=>{On[e]=function(t){return typeof t===e||"a"+(a<1?"n ":" ")+e}});const In={};On.transitional=function(e,a,t){function n(e,a){return"[Axios v"+zn+"] Transitional option '"+e+"'"+a+(t?". "+t:"")}return(t,r,l)=>{if(!1===e)throw new ht(n(r," has been removed"+(a?" in "+a:"")),ht.ERR_DEPRECATED);return a&&!In[r]&&(In[r]=!0,console.warn(n(r," has been deprecated since v"+a+" and will be removed in the near future"))),!e||e(t,r,l)}},On.spelling=function(e){return(a,t)=>(console.warn("".concat(t," is likely a misspelling of ").concat(e)),!0)};const qn={assertOptions:function(e,a,t){if("object"!==typeof e)throw new ht("options must be an object",ht.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let r=n.length;for(;r-- >0;){const l=n[r],s=a[l];if(s){const a=e[l],t=void 0===a||s(a,l,e);if(!0!==t)throw new ht("option "+l+" must be "+t,ht.ERR_BAD_OPTION_VALUE);continue}if(!0!==t)throw new ht("Unknown option "+l,ht.ERR_BAD_OPTION)}},validators:On},Fn=qn.validators;class Mn{constructor(e){this.defaults=e||{},this.interceptors={request:new St,response:new St}}async request(e,a){try{return await this._request(e,a)}catch(t){if(t instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const a=e.stack?e.stack.replace(/^.+\n/,""):"";try{t.stack?a&&!String(t.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(t.stack+="\n"+a):t.stack=a}catch(el){}}throw t}}_request(e,a){"string"===typeof e?(a=a||{}).url=e:a=e||{},a=ln(this.defaults,a);const{transitional:t,paramsSerializer:n,headers:r}=a;void 0!==t&&qn.assertOptions(t,{silentJSONParsing:Fn.transitional(Fn.boolean),forcedJSONParsing:Fn.transitional(Fn.boolean),clarifyTimeoutError:Fn.transitional(Fn.boolean)},!1),null!=n&&(dt.isFunction(n)?a.paramsSerializer={serialize:n}:qn.assertOptions(n,{encode:Fn.function,serialize:Fn.function},!0)),void 0!==a.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?a.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:a.allowAbsoluteUrls=!0),qn.assertOptions(a,{baseUrl:Fn.spelling("baseURL"),withXsrfToken:Fn.spelling("withXSRFToken")},!0),a.method=(a.method||this.defaults.method||"get").toLowerCase();let l=r&&dt.merge(r.common,r[a.method]);r&&dt.forEach(["delete","get","head","post","put","patch","common"],e=>{delete r[e]}),a.headers=Ht.concat(l,r);const s=[];let i=!0;this.interceptors.request.forEach(function(e){"function"===typeof e.runWhen&&!1===e.runWhen(a)||(i=i&&e.synchronous,s.unshift(e.fulfilled,e.rejected))});const o=[];let c;this.interceptors.response.forEach(function(e){o.push(e.fulfilled,e.rejected)});let d,u=0;if(!i){const e=[Dn.bind(this),void 0];for(e.unshift(...s),e.push(...o),d=e.length,c=Promise.resolve(a);u<d;)c=c.then(e[u++],e[u++]);return c}d=s.length;let m=a;for(;u<d;){const e=s[u++],a=s[u++];try{m=e(m)}catch(p){a.call(this,p);break}}try{c=Dn.call(this,m)}catch(p){return Promise.reject(p)}for(u=0,d=o.length;u<d;)c=c.then(o[u++],o[u++]);return c}getUri(e){return Ct(nn((e=ln(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}dt.forEach(["delete","get","head","options"],function(e){Mn.prototype[e]=function(a,t){return this.request(ln(t||{},{method:e,url:a,data:(t||{}).data}))}}),dt.forEach(["post","put","patch"],function(e){function a(a){return function(t,n,r){return this.request(ln(r||{},{method:e,headers:a?{"Content-Type":"multipart/form-data"}:{},url:t,data:n}))}}Mn.prototype[e]=a(),Mn.prototype[e+"Form"]=a(!0)});const Un=Mn;class Bn{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let a;this.promise=new Promise(function(e){a=e});const t=this;this.promise.then(e=>{if(!t._listeners)return;let a=t._listeners.length;for(;a-- >0;)t._listeners[a](e);t._listeners=null}),this.promise.then=e=>{let a;const n=new Promise(e=>{t.subscribe(e),a=e}).then(e);return n.cancel=function(){t.unsubscribe(a)},n},e(function(e,n,r){t.reason||(t.reason=new Qt(e,n,r),a(t.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const a=this._listeners.indexOf(e);-1!==a&&this._listeners.splice(a,1)}toAbortSignal(){const e=new AbortController,a=a=>{e.abort(a)};return this.subscribe(a),e.signal.unsubscribe=()=>this.unsubscribe(a),e.signal}static source(){let e;return{token:new Bn(function(a){e=a}),cancel:e}}}const Vn=Bn;const Hn={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Hn).forEach(e=>{let[a,t]=e;Hn[t]=a});const Wn=Hn;const Gn=function e(a){const t=new Un(a),n=wa(Un.prototype.request,t);return dt.extend(n,Un.prototype,t,{allOwnKeys:!0}),dt.extend(n,t,null,{allOwnKeys:!0}),n.create=function(t){return e(ln(a,t))},n}(It);Gn.Axios=Un,Gn.CanceledError=Qt,Gn.CancelToken=Vn,Gn.isCancel=Gt,Gn.VERSION=zn,Gn.toFormData=bt,Gn.AxiosError=ht,Gn.Cancel=Gn.CanceledError,Gn.all=function(e){return Promise.all(e)},Gn.spread=function(e){return function(a){return e.apply(null,a)}},Gn.isAxiosError=function(e){return dt.isObject(e)&&!0===e.isAxiosError},Gn.mergeConfig=ln,Gn.AxiosHeaders=Ht,Gn.formToJSON=e=>zt(dt.isHTMLForm(e)?new FormData(e):e),Gn.getAdapter=Ln,Gn.HttpStatusCode=Wn,Gn.default=Gn;const $n=Gn.create({baseURL:"http://localhost:3002/api",headers:{"Content-Type":"application/json"},timeout:3e4});$n.interceptors.request.use(e=>{const a=localStorage.getItem("token");a?(console.log("\u2705 [API Interceptor] Token found, adding to request:",e.url),e.headers.Authorization="Bearer ".concat(a)):console.warn("\u26a0\ufe0f [API Interceptor] No token found in localStorage for request:",e.url);const t=localStorage.getItem("selectedCompanyId");return t&&(e.headers["X-Company-Id"]=t,console.log("\u2705 [API Interceptor] Company ID added:",t)),console.log("\ud83d\udce1 [API Interceptor] Request headers:",{Authorization:e.headers.Authorization?"Bearer ***":"MISSING","X-Company-Id":e.headers["X-Company-Id"]||"NOT SET","Content-Type":e.headers["Content-Type"]}),e}),$n.interceptors.response.use(e=>e,e=>{var a;if(e.response)console.error("API Error Response:",{status:e.response.status,statusText:e.response.statusText,data:e.response.data,url:null===(a=e.config)||void 0===a?void 0:a.url});else if(e.request){var t,n,r,l;console.error("API Network Error:",{message:e.message,code:e.code,url:null===(t=e.config)||void 0===t?void 0:t.url,method:null===(n=e.config)||void 0===n?void 0:n.method,headers:null===(r=e.config)||void 0===r?void 0:r.headers,timeout:null===(l=e.config)||void 0===l?void 0:l.timeout,fullError:e})}else console.error("API Request Setup Error:",e.message);return Promise.reject(e)});const Qn=$n;var Kn=t(579);const Jn=(0,r.createContext)(void 0),Yn=()=>{const e=(0,r.useContext)(Jn);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e},Xn=()=>{try{const e=localStorage.getItem("token"),a=localStorage.getItem("user");if(e&&a)return JSON.parse(a)}catch(e){console.error("Error parsing initial user data:",e)}return null},Zn=e=>{let{children:a}=e;const[t,n]=(0,r.useState)(Xn),l=!!t;(0,r.useEffect)(()=>{if(t){const e=localStorage.getItem("selectedCompanyId");if(e)return void console.log("\u2705 Usando empresa guardada en localStorage:",e);if("super_admin"===t.role)localStorage.setItem("selectedCompanyId","ALL"),console.log("\u2705 Super admin: Estableciendo selectedCompanyId inicial a ALL");else if(t.companyRoles&&Object.keys(t.companyRoles).length>0){const e=Object.keys(t.companyRoles)[0];localStorage.setItem("selectedCompanyId",e),console.log("\u2705 Company ID establecido al cargar:",e)}else t.company_id&&(localStorage.setItem("selectedCompanyId",t.company_id),console.log("\u2705 Company ID (legacy) establecido al cargar:",t.company_id))}},[t]);const s={user:t,isAuthenticated:l,login:async(e,a)=>{try{const t=await Qn.post("/auth/login",{email:e,password:a}),{token:r,user:l}=t.data;if(localStorage.setItem("token",r),localStorage.setItem("user",JSON.stringify(l)),l.companyRoles&&Object.keys(l.companyRoles).length>0){const e=Object.keys(l.companyRoles)[0];localStorage.setItem("selectedCompanyId",e),console.log("\u2705 Company ID guardado:",e)}else l.company_id?(localStorage.setItem("selectedCompanyId",l.company_id),console.log("\u2705 Company ID (legacy) guardado:",l.company_id)):"super_admin"===l.role?(localStorage.setItem("selectedCompanyId","ALL"),console.log("\u2705 Super admin: Todas las empresas seleccionadas (ALL)")):console.warn("\u26a0\ufe0f  Usuario sin company asociada");n(l)}catch(s){var t,r,l;throw console.error("Error de login:",{message:null===s||void 0===s?void 0:s.message,response:null===s||void 0===s||null===(t=s.response)||void 0===t?void 0:t.data,status:null===s||void 0===s||null===(r=s.response)||void 0===r?void 0:r.status,statusText:null===s||void 0===s||null===(l=s.response)||void 0===l?void 0:l.statusText,code:null===s||void 0===s?void 0:s.code,fullError:s}),s}},logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("selectedCompanyId"),n(null)},loading:!1,hasRole:e=>(null===t||void 0===t?void 0:t.role)===e,isSuperAdmin:()=>"super_admin"===(null===t||void 0===t?void 0:t.role),isAdmin:()=>"admin"===(null===t||void 0===t?void 0:t.role),isLawyer:()=>"lawyer"===(null===t||void 0===t?void 0:t.role),isUser:()=>"requester"===(null===t||void 0===t?void 0:t.role),getUserCompany:()=>(null===t||void 0===t?void 0:t.company_id)||null};return(0,Kn.jsx)(Jn.Provider,{value:s,children:a})},er=()=>{const[e,a]=(0,r.useState)(""),[t,n]=(0,r.useState)(""),[l,s]=(0,r.useState)(""),[i,o]=(0,r.useState)(!1),{login:c}=Yn();return(0,Kn.jsx)("div",{className:"login-container",children:(0,Kn.jsxs)("div",{className:"login-card",children:[(0,Kn.jsx)("h1",{children:"Legal Bot"}),(0,Kn.jsx)("h2",{children:"Iniciar Sesi\xf3n"}),l&&(0,Kn.jsx)("div",{className:"error-message",children:l}),(0,Kn.jsxs)("form",{onSubmit:async a=>{a.preventDefault(),s(""),o(!0);try{await c(e,t)}catch(n){let e="Error al iniciar sesi\xf3n";n.response?n.response.data?n.response.data.error?e=n.response.data.error:n.response.data.message?e=n.response.data.message:n.response.data.errors&&Array.isArray(n.response.data.errors)&&(e=n.response.data.errors.map(e=>e.msg||e.message).join(", ")):401===n.response.status?e="Credenciales inv\xe1lidas":500===n.response.status?e="Error del servidor. Por favor, intenta m\xe1s tarde":404===n.response.status&&(e="Servicio no encontrado. Verifica la configuraci\xf3n"):n.request?e="No se pudo conectar con el servidor. Verifica tu conexi\xf3n":n.message&&(e=n.message),s(e)}finally{o(!1)}},children:[(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{htmlFor:"email",children:"Email:"}),(0,Kn.jsx)("input",{type:"email",id:"email",value:e,onChange:e=>a(e.target.value),required:!0,disabled:i})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{htmlFor:"password",children:"Contrase\xf1a:"}),(0,Kn.jsx)("input",{type:"password",id:"password",value:t,onChange:e=>n(e.target.value),required:!0,disabled:i})]}),(0,Kn.jsx)("button",{type:"submit",disabled:i,className:"login-button",children:i?"Iniciando sesi\xf3n...":"Iniciar Sesi\xf3n"})]}),(0,Kn.jsxs)("div",{className:"demo-credentials",children:[(0,Kn.jsx)("h3",{children:"Credenciales de Demo:"}),(0,Kn.jsxs)("div",{className:"super-admin-section",children:[(0,Kn.jsx)("h4",{children:"\ud83d\udd27 Super Administrador"}),(0,Kn.jsx)("div",{className:"role-credentials",children:(0,Kn.jsxs)("div",{className:"role-card super-admin",children:[(0,Kn.jsx)("h5",{children:"\ud83d\udd27 Super Admin"}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Email:"})," superadmin@legalbot.com"]}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Contrase\xf1a:"})," 123456"]}),(0,Kn.jsx)("p",{children:(0,Kn.jsx)("em",{children:"Gesti\xf3n completa del sistema"})})]})})]}),(0,Kn.jsx)("h3",{children:"Credenciales de Sistema:"}),(0,Kn.jsxs)("div",{className:"company-section",children:[(0,Kn.jsx)("h4",{children:"\ud83c\udfe2 Sistema Legal Bot"}),(0,Kn.jsxs)("div",{className:"role-credentials",children:[(0,Kn.jsxs)("div",{className:"role-card admin",children:[(0,Kn.jsx)("h5",{children:"\ud83d\udc51 Administrador"}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Email:"})," admin@demo.com"]}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Contrase\xf1a:"})," 123456"]})]}),(0,Kn.jsxs)("div",{className:"role-card lawyer",children:[(0,Kn.jsx)("h5",{children:"\u2696\ufe0f Abogado"}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Email:"})," abogado@demo.com"]}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Contrase\xf1a:"})," 123456"]})]}),(0,Kn.jsxs)("div",{className:"role-card user",children:[(0,Kn.jsx)("h5",{children:"\ud83d\udc64 Usuario"}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Email:"})," solicitante@demo.com"]}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Contrase\xf1a:"})," 123456"]})]})]})]}),(0,Kn.jsxs)("div",{className:"company-section",children:[(0,Kn.jsx)("h4",{children:"\u2696\ufe0f LegalFirm & Asociados"}),(0,Kn.jsxs)("div",{className:"role-credentials",children:[(0,Kn.jsxs)("div",{className:"role-card admin",children:[(0,Kn.jsx)("h5",{children:"\ud83d\udc51 Admin"}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Email:"})," admin@legalfirm.com"]}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Contrase\xf1a:"})," 123456"]})]}),(0,Kn.jsxs)("div",{className:"role-card lawyer",children:[(0,Kn.jsx)("h5",{children:"\u2696\ufe0f Lawyer"}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Email:"})," lawyer@legalfirm.com"]}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Contrase\xf1a:"})," 123456"]})]}),(0,Kn.jsxs)("div",{className:"role-card user",children:[(0,Kn.jsx)("h5",{children:"\ud83d\udc64 User"}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Email:"})," user@legalfirm.com"]}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Contrase\xf1a:"})," 123456"]})]})]})]}),(0,Kn.jsxs)("div",{className:"company-section",children:[(0,Kn.jsx)("h4",{children:"\ud83c\udfe2 BusinessCorp Internacional"}),(0,Kn.jsxs)("div",{className:"role-credentials",children:[(0,Kn.jsxs)("div",{className:"role-card admin",children:[(0,Kn.jsx)("h5",{children:"\ud83d\udc51 Admin"}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Email:"})," admin@businesscorp.com"]}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Contrase\xf1a:"})," 123456"]})]}),(0,Kn.jsxs)("div",{className:"role-card lawyer",children:[(0,Kn.jsx)("h5",{children:"\u2696\ufe0f Lawyer"}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Email:"})," lawyer@businesscorp.com"]}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Contrase\xf1a:"})," 123456"]})]}),(0,Kn.jsxs)("div",{className:"role-card user",children:[(0,Kn.jsx)("h5",{children:"\ud83d\udc64 User"}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Email:"})," user@businesscorp.com"]}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Contrase\xf1a:"})," 123456"]})]})]})]})]})]})})},ar=(0,r.createContext)(void 0),tr=()=>{const e=(0,r.useContext)(ar);if(!e)throw new Error("useCompany must be used within a CompanyProvider");return e},nr=e=>{var a,t;let{children:n}=e;const{user:l}=Yn(),[s,i]=(0,r.useState)(null),[o,c]=(0,r.useState)([]),[d,u]=(0,r.useState)(!0),m=(0,r.useCallback)(async()=>{if(l)try{var e;const a=await Qn.get("/companies/my-companies");console.log("Respuesta de /my-companies:",a.data);const t=a.data;let n=[];if(Array.isArray(t)?n=t:t&&"object"===typeof t?(console.warn("Respuesta no es array, intentando convertir:",t),n=[]):(console.warn("Respuesta inesperada de /my-companies:",t),n=[]),c(n),0===n.length)return console.warn("No hay empresas disponibles para el usuario. El usuario debe tener al menos una empresa asignada."),void u(!1);let r=localStorage.getItem("selectedCompanyId")||(null===(e=n[0])||void 0===e?void 0:e.companyId);const l=n.some(e=>e.roles.includes("super_admin"));!("ALL"===r?l:n.some(e=>e.companyId===r))&&n.length>0&&(r=n[0].companyId),r&&(i(r),localStorage.setItem("selectedCompanyId",r),console.log("\u2705 CompanyContext: Empresa seleccionada: ".concat("ALL"===r?"TODAS LAS EMPRESAS":r))),u(!1)}catch(a){console.error("Error al cargar empresas:",a),u(!1)}else u(!1)},[l]);(0,r.useEffect)(()=>{m()},[m]);const p="ALL"===s?["super_admin"]:(null===(a=o.find(e=>e.companyId===s))||void 0===a?void 0:a.roles)||[],h="ALL"===s?"Todas las empresas":(null===(t=o.find(e=>e.companyId===s))||void 0===t?void 0:t.companyName)||null,f={selectedCompanyId:s,selectedCompanyName:h,userCompanies:o,currentRoles:p,selectCompany:e=>{if("ALL"===e){if(!o.some(e=>e.roles.includes("super_admin")))return void console.error("Solo super_admin puede acceder a todas las empresas")}else{if(!o.some(a=>a.companyId===e))return void console.error("No tienes acceso a esta empresa")}i(e),localStorage.setItem("selectedCompanyId",e),window.location.reload()},hasRole:e=>Array.isArray(e)?e.some(e=>p.includes(e)):p.includes(e),isLoading:d};return(0,Kn.jsx)(ar.Provider,{value:f,children:n})},rr=e=>{let{children:a,allowedRoles:t,fallback:n=null}=e;const{user:r}=Yn(),{hasRole:l,currentRoles:s}=tr();if(!r)return(0,Kn.jsx)(Kn.Fragment,{children:n});if("super_admin"===r.role)return(0,Kn.jsx)(Kn.Fragment,{children:a});if(r.companyRoles&&s.length>0){if(l(t))return(0,Kn.jsx)(Kn.Fragment,{children:a})}else if(t.includes(r.role))return(0,Kn.jsx)(Kn.Fragment,{children:a});return(0,Kn.jsx)(Kn.Fragment,{children:n})},lr=()=>{const{user:e}=Yn(),a=ve(),[t,n]=(0,r.useState)({totalContracts:0,totalTemplates:0,totalCompanies:0,pendingRequests:0}),[l,s]=(0,r.useState)(!0);(0,r.useEffect)(()=>{i()},[]);const i=async()=>{try{const e=await Qn.get("/dashboard/stats");n({totalContracts:e.data.totalContracts||0,totalTemplates:e.data.totalTemplates||0,totalCompanies:e.data.totalCompanies||0,pendingRequests:e.data.pendingRequests||0})}catch(e){console.error("Error fetching dashboard data:",e),n({totalContracts:0,totalTemplates:0,totalCompanies:0,pendingRequests:0})}finally{s(!1)}};if(l)return(0,Kn.jsx)("div",{className:"loading",children:"Cargando dashboard..."});return(0,Kn.jsxs)("div",{className:"dashboard",children:[(0,Kn.jsx)("h1",{children:(()=>{switch(null===e||void 0===e?void 0:e.role){case"super_admin":return"\ud83d\udd27 Panel de Super Administraci\xf3n";case"admin":return"\ud83d\udc51 Panel de Administraci\xf3n";case"lawyer":return"\u2696\ufe0f Panel de Abogado";case"requester":return"\ud83d\udc64 Panel de Usuario";default:return"Dashboard"}})()}),(0,Kn.jsxs)("div",{className:"user-info",children:[(0,Kn.jsxs)("p",{children:["Bienvenido, ",(0,Kn.jsx)("strong",{children:(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.email)})]}),(0,Kn.jsx)("span",{className:"role-badge",children:null===e||void 0===e?void 0:e.role}),(null===e||void 0===e?void 0:e.company)&&(0,Kn.jsxs)("div",{className:"company-info",children:[(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Empresa:"})," ",e.company.name]}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"RUC:"})," ",e.company.tax_id]})]})]}),(0,Kn.jsxs)("div",{className:"stats-grid",children:[(0,Kn.jsxs)("div",{className:"stat-card",children:[(0,Kn.jsx)("h3",{children:"Contratos"}),(0,Kn.jsx)("div",{className:"stat-number",children:t.totalContracts})]}),(0,Kn.jsx)(rr,{allowedRoles:["super_admin","admin","lawyer"],children:(0,Kn.jsxs)("div",{className:"stat-card",children:[(0,Kn.jsx)("h3",{children:"Plantillas"}),(0,Kn.jsx)("div",{className:"stat-number",children:t.totalTemplates})]})}),(0,Kn.jsx)(rr,{allowedRoles:["super_admin","admin","lawyer"],children:(0,Kn.jsxs)("div",{className:"stat-card",children:[(0,Kn.jsx)("h3",{children:"Empresas"}),(0,Kn.jsx)("div",{className:"stat-number",children:t.totalCompanies})]})}),(0,Kn.jsx)(rr,{allowedRoles:["super_admin","admin","lawyer"],children:(0,Kn.jsxs)("div",{className:"stat-card",children:[(0,Kn.jsx)("h3",{children:"Solicitudes Pendientes"}),(0,Kn.jsx)("div",{className:"stat-number",children:t.pendingRequests})]})})]}),(0,Kn.jsxs)("div",{className:"quick-actions",children:[(0,Kn.jsx)("h2",{children:"Acciones R\xe1pidas"}),(0,Kn.jsxs)("div",{className:"action-buttons",children:[(0,Kn.jsx)("button",{className:"action-btn",onClick:()=>a("/contracts"),children:"Ver Contratos"}),(0,Kn.jsxs)(rr,{allowedRoles:["super_admin","admin","lawyer"],children:[(0,Kn.jsx)("button",{className:"action-btn",onClick:()=>a("/contract-generator"),children:"Crear Contrato"}),(0,Kn.jsx)("button",{className:"action-btn",onClick:()=>a("/templates"),children:"Nueva Plantilla"}),(0,Kn.jsx)("button",{className:"action-btn",onClick:()=>a("/companies"),children:"Agregar Empresa"})]}),(0,Kn.jsxs)(rr,{allowedRoles:["super_admin","admin"],children:[(0,Kn.jsx)("button",{className:"action-btn",onClick:()=>a("/users"),children:"Administrar Usuarios"}),(0,Kn.jsx)("button",{className:"action-btn",onClick:()=>a("/system-config"),children:"Configuraci\xf3n Sistema"})]}),(0,Kn.jsxs)(rr,{allowedRoles:["super_admin"],children:[(0,Kn.jsx)("button",{className:"action-btn",onClick:()=>a("/suppliers"),children:"Gesti\xf3n Completa"}),(0,Kn.jsx)("button",{className:"action-btn",onClick:()=>a("/super-admin"),children:"Super Administraci\xf3n"})]})]})]})]})},sr=()=>{const[e,a]=(0,r.useState)([]),[t,n]=(0,r.useState)(!0),[l,s]=(0,r.useState)(!1),[i,o]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!1),[m,p]=(0,r.useState)(null),[h,f]=(0,r.useState)({title:"",company:"",status:"borrador",description:"",template_id:""}),[v,g]=(0,r.useState)(""),[x,b]=(0,r.useState)([]),[y,j]=(0,r.useState)(""),[N,_]=(0,r.useState)(""),[w,C]=(0,r.useState)(""),[S,k]=(0,r.useState)(""),[E,T]=(0,r.useState)(""),[P,R]=(0,r.useState)(!1);(0,r.useEffect)(()=>{L()},[]);const L=async()=>{try{const e=await Qn.get("/contracts");a(e.data)}catch(e){console.error("Error fetching contracts:",e)}finally{n(!1)}},A=async e=>{try{const a=await Qn.get("/documents/download/word/".concat(e),{responseType:"blob"}),t=window.URL.createObjectURL(new Blob([a.data])),n=document.createElement("a");n.href=t,n.setAttribute("download","contrato_".concat(e,".docx")),document.body.appendChild(n),n.click(),n.remove(),window.URL.revokeObjectURL(t)}catch(a){console.error("Error downloading Word document:",a),alert("Error al descargar el documento Word")}},D=(()=>{let a=[...e];if(v.trim()){const e=v.toLowerCase();a=a.filter(a=>{var t,n;return(null===(t=a.title)||void 0===t?void 0:t.toLowerCase().includes(e))||(null===(n=a.contract_number)||void 0===n?void 0:n.toLowerCase().includes(e))})}if(x.length>0&&(a=a.filter(e=>x.includes(e.status))),w.trim()){const e=w.toLowerCase();a=a.filter(a=>{var t,n;return(null===(t=a.company_name)||void 0===t?void 0:t.toLowerCase().includes(e))||(null===(n=a.company)||void 0===n?void 0:n.toLowerCase().includes(e))})}if(S.trim()){const e=S.toLowerCase();a=a.filter(a=>{var t,n;return null===(t=a.template)||void 0===t||null===(n=t.name)||void 0===n?void 0:n.toLowerCase().includes(e)})}if(E.trim()){const e=E.toLowerCase();a=a.filter(a=>{var t,n;return(null===(t=a.content)||void 0===t?void 0:t.toLowerCase().includes(e))||(null===(n=a.title)||void 0===n?void 0:n.toLowerCase().includes(e))})}if(y){const e=new Date(y);a=a.filter(a=>new Date(a.createdAt)>=e)}if(N){const e=new Date(N);e.setHours(23,59,59,999),a=a.filter(a=>new Date(a.createdAt)<=e)}return a})(),z=[v.trim(),x.length>0,y,N,w.trim(),S.trim(),E.trim()].filter(Boolean).length;return t?(0,Kn.jsx)("div",{className:"loading",children:"Cargando contratos..."}):(0,Kn.jsxs)("div",{className:"contracts",children:[(0,Kn.jsxs)("div",{className:"page-header",children:[(0,Kn.jsx)("h1",{children:"Gesti\xf3n de Contratos"}),(0,Kn.jsx)("button",{className:"btn-primary",onClick:()=>s(!0),children:"Nuevo Contrato"})]}),(0,Kn.jsxs)("div",{className:"filters-container",children:[(0,Kn.jsxs)("div",{className:"filters-header",children:[(0,Kn.jsxs)("button",{className:"btn-toggle-filters",onClick:()=>R(!P),children:[P?"\u25bc":"\u25b6"," Filtros",z>0&&(0,Kn.jsx)("span",{className:"filter-badge",children:z})]}),z>0&&(0,Kn.jsx)("button",{className:"btn-clear-filters",onClick:()=>{g(""),b([]),j(""),_(""),C(""),k(""),T("")},children:"Limpiar Filtros"}),(0,Kn.jsxs)("div",{className:"results-count",children:["Mostrando ",D.length," de ",e.length," contratos"]})]}),P&&(0,Kn.jsxs)("div",{className:"filters-content",children:[(0,Kn.jsxs)("div",{className:"filter-group",children:[(0,Kn.jsx)("label",{children:"Buscar:"}),(0,Kn.jsx)("input",{type:"text",placeholder:"Buscar por t\xedtulo o n\xfamero de contrato...",value:v,onChange:e=>g(e.target.value),className:"filter-input"})]}),(0,Kn.jsxs)("div",{className:"filter-group",children:[(0,Kn.jsx)("label",{children:"Empresa:"}),(0,Kn.jsx)("input",{type:"text",placeholder:"Filtrar por empresa...",value:w,onChange:e=>C(e.target.value),className:"filter-input"})]}),(0,Kn.jsxs)("div",{className:"filter-group",children:[(0,Kn.jsx)("label",{children:"Plantilla:"}),(0,Kn.jsx)("input",{type:"text",placeholder:"Filtrar por nombre de plantilla...",value:S,onChange:e=>k(e.target.value),className:"filter-input"})]}),(0,Kn.jsxs)("div",{className:"filter-group",children:[(0,Kn.jsx)("label",{children:"Tercero:"}),(0,Kn.jsx)("input",{type:"text",placeholder:"Filtrar por nombre o identificaci\xf3n del tercero...",value:E,onChange:e=>T(e.target.value),className:"filter-input"})]}),(0,Kn.jsxs)("div",{className:"filter-group",children:[(0,Kn.jsx)("label",{children:"Estado:"}),(0,Kn.jsx)("div",{className:"status-checkboxes",children:["borrador","revision","aprobado","firmado","cancelado"].map(e=>(0,Kn.jsxs)("label",{className:"checkbox-label",children:[(0,Kn.jsx)("input",{type:"checkbox",checked:x.includes(e),onChange:()=>(e=>{b(a=>a.includes(e)?a.filter(a=>a!==e):[...a,e])})(e)}),(0,Kn.jsx)("span",{className:"status-label ".concat(e),children:e})]},e))})]}),(0,Kn.jsxs)("div",{className:"filter-group-row",children:[(0,Kn.jsxs)("div",{className:"filter-group",children:[(0,Kn.jsx)("label",{children:"Fecha desde:"}),(0,Kn.jsx)("input",{type:"date",value:y,onChange:e=>j(e.target.value),className:"filter-input"})]}),(0,Kn.jsxs)("div",{className:"filter-group",children:[(0,Kn.jsx)("label",{children:"Fecha hasta:"}),(0,Kn.jsx)("input",{type:"date",value:N,onChange:e=>_(e.target.value),className:"filter-input"})]})]})]})]}),(0,Kn.jsx)("div",{className:"contracts-list",children:0===e.length?(0,Kn.jsxs)("div",{className:"empty-state",children:[(0,Kn.jsx)("h3",{children:"No hay contratos"}),(0,Kn.jsx)("p",{children:"Crea tu primer contrato para comenzar"})]}):0===D.length?(0,Kn.jsxs)("div",{className:"empty-state",children:[(0,Kn.jsx)("h3",{children:"No se encontraron contratos"}),(0,Kn.jsx)("p",{children:"Intenta ajustar los filtros para ver m\xe1s resultados"})]}):(0,Kn.jsx)("div",{className:"contracts-table-wrapper",children:(0,Kn.jsxs)("table",{className:"contracts-table-compact",children:[(0,Kn.jsx)("thead",{children:(0,Kn.jsxs)("tr",{children:[(0,Kn.jsx)("th",{className:"th-contract-number",children:"Contrato"}),(0,Kn.jsx)("th",{className:"th-template",children:"Plantilla"}),(0,Kn.jsx)("th",{className:"th-third-party",children:"Tercero"}),(0,Kn.jsx)("th",{className:"th-status",children:"Estado"}),(0,Kn.jsx)("th",{className:"th-date",children:"Fecha"}),(0,Kn.jsx)("th",{className:"th-actions",children:"Acciones"})]})}),(0,Kn.jsx)("tbody",{children:D.map(e=>{var a,t;return(0,Kn.jsxs)("tr",{children:[(0,Kn.jsx)("td",{className:"contract-number-col",children:(0,Kn.jsxs)("div",{className:"contract-info",children:[(0,Kn.jsx)("strong",{title:e.contract_number||e.title||"N/A",children:e.contract_number||e.title||"N/A"}),e.title&&e.contract_number&&(0,Kn.jsx)("small",{title:e.title,children:e.title})]})}),(0,Kn.jsx)("td",{className:"template-col",children:(0,Kn.jsx)("span",{className:"template-badge",title:(null===(a=e.template)||void 0===a?void 0:a.name)||"Sin plantilla",children:(null===(t=e.template)||void 0===t?void 0:t.name)||"Sin plantilla"})}),(0,Kn.jsx)("td",{className:"third-party-col",children:(0,Kn.jsx)("span",{className:"third-party-name",title:e.company_name||e.company||"N/A",children:e.company_name||e.company||"N/A"})}),(0,Kn.jsx)("td",{className:"status-col",children:(0,Kn.jsx)("span",{className:"status-badge status-".concat(e.status),children:e.status})}),(0,Kn.jsx)("td",{className:"date-col",children:(0,Kn.jsx)("div",{className:"date-time-info",children:(0,Kn.jsx)("span",{className:"date-value",children:new Date(e.createdAt).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"})})})}),(0,Kn.jsx)("td",{className:"actions-col",children:(0,Kn.jsxs)("div",{className:"action-buttons",children:[e.file_path&&(0,Kn.jsx)("button",{className:"btn-action btn-download",onClick:()=>A(e._id||e.id||""),title:"Descargar ".concat(e.contract_number||"contrato"),children:(0,Kn.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"13",height:"13",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,Kn.jsx)("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),(0,Kn.jsx)("polyline",{points:"7 10 12 15 17 10"}),(0,Kn.jsx)("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]})}),(0,Kn.jsx)("button",{className:"btn-action btn-delete",onClick:()=>(async e=>{if(window.confirm("\xbfEst\xe1s seguro de que quieres eliminar este contrato?"))try{await Qn.delete("/contracts/".concat(e)),await L(),alert("Contrato eliminado exitosamente")}catch(a){console.error("Error deleting contract:",a),alert("Error al eliminar el contrato")}})(e._id||e.id||""),title:"Eliminar ".concat(e.contract_number||"contrato"),children:(0,Kn.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"13",height:"13",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,Kn.jsx)("polyline",{points:"3 6 5 6 21 6"}),(0,Kn.jsx)("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]})})]},e._id||e.id)})})]})})}),l&&(0,Kn.jsx)("div",{className:"modal-overlay",children:(0,Kn.jsxs)("div",{className:"modal",children:[(0,Kn.jsx)("h3",{children:"Crear Nuevo Contrato"}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"T\xedtulo del Contrato:"}),(0,Kn.jsx)("input",{type:"text",value:h.title,onChange:e=>f(u(u({},h),{},{title:e.target.value})),required:!0})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Empresa:"}),(0,Kn.jsx)("input",{type:"text",value:h.company,onChange:e=>f(u(u({},h),{},{company:e.target.value})),required:!0})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Estado:"}),(0,Kn.jsxs)("select",{value:h.status,onChange:e=>f(u(u({},h),{},{status:e.target.value})),required:!0,children:[(0,Kn.jsx)("option",{value:"borrador",children:"Borrador"}),(0,Kn.jsx)("option",{value:"revision",children:"En Revisi\xf3n"}),(0,Kn.jsx)("option",{value:"aprobado",children:"Aprobado"}),(0,Kn.jsx)("option",{value:"firmado",children:"Firmado"}),(0,Kn.jsx)("option",{value:"cancelado",children:"Cancelado"})]})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Descripci\xf3n:"}),(0,Kn.jsx)("textarea",{value:h.description,onChange:e=>f(u(u({},h),{},{description:e.target.value})),rows:4,placeholder:"Describe el contrato...",required:!0})]}),(0,Kn.jsxs)("div",{className:"modal-actions",children:[(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>s(!1),children:"Cancelar"}),(0,Kn.jsx)("button",{className:"btn-primary",onClick:async()=>{try{await Qn.post("/contracts",h),await L(),s(!1),f({title:"",company:"",status:"borrador",description:"",template_id:""})}catch(e){console.error("Error creating contract:",e)}},disabled:!h.title||!h.company,children:"Crear Contrato"})]})]})}),i&&m&&(0,Kn.jsx)("div",{className:"modal-overlay",children:(0,Kn.jsxs)("div",{className:"modal",children:[(0,Kn.jsx)("h3",{children:"Detalles del Contrato"}),(0,Kn.jsxs)("div",{className:"contract-details",children:[(0,Kn.jsxs)("div",{className:"detail-row",children:[(0,Kn.jsx)("strong",{children:"N\xfamero:"})," ",m.contract_number||"N/A"]}),(0,Kn.jsxs)("div",{className:"detail-row",children:[(0,Kn.jsx)("strong",{children:"T\xedtulo:"})," ",m.title||"Sin t\xedtulo"]}),(0,Kn.jsxs)("div",{className:"detail-row",children:[(0,Kn.jsx)("strong",{children:"Empresa:"})," ",m.company_name||m.company]}),(0,Kn.jsxs)("div",{className:"detail-row",children:[(0,Kn.jsx)("strong",{children:"Estado:"})," ",(0,Kn.jsx)("span",{className:"status ".concat(m.status),children:m.status})]}),(0,Kn.jsxs)("div",{className:"detail-row",children:[(0,Kn.jsx)("strong",{children:"Creado:"})," ",new Date(m.createdAt).toLocaleDateString()]}),(m.file_path||m.pdf_path)&&(0,Kn.jsxs)("div",{className:"detail-row",children:[(0,Kn.jsx)("strong",{children:"Documentos:"}),(0,Kn.jsx)("div",{className:"document-links",children:m.file_path&&(0,Kn.jsx)("button",{className:"btn-download-word",onClick:()=>A(m._id||m.id||""),children:"\ud83d\udcc4 Descargar Word"})})]})]}),(0,Kn.jsx)("div",{className:"modal-actions",children:(0,Kn.jsx)("button",{className:"btn-primary",onClick:()=>o(!1),children:"Cerrar"})})]})}),c&&m&&(0,Kn.jsx)("div",{className:"modal-overlay",children:(0,Kn.jsxs)("div",{className:"modal",children:[(0,Kn.jsx)("h3",{children:"Editar Contrato"}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"T\xedtulo del Contrato:"}),(0,Kn.jsx)("input",{type:"text",value:m.title,onChange:e=>p(u(u({},m),{},{title:e.target.value})),required:!0})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Empresa:"}),(0,Kn.jsx)("input",{type:"text",value:m.company_name||m.company,onChange:e=>p(u(u({},m),{},{company_name:e.target.value})),required:!0})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Estado:"}),(0,Kn.jsxs)("select",{value:m.status,onChange:e=>p(u(u({},m),{},{status:e.target.value})),required:!0,children:[(0,Kn.jsx)("option",{value:"borrador",children:"Borrador"}),(0,Kn.jsx)("option",{value:"revision",children:"En Revisi\xf3n"}),(0,Kn.jsx)("option",{value:"aprobado",children:"Aprobado"}),(0,Kn.jsx)("option",{value:"firmado",children:"Firmado"}),(0,Kn.jsx)("option",{value:"cancelado",children:"Cancelado"})]})]}),(0,Kn.jsxs)("div",{className:"modal-actions",children:[(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>d(!1),children:"Cancelar"}),(0,Kn.jsx)("button",{className:"btn-primary",onClick:async()=>{try{await Qn.put("/contracts/".concat(m._id||m.id),{title:m.title,company:m.company_name||m.company,status:m.status}),await L(),d(!1),alert("Contrato actualizado exitosamente")}catch(e){console.error("Error updating contract:",e),alert("Error al actualizar el contrato")}},disabled:!m.title||!(m.company_name||m.company),children:"Guardar Cambios"})]})]})})]})},ir=e=>{let{templateId:a,onProfileSelect:t,onChange:n}=e;const[l,s]=(0,r.useState)([]),[i,o]=(0,r.useState)(null),[c,d]=(0,r.useState)(null),[m,p]=(0,r.useState)(""),[h,f]=(0,r.useState)(null),[v,g]=(0,r.useState)(!1),[x,b]=(0,r.useState)(!1),[y,j]=(0,r.useState)(!1),[N,_]=(0,r.useState)("");(0,r.useEffect)(()=>{w()},[]),(0,r.useEffect)(()=>{a?C():(d(null),p(""),f(null))},[a]),(0,r.useEffect)(()=>{if(n&&n(h),h){const e={};h.field_mappings.forEach(a=>{const t=a.template_variable.replace(/[{}]/g,"");e[t]=a.value||""}),t(e)}else t({})},[h,n,t]);const w=async()=>{b(!0);try{const e=await Qn.get("/suppliers"),a=Array.isArray(e.data)?e.data:e.data.suppliers||[];s(a.filter(e=>e.active))}catch(N){console.error("Error fetching suppliers:",N),_("Error al cargar terceros")}finally{b(!1)}},C=async()=>{if(a){j(!0),_("");try{const e=await Qn.post("/third-party-profiles/analyze-template/".concat(a));e.data.success&&(d(e.data.analysis),1===e.data.analysis.roles_detected.length&&p(e.data.analysis.roles_detected[0]))}catch(N){console.error("Error analyzing template:",N),_("Error al analizar plantilla")}finally{j(!1)}}},S=async(e,t)=>{if(a&&e&&t){g(!0),_("");try{const n=await Qn.post("/third-party-profiles/auto-fill",{supplier_id:e,template_id:a,role_in_template:t});n.data.success&&f(n.data.profile)}catch(N){console.error("Error auto-filling profile:",N),_("Error al auto-llenar perfil")}finally{g(!1)}}};return(0,Kn.jsxs)("div",{className:"third-party-profile-selector",children:[(0,Kn.jsx)("h4",{children:"Seleccionar Tercero para esta Plantilla"}),y&&(0,Kn.jsx)("div",{className:"loading-message",children:"Analizando plantilla..."}),c&&c.roles_count>0&&(0,Kn.jsx)("div",{className:"template-analysis-info",children:(0,Kn.jsxs)("div",{className:"analysis-summary",children:[(0,Kn.jsxs)("span",{className:"analysis-badge",children:[c.roles_count," rol(es) detectado(s)"]}),(0,Kn.jsxs)("span",{className:"analysis-badge",children:[c.total_variables," variables"]}),(0,Kn.jsxs)("span",{className:"analysis-badge",children:[c.classification_rate,"% clasificadas"]})]})}),c&&c.roles_count>1&&(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsxs)("label",{className:"form-label",children:["Rol del Tercero en este Contrato",(0,Kn.jsx)("span",{className:"required",children:"*"})]}),(0,Kn.jsxs)("select",{value:m,onChange:e=>(async e=>{p(e),i&&a&&await S(i._id,e)})(e.target.value),className:"form-select",disabled:v,children:[(0,Kn.jsx)("option",{value:"",children:"-- Seleccionar rol --"}),c.role_groups.map(e=>(0,Kn.jsxs)("option",{value:e.role,children:[e.role_label," (",e.variables.length," campos)"]},e.role))]})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsxs)("label",{className:"form-label",children:["Tercero",(0,Kn.jsx)("span",{className:"required",children:"*"})]}),(0,Kn.jsxs)("select",{value:(null===i||void 0===i?void 0:i._id)||"",onChange:e=>(async e=>{if(!e)return o(null),void f(null);const t=l.find(a=>a._id===e);t&&(o(t),m&&a&&await S(e,m))})(e.target.value),className:"form-select",disabled:x||v,children:[(0,Kn.jsx)("option",{value:"",children:"-- Seleccionar tercero --"}),l.map(e=>{const a=e.legal_name||e.full_name||e.identification_number;return(0,Kn.jsxs)("option",{value:e._id,children:[a," (",e.identification_number,")"]},e._id)})]}),x&&(0,Kn.jsx)("span",{className:"loading-text",children:"Cargando terceros..."})]}),v&&(0,Kn.jsx)("div",{className:"loading-message",children:"Auto-llenando perfil desde datos del tercero..."}),N&&(0,Kn.jsx)("div",{className:"error-message",children:N}),h&&(0,Kn.jsxs)("div",{className:"profile-preview",children:[(0,Kn.jsxs)("div",{className:"profile-header",children:[(0,Kn.jsxs)("div",{className:"profile-title",children:[(0,Kn.jsxs)("h5",{children:["Perfil: ",h.role_label]}),(0,Kn.jsx)("span",{className:"profile-meta",children:(null===i||void 0===i?void 0:i.legal_name)||(null===i||void 0===i?void 0:i.full_name)})]}),(0,Kn.jsxs)("div",{className:"completeness-indicator",children:[(0,Kn.jsx)("div",{className:"completeness-bar-container",children:(0,Kn.jsx)("div",{className:"completeness-bar",style:{width:"".concat(h.completeness.percentage,"%"),backgroundColor:(k=h.completeness.percentage,k>=80?"#4caf50":k>=50?"#ff9800":"#f44336")}})}),(0,Kn.jsxs)("span",{className:"completeness-text",children:[h.completeness.percentage,"% completo"]})]})]}),(0,Kn.jsxs)("div",{className:"profile-stats",children:[(0,Kn.jsxs)("span",{className:"stat",children:[h.field_mappings.filter(e=>e.is_auto_filled).length," auto-llenados"]}),(0,Kn.jsxs)("span",{className:"stat",children:[h.completeness.filled_fields_count,"/",h.field_mappings.length," llenos"]}),h.usage_count>0&&(0,Kn.jsxs)("span",{className:"stat",children:["Usado ",h.usage_count," vez(es)"]})]}),h.completeness.percentage<100&&(0,Kn.jsxs)("div",{className:"missing-fields-section",children:[(0,Kn.jsx)("h6",{children:"Campos Faltantes"}),(0,Kn.jsx)("div",{className:"fields-grid",children:h.field_mappings.filter(e=>!e.value||""===e.value).slice(0,5).map((e,a)=>{const t=e.template_variable.replace(/[{}]/g,"");return(0,Kn.jsxs)("div",{className:"field-item",children:[(0,Kn.jsx)("label",{className:"field-label",children:t}),(0,Kn.jsx)("input",{type:"text",className:"field-input",placeholder:"Ingrese ".concat(t),value:e.value||"",onChange:a=>((e,a)=>{if(!h)return;const t=h.field_mappings.map(t=>t.template_variable===e?u(u({},t),{},{value:a,is_auto_filled:!1}):t),n=u(u({},h),{},{field_mappings:t});f(n)})(e.template_variable,a.target.value)})]},a)})}),h.completeness.missing_fields.length>5&&(0,Kn.jsxs)("p",{className:"more-fields-text",children:["Y ",h.completeness.missing_fields.length-5," campo(s) m\xe1s..."]})]}),100===h.completeness.percentage&&(0,Kn.jsx)("div",{className:"success-message",children:"Todos los campos est\xe1n completos. El perfil est\xe1 listo para generar el contrato."})]}),!i&&!h&&(0,Kn.jsxs)("div",{className:"help-text",children:["Selecciona un tercero para auto-llenar los campos del contrato con su informaci\xf3n.",c&&c.roles_count>0&&(0,Kn.jsx)("span",{children:" Los campos detectados para el rol seleccionado se llenar\xe1n autom\xe1ticamente."})]})]});var k},or=()=>{const[e,a]=(0,r.useState)([]),[t,n]=(0,r.useState)(null),[l,s]=(0,r.useState)({}),[i,o]=(0,r.useState)(""),[c,d]=(0,r.useState)(""),[m,p]=(0,r.useState)(""),[h,f]=(0,r.useState)(""),[v,g]=(0,r.useState)(!1),[x,b]=(0,r.useState)(""),[y,j]=(0,r.useState)(!1),[N,_]=(0,r.useState)([]),[w,C]=(0,r.useState)(null),[S,k]=(0,r.useState)(!1),E=e=>{console.log("\ud83d\udd04 setAllFieldsFilled llamado con:",e),j(e)};console.log("\ud83d\udd04 ContractGenerator render - allFieldsFilled:",y),(0,r.useEffect)(()=>{(async()=>{try{const e=await Qn.get("/templates");a(e.data)}catch(e){console.error("Error fetching templates:",e),b("Error al cargar las plantillas")}})(),T()},[]);const T=async()=>{k(!0);try{console.log("\ud83d\udd0d [ContractGenerator] Fetching suppliers...");const e=await Qn.get("/suppliers");console.log("\u2705 [ContractGenerator] Suppliers fetched:",e.data),Array.isArray(e.data)?_(e.data):e.data&&Array.isArray(e.data.suppliers)?_(e.data.suppliers):(console.error("\u26a0\ufe0f [ContractGenerator] Unexpected response format:",e.data),_([]))}catch(x){var e;console.error("\u274c [ContractGenerator] Error fetching suppliers:",x),console.error("Error details:",null===(e=x.response)||void 0===e?void 0:e.data),_([])}finally{k(!1)}},P=e=>{return(a=e,a.normalize("NFD").replace(/[\u0300-\u036f]/g,"")).toLowerCase().replace(/[_\s\/\-]+/g,"").replace(/de/g,"").replace(/del/g,"").replace(/la/g,"").replace(/el/g,"");var a};(0,r.useEffect)(()=>{if(console.log("\ud83d\udd04 useEffect ejecutado - Validaci\xf3n"),console.log("  - selectedTemplate:",!!t),console.log("  - selectedTemplate name:",null===t||void 0===t?void 0:t.name),console.log("  - contractData keys:",Object.keys(l)),console.log("  - contractData values:",Object.values(l)),t){const e=new Map;t.fields.forEach(a=>{if(a.required){const t=P(a.field_name);e.has(t)||e.set(t,a)}});const a=Array.from(e.values());console.log("  - Required fields count (unique):",a.length),console.log("  - Required field names:",a.map(e=>e.field_name));const n=a.map(e=>{const a=l[e.field_name],t=a&&""!==a.trim();return console.log("    - ".concat(e.field_name,': "').concat(a,'" \u2192 ').concat(t?"LLENO":"VAC\xcdO")),t}).every(e=>e);console.log("  - Todos llenos:",n),console.log("  - Llamando setAllFieldsFilled con:",n),E(n)}else console.log("  - No hay plantilla seleccionada"),console.log("  - Llamando setAllFieldsFilled con: false"),E(!1)},[l,t]),(0,r.useEffect)(()=>{if(console.log("\ud83d\udd04 useEffect adicional - Forzar validaci\xf3n"),t&&Object.keys(l).length>0){const e=new Map;t.fields.forEach(a=>{if(a.required){const t=P(a.field_name);e.has(t)||e.set(t,a)}});const a=Array.from(e.values()).every(e=>{const a=l[e.field_name];return a&&""!==a.trim()});console.log("\ud83d\udd04 Validaci\xf3n forzada - Todos llenos:",a),y!==a&&(console.log("\ud83d\udd04 Estado cambi\xf3, actualizando..."),E(a))}});const R=(e,a)=>{const n=u({},l);if(n[e]=a,console.log("\ud83d\udcdd CAMPO ACTUALIZADO:",e,"\u2192",'"'.concat(a,'"')),t){const r=A(e);t.fields.filter(e=>A(e.field_name)===r).forEach(t=>{t.field_name!==e&&(n[t.field_name]=a,console.log("\ud83d\udd04 CAMPO SIMILAR ACTUALIZADO:",t.field_name,"\u2192",'"'.concat(a,'"')))});const l=t.fields.find(a=>a.field_name===e);if(l){t.fields.filter(e=>e.can_repeat&&e.repeat_source&&e.repeat_source===l.field_name).forEach(e=>{const t=e.field_name;n[t]=a,console.log("\ud83d\udd04 VARIABLE REPETIDA ACTUALIZADA:",t,"\u2192",'"'.concat(a,'"'))})}}s(n)},L=()=>y,A=e=>{return(a=e,a.normalize("NFD").replace(/[\u0300-\u036f]/g,"")).toLowerCase().replace(/[_\s\/\-]+/g,"").replace(/de/g,"").replace(/del/g,"").replace(/la/g,"").replace(/el/g,"");var a},D=()=>{if(!t)return[];const e=[],a=new Set;return t.fields.forEach(t=>{if(t.can_repeat&&t.repeat_source){const n=t.field_name;a.has(n)||(a.add(n),e.push(t))}}),e};return(0,Kn.jsxs)("div",{className:"contract-generator",children:[(0,Kn.jsxs)("div",{className:"generator-header",children:[(0,Kn.jsx)("h2",{children:"Generador de Contratos"}),(0,Kn.jsx)("p",{children:"Selecciona una plantilla y completa los datos para generar tu contrato"})]}),x&&(0,Kn.jsx)("div",{className:"error-message",children:x}),(0,Kn.jsxs)("div",{className:"template-selection",children:[(0,Kn.jsx)("h3",{children:"1. Seleccionar Plantilla"}),(0,Kn.jsx)("div",{className:"templates-grid",children:e.map(e=>(0,Kn.jsxs)("div",{className:"template-card ".concat((null===t||void 0===t?void 0:t._id)===e._id?"selected":""),onClick:()=>(e=>{n(e),s({}),o(""),d(""),p(""),f(""),b(""),C(null);const a={},t=new Set;e.fields.forEach(e=>{const n=e.field_name;t.has(n)||(t.add(n),a[n]="")}),console.log("\ud83d\udcdd Inicializando datos de plantilla:"),console.log("  - Total fields in template:",e.fields.length),console.log("  - Unique field names:",t.size),console.log("  - Field names:",Array.from(t)),s(a)})(e),children:[(0,Kn.jsx)("h4",{children:e.name}),(0,Kn.jsx)("p",{className:"template-category",children:e.category}),(0,Kn.jsx)("p",{className:"template-description",children:e.description}),(0,Kn.jsxs)("div",{className:"template-stats",children:[(0,Kn.jsxs)("span",{children:[e.fields.length," campos"]}),e.fields.filter(e=>e.can_repeat).length>0&&(0,Kn.jsxs)("span",{className:"repeat-info",children:[e.fields.filter(e=>e.can_repeat).length," variables reutilizables"]})]})]},e._id))})]}),t&&(0,Kn.jsxs)("div",{className:"contract-form",children:[(0,Kn.jsx)("h3",{children:"2. Completar Informaci\xf3n"}),(0,Kn.jsx)(ir,{templateId:t._id,onProfileSelect:e=>{console.log("\ud83d\udccb Profile data received:",e),s(a=>u(u({},a),e))},onChange:e=>{console.log("\ud83d\udd04 Profile changed:",e)}}),(0,Kn.jsxs)("div",{className:"form-section",children:[(0,Kn.jsx)("h4",{children:"Informaci\xf3n Principal"}),(0,Kn.jsx)("div",{className:"form-grid",children:(()=>{if(!t)return[];const e=[],a=new Set;return t.fields.forEach(t=>{const n=A(t.field_name);a.has(n)?console.log('\u26a0\ufe0f  Campo duplicado omitido: "'.concat(t.field_name,'" (normalizado: "').concat(n,'")')):(a.add(n),e.push(t),console.log('\u2705 Campo \xfanico: "'.concat(t.field_name,'" (normalizado: "').concat(n,'")')))}),console.log("\ud83d\udd0d getUniqueFields:"),console.log("  - Total fields in template:",t.fields.length),console.log("  - Unique fields returned:",e.length),e})().map((e,a)=>{var t;const n=e.field_name;return(0,Kn.jsxs)("div",{className:"form-field",children:[(0,Kn.jsxs)("label",{htmlFor:n,children:[e.field_label,e.required&&(0,Kn.jsx)("span",{className:"required",children:"*"})]}),"textarea"===e.field_type?(0,Kn.jsx)("textarea",{id:n,value:l[n]||"",onChange:e=>R(n,e.target.value),className:"form-input",rows:3,required:e.required}):"select"===e.field_type?(0,Kn.jsxs)("select",{id:n,value:l[n]||"",onChange:e=>R(n,e.target.value),className:"form-input",required:e.required,children:[(0,Kn.jsx)("option",{value:"",children:"Seleccionar..."}),null===(t=e.field_options)||void 0===t?void 0:t.map(e=>(0,Kn.jsx)("option",{value:e,children:e},e))]}):(0,Kn.jsx)("input",{type:"date"===e.field_type?"date":"email"===e.field_type?"email":"text",id:n,value:l[n]||"",onChange:e=>R(n,e.target.value),className:"form-input",required:e.required}),e.repeat_count>1&&(0,Kn.jsxs)("div",{className:"repeat-indicator",children:["\ud83d\udccb Se usar\xe1 en ",e.repeat_count," ubicaciones"]})]},"".concat(e.field_name,"-").concat(a))})})]}),D().length>0&&(0,Kn.jsxs)("div",{className:"form-section",children:[(0,Kn.jsx)("h4",{children:"Variables Reutilizadas"}),(0,Kn.jsx)("p",{className:"section-description",children:"Estas variables se llenan autom\xe1ticamente bas\xe1ndose en la informaci\xf3n principal"}),(0,Kn.jsx)("div",{className:"repeated-variables",children:D().map((e,a)=>{const n=e.field_name,r=t.fields.find(a=>a.field_name===String(e.repeat_source));return(0,Kn.jsxs)("div",{className:"repeated-variable",children:[(0,Kn.jsxs)("div",{className:"variable-info",children:[(0,Kn.jsx)("strong",{children:e.field_label}),(0,Kn.jsxs)("span",{className:"source-info",children:["\u2190 Copia de: ",null===r||void 0===r?void 0:r.field_label]})]}),(0,Kn.jsx)("div",{className:"variable-value",children:l[n]||"Se llenar\xe1 autom\xe1ticamente"})]},"".concat(e.field_name,"-").concat(a))})})]}),(0,Kn.jsxs)("div",{className:"form-actions",children:[(0,Kn.jsx)("button",{onClick:async()=>{if(t){if(!L()){const e=t.fields.filter(e=>e.required).filter(e=>{const a=l[e.field_name];return!a||""===a.trim()});return void b("Por favor completa todos los campos requeridos. Faltan: ".concat(e.map(e=>e.field_label).join(", ")))}g(!0),b("");try{const e={};t.fields.forEach(a=>{const t=a.field_name;e[t]=l[t]||""}),console.log("\ud83d\udce4 Enviando datos completos:",{templateId:t._id,dataFields:Object.keys(e).length,data:e}),console.log("\ud83d\udd0d DEBUG: Informaci\xf3n de la plantilla:"),console.log("  - Template ID:",t._id),console.log("  - Template Name:",t.name),console.log("  - Total fields:",t.fields.length);const a=t.fields.filter(e=>e.required);console.log("  - Required fields:",a.length),a.forEach((e,a)=>{console.log("    ".concat(a+1,". ").concat(e.field_label," (").concat(e.field_name,")"))}),console.log("\ud83d\udd0d DEBUG: Datos que se enviar\xe1n:"),Object.keys(e).forEach(a=>{const t=e[a],n=!t||""===t.trim();console.log("  - ".concat(a,': "').concat(t,'" ').concat(n?"(VAC\xcdO)":"(LLENO)"))});const n=a.filter(a=>!e[a.field_name]||""===e[a.field_name].trim());n.length>0?(console.log("\u274c CAMPOS FALTANTES:"),n.forEach(e=>{console.log("  - ".concat(e.field_label," (").concat(e.field_name,")"))})):console.log("\u2705 Todos los campos requeridos est\xe1n llenos");const r=await Qn.post("/contract-generator/generate",{templateId:t._id,data:e});o(r.data.contract),d(r.data.contractId),p(r.data.contract_number),f(r.data.word_file),console.log("\u2705 Contrato generado exitosamente:"),console.log("  - ID:",r.data.contractId),console.log("  - N\xfamero:",r.data.contract_number),console.log("  - Word file:",r.data.word_file)}catch(c){var e,a,n,r,s,i;console.error("\u274c Error generating contract:",c),console.error("\u274c Error response:",null===(e=c.response)||void 0===e?void 0:e.data),console.error("\u274c Error status:",null===(a=c.response)||void 0===a?void 0:a.status),null!==(n=c.response)&&void 0!==n&&null!==(r=n.data)&&void 0!==r&&r.missingFields&&console.error("\u274c Missing fields:",c.response.data.missingFields),b((null===(s=c.response)||void 0===s||null===(i=s.data)||void 0===i?void 0:i.message)||"Error al generar el contrato")}finally{g(!1)}}},disabled:v||!L(),className:"generate-button",children:v?"Generando...":"Generar Contrato"}),!L()&&(0,Kn.jsx)("p",{className:"validation-message",children:"\u26a0\ufe0f Completa todos los campos requeridos para generar el contrato"}),(0,Kn.jsxs)("div",{style:{fontSize:"12px",color:"#666",marginTop:"10px"},children:["DEBUG: allFieldsFilled = ",y.toString()]})]})]}),i&&(0,Kn.jsxs)("div",{className:"generated-contract",children:[(0,Kn.jsx)("h3",{children:"3. Contrato Generado"}),m&&(0,Kn.jsxs)("div",{className:"contract-info",children:[(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"N\xfamero de Contrato:"})," ",m]}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"ID:"})," ",c]})]}),(0,Kn.jsx)("div",{className:"contract-content",children:(0,Kn.jsx)("pre",{children:i})}),(0,Kn.jsxs)("div",{className:"contract-actions",children:[(0,Kn.jsx)("button",{onClick:()=>navigator.clipboard.writeText(i),className:"copy-button",children:"Copiar Contrato"}),h&&(0,Kn.jsx)("button",{onClick:()=>(async(e,a)=>{try{const t=await Qn.get("/contracts/download/".concat(encodeURIComponent(e)),{responseType:"blob"}),n=window.URL.createObjectURL(new Blob([t.data])),r=document.createElement("a");r.href=n,r.setAttribute("download",a),document.body.appendChild(r),r.click(),r.remove(),window.URL.revokeObjectURL(n)}catch(x){console.error("Error downloading file:",x),b("Error al descargar el archivo")}})(h,"contrato-".concat(m||(null===t||void 0===t?void 0:t.name)||"generado",".docx")),className:"download-button word-button",children:"\ud83d\udcc4 Descargar Word"}),(0,Kn.jsx)("button",{onClick:()=>{const e=new Blob([i],{type:"text/plain"}),a=URL.createObjectURL(e),n=document.createElement("a");n.href=a,n.download="contrato-".concat(m||(null===t||void 0===t?void 0:t.name)||"generado",".txt"),n.click()},className:"download-button",children:"\ud83d\udcdd Descargar TXT"})]})]})]})},cr=e=>{let{onTemplateCreated:a}=e;const[t,n]=(0,r.useState)(null),[l,s]=(0,r.useState)(""),[i,o]=(0,r.useState)(""),[c,d]=(0,r.useState)(!1),[m,p]=(0,r.useState)([]),[h,f]=(0,r.useState)({}),[v,g]=(0,r.useState)(!1),[x,b]=(0,r.useState)(""),y=(0,r.useRef)(null);return(0,Kn.jsxs)("div",{className:"word-template-upload",children:[(0,Kn.jsxs)("div",{className:"upload-section",children:[(0,Kn.jsx)("h2",{children:"Crear Plantilla desde Word"}),(0,Kn.jsxs)("p",{className:"upload-description",children:["Sube un archivo Word con marcadores ","{{variable}}"," y se crear\xe1 autom\xe1ticamente una plantilla."]}),(0,Kn.jsxs)("div",{className:"file-upload-area",children:[(0,Kn.jsx)("input",{ref:y,type:"file",accept:".docx",onChange:async e=>{var a;const t=null===(a=e.target.files)||void 0===a?void 0:a[0];t&&(t.name.toLowerCase().endsWith(".docx")?(n(t),s(t.name.replace(".docx",""))):alert("Por favor selecciona un archivo Word (.docx)"))},className:"file-input",id:"word-file"}),(0,Kn.jsx)("label",{htmlFor:"word-file",className:"file-label",children:t?t.name:"Seleccionar archivo Word (.docx)"})]}),c&&(0,Kn.jsxs)("div",{className:"processing",children:[(0,Kn.jsx)("div",{className:"spinner"}),(0,Kn.jsx)("p",{children:"Procesando archivo Word y creando plantilla..."})]}),t&&!c&&(0,Kn.jsxs)("div",{className:"template-form",children:[(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{htmlFor:"template-name",children:"Nombre de la Plantilla:"}),(0,Kn.jsx)("input",{id:"template-name",type:"text",value:l,onChange:e=>s(e.target.value),placeholder:"Ej: Contrato de Servicios",required:!0})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{htmlFor:"template-description",children:"Descripci\xf3n:"}),(0,Kn.jsx)("textarea",{id:"template-description",value:i,onChange:e=>o(e.target.value),placeholder:"Descripci\xf3n de la plantilla...",rows:3})]}),(0,Kn.jsx)("div",{className:"submit-section",children:(0,Kn.jsx)("button",{onClick:()=>(async e=>{if(l.trim()){d(!0);try{const a=new FormData;a.append("wordFile",e),a.append("name",l),a.append("description",i),console.log("\ud83d\ude80 Enviando archivo para detectar variables..."),console.log("\ud83d\udcdd Datos enviados:"),console.log("  - Name:",l),console.log("  - Description:",i),console.log("  - File:",e.name);const t=await Qn.post("/templates/detect-variables",a,{headers:{"Content-Type":"multipart/form-data"}});if(console.log("\u2705 Respuesta recibida:",t.data),t.data.variables&&t.data.variables.length>0){console.log("\ud83c\udf89 VARIABLES DETECTADAS EXITOSAMENTE:"),console.log("  - Variables count:",t.data.variables.length),console.log("  - Message:",t.data.message),console.log("  - Variables:",t.data.variables),console.log("  - Requires field names:",t.data.requiresFieldNames),p(t.data.variables),b(t.data.previewHtml||""),g(!0);const e={};t.data.variables.forEach(a=>{e[a.field_name]=a.field_label}),f(e)}else console.log("\u26a0\ufe0f No se detectaron variables"),console.log("  - Response data:",t.data),alert("No se detectaron variables en el documento. Aseg\xfarate de usar marcadores {{variable}}")}catch(n){var a,t;console.error("Error processing Word file:",n),alert("Error al procesar el archivo Word: "+(null===(a=n.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.error)||0)}finally{d(!1)}}else alert("Por favor ingresa el nombre de la plantilla")})(t),className:"btn-submit",disabled:c||!l.trim(),children:c?"Procesando...":"Crear Plantilla"})})]}),v&&(0,Kn.jsxs)("div",{className:"name-assignment-form",children:[(0,Kn.jsx)("h3",{children:"Asignar Nombres Descriptivos a las Variables"}),(0,Kn.jsx)("p",{className:"assignment-description",children:"Asigna nombres descriptivos a cada variable detectada. Estos nombres aparecer\xe1n en el formulario de generaci\xf3n de contratos."}),(0,Kn.jsx)("div",{className:"variables-list",children:m.map((e,a)=>(0,Kn.jsxs)("div",{className:"variable-item",children:[(0,Kn.jsxs)("div",{className:"variable-info",children:[(0,Kn.jsxs)("strong",{children:["Variable ",a+1,":"]}),(0,Kn.jsxs)("code",{children:["{","{",e.original_marker,"}","}"]}),(0,Kn.jsxs)("span",{className:"variable-label",children:["(aparece ",e.repeat_count," veces)"]})]}),(0,Kn.jsxs)("div",{className:"name-assignment",children:[(0,Kn.jsx)("label",{htmlFor:"descriptive-name-".concat(e.field_name,"-").concat(a),children:"Nombre Descriptivo:"}),(0,Kn.jsx)("input",{id:"descriptive-name-".concat(e.field_name,"-").concat(a),type:"text",value:h[e.field_name]||"",onChange:a=>f(t=>u(u({},t),{},{[e.field_name]:a.target.value})),placeholder:"Ej: ".concat(e.field_label),required:!0})]})]},"".concat(e.field_name,"-").concat(a)))}),(0,Kn.jsx)("div",{className:"submit-section",children:(0,Kn.jsx)("button",{onClick:async()=>{if(l.trim()){d(!0);try{const e=m.map(e=>u(u({},e),{},{descriptive_name:h[e.field_name]||e.field_label}));console.log("\ud83c\udfd7\ufe0f CREANDO PLANTILLA CON NOMBRES DESCRIPTIVOS:"),console.log("  - Name:",l),console.log("  - Variables:",e);const t=await Qn.post("/templates/create-template-with-names",{name:l,description:i,variables:e,html:x});console.log("\u2705 PLANTILLA CREADA EXITOSAMENTE:"),console.log("  - Template ID:",t.data.templateId),console.log("  - Template name:",t.data.template.name),console.log("  - Fields:",t.data.template.fields),alert("\u2705 Plantilla creada exitosamente!\n\nNombre: ".concat(t.data.template.name,"\nVariables detectadas: ").concat(t.data.template.fields,"\nID: ").concat(t.data.templateId)),n(null),s(""),o(""),p([]),f({}),g(!1),b(""),y.current&&(y.current.value=""),a&&a(t.data.templateId)}catch(r){var e,t;console.error("Error creating template:",r),alert("Error al crear la plantilla: "+(null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.error)||0)}finally{d(!1)}}else alert("Por favor ingresa el nombre de la plantilla")},className:"btn-submit",disabled:c,children:c?"Creando Plantilla...":"Crear Plantilla con Nombres Asignados"})})]})]}),(0,Kn.jsxs)("div",{className:"instructions",children:[(0,Kn.jsx)("h3",{children:"Instrucciones:"}),(0,Kn.jsxs)("ol",{children:[(0,Kn.jsxs)("li",{children:["Prepara tu documento Word con marcadores como: ",(0,Kn.jsx)("code",{children:"{{nombre_empresa}}"}),", ",(0,Kn.jsx)("code",{children:"{{fecha_contrato}}"}),", etc."]}),(0,Kn.jsx)("li",{children:"Selecciona el archivo Word (.docx)"}),(0,Kn.jsx)("li",{children:"Ingresa el nombre y descripci\xf3n de la plantilla"}),(0,Kn.jsx)("li",{children:'Haz clic en "Crear Plantilla"'}),(0,Kn.jsx)("li",{children:"El sistema detectar\xe1 autom\xe1ticamente las variables y crear\xe1 la plantilla"})]})]})]})},dr=e=>{let{onTemplateCreated:a}=e;const[t,n]=(0,r.useState)(null),[l,s]=(0,r.useState)(!1),[i,o]=(0,r.useState)([]),[c,d]=(0,r.useState)(""),[m,p]=(0,r.useState)(""),[h,f]=(0,r.useState)(""),[v,g]=(0,r.useState)(""),[x,b]=(0,r.useState)(!1),y=(e,a,t)=>{const n=[...i];n[e]=u(u({},n[e]),{},{[a]:t}),o(n)},j=(e,a,t)=>{const n=[...i];n[e]=u(u({},n[e]),{},{[a]:t}),o(n)};return(0,Kn.jsxs)("div",{className:"word-template-upload",children:[(0,Kn.jsx)("h3",{children:"\ud83d\udcc4 Cargar Plantilla desde Word (Con Formato Preservado)"}),(0,Kn.jsxs)("div",{className:"upload-section",children:[(0,Kn.jsx)("input",{type:"file",accept:".docx,.doc",onChange:e=>{var a;const t=null===(a=e.target.files)||void 0===a?void 0:a[0];t&&n(t)},disabled:l}),t&&(0,Kn.jsxs)("div",{className:"file-info",children:[(0,Kn.jsxs)("p",{children:["\ud83d\udcc1 Archivo seleccionado: ",t.name]}),(0,Kn.jsx)("button",{onClick:async()=>{if(t){s(!0);try{var e,a,n,r,l;const s=new FormData;s.append("file",t),console.log("\ud83d\udcc4 Procesando archivo Word con formato preservado...");const i=await Qn.post("/templates/process-word-with-format",s,{headers:{"Content-Type":"multipart/form-data"}});if(console.log("\u2705 Respuesta recibida:",i.data),console.log("\ud83d\udcc4 HTML completo recibido:",null===(e=i.data.formattedHtml)||void 0===e?void 0:e.length,"caracteres"),console.log("\ud83d\udcc4 Vista previa recibida:",null===(a=i.data.previewHtml)||void 0===a?void 0:a.length,"caracteres"),console.log("\ud83d\udcc4 Primeros 500 caracteres del HTML completo:",null===(n=i.data.formattedHtml)||void 0===n?void 0:n.substring(0,500)),console.log("\ud83d\udcc4 \xdaltimos 500 caracteres del HTML completo:",null===(r=i.data.formattedHtml)||void 0===r?void 0:r.substring(Math.max(0,((null===(l=i.data.formattedHtml)||void 0===l?void 0:l.length)||0)-500))),i.data.variables&&i.data.variables.length>0){o(i.data.variables),d(i.data.formattedHtml),p(i.data.previewHtml),b(!0);const e=i.data.variables.map((e,a)=>u(u({},e),{},{descriptive_name:e.original_marker||"Variable ".concat(a+1),type:"text",required:!0}));o(e)}else alert("No se detectaron variables en el documento")}catch(i){console.error("Error procesando archivo Word:",i),alert("Error al procesar el archivo Word")}finally{s(!1)}}},disabled:l,className:"btn btn-primary",children:l?"Procesando...":"Procesar con Formato Completo"})]})]}),x&&(0,Kn.jsxs)("div",{className:"variable-form",children:[(0,Kn.jsx)("h4",{children:"\ud83d\udcdd Configurar Variables de la Plantilla"}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Nombre de la Plantilla:"}),(0,Kn.jsx)("input",{type:"text",value:h,onChange:e=>f(e.target.value),placeholder:"Ej: Contrato de Servicios",className:"form-control"})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Descripci\xf3n (opcional):"}),(0,Kn.jsx)("textarea",{value:v,onChange:e=>g(e.target.value),placeholder:"Descripci\xf3n de la plantilla...",className:"form-control",rows:3})]}),(0,Kn.jsxs)("h5",{children:["\ud83d\udd27 Variables Detectadas (",i.length,"):"]}),i.map((e,a)=>(0,Kn.jsxs)("div",{className:"variable-item",children:[(0,Kn.jsxs)("div",{className:"variable-header",children:[(0,Kn.jsxs)("strong",{children:["Variable ",a+1,":"]})," ",e.original_marker]}),(0,Kn.jsxs)("div",{className:"form-row",children:[(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Tipo:"}),(0,Kn.jsxs)("select",{value:e.type,onChange:e=>y(a,"type",e.target.value),className:"form-control",children:[(0,Kn.jsx)("option",{value:"text",children:"Texto"}),(0,Kn.jsx)("option",{value:"number",children:"N\xfamero"}),(0,Kn.jsx)("option",{value:"date",children:"Fecha"}),(0,Kn.jsx)("option",{value:"email",children:"Email"}),(0,Kn.jsx)("option",{value:"textarea",children:"Texto Largo"})]})]}),(0,Kn.jsx)("div",{className:"form-group",children:(0,Kn.jsxs)("label",{children:[(0,Kn.jsx)("input",{type:"checkbox",checked:e.required||!1,onChange:e=>j(a,"required",e.target.checked)}),"Requerido"]})})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsxs)("label",{children:[(0,Kn.jsx)("input",{type:"checkbox",checked:e.is_repeated||!1,onChange:e=>j(a,"is_repeated",e.target.checked)}),"Variable repetida"]}),e.is_repeated&&(0,Kn.jsxs)("div",{className:"form-group",style:{marginTop:"10px"},children:[(0,Kn.jsx)("label",{children:"Copiar informaci\xf3n de la variable n\xfamero:"}),(0,Kn.jsxs)("select",{value:e.repeat_source||"",onChange:e=>y(a,"repeat_source",e.target.value),className:"form-control",children:[(0,Kn.jsx)("option",{value:"",children:"Seleccionar variable..."}),i.map((e,t)=>t!==a?(0,Kn.jsxs)("option",{value:t+1,children:["#",t+1," - ",e.original_marker||e.descriptive_name]},t):null)]})]})]})]},a)),(0,Kn.jsxs)("div",{className:"preview-section",children:[(0,Kn.jsx)("h5",{children:"\ud83d\udc41\ufe0f Vista Previa del Formato:"}),(0,Kn.jsx)("div",{className:"html-preview",dangerouslySetInnerHTML:{__html:c||m},style:{border:"1px solid #ddd",padding:"15px",borderRadius:"5px",backgroundColor:"#f9f9f9",maxHeight:"800px",overflow:"auto",minHeight:"400px"}})]}),(0,Kn.jsx)("div",{className:"form-actions",children:(0,Kn.jsx)("button",{onClick:async()=>{if(h.trim()){s(!0);try{console.log("\ud83c\udfd7\ufe0f Creando plantilla con formato preservado...");const e=i.map(e=>u(u({},e),{},{descriptive_name:e.original_marker||e.descriptive_name||"Variable ".concat(i.indexOf(e)+1)})),t=await Qn.post("/templates/create-template-with-names",{name:h,description:v,variables:e,html:m,formattedHtml:c});console.log("\u2705 Plantilla creada:",t.data),alert("Plantilla creada exitosamente con formato preservado"),a(t.data.template),n(null),o([]),d(""),p(""),f(""),g(""),b(!1)}catch(e){console.error("Error creando plantilla:",e),alert("Error al crear la plantilla")}finally{s(!1)}}else alert("Por favor ingresa un nombre para la plantilla")},disabled:l||!h.trim(),className:"btn btn-success",children:l?"Creando...":"Crear Plantilla con Formato Preservado"})})]})]})},ur=e=>{var a;let{onContractGenerated:t}=e;const[n,l]=(0,r.useState)([]),[s,i]=(0,r.useState)(null),[o,c]=(0,r.useState)({}),[d,m]=(0,r.useState)(!0),[p,h]=(0,r.useState)(!1),[f,v]=(0,r.useState)([]),[g,x]=(0,r.useState)(null),[b,y]=(0,r.useState)(!1);(0,r.useEffect)(()=>{j(),N()},[]);const j=async()=>{try{const e=await Qn.get("/templates");l(e.data)}catch(e){console.error("Error fetching templates:",e)}finally{m(!1)}},N=async()=>{y(!0);try{console.log("\ud83d\udd0d [WordContractGenerator] Fetching suppliers...");const e=await Qn.get("/suppliers");console.log("\u2705 [WordContractGenerator] Suppliers fetched:",e.data),Array.isArray(e.data)?v(e.data):e.data&&Array.isArray(e.data.suppliers)?v(e.data.suppliers):(console.error("\u26a0\ufe0f [WordContractGenerator] Unexpected response format:",e.data),v([]))}catch(a){var e;console.error("\u274c [WordContractGenerator] Error fetching suppliers:",a),console.error("Error details:",null===(e=a.response)||void 0===e?void 0:e.data),v([])}finally{y(!1)}},_=e=>e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]/g,""),w=e=>{if(console.log("\ud83d\udd0d [handleSupplierSelect] Called with supplierId:",e),!e)return console.log("\u26a0\ufe0f [handleSupplierSelect] No supplier ID provided, clearing selection"),void x(null);const a=f.find(a=>a._id===e);if(console.log("\ud83d\udd0d [handleSupplierSelect] Found supplier:",a?a.legal_name||a.full_name:"NOT FOUND"),console.log("\ud83d\udd0d [handleSupplierSelect] Selected template:",s?s.name:"NO TEMPLATE"),!a||!s)return void console.error("\u274c [handleSupplierSelect] Missing supplier or template");x(a),console.log("\u2705 [handleSupplierSelect] Supplier set:",a.legal_name||a.full_name);const t=u({},o);console.log("\ud83d\udd0d [handleSupplierSelect] Template fields count:",s.fields.length);let n=0;s.fields.forEach(e=>{const r=((e,a)=>{const t=_(e),n={email:["email","correo","correelectronico","mail"],telefono:["phone","telefono","celular","movil","tel"],phone:["phone","telefono","celular","movil","tel"],direccion:["address","direccion","domicilio"],address:["address","direccion","domicilio"],ciudad:["city","ciudad","municipio"],city:["city","ciudad","municipio"],pais:["country","pais","nacion"],country:["country","pais","nacion"],identificacion:["identification_number","identificacion","nit","cedula","documento","nrodocumento"],nit:["identification_number","identificacion","nit"],cedula:["identification_number","identificacion","cedula"],documento:["identification_number","identificacion","documento"],tipodocumento:["identification_type","tipodocumento","tipoidentificacion"],tipoidentificacion:["identification_type","tipodocumento","tipoidentificacion"],nombre:["full_name","legal_name","nombre","nombreCompleto","razonsocial"],razonsocial:["legal_name","razonsocial","nombre","nombreCompleto"],nombreempresa:["legal_name","legal_name_short","nombreempresa","empresa"],empresa:["legal_name","legal_name_short","nombreempresa","empresa"],representantelegal:["legal_representative_name","representantelegal","representante"],representante:["legal_representative_name","representantelegal","representante"],cedularepresentante:["legal_representative_id_number","cedularepresentante","documentorepresentante"],documentorepresentante:["legal_representative_id_number","cedularepresentante","documentorepresentante"],tipoiddrepresentante:["legal_representative_id_type","tipoiddrepresentante"],ciudadexpedicion:["id_issue_city","ciudadexpedicion","lugarexpedicion"],lugarexpedicion:["id_issue_city","ciudadexpedicion","lugarexpedicion"]};for(const[l,s]of Object.entries(n)){const e=_(l);if(t.includes(e)||e.includes(t))for(const t of s){const e=a[t];if(void 0!==e&&null!==e&&""!==e)return e}}const r=Object.keys(a);for(const l of r){const e=_(l);if(t===e||t.includes(e)||e.includes(t)){const e=a[l];if(void 0!==e&&null!==e&&""!==e)return e}}if(a.custom_fields)for(const[l,s]of Object.entries(a.custom_fields)){const e=_(l);if((t===e||t.includes(e)||e.includes(t))&&void 0!==s&&null!==s&&""!==s)return s}return null})(e.name,a);console.log('  \ud83d\udccb Field "'.concat(e.name,'" -> ').concat(null!==r?'"'.concat(r,'"'):"NO MATCH")),null!==r&&(t[e.name]=r,n++)}),console.log("\u2705 [handleSupplierSelect] Matched ".concat(n,"/").concat(s.fields.length," fields")),console.log("\ud83d\udd0d [handleSupplierSelect] New form data:",t),c(t),console.log("\u2705 [handleSupplierSelect] Form data updated")},C=(e,a)=>{c(t=>u(u({},t),{},{[e]:a}))},S=e=>{var a;const t=o[e.name]||"";switch(e.type){case"text":case"email":return(0,Kn.jsx)("input",{type:e.type,value:t,onChange:a=>C(e.name,a.target.value),placeholder:e.description||e.name,required:e.required,className:"form-input"});case"number":return(0,Kn.jsx)("input",{type:"number",value:t,onChange:a=>C(e.name,a.target.value),placeholder:e.description||e.name,required:e.required,className:"form-input"});case"date":return(0,Kn.jsx)("input",{type:"date",value:t,onChange:a=>C(e.name,a.target.value),required:e.required,className:"form-input"});case"select":return(0,Kn.jsxs)("select",{value:t,onChange:a=>C(e.name,a.target.value),required:e.required,className:"form-input",children:[(0,Kn.jsx)("option",{value:"",children:"Seleccionar..."}),null===(a=e.options)||void 0===a?void 0:a.map((e,a)=>(0,Kn.jsx)("option",{value:e,children:e},a))]});default:return(0,Kn.jsx)("input",{type:"text",value:t,onChange:a=>C(e.name,a.target.value),placeholder:e.description||e.name,required:e.required,className:"form-input"})}};return d?(0,Kn.jsx)("div",{className:"loading",children:"Cargando plantillas..."}):(0,Kn.jsxs)("div",{className:"word-contract-generator",children:[(0,Kn.jsxs)("div",{className:"generator-header",children:[(0,Kn.jsx)("h2",{children:"Generador de Contratos desde Word"}),(0,Kn.jsx)("p",{children:"Selecciona una plantilla y completa los campos para generar tu contrato"})]}),(0,Kn.jsxs)("div",{className:"generator-content",children:[(0,Kn.jsxs)("div",{className:"templates-section",children:[(0,Kn.jsx)("h3",{children:"Plantillas Disponibles"}),0===n.length?(0,Kn.jsx)("div",{className:"no-templates",children:(0,Kn.jsx)("p",{children:"No hay plantillas disponibles"})}):(0,Kn.jsx)("div",{className:"templates-grid",children:n.map(e=>{var a;return(0,Kn.jsxs)("div",{className:"template-card ".concat((null===s||void 0===s?void 0:s._id)===e._id?"selected":""),onClick:()=>(e=>{i(e),c({}),x(null)})(e),children:[(0,Kn.jsx)("h4",{children:e.name}),(0,Kn.jsx)("p",{children:e.description}),(0,Kn.jsxs)("div",{className:"template-info",children:[(0,Kn.jsxs)("span",{className:"field-count",children:[(null===(a=e.fields)||void 0===a?void 0:a.length)||0," campos"]}),(0,Kn.jsx)("span",{className:"template-type",children:"Word"})]})]},e._id)})})]}),s&&(0,Kn.jsxs)("div",{className:"form-section",children:[(0,Kn.jsxs)("div",{className:"form-header",children:[(0,Kn.jsx)("h3",{children:"Completar Informaci\xf3n"}),(0,Kn.jsxs)("p",{children:["Plantilla: ",s.name]})]}),(0,Kn.jsx)("div",{className:"supplier-selector-section",children:(0,Kn.jsxs)("div",{className:"field-group",children:[(0,Kn.jsxs)("label",{className:"field-label",children:["Seleccionar Tercero (Opcional)",(0,Kn.jsx)("span",{className:"field-hint",children:" - Prellena autom\xe1ticamente los campos del formulario"})]}),(0,Kn.jsxs)("select",{value:(null===g||void 0===g?void 0:g._id)||"",onChange:e=>w(e.target.value),className:"form-input supplier-select",disabled:b,children:[(0,Kn.jsx)("option",{value:"",children:"-- Seleccionar tercero existente --"}),f.map(e=>{const a=e.legal_name||e.full_name||e.identification_number,t=e.identification_number;return(0,Kn.jsxs)("option",{value:e._id,children:[a," (",t,")"]},e._id)})]}),b&&(0,Kn.jsx)("p",{className:"loading-text",children:"Cargando terceros..."}),g&&(0,Kn.jsxs)("div",{className:"selected-supplier-info",children:[(0,Kn.jsxs)("p",{className:"info-text",children:["Tercero seleccionado: ",(0,Kn.jsx)("strong",{children:g.legal_name||g.full_name})]}),(0,Kn.jsx)("p",{className:"info-subtext",children:"Los campos se han prellenado autom\xe1ticamente. Puedes modificarlos si es necesario."})]})]})}),(0,Kn.jsx)("div",{className:"form-fields",children:null===(a=s.fields)||void 0===a?void 0:a.map((e,a)=>(0,Kn.jsxs)("div",{className:"field-group",children:[(0,Kn.jsxs)("label",{className:"field-label",children:[e.name,e.required&&(0,Kn.jsx)("span",{className:"required",children:"*"})]}),e.description&&(0,Kn.jsx)("p",{className:"field-description",children:e.description}),S(e)]},a))}),(0,Kn.jsx)("div",{className:"form-actions",children:(0,Kn.jsx)("button",{onClick:async()=>{if(s){h(!0);try{const e=await Qn.post("/templates/generate-word-contract",{templateId:s._id,formData:o},{responseType:"blob"}),a=new Blob([e.data],{type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}),n=window.URL.createObjectURL(a),r=document.createElement("a");r.href=n,r.download="".concat(s.name,"_generado.docx"),document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(n);const l=await Qn.post("/contracts",{title:"".concat(s.name," - ").concat((new Date).toLocaleDateString()),company:"Empresa del Usuario",status:"borrador",description:"Contrato generado desde plantilla: ".concat(s.name),template_id:s._id});t&&t(l.data.id),alert("Contrato generado exitosamente")}catch(e){console.error("Error generating contract:",e),alert("Error al generar el contrato")}finally{h(!1)}}},disabled:p,className:"btn-generate",children:p?"Generando...":"Generar Contrato"})})]})]})]})},mr=e=>{var a,t;let{templateId:n,onClose:l}=e;const[s,i]=(0,r.useState)(null),[o,c]=(0,r.useState)([]),[d,m]=(0,r.useState)(!0),[p,h]=(0,r.useState)(!1),[f,v]=(0,r.useState)([]);(0,r.useEffect)(()=>{g()},[n]);const g=async()=>{try{m(!0);const e=await Qn.get("/templates/template-details/".concat(n));i(e.data.template),c(e.data.variables),v(e.data.variables)}catch(e){console.error("Error fetching template details:",e)}finally{m(!1)}},x=(e,a,t)=>{const n=[...f];n[e]=u(u({},n[e]),{},{[a]:t}),v(n)};return d?(0,Kn.jsx)("div",{className:"template-variables-overlay",children:(0,Kn.jsx)("div",{className:"template-variables-modal",children:(0,Kn.jsx)("div",{className:"loading",children:"Cargando detalles de la plantilla..."})})}):(0,Kn.jsx)("div",{className:"template-variables-overlay",children:(0,Kn.jsxs)("div",{className:"template-variables-modal",children:[(0,Kn.jsxs)("div",{className:"modal-header",children:[(0,Kn.jsxs)("h2",{children:["Variables de la Plantilla: ",null===s||void 0===s?void 0:s.name]}),(0,Kn.jsx)("button",{className:"close-button",onClick:l,children:"\xd7"})]}),(0,Kn.jsx)("div",{className:"template-info",children:(0,Kn.jsxs)("div",{className:"info-section",children:[(0,Kn.jsx)("h3",{children:"Informaci\xf3n de la Plantilla"}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Categor\xeda:"})," ",null===s||void 0===s?void 0:s.category]}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Descripci\xf3n:"})," ",(null===s||void 0===s?void 0:s.description)||"Sin descripci\xf3n"]}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Creado por:"})," ",null===s||void 0===s||null===(a=s.created_by)||void 0===a?void 0:a.name]}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Empresa:"})," ",(null===s||void 0===s||null===(t=s.company)||void 0===t?void 0:t.name)||"Sin empresa"]}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Total de variables:"})," ",o.length]})]})}),(0,Kn.jsxs)("div",{className:"variables-section",children:[(0,Kn.jsxs)("div",{className:"section-header",children:[(0,Kn.jsx)("h3",{children:"Variables Detectadas"}),(0,Kn.jsx)("div",{className:"section-actions",children:p?(0,Kn.jsxs)("div",{className:"edit-actions",children:[(0,Kn.jsx)("button",{className:"btn-save",onClick:async()=>{try{await Qn.put("/templates/template-variables/".concat(n),{variables:f}),c(f),h(!1),alert("Variables actualizadas correctamente")}catch(e){console.error("Error updating variables:",e),alert("Error al actualizar las variables")}},children:"Guardar Cambios"}),(0,Kn.jsx)("button",{className:"btn-cancel",onClick:()=>{v(o),h(!1)},children:"Cancelar"})]}):(0,Kn.jsx)("button",{className:"btn-edit",onClick:()=>h(!0),children:"Editar Variables"})})]}),(0,Kn.jsx)("div",{className:"variables-list",children:(p?f:o).map((e,a)=>{var t;return(0,Kn.jsxs)("div",{className:"variable-card",children:[(0,Kn.jsxs)("div",{className:"variable-header",children:[(0,Kn.jsxs)("span",{className:"variable-number",children:["#",e.number]}),(0,Kn.jsx)("span",{className:"variable-marker",children:e.original_marker}),e.repeat_count>1&&(0,Kn.jsxs)("span",{className:"repeat-count",children:["(aparece ",e.repeat_count," veces)"]}),f.some((t,n)=>n!==a&&t.repeat_source===e.number)&&(0,Kn.jsx)("span",{className:"source-indicator",children:"\ud83d\udccb Variable origen"})]}),(0,Kn.jsxs)("div",{className:"variable-details",children:[(0,Kn.jsxs)("div",{className:"detail-row",children:[(0,Kn.jsx)("label",{children:"Informaci\xf3n de Campo:"}),p?(0,Kn.jsx)("input",{type:"text",value:e.field_name,onChange:e=>x(a,"field_name",e.target.value),className:"field-input"}):(0,Kn.jsx)("span",{className:"field-value",children:e.field_name})]}),(0,Kn.jsxs)("div",{className:"detail-row",children:[(0,Kn.jsx)("label",{children:"Nombre de Variable:"}),p?(0,Kn.jsx)("input",{type:"text",value:e.field_label,onChange:e=>x(a,"field_label",e.target.value),className:"field-input"}):(0,Kn.jsx)("span",{className:"field-value",children:e.field_label})]}),(0,Kn.jsxs)("div",{className:"detail-row",children:[(0,Kn.jsx)("label",{children:"Tipo:"}),p?(0,Kn.jsxs)("select",{value:e.field_type,onChange:e=>x(a,"field_type",e.target.value),className:"field-select",children:[(0,Kn.jsx)("option",{value:"text",children:"Texto"}),(0,Kn.jsx)("option",{value:"number",children:"N\xfamero"}),(0,Kn.jsx)("option",{value:"date",children:"Fecha"}),(0,Kn.jsx)("option",{value:"email",children:"Email"}),(0,Kn.jsx)("option",{value:"textarea",children:"\xc1rea de texto"}),(0,Kn.jsx)("option",{value:"select",children:"Selecci\xf3n"})]}):(0,Kn.jsx)("span",{className:"field-value",children:e.field_type})]}),(0,Kn.jsxs)("div",{className:"detail-row",children:[(0,Kn.jsx)("label",{children:"Descripci\xf3n:"}),p?(0,Kn.jsx)("textarea",{value:e.description,onChange:e=>x(a,"description",e.target.value),className:"field-textarea",rows:2}):(0,Kn.jsx)("span",{className:"field-value",children:e.description})]}),(0,Kn.jsxs)("div",{className:"detail-row",children:[(0,Kn.jsx)("label",{children:"Requerido:"}),p?(0,Kn.jsx)("input",{type:"checkbox",checked:e.required,onChange:e=>x(a,"required",e.target.checked),className:"field-checkbox"}):(0,Kn.jsx)("span",{className:"field-value",children:e.required?"S\xed":"No"})]}),p&&(0,Kn.jsxs)("div",{className:"repeat-section",children:[(0,Kn.jsx)("div",{className:"detail-row",children:(0,Kn.jsxs)("label",{children:[(0,Kn.jsx)("input",{type:"checkbox",checked:e.can_repeat,onChange:()=>(e=>{const a=[...f];a[e]=u(u({},a[e]),{},{can_repeat:!a[e].can_repeat,repeat_source:a[e].can_repeat?a[e].repeat_source:null}),v(a)})(a),className:"field-checkbox"}),"Puede repetir informaci\xf3n"]})}),e.can_repeat&&(0,Kn.jsxs)("div",{className:"detail-row",children:[(0,Kn.jsx)("label",{children:"Repetir informaci\xf3n de la variable:"}),(0,Kn.jsxs)("select",{value:e.repeat_source||"",onChange:e=>((e,a)=>{const t=parseInt(a)-1,n=[...f];if(a&&t>=0&&t<f.length&&t!==e){const a=f[t];n[e]=u(u({},n[e]),{},{field_name:a.field_name,field_label:a.field_label,field_type:a.field_type,description:a.description,repeat_source:t+1})}else n[e]=u(u({},n[e]),{},""===a?{repeat_source:null}:{repeat_source:a?parseInt(a):null});v(n)})(a,e.target.value),className:"field-select",children:[(0,Kn.jsx)("option",{value:"",children:"Seleccionar variable origen..."}),f.map((e,t)=>t!==a&&(0,Kn.jsxs)("option",{value:t+1,children:["#",t+1," - ",e.field_label," (","{","{",e.original_marker,"}","}",")"]},t))]}),e.repeat_source&&(0,Kn.jsx)("div",{className:"repeat-info",children:(0,Kn.jsxs)("small",{children:["Esta variable copiar\xe1 la informaci\xf3n de: ",(0,Kn.jsxs)("strong",{children:["#",e.repeat_source," - ",null===(t=f[e.repeat_source-1])||void 0===t?void 0:t.field_label]})]})})]})]})]})]},a)})})]})]})})},pr=()=>{const[e,a]=(0,r.useState)([]),[t,n]=(0,r.useState)(!0),[l,s]=(0,r.useState)(!1),[i,o]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!1),[m,p]=(0,r.useState)(!1),[h,f]=(0,r.useState)({name:"",type:"",description:"",content:""}),[v,g]=(0,r.useState)(!1),[x,b]=(0,r.useState)(!1),[y,j]=(0,r.useState)(!1),[N,_]=(0,r.useState)(!1),[w,C]=(0,r.useState)(null),[S,k]=(0,r.useState)({name:"",type:"",description:"",content:""});(0,r.useEffect)(()=>{E()},[]);const E=async()=>{try{const e=await Qn.get("/templates");a(e.data)}catch(e){console.error("Error fetching templates:",e)}finally{n(!1)}};return t?(0,Kn.jsx)("div",{className:"loading",children:"Cargando plantillas..."}):(0,Kn.jsxs)("div",{className:"templates",children:[(0,Kn.jsxs)("div",{className:"page-header",children:[(0,Kn.jsx)("h1",{children:"Plantillas de Contratos"}),(0,Kn.jsxs)("div",{className:"header-actions",children:[(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>o(!0),children:"Subir desde Word"}),(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>d(!0),children:"Subir Word (Con Formato)"}),(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>p(!0),children:"Generar Contrato"}),(0,Kn.jsx)("button",{className:"btn-primary",onClick:()=>s(!0),children:"Nueva Plantilla"})]})]}),(0,Kn.jsx)("div",{className:"templates-list",children:0===e.length?(0,Kn.jsxs)("div",{className:"empty-state",children:[(0,Kn.jsx)("h3",{children:"No hay plantillas"}),(0,Kn.jsx)("p",{children:"Crea tu primera plantilla para comenzar"})]}):e.map(e=>(0,Kn.jsxs)("div",{className:"template-card",children:[(0,Kn.jsx)("h3",{children:e.name}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Tipo:"})," ",e.type]}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Descripci\xf3n:"})," ",e.description]}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Creado:"})," ",new Date(e.createdAt).toLocaleDateString()]}),(0,Kn.jsxs)("div",{className:"template-actions",children:[(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>(e=>{C(e),g(!0)})(e),children:"Ver"}),(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>(e=>{C(e),k({name:e.name,type:e.type,description:e.description,content:e.content||""}),b(!0)})(e),children:"Editar"}),(0,Kn.jsx)("button",{className:"btn-info",onClick:()=>(e=>{C(e),_(!0)})(e),children:"Variables"}),(0,Kn.jsx)("button",{className:"btn-primary",onClick:()=>(e=>{C(e),j(!0)})(e),children:"Usar"}),(0,Kn.jsx)("button",{className:"btn-danger",onClick:()=>(async e=>{if(window.confirm("\xbfEst\xe1s seguro de que quieres eliminar esta plantilla?"))try{await Qn.delete("/templates/".concat(e)),await E()}catch(a){console.error("Error deleting template:",a)}})(e._id||e.id),children:"Eliminar"})]})]},e._id||e.id))}),l&&(0,Kn.jsx)("div",{className:"modal-overlay",children:(0,Kn.jsxs)("div",{className:"modal",children:[(0,Kn.jsx)("h3",{children:"Crear Nueva Plantilla"}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Nombre de la Plantilla:"}),(0,Kn.jsx)("input",{type:"text",value:h.name,onChange:e=>f(u(u({},h),{},{name:e.target.value})),required:!0})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Tipo:"}),(0,Kn.jsxs)("select",{value:h.type,onChange:e=>f(u(u({},h),{},{type:e.target.value})),required:!0,children:[(0,Kn.jsx)("option",{value:"",children:"Seleccionar tipo"}),(0,Kn.jsx)("option",{value:"contrato",children:"Contrato"}),(0,Kn.jsx)("option",{value:"acuerdo",children:"Acuerdo"}),(0,Kn.jsx)("option",{value:"convenio",children:"Convenio"}),(0,Kn.jsx)("option",{value:"otro",children:"Otro"})]})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Descripci\xf3n:"}),(0,Kn.jsx)("textarea",{value:h.description,onChange:e=>f(u(u({},h),{},{description:e.target.value})),rows:3,required:!0})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Contenido de la Plantilla:"}),(0,Kn.jsx)("textarea",{value:h.content,onChange:e=>f(u(u({},h),{},{content:e.target.value})),rows:10,placeholder:"Escribe el contenido de la plantilla aqu\xed...",required:!0})]}),(0,Kn.jsxs)("div",{className:"modal-actions",children:[(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>s(!1),children:"Cancelar"}),(0,Kn.jsx)("button",{className:"btn-primary",onClick:async()=>{try{await Qn.post("/templates",h),await E(),s(!1),f({name:"",type:"",description:"",content:""})}catch(e){console.error("Error creating template:",e)}},disabled:!h.name||!h.type||!h.content,children:"Crear Plantilla"})]})]})}),v&&w&&(0,Kn.jsx)("div",{className:"modal-overlay",children:(0,Kn.jsxs)("div",{className:"modal",children:[(0,Kn.jsxs)("h3",{children:["Ver Plantilla: ",w.name]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Nombre:"}),(0,Kn.jsx)("p",{children:w.name})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Tipo:"}),(0,Kn.jsx)("p",{children:w.type})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Descripci\xf3n:"}),(0,Kn.jsx)("p",{children:w.description})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Contenido:"}),(0,Kn.jsx)("div",{className:"template-content-preview",style:{border:"1px solid #ddd",padding:"1rem",borderRadius:"4px",backgroundColor:"#f9f9f9",maxHeight:"400px",overflowY:"auto",fontFamily:"Times New Roman, serif",lineHeight:"1.6",color:"#333"},dangerouslySetInnerHTML:{__html:(e=>{if(!e)return"<p>Sin contenido</p>";return e.replace(/\{\{([^}]+)\}\}/g,'<span class="variable">{{$1}}</span>')})(w.content||"")}})]}),(0,Kn.jsx)("div",{className:"modal-actions",children:(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>g(!1),children:"Cerrar"})})]})}),x&&w&&(0,Kn.jsx)("div",{className:"modal-overlay",children:(0,Kn.jsxs)("div",{className:"modal",children:[(0,Kn.jsxs)("h3",{children:["Editar Plantilla: ",w.name]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Nombre de la Plantilla:"}),(0,Kn.jsx)("input",{type:"text",value:S.name,onChange:e=>k(u(u({},S),{},{name:e.target.value})),required:!0})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Tipo:"}),(0,Kn.jsxs)("select",{value:S.type,onChange:e=>k(u(u({},S),{},{type:e.target.value})),required:!0,children:[(0,Kn.jsx)("option",{value:"",children:"Seleccionar tipo"}),(0,Kn.jsx)("option",{value:"contrato",children:"Contrato"}),(0,Kn.jsx)("option",{value:"acuerdo",children:"Acuerdo"}),(0,Kn.jsx)("option",{value:"convenio",children:"Convenio"}),(0,Kn.jsx)("option",{value:"otro",children:"Otro"})]})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Descripci\xf3n:"}),(0,Kn.jsx)("textarea",{value:S.description,onChange:e=>k(u(u({},S),{},{description:e.target.value})),rows:3,required:!0})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Contenido de la Plantilla:"}),(0,Kn.jsx)("textarea",{value:S.content,onChange:e=>k(u(u({},S),{},{content:e.target.value})),rows:10,placeholder:"Escribe el contenido de la plantilla aqu\xed...",required:!0})]}),(0,Kn.jsxs)("div",{className:"modal-actions",children:[(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>b(!1),children:"Cancelar"}),(0,Kn.jsx)("button",{className:"btn-primary",onClick:async()=>{if(w)try{await Qn.put("/templates/".concat(w.id),S),await E(),b(!1),C(null)}catch(e){console.error("Error updating template:",e)}},disabled:!S.name||!S.type||!S.content,children:"Actualizar Plantilla"})]})]})}),y&&w&&(0,Kn.jsx)("div",{className:"modal-overlay",children:(0,Kn.jsxs)("div",{className:"modal",children:[(0,Kn.jsxs)("h3",{children:["Usar Plantilla: ",w.name]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Plantilla seleccionada:"}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:w.name})," - ",w.type]}),(0,Kn.jsx)("p",{children:w.description})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"\xbfQu\xe9 quieres hacer con esta plantilla?"}),(0,Kn.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[(0,Kn.jsx)("button",{className:"btn-primary",onClick:()=>{alert("Funcionalidad de crear contrato desde plantilla - En desarrollo"),j(!1)},children:"Crear Contrato"}),(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>{const e=new Blob([w.content||""],{type:"text/plain"}),a=URL.createObjectURL(e),t=document.createElement("a");t.href=a,t.download="".concat(w.name,".txt"),t.click(),URL.revokeObjectURL(a),j(!1)},children:"Descargar Plantilla"})]})]}),(0,Kn.jsx)("div",{className:"modal-actions",children:(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>j(!1),children:"Cancelar"})})]})}),i&&(0,Kn.jsx)("div",{className:"modal-overlay",children:(0,Kn.jsxs)("div",{className:"modal large-modal",children:[(0,Kn.jsxs)("div",{className:"modal-header",children:[(0,Kn.jsx)("h3",{children:"Subir Plantilla desde Word"}),(0,Kn.jsx)("button",{className:"btn-close",onClick:()=>o(!1),children:"\xd7"})]}),(0,Kn.jsx)("div",{className:"modal-content",children:(0,Kn.jsx)(cr,{onTemplateCreated:e=>{o(!1),E()}})})]})}),c&&(0,Kn.jsx)("div",{className:"modal-overlay",children:(0,Kn.jsxs)("div",{className:"modal large-modal",children:[(0,Kn.jsxs)("div",{className:"modal-header",children:[(0,Kn.jsx)("h3",{children:"Subir Plantilla desde Word (Con Formato Preservado)"}),(0,Kn.jsx)("button",{className:"btn-close",onClick:()=>d(!1),children:"\xd7"})]}),(0,Kn.jsx)("div",{className:"modal-content",children:(0,Kn.jsx)(dr,{onTemplateCreated:e=>{d(!1),E()}})})]})}),m&&(0,Kn.jsx)("div",{className:"modal-overlay",children:(0,Kn.jsxs)("div",{className:"modal large-modal",children:[(0,Kn.jsxs)("div",{className:"modal-header",children:[(0,Kn.jsx)("h3",{children:"Generar Contrato desde Word"}),(0,Kn.jsx)("button",{className:"btn-close",onClick:()=>p(!1),children:"\xd7"})]}),(0,Kn.jsx)("div",{className:"modal-content",children:(0,Kn.jsx)(ur,{onContractGenerated:e=>{p(!1),alert("Contrato generado exitosamente")}})})]})}),N&&w&&(0,Kn.jsx)(mr,{templateId:w._id||w.id,onClose:()=>{_(!1),C(null)}})]})},hr=e=>{let{isOpen:a,onClose:t,detectedVariables:n,thirdPartyTypeCode:l,onConfigApplied:s}=e;const[i,o]=(0,r.useState)([]),[c,d]=(0,r.useState)([]),[u,m]=(0,r.useState)(""),[p,h]=(0,r.useState)(!1),[f,v]=(0,r.useState)(!1),[g,x]=(0,r.useState)({}),[b,y]=(0,r.useState)(!1),[j,N]=(0,r.useState)(""),[_,w]=(0,r.useState)(""),[C,S]=(0,r.useState)(""),[k,E]=(0,r.useState)("\ud83d\udcc4"),[T,P]=(0,r.useState)("NIT"),R={identification:"\ud83c\udd94 Identificaci\xf3n",personal:"\ud83d\udc64 Informaci\xf3n Personal",business:"\ud83c\udfe2 Informaci\xf3n Empresarial",legal:"\u2696\ufe0f Representaci\xf3n Legal",contact:"\ud83d\udcde Contacto",address:"\ud83d\udccd Direcci\xf3n",employment:"\ud83d\udcbc Informaci\xf3n Laboral",financial:"\ud83d\udcb0 Informaci\xf3n Financiera",dates:"\ud83d\udcc5 Fechas",other:"\ud83d\udccb Otros"};(0,r.useEffect)(()=>{a&&(L(),A())},[a,n,l]);const L=async()=>{try{const e=await Qn.get("/third-party-types");d(e.data);const a=e.data.find(e=>e.code===l);a&&m(a._id)}catch(e){console.error("Error al cargar tipos de terceros:",e)}},A=async()=>{if(n&&0!==n.length){v(!0);try{const e=n.map(e=>({field_name:e.field_name||e.marker,original_marker:e.marker}));console.log("\ud83d\udd0d Analizando variables:",e);const a=await Qn.post("/third-party-types/suggest-from-template",{fields:e,third_party_type:l});console.log("\u2705 Sugerencias recibidas:",a.data),o(a.data.suggested),x(a.data.categories||{})}catch(e){console.error("Error al analizar variables:",e),alert("Error al analizar las variables de la plantilla")}finally{v(!1)}}};if(!a)return null;const D=i.filter(e=>!e.excluded).length,z=i.filter(e=>e.required&&!e.excluded).length,O=i.filter(e=>e.excluded).length;return(0,Kn.jsx)("div",{className:"modal-overlay",onClick:t,children:(0,Kn.jsxs)("div",{className:"modal-content third-party-config-modal",onClick:e=>e.stopPropagation(),children:[(0,Kn.jsxs)("div",{className:"modal-header",children:[(0,Kn.jsx)("h2",{children:"\ud83d\udd27 Configurar Tipo de Tercero"}),(0,Kn.jsx)("button",{className:"modal-close",onClick:t,children:"\xd7"})]}),(0,Kn.jsx)("div",{className:"modal-body",children:f?(0,Kn.jsxs)("div",{className:"analyzing-section",children:[(0,Kn.jsx)("div",{className:"spinner"}),(0,Kn.jsx)("p",{children:"Analizando variables de la plantilla..."})]}):(0,Kn.jsxs)(Kn.Fragment,{children:[(0,Kn.jsxs)("div",{className:"config-header",children:[(0,Kn.jsxs)("p",{className:"config-description",children:["Se detectaron ",(0,Kn.jsxs)("strong",{children:[n.length," variables"]})," en tu plantilla. Configura qu\xe9 campos ser\xe1n obligatorios o excluidos para el tipo de tercero seleccionado."]}),(0,Kn.jsxs)("div",{className:"config-stats",children:[(0,Kn.jsxs)("div",{className:"stat",children:[(0,Kn.jsx)("span",{className:"stat-label",children:"Incluidos:"}),(0,Kn.jsx)("span",{className:"stat-value",children:D})]}),(0,Kn.jsxs)("div",{className:"stat",children:[(0,Kn.jsx)("span",{className:"stat-label",children:"Requeridos:"}),(0,Kn.jsx)("span",{className:"stat-value required",children:z})]}),(0,Kn.jsxs)("div",{className:"stat",children:[(0,Kn.jsx)("span",{className:"stat-label",children:"Excluidos:"}),(0,Kn.jsx)("span",{className:"stat-value excluded",children:O})]})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Tipo de Tercero:"}),(0,Kn.jsxs)("div",{style:{display:"flex",gap:"10px",marginBottom:"12px"},children:[(0,Kn.jsx)("button",{type:"button",onClick:()=>y(!1),style:{flex:1,padding:"8px 12px",backgroundColor:b?"#e5e7eb":"#3b82f6",color:b?"#6b7280":"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"600",transition:"all 0.2s"},children:"Usar Existente"}),(0,Kn.jsx)("button",{type:"button",onClick:()=>y(!0),style:{flex:1,padding:"8px 12px",backgroundColor:b?"#10b981":"#e5e7eb",color:b?"white":"#6b7280",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"600",transition:"all 0.2s"},children:"+ Crear Nuevo"})]}),b?(0,Kn.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[(0,Kn.jsxs)("div",{children:[(0,Kn.jsxs)("label",{style:{fontSize:"13px",color:"#6b7280",marginBottom:"4px",display:"block"},children:["Nombre del Tipo ",(0,Kn.jsx)("span",{style:{color:"#dc2626"},children:"*"})]}),(0,Kn.jsx)("input",{type:"text",value:j,onChange:e=>{N(e.target.value),w(e.target.value.toLowerCase().replace(/[^a-z0-9]/g,"_"))},placeholder:"Ej: Proveedor de Servicios",className:"form-select",style:{padding:"10px 12px"}})]}),(0,Kn.jsxs)("div",{children:[(0,Kn.jsxs)("label",{style:{fontSize:"13px",color:"#6b7280",marginBottom:"4px",display:"block"},children:["C\xf3digo ",(0,Kn.jsx)("span",{style:{color:"#dc2626"},children:"*"})]}),(0,Kn.jsx)("input",{type:"text",value:_,onChange:e=>w(e.target.value.toLowerCase().replace(/[^a-z0-9_]/g,"")),placeholder:"Ej: proveedor_servicios",className:"form-select",style:{padding:"10px 12px",fontFamily:"monospace"}})]}),(0,Kn.jsxs)("div",{children:[(0,Kn.jsx)("label",{style:{fontSize:"13px",color:"#6b7280",marginBottom:"4px",display:"block"},children:"Descripci\xf3n"}),(0,Kn.jsx)("input",{type:"text",value:C,onChange:e=>S(e.target.value),placeholder:"Descripci\xf3n del tipo de tercero",className:"form-select",style:{padding:"10px 12px"}})]}),(0,Kn.jsxs)("div",{children:[(0,Kn.jsx)("label",{style:{fontSize:"13px",color:"#6b7280",marginBottom:"4px",display:"block"},children:"Icono (Emoji)"}),(0,Kn.jsx)("input",{type:"text",value:k,onChange:e=>E(e.target.value),placeholder:"\ud83d\udcc4",className:"form-select",style:{padding:"10px 12px",fontSize:"20px"},maxLength:2})]}),(0,Kn.jsxs)("div",{children:[(0,Kn.jsxs)("label",{style:{fontSize:"13px",color:"#6b7280",marginBottom:"4px",display:"block"},children:["Tipo de Identificaci\xf3n por Defecto ",(0,Kn.jsx)("span",{style:{color:"#dc2626"},children:"*"})]}),(0,Kn.jsxs)("select",{value:T,onChange:e=>P(e.target.value),className:"form-select",style:{padding:"10px 12px"},children:[(0,Kn.jsx)("option",{value:"NIT",children:"NIT (Empresa)"}),(0,Kn.jsx)("option",{value:"NIT (PH)",children:"NIT (Propiedad Horizontal)"}),(0,Kn.jsx)("option",{value:"CC",children:"C\xe9dula de Ciudadan\xeda"}),(0,Kn.jsx)("option",{value:"CE",children:"C\xe9dula de Extranjer\xeda"}),(0,Kn.jsx)("option",{value:"Pasaporte",children:"Pasaporte"}),(0,Kn.jsx)("option",{value:"RUT",children:"RUT"}),(0,Kn.jsx)("option",{value:"Otro",children:"Otro"})]}),(0,Kn.jsx)("p",{style:{fontSize:"11px",color:"#6b7280",marginTop:"4px"},children:"Este tipo de identificaci\xf3n se usar\xe1 por defecto al crear terceros de este tipo"})]})]}):(0,Kn.jsxs)("select",{value:u,onChange:e=>m(e.target.value),className:"form-select",children:[(0,Kn.jsx)("option",{value:"",children:"Selecciona un tipo..."}),c.map(e=>(0,Kn.jsxs)("option",{value:e._id,children:[e.icon," ",e.label]},e._id))]})]})]}),(0,Kn.jsx)("div",{className:"fields-by-category",children:Object.entries(g).map(e=>{let[a,t]=e;return(0,Kn.jsxs)("div",{className:"category-section",children:[(0,Kn.jsx)("h3",{className:"category-title",children:R[a]||a}),(0,Kn.jsx)("div",{className:"fields-list",children:t.map((e,a)=>{const t=i.findIndex(a=>a.name===e.name),n=i[t];return(0,Kn.jsxs)("div",{className:"field-item ".concat(n.excluded?"excluded":""," ").concat("required"===n.recommended?"recommended-required":""," ").concat("excluded"===n.recommended?"recommended-excluded":""),children:[(0,Kn.jsxs)("div",{className:"field-info",children:[(0,Kn.jsxs)("div",{className:"field-header",children:[(0,Kn.jsx)("span",{className:"field-label",children:e.label}),(0,Kn.jsx)("span",{className:"field-type-badge",children:e.field_type})]}),(0,Kn.jsxs)("div",{className:"field-details",children:[(0,Kn.jsx)("span",{className:"field-marker",children:"{{"+e.original_marker+"}}"}),n.recommended&&(0,Kn.jsx)("span",{className:"recommendation-badge ".concat(n.recommended),children:"required"===n.recommended?"\u2b50 Recomendado como obligatorio":"\ud83d\udeab Recomendado excluir"})]})]}),(0,Kn.jsxs)("div",{className:"field-actions",children:[(0,Kn.jsxs)("label",{className:"checkbox-label",children:[(0,Kn.jsx)("input",{type:"checkbox",checked:n.required,onChange:()=>(e=>{const a=[...i];a[e].required=!a[e].required,o(a)})(t),disabled:n.excluded}),(0,Kn.jsx)("span",{children:"Requerido"})]}),(0,Kn.jsxs)("label",{className:"checkbox-label",children:[(0,Kn.jsx)("input",{type:"checkbox",checked:n.excluded,onChange:()=>(e=>{const a=[...i];a[e].excluded=!a[e].excluded,a[e].excluded&&(a[e].required=!1),o(a)})(t)}),(0,Kn.jsx)("span",{children:"Excluir"})]})]})]},e.name)})})]},a)})})]})}),(0,Kn.jsxs)("div",{className:"modal-footer",children:[(0,Kn.jsx)("button",{className:"btn-cancel",onClick:t,disabled:p,children:"Cancelar"}),(0,Kn.jsx)("button",{className:"btn-apply",onClick:async()=>{h(!0);try{let e=u;if(b){if(!j.trim()||!_.trim())return alert("Por favor ingresa el nombre y c\xf3digo del nuevo tipo de tercero"),void h(!1);console.log("\ud83c\udd95 Creando nuevo tipo de tercero...");e=(await Qn.post("/third-party-types",{code:_.toLowerCase().trim(),label:j.trim(),description:C.trim()||"Tipo de tercero: ".concat(j),icon:k||"\ud83d\udcc4",default_identification_types:[T],fields:[]})).data.type._id,console.log("\u2705 Nuevo tipo creado:",e)}if(!e)return alert("Por favor selecciona o crea un tipo de tercero"),void h(!1);const a=await Qn.put("/third-party-types/".concat(e,"/apply-suggested-fields"),{fields:i});console.log("\u2705 Configuraci\xf3n aplicada:",a.data),alert("Configuraci\xf3n ".concat(b?"creada":"actualizada"," exitosamente!\n\n")+"Campos agregados: ".concat(a.data.fieldsAdded,"\n")+"Campos excluidos: ".concat(a.data.fieldsExcluded)),s&&s(e),t()}catch(n){var e,a;console.error("Error al aplicar configuraci\xf3n:",n),alert("Error al aplicar la configuraci\xf3n: "+((null===(e=n.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.error)||"Error desconocido"))}finally{h(!1)}},disabled:p||f||!b&&!u,children:p?b?"Creando...":"Aplicando...":"Aplicar Configuraci\xf3n"})]})]})})},fr=e=>{let{onTemplateCreated:a,onContractGenerated:t}=e;const[n,l]=(0,r.useState)(null),[s,i]=(0,r.useState)(""),[o,c]=(0,r.useState)(""),[d,u]=(0,r.useState)("otro"),[m,p]=(0,r.useState)([]),[h,f]=(0,r.useState)([]),[v,g]=(0,r.useState)(!1),[x,b]=(0,r.useState)("upload"),[y,j]=(0,r.useState)(""),[N,_]=(0,r.useState)(!1),w=(0,r.useRef)(null),[C,S]=(0,r.useState)(""),[k,E]=(0,r.useState)(""),[T,P]=(0,r.useState)([]),[R,L]=(0,r.useState)(!1),[A,D]=(0,r.useState)([]),[z,O]=(0,r.useState)("");(0,r.useEffect)(()=>{const e=localStorage.getItem("user"),a=localStorage.getItem("selectedCompanyId")||"";if(e){const t=JSON.parse(e);S(t.role),E(a),"admin"===t.role||"super_admin"===t.role?I():"lawyer"===t.role&&D([a])}},[]);const I=async()=>{try{const e=await Qn.get("/companies");P(e.data),console.log("\ud83d\udccb Empresas disponibles:",e.data.length)}catch(e){console.error("Error cargando empresas:",e)}};(0,r.useEffect)(()=>{(async()=>{try{const e="?t=".concat(Date.now()),a=(await Qn.get("/third-party-types".concat(e))).data||[];console.log("\ud83d\udd0d [DEBUG] Tipos de terceros recibidos (UnifiedWordTemplateUpload):",a.length),console.log("\ud83d\udccb [DEBUG] C\xf3digos:",a.map(e=>e.value||e.code).join(", ")),console.log("\u2705 [DEBUG] Tiene Propiedad Horizontal (ph):",a.some(e=>"ph"===(e.value||e.code))),console.log("\u2705 [DEBUG] Tiene Contador PH (contador_ph):",a.some(e=>"contador_ph"===(e.value||e.code))),p(a)}catch(e){console.error("Error cargando tipos de terceros:",e)}})()},[]);const q=async e=>{if(s.trim()){g(!0),b("variables");try{const a=new FormData;a.append("wordFile",e),a.append("name",s),a.append("description",o),a.append("thirdPartyType",d),console.log("\ud83d\ude80 Enviando archivo para detectar variables..."),console.log("\ud83c\udff7\ufe0f  Tipo de tercero:",d);const t=await Qn.post("/templates/process-word-with-format",a,{headers:{"Content-Type":"multipart/form-data"}});console.log("\u2705 Variables detectadas:",t.data.variables),console.log("\ud83d\udccb Detalle de variables:"),t.data.variables.forEach((e,a)=>{console.log("  ".concat(a+1,'. marker="').concat(e.marker,'", field_name="').concat(e.field_name,'", field_label="').concat(e.field_label,'"'))}),f(t.data.variables),j(t.data.previewHtml)}catch(n){var a,t;console.error("Error procesando archivo:",n),alert("Error al procesar el archivo: "+(null===(a=n.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.error)||0)}finally{g(!1)}}else alert("Por favor ingresa el nombre de la plantilla")},F=()=>{l(null),i(""),c(""),u("otro"),f([]),b("upload"),L(!1),D([]),w.current&&(w.current.value="")},M=()=>{_(!1),alert("Plantilla creada exitosamente. Ahora puedes generar contratos desde esta plantilla."),F()};return(0,Kn.jsxs)("div",{className:"unified-word-template-upload",children:[(0,Kn.jsx)("div",{className:"compact-header",children:(0,Kn.jsxs)("div",{className:"header-content",children:[(0,Kn.jsx)("h2",{children:"\ud83d\udcdd Crear Plantilla"}),(0,Kn.jsxs)("div",{className:"step-badges",children:[(0,Kn.jsx)("span",{className:"badge ".concat("upload"===x?"active":""),children:"1. Datos"}),(0,Kn.jsx)("span",{className:"badge ".concat("variables"===x?"active":""),children:"2. Variables"})]})]})}),"upload"===x&&(0,Kn.jsxs)("div",{className:"two-column-layout",children:[(0,Kn.jsxs)("div",{className:"left-column",children:[(0,Kn.jsxs)("div",{className:"section-card",children:[(0,Kn.jsx)("h3",{className:"card-title",children:"Informaci\xf3n B\xe1sica"}),(0,Kn.jsxs)("div",{className:"compact-field",children:[(0,Kn.jsx)("label",{children:"Nombre"}),(0,Kn.jsx)("input",{type:"text",value:s,onChange:e=>i(e.target.value),placeholder:"Ej: NDA, Contrato de Servicios",className:"compact-input"})]}),(0,Kn.jsxs)("div",{className:"compact-field",children:[(0,Kn.jsx)("label",{children:"Descripci\xf3n"}),(0,Kn.jsx)("textarea",{value:o,onChange:e=>c(e.target.value),placeholder:"Breve descripci\xf3n...",className:"compact-textarea",rows:2})]}),(0,Kn.jsxs)("div",{className:"compact-field",children:[(0,Kn.jsx)("label",{children:"Tipo de Tercero"}),(0,Kn.jsx)("select",{value:d,onChange:e=>u(e.target.value),className:"compact-select",children:m.map(e=>(0,Kn.jsxs)("option",{value:e.value,children:[e.icon," ",e.label]},e.value))})]}),(0,Kn.jsxs)("div",{className:"file-upload-compact",children:[(0,Kn.jsx)("input",{ref:w,type:"file",accept:".docx",onChange:async e=>{var a;const t=null===(a=e.target.files)||void 0===a?void 0:a[0];t&&(t.name.endsWith(".docx")?(l(t),s.trim()||i(t.name.replace(".docx","")),await q(t)):alert("Por favor selecciona un archivo Word (.docx)"))},className:"file-input",id:"word-file"}),(0,Kn.jsxs)("label",{htmlFor:"word-file",className:"file-label-compact",children:[(0,Kn.jsx)("span",{className:"file-icon",children:"\ud83d\udcc4"}),(0,Kn.jsx)("span",{className:"file-text",children:n?n.name:"Seleccionar .docx"})]})]})]}),"lawyer"===C&&(0,Kn.jsxs)("div",{className:"info-box",children:[(0,Kn.jsx)("span",{className:"info-icon",children:"\ud83d\udc54"}),(0,Kn.jsx)("span",{children:"Plantilla solo para tu empresa"})]})]}),(0,Kn.jsx)("div",{className:"right-column",children:("admin"===C||"super_admin"===C)&&(0,Kn.jsxs)("div",{className:"section-card",children:[(0,Kn.jsx)("h3",{className:"card-title",children:"\ud83c\udfe2 Compartir Plantilla"}),"super_admin"===C&&(0,Kn.jsx)("div",{className:"global-checkbox-wrapper",children:(0,Kn.jsxs)("label",{className:"global-checkbox-label",children:[(0,Kn.jsx)("input",{type:"checkbox",id:"shareWithAll",checked:R,onChange:e=>{return a=e.target.checked,L(a),void(a&&D([]));var a}}),(0,Kn.jsxs)("span",{className:"checkbox-text",children:[(0,Kn.jsx)("strong",{children:"\ud83c\udf10 Plantilla Global"}),(0,Kn.jsx)("small",{children:"Disponible para todas las empresas"})]})]})}),!R&&(0,Kn.jsxs)(Kn.Fragment,{children:[T.length>0&&(0,Kn.jsxs)("div",{className:"search-box-compact",children:[(0,Kn.jsx)("input",{type:"text",placeholder:"\ud83d\udd0d Buscar empresa o NIT...",value:z,onChange:e=>O(e.target.value),className:"search-input-compact"}),z&&(0,Kn.jsx)("button",{onClick:()=>O(""),className:"clear-btn",children:"\u2715"})]}),(0,Kn.jsx)("div",{className:"companies-list-compact",children:0===T.length?(0,Kn.jsx)("div",{className:"loading-compact",children:"Cargando..."}):(()=>{const e=T.filter(e=>{var a;return e.name.toLowerCase().includes(z.toLowerCase())||(null===(a=e.tax_id)||void 0===a?void 0:a.toLowerCase().includes(z.toLowerCase()))});return 0===e.length&&z?(0,Kn.jsx)("div",{className:"no-results-compact",children:"No se encontraron empresas"}):(0,Kn.jsx)("div",{className:"companies-grid",children:e.map(e=>(0,Kn.jsxs)("label",{className:"company-checkbox-item ".concat(A.includes(e._id)?"checked":""),children:[(0,Kn.jsx)("input",{type:"checkbox",checked:A.includes(e._id),onChange:()=>{return a=e._id,void(A.includes(a)?D(A.filter(e=>e!==a)):D([...A,a]));var a}}),(0,Kn.jsxs)("div",{className:"company-details",children:[(0,Kn.jsx)("div",{className:"company-name-compact",children:e.name}),(0,Kn.jsx)("div",{className:"company-nit-compact",children:e.tax_id||"Sin NIT"})]}),(0,Kn.jsx)("div",{className:"check-icon",children:A.includes(e._id)?"\u2713":""})]},e._id))})})()})]}),!R&&A.length>0&&(0,Kn.jsxs)("div",{className:"selection-summary",children:[(0,Kn.jsx)("strong",{children:A.length})," ",1===A.length?"empresa seleccionada":"empresas seleccionadas"]})]})})]}),"variables"===x&&(0,Kn.jsxs)("div",{className:"two-column-layout",children:[(0,Kn.jsx)("div",{className:"left-column",children:(0,Kn.jsxs)("div",{className:"section-card",children:[(0,Kn.jsxs)("h3",{className:"card-title",children:["Variables Detectadas (",h.length,")"]}),(0,Kn.jsx)("div",{className:"variables-list-compact",children:h.map((e,a)=>(0,Kn.jsxs)("div",{className:"variable-compact",children:[(0,Kn.jsxs)("div",{className:"var-header",children:[(0,Kn.jsx)("code",{children:"{{".concat(e.marker,"}}")}),e.required&&(0,Kn.jsx)("span",{className:"badge-required",children:"*"})]}),(0,Kn.jsx)("div",{className:"var-label",children:e.field_label}),(0,Kn.jsx)("div",{className:"var-type",children:e.field_type})]},a))}),(0,Kn.jsx)("button",{onClick:async()=>{if(n&&s.trim()){g(!0);try{const e=new FormData;e.append("wordFile",n),console.log("\ud83d\udce4 Subiendo archivo Word...");const t=await Qn.post("/templates/upload-word",e,{headers:{"Content-Type":"multipart/form-data"}}),{filePath:r,content:l,gridfsFileId:i,gridfsFileName:c,cloudinaryUrl:u,cloudinaryPublicId:m}=t.data,p={name:s,description:o,third_party_type:d,content:l||"",fields:h,wordFilePath:r,wordFileOriginalName:n.name,gridfsFileId:i||null,gridfsFileName:c||null,cloudinaryUrl:u||null,cloudinaryPublicId:m||null};"super_admin"===C?R?(p.is_shared=!0,console.log("\ud83c\udf10 Plantilla compartida con todas las empresas")):A.length>0&&(p.is_shared=!1,p.shared_with_companies=A,console.log("\ud83c\udfe2 Plantilla compartida con",A.length,"empresas")):"admin"===C?A.length>0?(p.shared_with_companies=A,console.log("\ud83c\udfe2 Admin compartiendo con",A.length,"empresas")):p.company=k:"lawyer"===C&&(p.company=k,console.log("\ud83d\udc54 Plantilla solo para empresa actual:",k)),console.log("\ud83d\udcdd Creando plantilla...");const f=await Qn.post("/templates",p);console.log("\u2705 Plantilla creada exitosamente"),h.length>0?(console.log("\ud83d\udd27 Mostrando modal de configuraci\xf3n de campos..."),_(!0)):(alert("Plantilla creada exitosamente. Ahora puedes generar contratos desde esta plantilla."),F()),a&&a(f.data.id)}catch(r){var e,t;console.error("Error al crear plantilla:",r),alert("Error al crear la plantilla: "+((null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.error)||"Error desconocido"))}finally{g(!1)}}else alert("Por favor ingresa un nombre para la plantilla")},className:"btn-create-template",disabled:v,children:v?"Creando...":"\u2713 Crear Plantilla"})]})}),(0,Kn.jsx)("div",{className:"right-column",children:(0,Kn.jsxs)("div",{className:"section-card",children:[(0,Kn.jsx)("h3",{className:"card-title",children:"Vista Previa"}),(0,Kn.jsx)("div",{className:"preview-content-compact",dangerouslySetInnerHTML:{__html:y}})]})})]}),v&&(0,Kn.jsxs)("div",{className:"processing",children:[(0,Kn.jsx)("div",{className:"spinner"}),(0,Kn.jsx)("p",{children:"Procesando archivo Word..."})]}),(0,Kn.jsx)(hr,{isOpen:N,onClose:M,detectedVariables:h,thirdPartyTypeCode:d,onConfigApplied:M})]})},vr=()=>{const e=pe(),a=ve(),t=()=>{const a=new URLSearchParams(e.search).get("tab");return"templates"===a||"contracts"===a||"create"===a?a:"create"},[n,l]=(0,r.useState)(t()),[s,i]=(0,r.useState)([]),[o,c]=(0,r.useState)([]),[d,m]=(0,r.useState)(!1),[p,h]=(0,r.useState)(!1),[f,v]=(0,r.useState)(null),[g,x]=(0,r.useState)(!1),[b,y]=(0,r.useState)(null),[j,N]=(0,r.useState)({}),[_,w]=(0,r.useState)([]),[C,S]=(0,r.useState)(""),[k,E]=(0,r.useState)(!1),[T,P]=(0,r.useState)(!1),[R,L]=(0,r.useState)(!1),[A,D]=(0,r.useState)([]),[z,O]=(0,r.useState)(!1),[I,q]=(0,r.useState)([]),[F,M]=(0,r.useState)([]),[U,B]=(0,r.useState)(""),[V,H]=(0,r.useState)([]),[W,G]=(0,r.useState)({}),[$,Q]=(0,r.useState)(""),[K,J]=(0,r.useState)(!1),[Y,X]=(0,r.useState)({code:"",label:"",description:"",icon:"\ud83d\udcc4"}),[Z,ee]=(0,r.useState)({identification_type:"NIT",identification_number:"",legal_name:"",legal_name_short:"",full_name:"",legal_representative_name:"",legal_representative_id_type:"CC",legal_representative_id_number:"",email:"",phone:"",address:"",city:"",country:"Colombia"}),[ae,te]=(0,r.useState)(""),[ne,re]=(0,r.useState)(""),[le,se]=(0,r.useState)(""),[ie,oe]=(0,r.useState)([]),[ce,de]=(0,r.useState)(""),[ue,me]=(0,r.useState)(""),[he,fe]=(0,r.useState)(!1),[ge,xe]=(0,r.useState)(""),[be,ye]=(0,r.useState)([]),[je,Ne]=(0,r.useState)(""),[_e,we]=(0,r.useState)(""),[Ce,Se]=(0,r.useState)(!1),[ke,Ee]=(0,r.useState)(!1),[Te,Pe]=(0,r.useState)(null),[Re,Le]=(0,r.useState)({name:"",description:"",category:""}),Ae=async()=>{m(!0);try{const e=await Qn.get("/templates");i(e.data)}catch(e){console.error("Error fetching templates:",e)}finally{m(!1)}},De=async()=>{h(!0);try{const e=await Qn.get("/contracts");c(e.data)}catch(e){console.error("Error fetching contracts:",e)}finally{h(!1)}},ze=async e=>{try{const a=await Qn.get("/templates/".concat(e._id,"/download-word"),{responseType:"blob"}),t=window.URL.createObjectURL(new Blob([a.data])),n=document.createElement("a");n.href=t,n.setAttribute("download","".concat(e.name,".docx")),document.body.appendChild(n),n.click(),n.remove(),window.URL.revokeObjectURL(t)}catch(a){console.error("Error downloading template Word:",a),alert("Error al descargar el archivo Word de la plantilla")}},Oe=async(e,a)=>{const t=prompt("Nombre para la copia de la plantilla:","Copia de ".concat(a));if(t&&""!==t.trim()){m(!0);try{const a=await Qn.post("/templates/".concat(e,"/copy"),{newName:t.trim()});alert("Plantilla copiada exitosamente: ".concat(a.data.template.name)),Ae()}catch(l){var n,r;console.error("Error copying template:",l),alert("Error al copiar la plantilla: "+((null===(n=l.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.error)||"Error desconocido"))}finally{m(!1)}}},Ie=()=>{Ee(!1),Pe(null),Le({name:"",description:"",category:""})},qe=async e=>{var a;const t=null===(a=e.target.files)||void 0===a?void 0:a[0];if(t&&f)if(t.name.toLowerCase().endsWith(".docx"))if(window.confirm('\xbfEst\xe1s seguro de que quieres reemplazar el archivo Word de la plantilla "'.concat(f.name,'"? Las variables existentes se mantendr\xe1n.'))){m(!0);try{const e=new FormData;e.append("wordFile",t),await Qn.post("/templates/".concat(f._id,"/replace-word"),e,{headers:{"Content-Type":"multipart/form-data"}}),alert("Archivo Word reemplazado exitosamente"),Ae()}catch(l){var n,r;console.error("Error replacing Word file:",l),alert("Error al reemplazar el archivo Word: "+((null===(n=l.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.error)||"Error desconocido"))}finally{m(!1),v(null)}}else v(null);else alert("Por favor selecciona un archivo Word (.docx)")},Fe=e=>e.normalize("NFD").replace(/[\u0300-\u036f]/g,""),Me=e=>{if(!e)return"";let a=Fe(e).toLowerCase().trim().replace(/[_\s\/\-\.,:;()[\]{}]+/g,"").replace(/\bde\b/g,"").replace(/\bdel\b/g,"").replace(/\bla\b/g,"").replace(/\bel\b/g,"").replace(/\blos\b/g,"").replace(/\blas\b/g,"");const t=[{keywords:["nombre","razon","social"],normalized:"razonsocial"},{keywords:["representante","legal"],normalized:"representantelegal"},{keywords:["numero","nit"],normalized:"numeronit"},{keywords:["cedula","representante"],normalized:"cedularepresentante"},{keywords:["correo","electronico"],normalized:"correoelectronico"},{keywords:["propiedad","horizontal"],normalized:"propiedadhorizontal"}];for(const n of t){if(n.keywords.every(e=>a.includes(e)))return n.normalized}return!(a.includes("nombre")||a.includes("razonsocial")||a.includes("razon"))||a.includes("representante")||a.includes("licenciatario")?a:"razonsocial"},Ue=e=>{if(!e||0===e.length)return[];const a=new Set,t=new Set,n=[];return console.log("\ud83d\udd0d getUniqueVariables - Procesando campos (Sistema Robusto v2):"),e.forEach((e,r)=>{const l=e.field_name||"",s=l.trim(),i=Me(l);if(console.log("  ".concat(r+1,'. "').concat(l,'"')),console.log('      Normalizado: "'.concat(i,'"')),a.has(i))return void console.log("      \u274c DUPLICADO por normalizaci\xf3n (ignorado)");const o=s.toLowerCase();if(t.has(o))console.log("      \u274c DUPLICADO por nombre exacto (ignorado)");else{for(const e of n){if((e.field_name||"").toLowerCase().trim()===o)return void console.log("      \u274c DUPLICADO por similitud exacta (ignorado)")}a.add(i),t.add(o),n.push(e),console.log("      \u2705 AGREGADO como campo \xfanico")}}),console.log("\n\ud83d\udcca Resumen: ".concat(e.length," campos totales \u2192 ").concat(n.length," campos \xfanicos\n")),n},Be=()=>_.filter(e=>{if(!1===e.active)return!1;if($){return("object"===typeof e.third_party_type&&e.third_party_type?e.third_party_type._id:e.third_party_type)===$}return!1}),Ve=async()=>{try{const e="?t=".concat(Date.now()),a=await Qn.get("/third-party-types".concat(e));console.log("\ud83d\udccb Tipos de terceros cargados:",a.data.length),console.log("\ud83d\udccb [DEBUG] C\xf3digos:",a.data.map(e=>e.code).join(", ")),console.log("\u2705 [DEBUG] Tiene Propiedad Horizontal (ph):",a.data.some(e=>"ph"===e.code)),console.log("\u2705 [DEBUG] Tiene Contador PH (contador_ph):",a.data.some(e=>"contador_ph"===e.code)),M(a.data)}catch(e){console.error("Error cargando tipos de terceros:",e)}},He=async e=>{if("__CREATE_NEW__"===e)return J(!0),B(""),void H([]);if(B(e),G({}),e)try{var a;const t=await Qn.get("/third-party-types/".concat(e));console.log("\ud83d\udcdd Campos del tipo de tercero:",t.data.fields),H(t.data.fields||[]);const n={};null===(a=t.data.fields)||void 0===a||a.forEach(e=>{n[e.name]=""}),G(n)}catch(t){console.error("Error cargando campos del tipo de tercero:",t),alert("Error al cargar la configuraci\xf3n del tipo de tercero")}else H([])},We=e=>{var a;if(S(e),!e||!b)return;const t=_.find(a=>a._id===e);if(!t)return;const n={razon_social:t.legal_name,razonsocial:t.legal_name,"raz\xf3n social":t.legal_name,legal_name:t.legal_name,nombre:t.legal_name,"nombre / raz\xf3n social":t.legal_name,"nombre / razon social":t.legal_name,"nombre/raz\xf3n social":t.legal_name,"nombre/razon social":t.legal_name,nombre_razon_social:t.legal_name,nombrerazonsocial:t.legal_name,nombre_de_la_propiedad_horizontal:t.legal_name,"nombre de la propiedad horizontal":t.legal_name,nombredelapropiedadhorizontal:t.legal_name,propiedad_horizontal:t.legal_name,propiedadhorizontal:t.legal_name,razon_social_abreviada:t.legal_name_short,"razon social abreviada":t.legal_name_short,razonsocialabreviada:t.legal_name_short,legal_name_short:t.legal_name_short,nit:t.identification_number,numero_del_nit:t.identification_number,"numero del nit":t.identification_number,numerodelnit:t.identification_number,numero_nit:t.identification_number,numeronit:t.identification_number,identification_number:t.identification_number,nombre_representante_legal:t.legal_representative_name,"nombre representante legal":t.legal_representative_name,nombrerepresentantelegal:t.legal_representative_name,nombrederepresentantelegal:t.legal_representative_name,nombre_del_representante_legal:t.legal_representative_name,representante_legal:t.legal_representative_name,representantelegal:t.legal_representative_name,legal_representative_name:t.legal_representative_name,cedula:t.legal_representative_id_number,cedula_representante:t.legal_representative_id_number,cedularepresentante:t.legal_representative_id_number,cedula_rep_legal:t.legal_representative_id_number,cedulareplegal:t.legal_representative_id_number,cedula_representante_legal:t.legal_representative_id_number,cedularepresentantelegal:t.legal_representative_id_number,legal_representative_id_number:t.legal_representative_id_number,ciudad_expedicion:t.id_issue_city||"",ciudad_de_expedicion:t.id_issue_city||"",ciudaddeexpedicion:t.id_issue_city||"",ciudad_expedicion_cedula:t.id_issue_city||"",ciudad_de_expedicion_cedula:t.id_issue_city||"",ciudad_de_expedicion_cedula_rep_legal:t.id_issue_city||"",ciudaddeexpedicioncedulareplegal:t.id_issue_city||"",lugar_expedicion:t.id_issue_city||"",lugarexpedicion:t.id_issue_city||"",id_issue_city:t.id_issue_city||"",correo_electronico:t.email||"","correo electronico":t.email||"",correoelectronico:t.email||"",correo:t.email||"",email:t.email||"","e-mail":t.email||"",e_mail:t.email||"",email_licenciatario:t.email||"","e-mail_licenciatario":t.email||"",emaillicenciatario:t.email||"",e_mail_licenciatario:t.email||"",correo_licenciatario:t.email||"",correolicenciatario:t.email||"",telefono:t.phone||"",phone:t.phone||"",direccion:t.address||"",address:t.address||"",ciudad:t.city||"",city:t.city||"",ciudad_de_domicilio:t.city||"",nombre_licenciatario:t.licensee_name||t.full_name||"",nombrelicenciatario:t.licensee_name||t.full_name||"",nombre_del_licenciatario:t.licensee_name||t.full_name||"",nombredellicenciatario:t.licensee_name||t.full_name||"",licenciatario:t.licensee_name||t.full_name||"",licensee_name:t.licensee_name||"",full_name:t.full_name||"",fecha:(new Date).toLocaleDateString("es-ES"),dia_mes_y_ano:(new Date).toLocaleDateString("es-ES"),"d\xeda_mes_y_a\xf1o":(new Date).toLocaleDateString("es-ES"),"diamesy ano":(new Date).toLocaleDateString("es-ES"),"dia,_mes_y_ano":(new Date).toLocaleDateString("es-ES"),"d\xeda,_mes_y_a\xf1o":(new Date).toLocaleDateString("es-ES")},r=t;r.custom_fields&&"object"===typeof r.custom_fields&&(console.log("\ud83d\udd0d Campos personalizados del tercero:",r.custom_fields),Object.entries(r.custom_fields).forEach(e=>{let[a,t]=e;const r=Fe(a);[a,r,a.toLowerCase(),r.toLowerCase(),a.replace(/_/g," "),r.replace(/_/g," "),a.replace(/ /g,"_"),r.replace(/ /g,"_"),Me(a),a.replace(/-/g,"_"),r.replace(/-/g,"_"),a.replace(/_/g,""),r.replace(/_/g,""),a.replace(/ /g,""),r.replace(/ /g,""),a.toLowerCase().replace(/[^a-z0-9]/g,""),r.toLowerCase().replace(/[^a-z0-9]/g,"")].forEach(e=>{n[e]=t}),console.log('   \ud83d\udccc Custom field mapeado: "'.concat(a,'" -> "').concat(t,'" (incluye sin acentos: "').concat(r,'")'))})),console.log("\ud83d\udccb Mapping completo:",n);const l={};null===(a=b.fields)||void 0===a||a.forEach(e=>{const a=e.field_name,t=Fe(a),r=[a,t,a.toLowerCase(),t.toLowerCase(),a.replace(/_/g," "),t.replace(/_/g," "),a.replace(/ /g,"_"),t.replace(/ /g,"_"),Me(a),a.replace(/-/g,"_"),t.replace(/-/g,"_"),a.replace(/_/g,""),t.replace(/_/g,""),a.replace(/ /g,""),t.replace(/ /g,""),a.toLowerCase().replace(/[^a-z0-9]/g,""),t.toLowerCase().replace(/[^a-z0-9]/g,"")];let s=null;for(const l of r)if(void 0!==n[l]&&null!==n[l]&&""!==n[l]){s=n[l],console.log('\u2705 Campo "'.concat(a,'" coincide con variaci\xf3n "').concat(l,'" -> "').concat(s,'"'));break}if(!s){const e=Me(a),t=Object.keys(n).find(a=>Me(a)===e);t&&n[t]&&(s=n[t],console.log('\u2705 Campo "'.concat(a,'" llenado con: "').concat(s,'"')))}s?l[a]=s:(l[a]="",console.log('\u26a0\ufe0f  Campo "'.concat(a,'" no encontrado en mapping')))}),console.log("\ud83d\udcdd Datos del contrato actualizados:",l),N(l)},Ge=()=>{O(!1)},$e=(()=>{let e=[...o];if(ae.trim()){const a=ae.toLowerCase();e=e.filter(e=>{var t;return null===(t=e.contract_number)||void 0===t?void 0:t.toLowerCase().includes(a)})}if(ne.trim()){const a=ne.toLowerCase();e=e.filter(e=>{var t,n;return null===(t=e.template)||void 0===t||null===(n=t.name)||void 0===n?void 0:n.toLowerCase().includes(a)})}if(le.trim()){const a=le.toLowerCase();e=e.filter(e=>{var t,n,r,l,s;return(null===(t=e.content)||void 0===t?void 0:t.toLowerCase().includes(a))||(null===(n=e.title)||void 0===n?void 0:n.toLowerCase().includes(a))||(null===(r=e.description)||void 0===r?void 0:r.toLowerCase().includes(a))||(null===(l=e.company_name)||void 0===l?void 0:l.toLowerCase().includes(a))||(null===(s=e.contract_number)||void 0===s?void 0:s.toLowerCase().includes(a))})}if(ie.length>0&&(e=e.filter(e=>ie.includes(e.status))),ce){const a=new Date(ce);e=e.filter(e=>new Date(e.createdAt)>=a)}if(ue){const a=new Date(ue);a.setHours(23,59,59,999),e=e.filter(e=>new Date(e.createdAt)<=a)}return e})(),Qe=[ae.trim(),ne.trim(),le.trim(),ie.length>0,ce,ue].filter(Boolean).length,Ke=()=>{xe(""),ye([]),Ne(""),we("")},Je=(()=>{let e=[...s];if(ge.trim()){const a=ge.toLowerCase();e=e.filter(e=>{var t,n;return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(a))||(null===(n=e.description)||void 0===n?void 0:n.toLowerCase().includes(a))})}if(be.length>0&&(e=e.filter(e=>be.includes(e.category))),je){const a=new Date(je);e=e.filter(e=>new Date(e.createdAt)>=a)}if(_e){const a=new Date(_e);a.setHours(23,59,59,999),e=e.filter(e=>new Date(e.createdAt)<=a)}return e})(),Ye=[ge.trim(),be.length>0,je,_e].filter(Boolean).length,Xe=e=>{l(e),a("?tab=".concat(e),{replace:!0})};return(0,r.useEffect)(()=>{const e=t();e!==n&&l(e)},[e.search]),(0,r.useEffect)(()=>{"templates"===n&&0===s.length?Ae():"contracts"===n&&0===o.length&&De()},[n]),(0,Kn.jsxs)("div",{className:"unified-templates",children:[(0,Kn.jsxs)("div",{className:"page-header",children:[(0,Kn.jsx)("h1",{children:"\ud83d\ude80 Gesti\xf3n de Contratos"}),(0,Kn.jsx)("p",{children:"Crea plantillas, genera contratos y administra todo desde un solo lugar"})]}),(0,Kn.jsxs)("div",{className:"tabs-navigation",children:[(0,Kn.jsx)("button",{className:"tab-button ".concat("create"===n?"active":""),onClick:()=>Xe("create"),children:"\u2728 Crear Contrato"}),(0,Kn.jsx)("button",{className:"tab-button ".concat("templates"===n?"active":""),onClick:()=>Xe("templates"),children:"\ud83d\udccb Plantillas"}),(0,Kn.jsx)("button",{className:"tab-button ".concat("contracts"===n?"active":""),onClick:()=>Xe("contracts"),children:"\ud83d\udcc4 Contratos Generados"})]}),(0,Kn.jsxs)("div",{className:"tab-content",children:["create"===n&&(0,Kn.jsx)("div",{className:"create-tab",children:(0,Kn.jsx)(fr,{onTemplateCreated:e=>{console.log("Plantilla creada:",e),Ae()},onContractGenerated:e=>{console.log("Contrato generado:",e),Ae(),De()}})}),"templates"===n&&(0,Kn.jsxs)("div",{className:"templates-tab",children:[(0,Kn.jsxs)("div",{className:"tab-header",children:[(0,Kn.jsx)("h2",{children:"Plantillas Creadas"}),(0,Kn.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,Kn.jsx)("button",{className:"btn-primary",onClick:()=>Xe("create"),style:{padding:"10px 20px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"600",fontSize:"14px",display:"flex",alignItems:"center",gap:"8px"},children:"\u2728 Nueva Plantilla"}),(0,Kn.jsxs)("button",{className:"btn-refresh",onClick:e=>{e.preventDefault(),Ae()},disabled:d,title:"Recargar lista de plantillas sin cambiar de p\xe1gina",children:[(0,Kn.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,Kn.jsx)("polyline",{points:"23 4 23 10 17 10"}),(0,Kn.jsx)("polyline",{points:"1 20 1 14 7 14"}),(0,Kn.jsx)("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"})]}),"Actualizar Plantillas"]})]})]}),(0,Kn.jsxs)("div",{className:"filters-container",children:[(0,Kn.jsxs)("div",{className:"filters-header",children:[(0,Kn.jsxs)("button",{className:"btn-toggle-filters",onClick:()=>Se(!Ce),children:[Ce?"\u25bc":"\u25b6"," Filtros",Ye>0&&(0,Kn.jsx)("span",{className:"filter-badge",children:Ye})]}),Ye>0&&(0,Kn.jsx)("button",{className:"btn-clear-filters",onClick:Ke,children:"Limpiar Filtros"}),(0,Kn.jsxs)("div",{className:"results-count",children:["Mostrando ",Je.length," de ",s.length," plantillas"]})]}),Ce&&(0,Kn.jsxs)("div",{className:"filters-content",children:[(0,Kn.jsxs)("div",{className:"filter-group",children:[(0,Kn.jsx)("label",{children:"Buscar:"}),(0,Kn.jsx)("input",{type:"text",placeholder:"Buscar por nombre o descripci\xf3n...",value:ge,onChange:e=>xe(e.target.value),className:"filter-input"})]}),(0,Kn.jsxs)("div",{className:"filter-group",children:[(0,Kn.jsx)("label",{children:"Categor\xeda:"}),(0,Kn.jsx)("div",{className:"status-checkboxes",children:Array.from(new Set(s.map(e=>e.category||"General"))).map(e=>(0,Kn.jsxs)("label",{className:"checkbox-label",children:[(0,Kn.jsx)("input",{type:"checkbox",checked:be.includes(e),onChange:()=>(e=>{ye(a=>a.includes(e)?a.filter(a=>a!==e):[...a,e])})(e)}),(0,Kn.jsx)("span",{className:"status-label status-".concat(e.toLowerCase().replace(/\s+/g,"-")),children:e})]},e))})]}),(0,Kn.jsxs)("div",{className:"filter-group",children:[(0,Kn.jsx)("label",{children:"Fecha de creaci\xf3n:"}),(0,Kn.jsxs)("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[(0,Kn.jsx)("input",{type:"date",value:je,onChange:e=>Ne(e.target.value),className:"filter-input",placeholder:"Desde"}),(0,Kn.jsx)("span",{children:"hasta"}),(0,Kn.jsx)("input",{type:"date",value:_e,onChange:e=>we(e.target.value),className:"filter-input",placeholder:"Hasta"})]})]})]})]}),d?(0,Kn.jsx)("div",{className:"loading",children:"Cargando plantillas..."}):0===s.length?(0,Kn.jsxs)("div",{className:"empty-state",children:[(0,Kn.jsx)("h3",{children:"No hay plantillas"}),(0,Kn.jsx)("p",{children:'Ve al tab "Crear Contrato" para crear tu primera plantilla'})]}):0===Je.length?(0,Kn.jsxs)("div",{className:"empty-state",children:[(0,Kn.jsx)("h3",{children:"No se encontraron plantillas"}),(0,Kn.jsx)("p",{children:"No hay plantillas que coincidan con los filtros aplicados"}),(0,Kn.jsx)("button",{className:"btn-clear-filters",onClick:Ke,children:"Limpiar Filtros"})]}):(0,Kn.jsx)("div",{className:"templates-view",children:(0,Kn.jsx)("div",{className:"templates-table-container",children:(0,Kn.jsxs)("table",{className:"templates-table",children:[(0,Kn.jsx)("thead",{children:(0,Kn.jsxs)("tr",{children:[(0,Kn.jsx)("th",{children:"Nombre"}),(0,Kn.jsx)("th",{className:"hide-mobile",children:"Descripci\xf3n"}),(0,Kn.jsx)("th",{children:"Categor\xeda"}),(0,Kn.jsx)("th",{className:"hide-tablet",children:"Variables"}),(0,Kn.jsx)("th",{className:"hide-tablet",children:"Fecha"}),(0,Kn.jsx)("th",{className:"hide-mobile-tablet",children:"Hora"}),(0,Kn.jsx)("th",{children:"Acciones"})]})}),(0,Kn.jsx)("tbody",{children:Je.map(e=>{var a,t;const n=new Date(e.createdAt);return(0,Kn.jsxs)("tr",{children:[(0,Kn.jsx)("td",{className:"template-name",children:(0,Kn.jsxs)("div",{className:"name-wrapper",children:[(0,Kn.jsx)("span",{className:"name-text",children:e.name}),(0,Kn.jsxs)("span",{className:"mobile-meta",children:[(0,Kn.jsxs)("span",{className:"meta-item",children:[(null===(a=e.fields)||void 0===a?void 0:a.length)||0," vars"]}),(0,Kn.jsx)("span",{className:"meta-item",children:n.toLocaleDateString("es-ES")})]})]})}),(0,Kn.jsx)("td",{className:"template-description hide-mobile",children:e.description||"Sin descripci\xf3n"}),(0,Kn.jsx)("td",{children:(0,Kn.jsx)("span",{className:"item-badge",children:e.category||"General"})}),(0,Kn.jsx)("td",{className:"template-variables hide-tablet",children:(null===(t=e.fields)||void 0===t?void 0:t.length)||0}),(0,Kn.jsx)("td",{className:"template-date hide-tablet",children:n.toLocaleDateString("es-ES")}),(0,Kn.jsx)("td",{className:"template-time hide-mobile-tablet",children:n.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})}),(0,Kn.jsx)("td",{className:"template-actions",children:(0,Kn.jsxs)("div",{className:"actions-buttons",children:[(0,Kn.jsx)("button",{className:"btn-action btn-generate",onClick:()=>(async e=>{var a;y(e),x(!0),Q(""),S("");const t={};null===(a=e.fields)||void 0===a||a.forEach(e=>{t[e.field_name]=""}),N(t);try{const e=await Qn.get("/suppliers");w(e.data.suppliers||[]),await Ve()}catch(n){console.error("Error fetching suppliers:",n)}})(e),title:"Generar Contrato",children:"\ud83d\ude80"}),(0,Kn.jsx)("button",{className:"btn-action btn-edit",onClick:()=>(e=>{Pe(e),Le({name:e.name,description:e.description||"",category:e.category||""}),Ee(!0)})(e),title:"Editar",children:"\u270f\ufe0f"}),(0,Kn.jsx)("button",{className:"btn-action btn-copy hide-mobile",onClick:()=>Oe(e._id,e.name),title:"Copiar",children:"\ud83d\udccb"}),(0,Kn.jsx)("button",{className:"btn-action btn-replace hide-mobile",onClick:()=>{var a;v(e),null===(a=document.getElementById("replace-word-".concat(e._id)))||void 0===a||a.click()},title:"Reemplazar",children:"\ud83d\udd04"}),(0,Kn.jsx)("input",{id:"replace-word-".concat(e._id),type:"file",accept:".docx",style:{display:"none"},onChange:qe}),(0,Kn.jsx)("button",{className:"btn-action btn-download hide-mobile",onClick:()=>ze(e),title:"Descargar",children:"\ud83d\udce5"}),(0,Kn.jsx)("button",{className:"btn-action btn-delete",onClick:()=>(async e=>{if(window.confirm("\xbfEst\xe1s seguro de que quieres eliminar esta plantilla?"))try{await Qn.delete("/templates/".concat(e)),Ae(),alert("Plantilla eliminada exitosamente")}catch(a){console.error("Error deleting template:",a),alert("Error al eliminar la plantilla")}})(e._id),title:"Eliminar",children:"\ud83d\uddd1\ufe0f"}),(0,Kn.jsxs)("div",{className:"mobile-menu-wrapper show-mobile-only",children:[(0,Kn.jsx)("button",{className:"btn-action btn-menu",onClick:e=>{e.stopPropagation();const a=e.currentTarget.nextElementSibling;null===a||void 0===a||a.classList.toggle("show")},title:"M\xe1s acciones",children:"\u22ee"}),(0,Kn.jsxs)("div",{className:"mobile-actions-menu",children:[(0,Kn.jsx)("button",{onClick:()=>Oe(e._id,e.name),children:"\ud83d\udccb Copiar"}),(0,Kn.jsx)("button",{onClick:()=>{var a;v(e),null===(a=document.getElementById("replace-word-".concat(e._id)))||void 0===a||a.click()},children:"\ud83d\udd04 Reemplazar"}),(0,Kn.jsx)("button",{onClick:()=>ze(e),children:"\ud83d\udce5 Descargar"})]})]})]})})]},e._id)})})]})})})]}),"contracts"===n&&(0,Kn.jsxs)("div",{className:"contracts-tab",children:[(0,Kn.jsxs)("div",{className:"tab-header",children:[(0,Kn.jsx)("h2",{children:"Contratos Generados"}),(0,Kn.jsxs)("button",{className:"btn-refresh",onClick:e=>{e.preventDefault(),De()},disabled:p,title:"Recargar lista de contratos sin cambiar de p\xe1gina",children:[(0,Kn.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,Kn.jsx)("polyline",{points:"23 4 23 10 17 10"}),(0,Kn.jsx)("polyline",{points:"1 20 1 14 7 14"}),(0,Kn.jsx)("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"})]}),"Actualizar Contratos"]})]}),(0,Kn.jsxs)("div",{className:"filters-container",children:[(0,Kn.jsxs)("div",{className:"filters-header",children:[(0,Kn.jsxs)("button",{className:"btn-toggle-filters",onClick:()=>fe(!he),children:[he?"\u25bc":"\u25b6"," Filtros",Qe>0&&(0,Kn.jsx)("span",{className:"filter-badge",children:Qe})]}),Qe>0&&(0,Kn.jsx)("button",{className:"btn-clear-filters",onClick:()=>{te(""),re(""),se(""),oe([]),de(""),me("")},children:"Limpiar Filtros"}),(0,Kn.jsxs)("div",{className:"results-count",children:["Mostrando ",$e.length," de ",o.length," contratos"]})]}),he&&(0,Kn.jsxs)("div",{className:"filters-content",children:[(0,Kn.jsxs)("div",{className:"filter-group",children:[(0,Kn.jsx)("label",{children:"Buscar:"}),(0,Kn.jsx)("input",{type:"text",placeholder:"Buscar por n\xfamero de contrato...",value:ae,onChange:e=>te(e.target.value),className:"filter-input"})]}),(0,Kn.jsxs)("div",{className:"filter-group",children:[(0,Kn.jsx)("label",{children:"Plantilla:"}),(0,Kn.jsx)("input",{type:"text",placeholder:"Filtrar por nombre de plantilla...",value:ne,onChange:e=>re(e.target.value),className:"filter-input"})]}),(0,Kn.jsxs)("div",{className:"filter-group",children:[(0,Kn.jsx)("label",{children:"Tercero:"}),(0,Kn.jsx)("input",{type:"text",placeholder:"Filtrar por nombre o identificaci\xf3n del tercero...",value:le,onChange:e=>se(e.target.value),className:"filter-input"})]}),(0,Kn.jsxs)("div",{className:"filter-group",children:[(0,Kn.jsx)("label",{children:"Estado:"}),(0,Kn.jsx)("div",{className:"status-checkboxes",children:["borrador","revision","aprobado","firmado","cancelado"].map(e=>(0,Kn.jsxs)("label",{className:"checkbox-label",children:[(0,Kn.jsx)("input",{type:"checkbox",checked:ie.includes(e),onChange:()=>(e=>{oe(a=>a.includes(e)?a.filter(a=>a!==e):[...a,e])})(e)}),(0,Kn.jsx)("span",{className:"status-label ".concat(e),children:e})]},e))})]}),(0,Kn.jsxs)("div",{className:"filter-group-row",children:[(0,Kn.jsxs)("div",{className:"filter-group",children:[(0,Kn.jsx)("label",{children:"Fecha desde:"}),(0,Kn.jsx)("input",{type:"date",value:ce,onChange:e=>de(e.target.value),className:"filter-input"})]}),(0,Kn.jsxs)("div",{className:"filter-group",children:[(0,Kn.jsx)("label",{children:"Fecha hasta:"}),(0,Kn.jsx)("input",{type:"date",value:ue,onChange:e=>me(e.target.value),className:"filter-input"})]})]})]})]}),p?(0,Kn.jsx)("div",{className:"loading",children:"Cargando contratos..."}):0===o.length?(0,Kn.jsxs)("div",{className:"empty-state",children:[(0,Kn.jsx)("h3",{children:"No hay contratos generados"}),(0,Kn.jsx)("p",{children:'Ve al tab "Crear Contrato" para generar tu primer contrato'})]}):0===$e.length?(0,Kn.jsxs)("div",{className:"empty-state",children:[(0,Kn.jsx)("h3",{children:"No se encontraron contratos"}),(0,Kn.jsx)("p",{children:"Intenta ajustar los filtros para ver m\xe1s resultados"})]}):(0,Kn.jsx)("div",{className:"contracts-view",children:(0,Kn.jsx)("div",{className:"contracts-table-container",children:(0,Kn.jsxs)("table",{className:"contracts-table",children:[(0,Kn.jsx)("thead",{children:(0,Kn.jsxs)("tr",{children:[(0,Kn.jsx)("th",{className:"contract-number-col",children:"N\xb0 Contrato"}),(0,Kn.jsx)("th",{className:"contract-title-col",children:"T\xedtulo"}),(0,Kn.jsx)("th",{className:"contract-template-col hide-mobile",children:"Plantilla"}),(0,Kn.jsx)("th",{className:"contract-tercero-col",children:"Tercero"}),(0,Kn.jsx)("th",{className:"contract-status-col",children:"Estado"}),(0,Kn.jsx)("th",{className:"contract-generator-col hide-tablet",children:"Generado por"}),(0,Kn.jsx)("th",{className:"contract-date-col hide-tablet",children:"Fecha"}),(0,Kn.jsx)("th",{className:"contract-time-col hide-mobile-tablet",children:"Hora"}),(0,Kn.jsx)("th",{className:"contract-actions-col",children:"Acciones"})]})}),(0,Kn.jsx)("tbody",{children:$e.map(e=>{var a,t,n;const r=new Date(e.createdAt),l=e.company_name||(e.content?(e=>{if(!e)return"N/A";const a=e.replace(/<[^>]*>/g," ").replace(/\s+/g," "),t=["raz\xf3n social","razon social","nombre_tercero","nombre tercero","empresa_tercero","empresa tercero","nombre_empresa","nombre empresa","proveedor","cliente","contratista","tercero"],n=[/raz\xf3n\s*social[:\s]+([^<\n,;]+)/i,/razon\s*social[:\s]+([^<\n,;]+)/i,/nombre\s+(?:del\s+)?(?:tercero|proveedor|cliente)[:\s]+([^<\n,;]+)/i,/tercero[:\s]+([^<\n,;]+)/i,/proveedor[:\s]+([^<\n,;]+)/i,/cliente[:\s]+([^<\n,;]+)/i,/legal_name[:\s]+([^<\n,;]+)/i,/nombre_empresa[:\s]+([^<\n,;]+)/i,/empresa[:\s]+([^<\n,;]+)/i];for(const r of n){const e=a.match(r);if(e&&e[1]){const a=e[1].trim();if(a.length>3&&a.length<100&&!a.match(/^\d+$/))return a}}for(const r of t){const e=new RegExp("".concat(r,"[:s]+([^<\n,;]{5,80})"),"i"),t=a.match(e);if(t&&t[1]){const e=t[1].trim();if(e.length>3&&e.length<100)return e}}return"N/A"})(e.content):"N/A");return(0,Kn.jsxs)("tr",{children:[(0,Kn.jsx)("td",{className:"contract-number",children:(0,Kn.jsxs)("div",{className:"name-wrapper",children:[(0,Kn.jsx)("span",{className:"name-text",children:e.contract_number}),(0,Kn.jsxs)("span",{className:"mobile-meta",children:[(0,Kn.jsx)("span",{className:"meta-item",children:(null===(a=e.template)||void 0===a?void 0:a.name)||"Sin plantilla"}),(0,Kn.jsx)("span",{className:"meta-item",children:r.toLocaleDateString("es-ES")})]})]})}),(0,Kn.jsx)("td",{className:"contract-title",children:(0,Kn.jsxs)("div",{children:[(0,Kn.jsx)("strong",{children:e.title||e.contract_number}),e.description&&(0,Kn.jsx)("div",{style:{fontSize:"0.85rem",color:"#6c757d",marginTop:"0.25rem"},children:e.description.length>50?e.description.substring(0,50)+"...":e.description})]})}),(0,Kn.jsx)("td",{className:"contract-template hide-mobile",children:(0,Kn.jsx)("span",{className:"item-badge",children:(null===(t=e.template)||void 0===t?void 0:t.name)||"Sin plantilla"})}),(0,Kn.jsx)("td",{className:"contract-tercero",children:(0,Kn.jsxs)("div",{children:[(0,Kn.jsx)("div",{style:{fontWeight:"600",color:"#495057",marginBottom:"0.25rem"},children:"N/A"!==l?l:(0,Kn.jsx)("span",{style:{color:"#94a3b8",fontStyle:"italic",fontSize:"0.9rem"},children:"No disponible"})}),e.description&&(0,Kn.jsx)("div",{style:{fontSize:"0.8rem",color:"#94a3b8",marginTop:"0.25rem"},children:e.description.length>30?e.description.substring(0,30)+"...":e.description})]})}),(0,Kn.jsx)("td",{className:"contract-status",children:(0,Kn.jsx)("span",{className:"item-badge status-".concat(e.status),children:e.status})}),(0,Kn.jsx)("td",{className:"contract-generator hide-tablet",children:(null===(n=e.generated_by)||void 0===n?void 0:n.name)||"Usuario"}),(0,Kn.jsx)("td",{className:"contract-date hide-tablet",children:r.toLocaleDateString("es-ES")}),(0,Kn.jsx)("td",{className:"contract-time hide-mobile-tablet",children:r.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})}),(0,Kn.jsx)("td",{className:"contract-actions",children:(0,Kn.jsxs)("div",{className:"actions-buttons",children:[e.file_path&&(0,Kn.jsx)("button",{className:"btn-action btn-download",onClick:()=>(async(e,a)=>{try{const t=await Qn.get("/documents/download/word/".concat(e),{responseType:"blob"}),n=window.URL.createObjectURL(new Blob([t.data])),r=document.createElement("a");r.href=n,r.setAttribute("download","".concat(a,".docx")),document.body.appendChild(r),r.click(),r.remove(),window.URL.revokeObjectURL(n)}catch(t){console.error("Error downloading contract:",t),alert("Error al descargar el contrato")}})(e._id,e.contract_number),title:"Descargar Word",children:"\ud83d\udce5"}),(0,Kn.jsx)("button",{className:"btn-action btn-delete",onClick:()=>{window.confirm("\xbfEst\xe1s seguro de eliminar este contrato?")&&(async e=>{try{await Qn.delete("/contracts/".concat(e)),De(),alert("Contrato eliminado exitosamente")}catch(a){console.error("Error deleting contract:",a),alert("Error al eliminar el contrato")}})(e._id)},title:"Eliminar",children:"\ud83d\uddd1\ufe0f"})]})})]},e._id)})})]})})})]})]}),g&&b&&(0,Kn.jsx)("div",{className:"modal-overlay",onClick:()=>{x(!1),L(!1),D([]),O(!1),q([])},children:(0,Kn.jsxs)("div",{className:"modal-content-generate",onClick:e=>e.stopPropagation(),children:[(0,Kn.jsxs)("div",{className:"modal-header-generate",children:[(0,Kn.jsx)("h2",{children:"\ud83d\ude80 Generar Contrato"}),(0,Kn.jsxs)("p",{children:["Plantilla: ",(0,Kn.jsx)("strong",{children:b.name})]}),(0,Kn.jsx)("button",{className:"modal-close",onClick:()=>{x(!1),L(!1),D([]),O(!1),q([])},children:"\u2715"})]}),(0,Kn.jsxs)("div",{className:"modal-body-generate",children:[(0,Kn.jsxs)("div",{className:"supplier-selector",style:{marginBottom:"20px"},children:[(0,Kn.jsxs)("h3",{children:["1. Seleccionar Tipo de Tercero ",(0,Kn.jsx)("span",{className:"required",children:"*"})]}),(0,Kn.jsx)("p",{children:"Primero selecciona el tipo de tercero para filtrar la lista"}),(0,Kn.jsxs)("select",{value:$,onChange:e=>{return a=e.target.value,Q(a),S(""),void N(e=>u({},e));var a},className:"form-input",style:{padding:"12px",fontSize:"15px",borderRadius:"6px",border:$?"2px solid #4CAF50":"2px solid #e0e0e0"},children:[(0,Kn.jsx)("option",{value:"",children:"-- Seleccionar tipo de tercero --"}),F.map(e=>(0,Kn.jsxs)("option",{value:e._id,children:[e.icon||"\ud83d\udcc4"," ",e.label]},e._id))]})]}),(0,Kn.jsxs)("div",{className:"supplier-selector",children:[(0,Kn.jsxs)("h3",{children:["2. Seleccionar Tercero ",(0,Kn.jsx)("span",{className:"required",children:"*"})]}),(0,Kn.jsx)("p",{children:$?"Terceros disponibles del tipo seleccionado: ".concat(Be().length):"Primero selecciona un tipo de tercero arriba"}),(0,Kn.jsxs)("div",{style:{display:"flex",gap:"10px",alignItems:"flex-start"},children:[(0,Kn.jsxs)("div",{style:{flex:1},children:[(0,Kn.jsxs)("select",{value:C,onChange:e=>We(e.target.value),className:"form-input",required:!0,disabled:!$,style:{opacity:$?1:.6,cursor:$?"pointer":"not-allowed"},children:[(0,Kn.jsx)("option",{value:"",children:$?"-- Seleccionar tercero --":"-- Primero selecciona un tipo de tercero --"}),Be().map(e=>(0,Kn.jsxs)("option",{value:e._id,children:[e.legal_name," - ",e.identification_number]},e._id))]}),$&&0===Be().length&&(0,Kn.jsx)("p",{style:{color:"#f57c00",fontSize:"13px",marginTop:"8px",display:"flex",alignItems:"center",gap:"6px"},children:"\u26a0\ufe0f No hay terceros de este tipo. Crea uno nuevo."})]}),(0,Kn.jsx)("button",{type:"button",className:"btn-create-supplier",onClick:async()=>{P(!0),await Ve()},style:{padding:"10px 20px",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",whiteSpace:"nowrap",fontWeight:"600"},children:"+ Crear Tercero"})]}),(0,Kn.jsx)("button",{type:"button",onClick:async()=>{if(b){L(!0);try{var e,a;const t=(null===(e=b.fields)||void 0===e?void 0:e.map(e=>({field_name:e.field_name,original_marker:e.marker||e.field_name})))||[],n=await Qn.post("/third-party-types/suggest-from-template",{fields:t,third_party_type:b.category||"otro"});D(n.data.suggested||[]);const r=(null===(a=b.fields)||void 0===a?void 0:a.map(e=>({marker:e.marker||e.field_name,field_name:e.field_name,field_label:e.field_label||e.field_name,field_type:e.field_type||"text"})))||[];q(r)}catch(t){console.error("Error al obtener sugerencias:",t),alert("Error al analizar los campos de la plantilla")}}},style:{marginTop:"10px",padding:"8px 16px",backgroundColor:"#2196F3",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"500",display:"flex",alignItems:"center",gap:"6px",width:"fit-content"},children:"\ud83d\udca1 Ver campos sugeridos para esta plantilla"}),R&&A.length>0&&(0,Kn.jsxs)("div",{style:{marginTop:"15px",padding:"15px",backgroundColor:"#E3F2FD",border:"2px solid #2196F3",borderRadius:"6px"},children:[(0,Kn.jsx)("h4",{style:{margin:"0 0 10px 0",color:"#1976D2"},children:"\ud83d\udccb Campos necesarios para el tercero:"}),(0,Kn.jsx)("p",{style:{fontSize:"13px",color:"#555",marginBottom:"10px"},children:"Bas\xe1ndonos en las variables de esta plantilla, el tercero deber\xeda tener los siguientes datos:"}),(0,Kn.jsx)("ul",{style:{margin:"0",paddingLeft:"20px",fontSize:"14px"},children:A.filter(e=>!e.excluded).slice(0,10).map((e,a)=>(0,Kn.jsxs)("li",{style:{marginBottom:"5px"},children:[(0,Kn.jsx)("strong",{children:e.label}),e.required&&(0,Kn.jsx)("span",{style:{color:"#D32F2F",marginLeft:"5px"},children:"*"}),(0,Kn.jsx)("span",{style:{marginLeft:"8px",fontSize:"12px",color:"#666",backgroundColor:"#fff",padding:"2px 6px",borderRadius:"3px"},children:e.field_type})]},a))}),A.filter(e=>!e.excluded).length>10&&(0,Kn.jsxs)("p",{style:{fontSize:"12px",color:"#666",marginTop:"10px",marginBottom:"0"},children:["... y ",A.filter(e=>!e.excluded).length-10," campos m\xe1s"]}),(0,Kn.jsxs)("div",{style:{display:"flex",gap:"10px",marginTop:"10px"},children:[(0,Kn.jsx)("button",{onClick:()=>{O(!0)},style:{padding:"8px 16px",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"600"},children:"\ud83d\udd27 Configurar Tipo de Tercero"}),(0,Kn.jsx)("button",{onClick:()=>L(!1),style:{padding:"5px 12px",backgroundColor:"#fff",color:"#2196F3",border:"1px solid #2196F3",borderRadius:"4px",cursor:"pointer",fontSize:"13px"},children:"Ocultar sugerencias"})]})]})]}),(0,Kn.jsxs)("div",{className:"contract-fields-modal",children:[(0,Kn.jsx)("h3",{children:"Datos del Contrato"}),Ue(b.fields||[]).map((e,a)=>(0,Kn.jsxs)("div",{className:"field-group",children:[(0,Kn.jsxs)("label",{children:[e.field_label||e.field_name,e.required&&(0,Kn.jsx)("span",{className:"required",children:"*"})]}),(0,Kn.jsx)("input",{type:"text",value:j[e.field_name]||"",onChange:a=>((e,a)=>{var t;const n=Me(e),r=(null===b||void 0===b||null===(t=b.fields)||void 0===t?void 0:t.filter(e=>Me(e.field_name)===n).map(e=>e.field_name))||[],l={};r.forEach(e=>{l[e]=a}),N(e=>u(u({},e),l))})(e.field_name,a.target.value),placeholder:"Ingresa ".concat((e.field_label||e.field_name).toLowerCase()),className:"form-input",required:e.required})]},a))]})]}),(0,Kn.jsxs)("div",{className:"modal-footer-generate",children:[(0,Kn.jsx)("button",{className:"btn-cancel",onClick:()=>{x(!1),L(!1),D([]),O(!1),q([])},children:"Cancelar"}),(0,Kn.jsx)("button",{className:"btn-generate-final",onClick:async()=>{if(!b)return;if(!C)return void alert("Por favor selecciona un tercero para generar el contrato");const e=Ue(b.fields||[]).filter(e=>e.required).filter(e=>{var a;return!(null!==(a=j[e.field_name])&&void 0!==a&&a.trim())});if(e.length>0)alert("Por favor completa los siguientes campos requeridos: ".concat(e.map(e=>e.field_label||e.field_name).join(", ")));else{E(!0);try{const e=_.find(e=>e._id===C),a=await Qn.post("/templates/".concat(b._id,"/generate-contract"),{contractData:j,supplierId:C,supplierName:(null===e||void 0===e?void 0:e.legal_name)||(null===e||void 0===e?void 0:e.full_name)||"",supplierIdentification:(null===e||void 0===e?void 0:e.identification_number)||""});alert("\xa1Contrato generado exitosamente!\n\nN\xfamero: ".concat(a.data.contract.contract_number)),x(!1),y(null),N({}),S(""),L(!1),D([]),O(!1),q([]),De()}catch(n){var a,t;console.error("Error generating contract:",n),alert("Error al generar el contrato: "+((null===(a=n.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.error)||"Error desconocido"))}finally{E(!1)}}},disabled:k,children:k?"Generando...":"\ud83d\ude80 Generar Contrato"})]})]})}),T&&(0,Kn.jsx)("div",{className:"modal-overlay",onClick:()=>P(!1),children:(0,Kn.jsxs)("div",{className:"modal-content-generate",onClick:e=>e.stopPropagation(),style:{maxWidth:"600px"},children:[(0,Kn.jsxs)("div",{className:"modal-header-generate",children:[(0,Kn.jsx)("h2",{children:"Crear Nuevo Tercero"}),(0,Kn.jsx)("button",{className:"modal-close",onClick:()=>P(!1),children:"\u2715"})]}),(0,Kn.jsx)("div",{className:"modal-body-generate",style:{maxHeight:"60vh",overflowY:"auto"},children:(0,Kn.jsxs)("div",{className:"contract-fields-modal",children:[(0,Kn.jsxs)("div",{className:"field-group",style:{backgroundColor:"#f0f9ff",padding:"15px",borderRadius:"8px",border:"2px solid #3b82f6",marginBottom:"20px"},children:[(0,Kn.jsxs)("label",{style:{fontSize:"16px",fontWeight:"600",color:"#1e40af"},children:["1. Tipo de Tercero ",(0,Kn.jsx)("span",{className:"required",children:"*"})]}),(0,Kn.jsx)("p",{style:{fontSize:"13px",color:"#64748b",marginBottom:"10px"},children:"Selecciona el tipo de tercero para cargar los campos correspondientes"}),(0,Kn.jsxs)("select",{value:U,onChange:e=>He(e.target.value),className:"form-input",style:{fontSize:"14px",padding:"12px"},children:[(0,Kn.jsx)("option",{value:"",children:"-- Selecciona un tipo --"}),F.map(e=>(0,Kn.jsxs)("option",{value:e._id,children:[e.icon," ",e.label]},e._id)),(0,Kn.jsx)("option",{value:"__CREATE_NEW__",style:{backgroundColor:"#f0fdf4",color:"#16a34a",fontWeight:"600"},children:"+ Crear Nuevo Tipo de Tercero"})]})]}),U&&"__CREATE_NEW__"!==U&&0===V.length&&(0,Kn.jsxs)("div",{style:{backgroundColor:"#fef3c7",border:"2px solid #f59e0b",borderRadius:"8px",padding:"20px",marginBottom:"20px",textAlign:"center"},children:[(0,Kn.jsx)("p",{style:{fontSize:"16px",fontWeight:"600",color:"#92400e",marginBottom:"10px"},children:"\u26a0\ufe0f Este tipo de tercero no tiene campos configurados"}),(0,Kn.jsx)("p",{style:{fontSize:"14px",color:"#78350f",marginBottom:"15px"},children:"Para poder crear terceros de este tipo, primero debes configurar los campos desde el m\xf3dulo de Gesti\xf3n de Tipos de Terceros o desde una plantilla Word."}),(0,Kn.jsx)("p",{style:{fontSize:"13px",color:"#78350f",fontStyle:"italic"},children:"\ud83d\udca1 Sugerencia: Sube una plantilla Word con variables y el sistema te ayudar\xe1 a configurar los campos autom\xe1ticamente."})]}),U&&V.length>0&&(0,Kn.jsxs)("div",{children:[(0,Kn.jsx)("h3",{style:{marginBottom:"15px",color:"#1e293b"},children:"2. Informaci\xf3n del Tercero"}),V.filter(e=>"legal_name_short"!==e.name).map((e,a)=>(0,Kn.jsxs)("div",{className:"field-group",children:[(0,Kn.jsxs)("label",{children:[e.label,e.required&&(0,Kn.jsx)("span",{className:"required",children:" *"})]}),"text"===e.field_type&&(0,Kn.jsx)("input",{type:"text",value:W[e.name]||"",onChange:a=>{const t=u(u({},W),{},{[e.name]:a.target.value});"legal_name"===e.name&&(t.legal_name_short=a.target.value),G(t)},placeholder:"Ingrese ".concat(e.label.toLowerCase()),className:"form-input",required:e.required}),"email"===e.field_type&&(0,Kn.jsx)("input",{type:"email",value:W[e.name]||"",onChange:a=>G(u(u({},W),{},{[e.name]:a.target.value})),placeholder:"Ingrese ".concat(e.label.toLowerCase()),className:"form-input",required:e.required}),"phone"===e.field_type&&(0,Kn.jsx)("input",{type:"tel",value:W[e.name]||"",onChange:a=>G(u(u({},W),{},{[e.name]:a.target.value})),placeholder:"Ingrese ".concat(e.label.toLowerCase()),className:"form-input",required:e.required}),"number"===e.field_type&&(0,Kn.jsx)("input",{type:"number",value:W[e.name]||"",onChange:a=>G(u(u({},W),{},{[e.name]:a.target.value})),placeholder:"Ingrese ".concat(e.label.toLowerCase()),className:"form-input",required:e.required}),"date"===e.field_type&&(0,Kn.jsx)("input",{type:"date",value:W[e.name]||"",onChange:a=>G(u(u({},W),{},{[e.name]:a.target.value})),className:"form-input",required:e.required}),"textarea"===e.field_type&&(0,Kn.jsx)("textarea",{value:W[e.name]||"",onChange:a=>G(u(u({},W),{},{[e.name]:a.target.value})),placeholder:"Ingrese ".concat(e.label.toLowerCase()),className:"form-input",rows:3,required:e.required}),"select"===e.field_type&&e.options&&(0,Kn.jsxs)("select",{value:W[e.name]||"",onChange:a=>G(u(u({},W),{},{[e.name]:a.target.value})),className:"form-input",required:e.required,children:[(0,Kn.jsx)("option",{value:"",children:"-- Seleccione --"}),e.options.map((e,a)=>(0,Kn.jsx)("option",{value:e,children:e},a))]}),"checkbox"===e.field_type&&(0,Kn.jsx)("div",{style:{marginTop:"5px"},children:(0,Kn.jsxs)("label",{style:{display:"flex",alignItems:"center",fontWeight:"normal"},children:[(0,Kn.jsx)("input",{type:"checkbox",checked:W[e.name]||!1,onChange:a=>G(u(u({},W),{},{[e.name]:a.target.checked})),style:{marginRight:"8px",width:"18px",height:"18px"}}),e.label]})})]},e.name||a))]}),!U&&(0,Kn.jsxs)("div",{style:{padding:"30px",textAlign:"center",color:"#64748b",backgroundColor:"#f8fafc",borderRadius:"8px",border:"2px dashed #cbd5e1"},children:[(0,Kn.jsx)("div",{style:{fontSize:"48px",marginBottom:"10px"},children:"\ud83d\udccb"}),(0,Kn.jsx)("p",{style:{margin:"0",fontSize:"14px"},children:"Selecciona un tipo de tercero para ver los campos disponibles"})]})]})}),(0,Kn.jsxs)("div",{className:"modal-footer-generate",children:[(0,Kn.jsx)("button",{className:"btn-cancel",onClick:()=>P(!1),children:"Cancelar"}),(0,Kn.jsx)("button",{className:"btn-generate-final",onClick:async()=>{if(!U)return void alert("Por favor selecciona un tipo de tercero");const e=[];if(V.forEach(a=>{if(a.required){const t=W[a.name];t&&("string"!==typeof t||t.trim())||e.push(a.label)}}),e.length>0)alert("Por favor completa los siguientes campos requeridos:\n\n".concat(e.join("\n")));else try{const e=Object.keys(W).some(e=>["numero_del_nit","nit","numero_de_identificacion"].includes(e.toLowerCase().trim())),a={numero_del_nit:"identification_number",nit:"identification_number",numero_de_identificacion:"identification_number",numero_identificacion:"identification_number",numero_de_cedula:"identification_number",numero_cedula:"identification_number",cedula_numero:"identification_number",numero_documento:"identification_number",documento:"identification_number",cc:"identification_number",tipo_de_identificacion:"identification_type",tipo_identificacion:"identification_type",nombre_de_la_propiedad_horizontal:"legal_name",nombre_propiedad_horizontal:"legal_name",razon_social:"legal_name",nombre_empresa:"legal_name",empresa:"legal_name",nombre_completo:"full_name",nombre:"full_name",nombre_del_trabajador:"full_name",nombre_del_empleado:"full_name",nombre_trabajador:"full_name",trabajador:"full_name",empleado:"full_name",nombre_persona:"full_name",razon_social_abreviada:"legal_name_short",nombre_abreviado:"legal_name_short",nombre_corto:"legal_name_short",nombre_del_representante_legal:"legal_representative_name",representante_legal:"legal_representative_name",nombre_representante:"legal_representative_name",representante:"legal_representative_name",cedula_representante:"legal_representative_id_number",cedula_del_representante:"legal_representative_id_number",identificacion_representante:"legal_representative_id_number",tipo_id_representante:"legal_representative_id_type",correo:"email",email:"email",correo_electronico:"email",telefono:"phone",celular:"phone",tel:"phone",direccion:"address",dir:"address",ciudad:"city",ciudad_de_domicilio:"city",municipio:"city",pais:"country",country:"country",licenciatario:"licensee_name",nombre_licenciatario:"licensee_name"};e?(a.cedula="legal_representative_id_number",console.log('\ud83d\udccb Campo "cedula" mapeado a representante legal (se detect\xf3 NIT)')):(a.cedula="identification_number",console.log('\ud83d\udccb Campo "cedula" mapeado a identificaci\xf3n del tercero (no se detect\xf3 NIT)'));const t=["identification_type","identification_number","legal_name","legal_name_short","legal_representative_name","legal_representative_id_type","legal_representative_id_number"],n={},r={};Object.entries(W).forEach(e=>{let[l,s]=e;const i=l.toLowerCase().trim(),o=a[i]||l;t.includes(o)||["email","phone","address","city","country","licensee_name","full_name"].includes(o)?n[o]=s:r[l]=s});const l=F.find(e=>e._id===U),s=l&&l.default_identification_types&&l.default_identification_types.length>0?l.default_identification_types[0]:"NIT";console.log("\ud83c\udfe2 Usando tipo de identificaci\xf3n para",(null===l||void 0===l?void 0:l.label)||"tipo desconocido",":",s);const i={identification_type:n.identification_type||s,identification_number:n.identification_number||"",legal_name:n.legal_name||"",legal_name_short:n.legal_name_short||n.legal_name||"",full_name:n.full_name||n.legal_name||"",legal_representative_name:n.legal_representative_name||"",legal_representative_id_type:n.legal_representative_id_type||"CC",legal_representative_id_number:n.legal_representative_id_number||"",email:n.email||"",phone:n.phone||"",address:n.address||"",city:n.city||"",country:n.country||"Colombia",licensee_name:n.licensee_name||"",third_party_type_id:U,custom_fields:r};console.log("\ud83d\udce4 Creando tercero con datos mapeados:",i),console.log("\ud83d\udd04 Mapeo aplicado:",{camposDinamicos:Object.keys(W),camposMapeados:Object.keys(n),camposPersonalizados:Object.keys(r)});const o=await Qn.post("/suppliers",i);alert("Tercero creado exitosamente");const c=await Qn.get("/suppliers");w(c.data.suppliers||[]);const d=o.data.supplier._id;S(d),We(d),P(!1),B(""),H([]),G({})}catch(s){var a,t,n;if(console.error("Error creating supplier:",s),console.error("Error details:",null===(a=s.response)||void 0===a?void 0:a.data),null!==(t=s.response)&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&n.errors&&Array.isArray(s.response.data.errors)){const e=s.response.data.errors.map(e=>"\u2022 ".concat(e.msg," (campo: ").concat(e.path,")")).join("\n");alert("Errores de validaci\xf3n:\n\n"+e)}else{var r,l;alert("Error al crear el tercero: "+((null===(r=s.response)||void 0===r||null===(l=r.data)||void 0===l?void 0:l.error)||s.message||"Error desconocido"))}}},disabled:!U||0===V.length,style:{backgroundColor:U&&V.length>0?"#4CAF50":"#94a3b8",cursor:U&&V.length>0?"pointer":"not-allowed"},children:"Guardar Tercero"})]})]})}),K&&(0,Kn.jsx)("div",{className:"modal-overlay",onClick:()=>J(!1),children:(0,Kn.jsxs)("div",{className:"modal-content-generate",onClick:e=>e.stopPropagation(),style:{maxWidth:"700px"},children:[(0,Kn.jsxs)("div",{className:"modal-header-generate",children:[(0,Kn.jsx)("h2",{children:"Crear Nuevo Tipo de Tercero"}),(0,Kn.jsx)("button",{className:"modal-close",onClick:()=>J(!1),children:"\u2715"})]}),(0,Kn.jsx)("div",{className:"modal-body-generate",style:{maxHeight:"70vh",overflowY:"auto"},children:(0,Kn.jsxs)("div",{className:"contract-fields-modal",children:[(0,Kn.jsxs)("div",{style:{backgroundColor:"#f8fafc",padding:"20px",borderRadius:"8px",marginBottom:"20px"},children:[(0,Kn.jsx)("h3",{style:{margin:"0 0 15px 0",color:"#334155"},children:"Informaci\xf3n General"}),(0,Kn.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[(0,Kn.jsxs)("div",{className:"field-group",children:[(0,Kn.jsxs)("label",{children:["C\xf3digo ",(0,Kn.jsx)("span",{className:"required",children:"*"})]}),(0,Kn.jsx)("input",{type:"text",value:Y.code,onChange:e=>X(u(u({},Y),{},{code:e.target.value.toLowerCase().replace(/[^a-z0-9_]/g,"")})),placeholder:"ej: proveedor",className:"form-input",style:{fontFamily:"monospace"}}),(0,Kn.jsx)("small",{style:{fontSize:"12px",color:"#64748b",display:"block",marginTop:"4px"},children:"Solo letras min\xfasculas, n\xfameros y gui\xf3n bajo"})]}),(0,Kn.jsxs)("div",{className:"field-group",children:[(0,Kn.jsx)("label",{children:"\xcdcono"}),(0,Kn.jsx)("input",{type:"text",value:Y.icon,onChange:e=>X(u(u({},Y),{},{icon:e.target.value})),placeholder:"\ud83d\udcc4",className:"form-input",style:{fontSize:"24px",textAlign:"center"},maxLength:2}),(0,Kn.jsx)("small",{style:{fontSize:"12px",color:"#64748b",display:"block",marginTop:"4px"},children:"Emoji que representa el tipo"})]})]}),(0,Kn.jsxs)("div",{className:"field-group",style:{marginTop:"20px"},children:[(0,Kn.jsxs)("label",{children:["Nombre ",(0,Kn.jsx)("span",{className:"required",children:"*"})]}),(0,Kn.jsx)("input",{type:"text",value:Y.label,onChange:e=>{X(u(u({},Y),{},{label:e.target.value,code:Y.code||e.target.value.toLowerCase().replace(/[^a-z0-9]/g,"_")}))},placeholder:"Proveedor",className:"form-input"}),(0,Kn.jsx)("small",{style:{fontSize:"12px",color:"#64748b",display:"block",marginTop:"4px"},children:"Nombre descriptivo del tipo de tercero"})]}),(0,Kn.jsxs)("div",{className:"field-group",style:{marginTop:"20px"},children:[(0,Kn.jsx)("label",{children:"Descripci\xf3n"}),(0,Kn.jsx)("textarea",{value:Y.description,onChange:e=>X(u(u({},Y),{},{description:e.target.value})),placeholder:"Descripci\xf3n del tipo de tercero",className:"form-input",rows:3,style:{resize:"vertical"}})]})]}),(0,Kn.jsxs)("div",{style:{backgroundColor:"#fffbeb",border:"1px solid #fbbf24",borderRadius:"8px",padding:"12px",display:"flex",gap:"10px",alignItems:"flex-start"},children:[(0,Kn.jsx)("span",{style:{fontSize:"20px"},children:"\u2139\ufe0f"}),(0,Kn.jsxs)("div",{style:{fontSize:"13px",color:"#92400e"},children:[(0,Kn.jsx)("strong",{children:"Nota:"})," El tipo se crear\xe1 sin campos inicialmente. Despu\xe9s podr\xe1s configurar los campos desde el modal de configuraci\xf3n de tipos."]})]})]})}),(0,Kn.jsxs)("div",{className:"modal-footer-generate",children:[(0,Kn.jsx)("button",{className:"btn-cancel",onClick:()=>{J(!1),X({code:"",label:"",description:"",icon:"\ud83d\udcc4"})},children:"Cancelar"}),(0,Kn.jsx)("button",{className:"btn-generate-final",onClick:async()=>{if(Y.code.trim()&&Y.label.trim())try{console.log("\ud83c\udd95 Creando nuevo tipo de tercero...");const e=(await Qn.post("/third-party-types",{code:Y.code.toLowerCase().trim(),label:Y.label.trim(),description:Y.description.trim()||"Tipo de tercero: ".concat(Y.label),icon:Y.icon||"\ud83d\udcc4",fields:[]})).data.type;console.log("\u2705 Nuevo tipo creado:",e),await Ve(),B(e._id),await He(e._id),J(!1),X({code:"",label:"",description:"",icon:"\ud83d\udcc4"}),alert("Tipo de tercero creado exitosamente")}catch(t){var e,a;console.error("Error al crear tipo de tercero:",t),alert("Error al crear el tipo de tercero: "+((null===(e=t.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.error)||"Error desconocido"))}else alert("El c\xf3digo y el nombre son requeridos")},disabled:!Y.code.trim()||!Y.label.trim(),style:{backgroundColor:Y.code.trim()&&Y.label.trim()?"#10b981":"#94a3b8",cursor:Y.code.trim()&&Y.label.trim()?"pointer":"not-allowed"},children:"Crear Tipo"})]})]})}),z&&b&&(0,Kn.jsx)(hr,{isOpen:z,onClose:Ge,detectedVariables:I,thirdPartyTypeCode:b.category||"otro",onConfigApplied:async e=>{console.log("\ud83c\udfaf Tipo de tercero configurado, abriendo modal de creaci\xf3n con tipo:",e),Ge(),await Ve(),P(!0),await He(e),console.log("\u2705 Modal de creaci\xf3n de tercero abierto con tipo pre-seleccionado")}}),ke&&Te&&(0,Kn.jsx)("div",{className:"modal-overlay",onClick:Ie,children:(0,Kn.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,Kn.jsxs)("div",{className:"modal-header",children:[(0,Kn.jsx)("h2",{children:"Editar Plantilla"}),(0,Kn.jsx)("button",{className:"modal-close",onClick:Ie,children:"\xd7"})]}),(0,Kn.jsxs)("div",{className:"modal-body",children:[(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Nombre de la Plantilla *"}),(0,Kn.jsx)("input",{type:"text",value:Re.name,onChange:e=>Le(u(u({},Re),{},{name:e.target.value})),placeholder:"Nombre de la plantilla",className:"form-input"})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Descripci\xf3n"}),(0,Kn.jsx)("textarea",{value:Re.description,onChange:e=>Le(u(u({},Re),{},{description:e.target.value})),placeholder:"Descripci\xf3n de la plantilla",className:"form-input",rows:3})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Categor\xeda"}),(0,Kn.jsx)("input",{type:"text",value:Re.category,onChange:e=>Le(u(u({},Re),{},{category:e.target.value})),placeholder:"Categor\xeda de la plantilla",className:"form-input"})]})]}),(0,Kn.jsxs)("div",{className:"modal-footer",children:[(0,Kn.jsx)("button",{className:"btn-secondary",onClick:Ie,children:"Cancelar"}),(0,Kn.jsx)("button",{className:"btn-primary",onClick:async()=>{if(Te)if(Re.name.trim())try{await Qn.put("/templates/".concat(Te._id),{name:Re.name.trim(),description:Re.description.trim(),category:Re.category.trim()}),alert("Plantilla actualizada exitosamente"),Ie(),Ae()}catch(t){var e,a;console.error("Error updating template:",t),alert("Error al actualizar la plantilla: "+((null===(e=t.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.error)||"Error desconocido"))}else alert("El nombre de la plantilla es requerido")},children:"Guardar Cambios"})]})]})})]})},gr=()=>{const[e,a]=(0,r.useState)([]),[t,n]=(0,r.useState)([]),[l,s]=(0,r.useState)(""),[i,o]=(0,r.useState)(!0),[c,d]=(0,r.useState)(!1),[m,p]=(0,r.useState)(!1),[h,f]=(0,r.useState)(!1),[v,g]=(0,r.useState)(null),[x,b]=(0,r.useState)({name:"",tax_id:"",email:"",phone:"",address:""}),[y,j]=(0,r.useState)({name:"",tax_id:"",email:"",phone:"",address:""});(0,r.useEffect)(()=>{N()},[]),(0,r.useEffect)(()=>{if(""===l.trim())n(e);else{const a=e.filter(e=>e.name.toLowerCase().includes(l.toLowerCase())||e.tax_id&&e.tax_id.toLowerCase().includes(l.toLowerCase()));n(a)}},[l,e]);const N=async()=>{try{const e=await Qn.get("/companies");a(e.data),n(e.data)}catch(e){console.error("Error fetching companies:",e)}finally{o(!1)}};return i?(0,Kn.jsx)("div",{className:"loading",children:"Cargando empresas..."}):(0,Kn.jsxs)("div",{className:"companies",children:[(0,Kn.jsxs)("div",{className:"page-header",children:[(0,Kn.jsx)("h1",{children:"Gesti\xf3n de Empresas"}),(0,Kn.jsx)("button",{className:"btn-primary",onClick:()=>d(!0),children:"Nueva Empresa"})]}),(0,Kn.jsxs)("div",{className:"filter-section",children:[(0,Kn.jsx)("input",{type:"text",className:"search-input",placeholder:"Buscar por nombre o NIT...",value:l,onChange:e=>s(e.target.value)}),(0,Kn.jsxs)("span",{className:"results-count",children:[t.length," ",1===t.length?"empresa":"empresas"]})]}),0===t.length?(0,Kn.jsxs)("div",{className:"empty-state",children:[(0,Kn.jsx)("h3",{children:0===e.length?"No hay empresas":"No se encontraron empresas"}),(0,Kn.jsx)("p",{children:0===e.length?"Agrega tu primera empresa para comenzar":"Intenta con otro t\xe9rmino de b\xfasqueda"})]}):(0,Kn.jsx)("div",{className:"companies-table-container",children:(0,Kn.jsxs)("table",{className:"companies-table",children:[(0,Kn.jsx)("thead",{children:(0,Kn.jsxs)("tr",{children:[(0,Kn.jsx)("th",{children:"Nombre"}),(0,Kn.jsx)("th",{children:"NIT"}),(0,Kn.jsx)("th",{children:"Email"}),(0,Kn.jsx)("th",{children:"Tel\xe9fono"}),(0,Kn.jsx)("th",{children:"Direcci\xf3n"}),(0,Kn.jsx)("th",{children:"Fecha Registro"}),(0,Kn.jsx)("th",{children:"Acciones"})]})}),(0,Kn.jsx)("tbody",{children:t.map(e=>(0,Kn.jsxs)("tr",{children:[(0,Kn.jsx)("td",{className:"company-name",children:e.name}),(0,Kn.jsx)("td",{children:e.tax_id||"N/A"}),(0,Kn.jsx)("td",{children:e.email}),(0,Kn.jsx)("td",{children:e.phone}),(0,Kn.jsx)("td",{className:"company-address",children:e.address}),(0,Kn.jsx)("td",{children:new Date(e.createdAt).toLocaleDateString()}),(0,Kn.jsxs)("td",{className:"actions-cell",children:[(0,Kn.jsx)("button",{className:"btn-icon btn-view",onClick:()=>(e=>{g(e),p(!0)})(e),title:"Ver detalles",children:"\ud83d\udc41\ufe0f"}),(0,Kn.jsx)("button",{className:"btn-icon btn-edit",onClick:()=>(e=>{b({name:e.name,tax_id:e.tax_id||"",email:e.email,phone:e.phone,address:e.address}),g(e),f(!0)})(e),title:"Editar",children:"\u270f\ufe0f"}),(0,Kn.jsx)("button",{className:"btn-icon btn-delete",onClick:()=>(async e=>{if(window.confirm("\xbfEst\xe1 seguro de que desea eliminar esta empresa?"))try{await Qn.delete("/companies/".concat(e)),await N()}catch(a){console.error("Error deleting company:",a),alert("Error al eliminar la empresa. Puede que tenga contratos o plantillas asociadas.")}})(e._id),title:"Eliminar",children:"\ud83d\uddd1\ufe0f"})]})]},e._id))})]})}),c&&(0,Kn.jsx)("div",{className:"modal-overlay",children:(0,Kn.jsxs)("div",{className:"modal",children:[(0,Kn.jsx)("h3",{children:"Crear Nueva Empresa"}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Nombre de la Empresa:"}),(0,Kn.jsx)("input",{type:"text",value:y.name,onChange:e=>j(u(u({},y),{},{name:e.target.value})),required:!0})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"NIT:"}),(0,Kn.jsx)("input",{type:"text",value:y.tax_id,onChange:e=>j(u(u({},y),{},{tax_id:e.target.value})),required:!0})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Email:"}),(0,Kn.jsx)("input",{type:"email",value:y.email,onChange:e=>j(u(u({},y),{},{email:e.target.value})),required:!0})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Tel\xe9fono:"}),(0,Kn.jsx)("input",{type:"text",value:y.phone,onChange:e=>j(u(u({},y),{},{phone:e.target.value})),required:!0})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Direcci\xf3n:"}),(0,Kn.jsx)("input",{type:"text",value:y.address,onChange:e=>j(u(u({},y),{},{address:e.target.value})),required:!0})]}),(0,Kn.jsxs)("div",{className:"modal-actions",children:[(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>d(!1),children:"Cancelar"}),(0,Kn.jsx)("button",{className:"btn-primary",onClick:async()=>{try{await Qn.post("/companies",y),await N(),d(!1),j({name:"",tax_id:"",email:"",phone:"",address:""})}catch(e){console.error("Error creating company:",e)}},disabled:!y.name||!y.tax_id||!y.email,children:"Crear Empresa"})]})]})}),m&&v&&(0,Kn.jsx)("div",{className:"modal-overlay",children:(0,Kn.jsxs)("div",{className:"modal",children:[(0,Kn.jsx)("h3",{children:"Detalles de la Empresa"}),(0,Kn.jsxs)("div",{className:"view-details",children:[(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Nombre:"})," ",v.name]}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"NIT:"})," ",v.tax_id||"N/A"]}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Email:"})," ",v.email]}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Tel\xe9fono:"})," ",v.phone]}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Direcci\xf3n:"})," ",v.address]}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Fecha de Registro:"})," ",new Date(v.createdAt).toLocaleDateString()]})]}),(0,Kn.jsx)("div",{className:"modal-actions",children:(0,Kn.jsx)("button",{className:"btn-primary",onClick:()=>p(!1),children:"Cerrar"})})]})}),h&&v&&(0,Kn.jsx)("div",{className:"modal-overlay",children:(0,Kn.jsxs)("div",{className:"modal",children:[(0,Kn.jsx)("h3",{children:"Editar Empresa"}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Nombre de la Empresa:"}),(0,Kn.jsx)("input",{type:"text",value:x.name,onChange:e=>b(u(u({},x),{},{name:e.target.value})),required:!0})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"NIT:"}),(0,Kn.jsx)("input",{type:"text",value:x.tax_id,onChange:e=>b(u(u({},x),{},{tax_id:e.target.value})),required:!0})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Email:"}),(0,Kn.jsx)("input",{type:"email",value:x.email,onChange:e=>b(u(u({},x),{},{email:e.target.value})),required:!0})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Tel\xe9fono:"}),(0,Kn.jsx)("input",{type:"text",value:x.phone,onChange:e=>b(u(u({},x),{},{phone:e.target.value})),required:!0})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Direcci\xf3n:"}),(0,Kn.jsx)("input",{type:"text",value:x.address,onChange:e=>b(u(u({},x),{},{address:e.target.value})),required:!0})]}),(0,Kn.jsxs)("div",{className:"modal-actions",children:[(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>{f(!1),g(null)},children:"Cancelar"}),(0,Kn.jsx)("button",{className:"btn-primary",onClick:async()=>{if(v)try{await Qn.put("/companies/".concat(v._id),x),await N(),f(!1),g(null)}catch(e){console.error("Error editing company:",e)}},disabled:!x.name||!x.tax_id||!x.email,children:"Guardar Cambios"})]})]})})]})},xr=()=>{var e;const[a,t]=(0,r.useState)([]),[n,l]=(0,r.useState)([]),[s,i]=(0,r.useState)(!0),[o,c]=(0,r.useState)(null),[d,m]=(0,r.useState)(""),[p,h]=(0,r.useState)("requester"),[f,v]=(0,r.useState)({canView:!0,canEdit:!1,canDelete:!1,canManageUsers:!1}),[g,x]=(0,r.useState)(""),[b,y]=(0,r.useState)(!1),[j,N]=(0,r.useState)(!1),[_,w]=(0,r.useState)(!1),[C,S]=(0,r.useState)(!1),[k,E]=(0,r.useState)(!1),[T,P]=(0,r.useState)(!1),[R,L]=(0,r.useState)(null),[A,D]=(0,r.useState)(new Set),[z,O]=(0,r.useState)({id:"",name:"",email:"",role:"requester"}),[I,q]=(0,r.useState)(null),[F,M]=(0,r.useState)(""),[U,B]=(0,r.useState)(""),[V,H]=(0,r.useState)("all"),[W,G]=(0,r.useState)("all"),[$,Q]=(0,r.useState)("name"),[K,J]=(0,r.useState)("asc"),[Y,X]=(0,r.useState)({email:"",name:"",password:"",role:"requester",companyId:""});(0,r.useEffect)(()=>{Z()},[]);const Z=async()=>{try{const[e,a]=await Promise.all([Qn.get("/multi-companies/users"),Qn.get("/multi-companies/companies")]);t(e.data),l(a.data)}catch(e){console.error("Error fetching data:",e)}finally{i(!1)}},ee=e=>e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase(),ae=n.filter(e=>ee(e.name).includes(ee(g))||ee(e.tax_id).includes(ee(g))),te=a.filter(e=>{var a;const t=!U||ee(e.email).includes(ee(U))||ee(e.name).includes(ee(U)),n="all"===V||e.role===V,r=(null===(a=e.companies)||void 0===a?void 0:a.length)||0;let l=!0;return"none"===W?l=0===r:"one"===W?l=1===r:"multiple"===W&&(l=r>1),t&&n&&l}).sort((e,a)=>{var t,n;let r=0;switch($){case"name":r=e.name.localeCompare(a.name);break;case"email":r=e.email.localeCompare(a.email);break;case"role":r=e.role.localeCompare(a.role);break;case"companies":r=((null===(t=e.companies)||void 0===t?void 0:t.length)||0)-((null===(n=a.companies)||void 0===n?void 0:n.length)||0);break;default:r=0}return"asc"===K?r:-r});return s?(0,Kn.jsx)("div",{className:"loading",children:"Cargando gesti\xf3n de usuarios..."}):(0,Kn.jsxs)("div",{className:"user-management",children:[(0,Kn.jsxs)("div",{className:"page-header",children:[(0,Kn.jsx)("h1",{children:"Gesti\xf3n de Usuarios y Empresas"}),(0,Kn.jsx)("button",{className:"btn-primary",onClick:()=>N(!0),children:"Crear Usuario"})]}),(0,Kn.jsxs)("div",{className:"filters-section",children:[(0,Kn.jsxs)("div",{className:"filters-row",children:[(0,Kn.jsxs)("div",{className:"filter-group",children:[(0,Kn.jsx)("label",{children:"Buscar:"}),(0,Kn.jsx)("input",{type:"text",placeholder:"Email o nombre...",value:U,onChange:e=>B(e.target.value),className:"filter-input"})]}),(0,Kn.jsxs)("div",{className:"filter-group",children:[(0,Kn.jsx)("label",{children:"Rol:"}),(0,Kn.jsxs)("select",{value:V,onChange:e=>H(e.target.value),className:"filter-select",children:[(0,Kn.jsx)("option",{value:"all",children:"Todos"}),(0,Kn.jsx)("option",{value:"super_admin",children:"Super Admin"}),(0,Kn.jsx)("option",{value:"admin",children:"Admin"}),(0,Kn.jsx)("option",{value:"lawyer",children:"Lawyer"}),(0,Kn.jsx)("option",{value:"requester",children:"Requester"})]})]}),(0,Kn.jsxs)("div",{className:"filter-group",children:[(0,Kn.jsx)("label",{children:"Empresas:"}),(0,Kn.jsxs)("select",{value:W,onChange:e=>G(e.target.value),className:"filter-select",children:[(0,Kn.jsx)("option",{value:"all",children:"Todas"}),(0,Kn.jsx)("option",{value:"none",children:"Sin empresas"}),(0,Kn.jsx)("option",{value:"one",children:"1 empresa"}),(0,Kn.jsx)("option",{value:"multiple",children:"M\xfaltiples"})]})]}),(0,Kn.jsxs)("div",{className:"filter-group",children:[(0,Kn.jsx)("label",{children:"Ordenar por:"}),(0,Kn.jsxs)("select",{value:$,onChange:e=>Q(e.target.value),className:"filter-select",children:[(0,Kn.jsx)("option",{value:"name",children:"Nombre"}),(0,Kn.jsx)("option",{value:"email",children:"Email"}),(0,Kn.jsx)("option",{value:"role",children:"Rol"}),(0,Kn.jsx)("option",{value:"companies",children:"N\xb0 Empresas"})]})]}),(0,Kn.jsx)("div",{className:"filter-group",children:(0,Kn.jsx)("button",{onClick:()=>J("asc"===K?"desc":"asc"),className:"btn-sort",title:"asc"===K?"Orden ascendente":"Orden descendente",children:"asc"===K?"\u2191":"\u2193"})}),(0,Kn.jsx)("div",{className:"filter-group",children:(0,Kn.jsx)("button",{onClick:()=>{B(""),H("all"),G("all"),Q("name"),J("asc")},className:"btn-clear-filters",children:"Limpiar"})})]}),(0,Kn.jsxs)("div",{className:"results-count",children:["Mostrando ",te.length," de ",a.length," usuarios"]})]}),(0,Kn.jsx)("div",{className:"users-list",children:te.map(e=>{var a;return(0,Kn.jsxs)("div",{className:"user-row",children:[(0,Kn.jsxs)("div",{className:"user-main-info",children:[(0,Kn.jsxs)("div",{className:"user-email-section",children:[(0,Kn.jsx)("span",{className:"user-email",children:e.email}),(0,Kn.jsx)("span",{className:"user-name-visible",children:e.name})]}),(0,Kn.jsx)("span",{className:"role-badge ".concat(e.role),children:e.role}),(0,Kn.jsx)("span",{className:"status-badge ".concat(e.active?"active":"inactive"),children:e.active?"Activo":"Inactivo"}),(0,Kn.jsxs)("div",{className:"user-actions",children:[(0,Kn.jsx)("button",{className:"btn-view-info",onClick:()=>(e=>{c(e),S(!0)})(e),title:"Ver informaci\xf3n del usuario",children:"\ud83d\udc41\ufe0f"}),(0,Kn.jsx)("button",{className:"btn-edit",onClick:()=>(e=>{O({id:e._id,name:e.name,email:e.email,role:e.role}),E(!0)})(e),title:"Editar usuario",children:"\u270e"}),(0,Kn.jsx)("button",{className:"btn-reset-password",onClick:()=>(e=>{q(e),M(""),P(!0)})(e),title:"Reiniciar contrase\xf1a",children:"\ud83d\udd11"}),(0,Kn.jsx)("button",{className:"btn-toggle-status ".concat(e.active?"deactivate":"activate"),onClick:()=>(async(e,a,t)=>{const n=t?"desactivar":"activar";if(window.confirm("\xbfEst\xe1 seguro de ".concat(n," al usuario ").concat(a,"?")))try{await Qn.patch("/multi-companies/toggle-user-status/".concat(e)),await Z(),alert("Usuario ".concat("desactivar"===n?"desactivado":"activado"," exitosamente"))}catch(s){var r,l;alert((null===(r=s.response)||void 0===r||null===(l=r.data)||void 0===l?void 0:l.error)||"Error al ".concat(n," usuario"))}})(e._id,e.name,e.active),title:e.active?"Desactivar usuario":"Activar usuario",children:e.active?"\ud83d\udd12":"\ud83d\udd13"}),(0,Kn.jsx)("button",{className:"btn-delete",onClick:()=>(async(e,a)=>{if(window.confirm("\xbfEst\xe1 seguro de eliminar al usuario ".concat(a,"?\n\nEsta acci\xf3n desactivar\xe1 el usuario y todas sus asignaciones a empresas.")))try{await Qn.delete("/multi-companies/delete-user/".concat(e)),await Z(),alert("Usuario eliminado exitosamente")}catch(r){var t,n;alert((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error)||"Error al eliminar usuario")}})(e._id,e.name),title:"Eliminar usuario",children:"\ud83d\uddd1\ufe0f"}),(0,Kn.jsxs)("button",{className:"btn-view-companies",onClick:()=>{return a=e._id,void D(e=>{const t=new Set(e);return t.has(a)?t.delete(a):t.add(a),t});var a},title:A.has(e._id)?"Ocultar empresas":"Ver empresas",children:[(0,Kn.jsx)("span",{className:"toggle-arrow ".concat(A.has(e._id)?"expanded":""),children:"\u25b6"}),"Empresas (",(null===(a=e.companies)||void 0===a?void 0:a.length)||0,")"]}),(0,Kn.jsx)("button",{className:"btn-small btn-primary",onClick:()=>(e=>{c(e),m(""),h("requester"),v({canView:!0,canEdit:!1,canDelete:!1,canManageUsers:!1}),x(""),y(!0)})(e),children:"Asignar"})]})]}),A.has(e._id)&&(0,Kn.jsx)("div",{className:"user-companies-expanded",children:e.companies&&0!==e.companies.length?e.companies.map(a=>(0,Kn.jsxs)("div",{className:"company-row",children:[(0,Kn.jsxs)("div",{className:"company-name",children:[(0,Kn.jsx)("strong",{children:a.company.name}),(0,Kn.jsxs)("span",{className:"tax-id",children:["(",a.company.tax_id,")"]})]}),(0,Kn.jsx)("span",{className:"role-badge-mini ".concat(a.role),children:a.role}),(0,Kn.jsxs)("div",{className:"perms",children:[(0,Kn.jsx)("span",{className:a.permissions.canView?"on":"off",title:"Ver",children:"V"}),(0,Kn.jsx)("span",{className:a.permissions.canEdit?"on":"off",title:"Editar",children:"E"}),(0,Kn.jsx)("span",{className:a.permissions.canDelete?"on":"off",title:"Eliminar",children:"D"}),(0,Kn.jsx)("span",{className:a.permissions.canManageUsers?"on":"off",title:"Gestionar",children:"G"})]}),(0,Kn.jsxs)("div",{className:"actions-mini",children:[(0,Kn.jsx)("button",{onClick:()=>((e,a)=>{c(e),L(a),h(a.role),v(a.permissions),w(!0)})(e,a),title:"Editar",children:"\u270e"}),(0,Kn.jsx)("button",{onClick:()=>(async(e,a)=>{if(window.confirm("\xbfEst\xe1 seguro de remover este usuario de la empresa?"))try{await Qn.post("/multi-companies/remove-user-company",{userId:e,companyId:a}),await Z()}catch(r){var t,n;console.error("Error removing user:",r),alert((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error)||"Error al remover usuario de empresa")}})(e._id,a.company._id),title:"Eliminar",children:"\u2715"})]})]},a._id)):(0,Kn.jsx)("p",{className:"no-companies",children:"Sin empresas asignadas"})})]},e._id)})}),b&&o&&(0,Kn.jsx)("div",{className:"modal-overlay",onClick:()=>{y(!1),c(null),x("")},children:(0,Kn.jsxs)("div",{className:"modal modal-large modal-content",onClick:e=>e.stopPropagation(),children:[(0,Kn.jsx)("button",{className:"modal-close-btn",onClick:()=>{y(!1),c(null),x("")},title:"Cerrar",children:"\xd7"}),(0,Kn.jsx)("h3",{children:"Asignar Usuario a Empresa"}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Usuario:"})," ",o.name," (",o.email,")"]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Buscar Empresa:"}),(0,Kn.jsx)("input",{type:"text",placeholder:"Buscar por nombre o NIT/RUC...",value:g,onChange:e=>x(e.target.value),className:"search-input"})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Seleccionar Empresa:"}),(0,Kn.jsx)("div",{className:"company-list",children:0===ae.length?(0,Kn.jsx)("p",{className:"no-results",children:"No se encontraron empresas"}):(0,Kn.jsxs)("select",{value:d,onChange:e=>m(e.target.value),size:Math.min(ae.length,5),children:[(0,Kn.jsx)("option",{value:"",children:"Seleccionar empresa..."}),ae.map(e=>(0,Kn.jsxs)("option",{value:e._id,children:[e.name," - ",e.tax_id]},e._id))]})})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Rol en la Empresa:"}),(0,Kn.jsxs)("select",{value:p,onChange:e=>h(e.target.value),children:[(0,Kn.jsx)("option",{value:"requester",children:"Usuario"}),(0,Kn.jsx)("option",{value:"lawyer",children:"Abogado"}),(0,Kn.jsx)("option",{value:"admin",children:"Administrador"}),(0,Kn.jsx)("option",{value:"super_admin",children:"Super Admin"}),(0,Kn.jsx)("option",{value:"talento_humano",children:"Talento Humano"}),(0,Kn.jsx)("option",{value:"colaboradores",children:"Colaboradores"})]})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Permisos:"}),(0,Kn.jsxs)("div",{className:"permissions-grid",children:[(0,Kn.jsxs)("label",{children:[(0,Kn.jsx)("input",{type:"checkbox",checked:f.canView,onChange:e=>v(u(u({},f),{},{canView:e.target.checked}))}),"Ver"]}),(0,Kn.jsxs)("label",{children:[(0,Kn.jsx)("input",{type:"checkbox",checked:f.canEdit,onChange:e=>v(u(u({},f),{},{canEdit:e.target.checked}))}),"Editar"]}),(0,Kn.jsxs)("label",{children:[(0,Kn.jsx)("input",{type:"checkbox",checked:f.canDelete,onChange:e=>v(u(u({},f),{},{canDelete:e.target.checked}))}),"Eliminar"]}),(0,Kn.jsxs)("label",{children:[(0,Kn.jsx)("input",{type:"checkbox",checked:f.canManageUsers,onChange:e=>v(u(u({},f),{},{canManageUsers:e.target.checked}))}),"Gestionar Usuarios"]})]})]}),(0,Kn.jsxs)("div",{className:"modal-actions",children:[(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>{y(!1),c(null),x("")},children:"Cancelar"}),(0,Kn.jsx)("button",{className:"btn-primary",onClick:async()=>{if(o&&d)try{await Qn.post("/multi-companies/assign-user-company",{userId:o._id,companyId:d,role:p,permissions:f}),await Z(),y(!1),c(null),m(""),h("requester"),v({canView:!0,canEdit:!1,canDelete:!1,canManageUsers:!1}),x("")}catch(t){var e,a;console.error("Error assigning user:",t),alert((null===(e=t.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.error)||"Error al asignar usuario a empresa")}},disabled:!d,children:"Asignar"})]})]})}),_&&R&&o&&(0,Kn.jsx)("div",{className:"modal-overlay",children:(0,Kn.jsxs)("div",{className:"modal",children:[(0,Kn.jsx)("h3",{children:"Editar Permisos"}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Usuario:"})," ",o.name]}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Empresa:"})," ",R.company.name]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Rol en la Empresa:"}),(0,Kn.jsxs)("select",{value:p,onChange:e=>h(e.target.value),children:[(0,Kn.jsx)("option",{value:"requester",children:"Usuario"}),(0,Kn.jsx)("option",{value:"lawyer",children:"Abogado"}),(0,Kn.jsx)("option",{value:"admin",children:"Administrador"}),(0,Kn.jsx)("option",{value:"super_admin",children:"Super Admin"}),(0,Kn.jsx)("option",{value:"talento_humano",children:"Talento Humano"}),(0,Kn.jsx)("option",{value:"colaboradores",children:"Colaboradores"})]})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Permisos:"}),(0,Kn.jsxs)("div",{className:"permissions-grid",children:[(0,Kn.jsxs)("label",{children:[(0,Kn.jsx)("input",{type:"checkbox",checked:f.canView,onChange:e=>v(u(u({},f),{},{canView:e.target.checked}))}),"Ver"]}),(0,Kn.jsxs)("label",{children:[(0,Kn.jsx)("input",{type:"checkbox",checked:f.canEdit,onChange:e=>v(u(u({},f),{},{canEdit:e.target.checked}))}),"Editar"]}),(0,Kn.jsxs)("label",{children:[(0,Kn.jsx)("input",{type:"checkbox",checked:f.canDelete,onChange:e=>v(u(u({},f),{},{canDelete:e.target.checked}))}),"Eliminar"]}),(0,Kn.jsxs)("label",{children:[(0,Kn.jsx)("input",{type:"checkbox",checked:f.canManageUsers,onChange:e=>v(u(u({},f),{},{canManageUsers:e.target.checked}))}),"Gestionar Usuarios"]})]})]}),(0,Kn.jsxs)("div",{className:"modal-actions",children:[(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>{w(!1),L(null),c(null)},children:"Cancelar"}),(0,Kn.jsx)("button",{className:"btn-primary",onClick:async()=>{if(R&&o)try{await Qn.put("/multi-companies/update-user-company-permissions",{userId:o._id,companyId:R.company._id,role:p,permissions:f}),await Z(),w(!1),L(null)}catch(t){var e,a;console.error("Error updating permissions:",t),alert((null===(e=t.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.error)||"Error al actualizar permisos")}},children:"Actualizar"})]})]})}),j&&(0,Kn.jsx)("div",{className:"modal-overlay",children:(0,Kn.jsxs)("div",{className:"modal",children:[(0,Kn.jsx)("h3",{children:"Crear Nuevo Usuario"}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Nombre:"}),(0,Kn.jsx)("input",{type:"text",value:Y.name,onChange:e=>X(u(u({},Y),{},{name:e.target.value})),required:!0})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Email:"}),(0,Kn.jsx)("input",{type:"email",value:Y.email,onChange:e=>X(u(u({},Y),{},{email:e.target.value})),required:!0})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Contrase\xf1a:"}),(0,Kn.jsx)("input",{type:"password",value:Y.password,onChange:e=>X(u(u({},Y),{},{password:e.target.value})),required:!0})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Rol:"}),(0,Kn.jsxs)("select",{value:Y.role,onChange:e=>X(u(u({},Y),{},{role:e.target.value})),children:[(0,Kn.jsx)("option",{value:"requester",children:"Usuario"}),(0,Kn.jsx)("option",{value:"lawyer",children:"Abogado"}),(0,Kn.jsx)("option",{value:"admin",children:"Administrador"}),(0,Kn.jsx)("option",{value:"super_admin",children:"Super Admin"}),(0,Kn.jsx)("option",{value:"talento_humano",children:"Talento Humano"}),(0,Kn.jsx)("option",{value:"colaboradores",children:"Colaboradores"})]})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Empresa (opcional):"}),(0,Kn.jsxs)("select",{value:Y.companyId,onChange:e=>X(u(u({},Y),{},{companyId:e.target.value})),children:[(0,Kn.jsx)("option",{value:"",children:"Sin empresa"}),n.map(e=>(0,Kn.jsxs)("option",{value:e._id,children:[e.name," - ",e.tax_id]},e._id))]})]}),(0,Kn.jsxs)("div",{className:"modal-actions",children:[(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>N(!1),children:"Cancelar"}),(0,Kn.jsx)("button",{className:"btn-primary",onClick:async()=>{try{await Qn.post("/super-admin/create-user",Y),await Z(),N(!1),X({email:"",name:"",password:"",role:"requester",companyId:""})}catch(t){var e,a;console.error("Error creating user:",t),alert((null===(e=t.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.error)||"Error al crear usuario")}},disabled:!Y.name||!Y.email||!Y.password,children:"Crear Usuario"})]})]})}),C&&o&&(0,Kn.jsx)("div",{className:"modal-overlay",children:(0,Kn.jsxs)("div",{className:"modal",children:[(0,Kn.jsx)("h3",{children:"Informaci\xf3n del Usuario"}),(0,Kn.jsxs)("div",{className:"user-info-details",children:[(0,Kn.jsxs)("div",{className:"info-row",children:[(0,Kn.jsx)("span",{className:"info-label",children:"Nombre Completo:"}),(0,Kn.jsx)("span",{className:"info-value",children:o.name})]}),(0,Kn.jsxs)("div",{className:"info-row",children:[(0,Kn.jsx)("span",{className:"info-label",children:"Email:"}),(0,Kn.jsx)("span",{className:"info-value",children:o.email})]}),(0,Kn.jsxs)("div",{className:"info-row",children:[(0,Kn.jsx)("span",{className:"info-label",children:"Rol del Sistema:"}),(0,Kn.jsx)("span",{className:"role-badge ".concat(o.role),children:o.role})]}),(0,Kn.jsxs)("div",{className:"info-row",children:[(0,Kn.jsx)("span",{className:"info-label",children:"Estado:"}),(0,Kn.jsx)("span",{className:"status-badge ".concat(o.active?"active":"inactive"),children:o.active?"Activo":"Inactivo"})]}),(0,Kn.jsxs)("div",{className:"info-row",children:[(0,Kn.jsx)("span",{className:"info-label",children:"Empresas Asignadas:"}),(0,Kn.jsx)("span",{className:"info-value",children:(null===(e=o.companies)||void 0===e?void 0:e.length)||0})]}),o.companies&&o.companies.length>0&&(0,Kn.jsxs)("div",{className:"info-section",children:[(0,Kn.jsx)("h4",{children:"Empresas y Roles:"}),(0,Kn.jsx)("div",{className:"companies-info-list",children:o.companies.map(e=>(0,Kn.jsxs)("div",{className:"company-info-item",children:[(0,Kn.jsxs)("div",{className:"company-info-header",children:[(0,Kn.jsx)("strong",{children:e.company.name}),(0,Kn.jsx)("span",{className:"role-badge-mini ".concat(e.role),children:e.role})]}),(0,Kn.jsxs)("div",{className:"company-info-details",children:[(0,Kn.jsxs)("span",{className:"tax-id",children:["NIT/RUC: ",e.company.tax_id]}),(0,Kn.jsxs)("div",{className:"perms",children:[(0,Kn.jsx)("span",{className:e.permissions.canView?"on":"off",title:"Ver",children:"V"}),(0,Kn.jsx)("span",{className:e.permissions.canEdit?"on":"off",title:"Editar",children:"E"}),(0,Kn.jsx)("span",{className:e.permissions.canDelete?"on":"off",title:"Eliminar",children:"D"}),(0,Kn.jsx)("span",{className:e.permissions.canManageUsers?"on":"off",title:"Gestionar",children:"G"})]})]})]},e._id))})]})]}),(0,Kn.jsx)("div",{className:"modal-actions",children:(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>{S(!1),c(null)},children:"Cerrar"})})]})}),k&&(0,Kn.jsx)("div",{className:"modal-overlay",onClick:()=>E(!1),children:(0,Kn.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,Kn.jsx)("h2",{children:"Editar Usuario"}),(0,Kn.jsxs)("div",{className:"modal-body",children:[(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Nombre:"}),(0,Kn.jsx)("input",{type:"text",value:z.name,onChange:e=>O(u(u({},z),{},{name:e.target.value})),placeholder:"Nombre completo del usuario"})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Email:"}),(0,Kn.jsx)("input",{type:"email",value:z.email,onChange:e=>O(u(u({},z),{},{email:e.target.value})),placeholder:"correo@ejemplo.com"})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Rol:"}),(0,Kn.jsxs)("select",{value:z.role,onChange:e=>O(u(u({},z),{},{role:e.target.value})),children:[(0,Kn.jsx)("option",{value:"requester",children:"Usuario"}),(0,Kn.jsx)("option",{value:"lawyer",children:"Abogado"}),(0,Kn.jsx)("option",{value:"admin",children:"Administrador"}),(0,Kn.jsx)("option",{value:"super_admin",children:"Super Admin"}),(0,Kn.jsx)("option",{value:"talento_humano",children:"Talento Humano"}),(0,Kn.jsx)("option",{value:"colaboradores",children:"Colaboradores"})]})]})]}),(0,Kn.jsxs)("div",{className:"modal-actions",children:[(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>E(!1),children:"Cancelar"}),(0,Kn.jsx)("button",{className:"btn-primary",onClick:async()=>{try{await Qn.put("/multi-companies/edit-user/".concat(z.id),{name:z.name,email:z.email,role:z.role}),await Z(),E(!1),alert("Usuario actualizado exitosamente")}catch(t){var e,a;alert((null===(e=t.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.error)||"Error al editar usuario")}},children:"Guardar Cambios"})]})]})}),T&&I&&(0,Kn.jsx)("div",{className:"modal-overlay",onClick:()=>P(!1),children:(0,Kn.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,Kn.jsx)("button",{className:"modal-close-btn",onClick:()=>{P(!1),q(null),M("")},title:"Cerrar",children:"\xd7"}),(0,Kn.jsx)("h2",{children:"Reiniciar Contrase\xf1a"}),(0,Kn.jsxs)("div",{className:"modal-body",children:[(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Usuario:"})," ",I.name," (",I.email,")"]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Nueva Contrase\xf1a:"}),(0,Kn.jsx)("input",{type:"password",value:F,onChange:e=>M(e.target.value),placeholder:"Minimo 6 caracteres"})]})]}),(0,Kn.jsxs)("div",{className:"modal-actions",children:[(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>{P(!1),q(null),M("")},children:"Cancelar"}),(0,Kn.jsx)("button",{className:"btn-primary",onClick:async()=>{if(I&&F)if(F.length<6)alert("La nueva contrase\xf1a debe tener al menos 6 caracteres");else try{await Qn.post("/users/".concat(I._id,"/reset-password"),{newPassword:F}),alert("Contrase\xf1a reiniciada exitosamente para ".concat(I.name)),P(!1),q(null),M("")}catch(t){var e,a;alert((null===(e=t.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.error)||"Error al reiniciar contrase\xf1a")}},disabled:!F||F.length<6,children:"Reiniciar Contrase\xf1a"})]})]})})]})},br=()=>{const[e,a]=(0,r.useState)([]),[t,n]=(0,r.useState)([]),[l,s]=(0,r.useState)([]),[i,o]=(0,r.useState)(!0),[c,d]=(0,r.useState)(!1),[m,p]=(0,r.useState)(!1),[h,f]=(0,r.useState)(null),[v,g]=(0,r.useState)({companyId:"",userId:"",role:"requester",permissions:{canView:!0,canEdit:!1,canDelete:!1,canManageUsers:!1,canManageContracts:!1,canManageTemplates:!1}});(0,r.useEffect)(()=>{x()},[]);const x=async()=>{try{const[e,t,r]=await Promise.all([Qn.get("/company-users/companies"),Qn.get("/company-users/users"),Qn.get("/company-users/relations")]);a(e.data),n(t.data),s(r.data)}catch(e){console.error("Error fetching data:",e)}finally{o(!1)}};return i?(0,Kn.jsx)("div",{className:"loading",children:"Cargando relaciones empresa-usuario..."}):(0,Kn.jsxs)("div",{className:"company-user-management",children:[(0,Kn.jsxs)("div",{className:"page-header",children:[(0,Kn.jsx)("h1",{children:"Gesti\xf3n de Relaciones Empresa-Usuario"}),(0,Kn.jsx)("button",{className:"btn-primary",onClick:()=>d(!0),children:"Asignar Usuario a Empresa"})]}),(0,Kn.jsx)("div",{className:"relations-list",children:0===l.length?(0,Kn.jsxs)("div",{className:"empty-state",children:[(0,Kn.jsx)("h3",{children:"No hay relaciones"}),(0,Kn.jsx)("p",{children:"Asigna usuarios a empresas para comenzar"})]}):l.map(e=>(0,Kn.jsxs)("div",{className:"relation-card",children:[(0,Kn.jsxs)("div",{className:"relation-info",children:[(0,Kn.jsx)("h3",{children:e.user.name}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Email:"})," ",e.user.email]}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Empresa:"})," ",e.company.name]}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Rol:"})," ",(0,Kn.jsx)("span",{className:"role-badge role-".concat(e.role),children:e.role})]}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Asignado:"})," ",new Date(e.assignedAt).toLocaleDateString()]})]}),(0,Kn.jsxs)("div",{className:"permissions-info",children:[(0,Kn.jsx)("h4",{children:"Permisos:"}),(0,Kn.jsx)("div",{className:"permissions-grid",children:Object.entries(e.permissions).map(e=>{let[a,t]=e;return(0,Kn.jsx)("span",{className:"permission ".concat(t?"granted":"denied"),children:a.replace("can","").replace(/([A-Z])/g," $1").trim()},a)})})]}),(0,Kn.jsxs)("div",{className:"relation-actions",children:[(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>(e=>{f(e),p(!0)})(e),children:"Editar"}),(0,Kn.jsx)("button",{className:"btn-danger",onClick:()=>(async e=>{if(window.confirm("\xbfEst\xe1s seguro de que quieres remover esta relaci\xf3n?"))try{await Qn.delete("/company-users/remove/".concat(e)),await x()}catch(a){console.error("Error removing relation:",a)}})(e._id),children:"Remover"})]})]},e._id))}),c&&(0,Kn.jsx)("div",{className:"modal-overlay",children:(0,Kn.jsxs)("div",{className:"modal",children:[(0,Kn.jsx)("h3",{children:"Asignar Usuario a Empresa"}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Empresa:"}),(0,Kn.jsxs)("select",{value:v.companyId,onChange:e=>g(u(u({},v),{},{companyId:e.target.value})),required:!0,children:[(0,Kn.jsx)("option",{value:"",children:"Seleccionar empresa"}),e.map(e=>(0,Kn.jsxs)("option",{value:e._id,children:[e.name," - ",e.tax_id]},e._id))]})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Usuario:"}),(0,Kn.jsxs)("select",{value:v.userId,onChange:e=>g(u(u({},v),{},{userId:e.target.value})),required:!0,children:[(0,Kn.jsx)("option",{value:"",children:"Seleccionar usuario"}),t.map(e=>(0,Kn.jsxs)("option",{value:e._id,children:[e.name," - ",e.email]},e._id))]})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Rol:"}),(0,Kn.jsxs)("select",{value:v.role,onChange:e=>g(u(u({},v),{},{role:e.target.value})),required:!0,children:[(0,Kn.jsx)("option",{value:"requester",children:"Solicitante"}),(0,Kn.jsx)("option",{value:"lawyer",children:"Abogado"}),(0,Kn.jsx)("option",{value:"admin",children:"Administrador"}),(0,Kn.jsx)("option",{value:"super_admin",children:"Super Admin"}),(0,Kn.jsx)("option",{value:"talento_humano",children:"Talento Humano"}),(0,Kn.jsx)("option",{value:"colaboradores",children:"Colaboradores"})]})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Permisos:"}),(0,Kn.jsx)("div",{className:"permissions-grid",children:Object.entries(v.permissions).map(e=>{let[a,t]=e;return(0,Kn.jsxs)("label",{className:"permission-checkbox",children:[(0,Kn.jsx)("input",{type:"checkbox",checked:t,onChange:e=>g(u(u({},v),{},{permissions:u(u({},v.permissions),{},{[a]:e.target.checked})}))}),a.replace("can","").replace(/([A-Z])/g," $1").trim()]},a)})})]}),(0,Kn.jsxs)("div",{className:"modal-actions",children:[(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>d(!1),children:"Cancelar"}),(0,Kn.jsx)("button",{className:"btn-primary",onClick:async()=>{try{await Qn.post("/company-users/assign",v),await x(),d(!1),g({companyId:"",userId:"",role:"requester",permissions:{canView:!0,canEdit:!1,canDelete:!1,canManageUsers:!1,canManageContracts:!1,canManageTemplates:!1}})}catch(e){console.error("Error assigning user:",e)}},disabled:!v.companyId||!v.userId,children:"Asignar"})]})]})}),m&&h&&(0,Kn.jsx)("div",{className:"modal-overlay",children:(0,Kn.jsxs)("div",{className:"modal",children:[(0,Kn.jsx)("h3",{children:"Editar Relaci\xf3n"}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Usuario:"}),(0,Kn.jsxs)("p",{children:[h.user.name," - ",h.user.email]})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Empresa:"}),(0,Kn.jsx)("p",{children:h.company.name})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Rol:"}),(0,Kn.jsxs)("select",{value:h.role,onChange:e=>f(u(u({},h),{},{role:e.target.value})),required:!0,children:[(0,Kn.jsx)("option",{value:"requester",children:"Solicitante"}),(0,Kn.jsx)("option",{value:"lawyer",children:"Abogado"}),(0,Kn.jsx)("option",{value:"admin",children:"Administrador"}),(0,Kn.jsx)("option",{value:"super_admin",children:"Super Admin"}),(0,Kn.jsx)("option",{value:"talento_humano",children:"Talento Humano"}),(0,Kn.jsx)("option",{value:"colaboradores",children:"Colaboradores"})]})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Permisos:"}),(0,Kn.jsx)("div",{className:"permissions-grid",children:Object.entries(h.permissions).map(e=>{let[a,t]=e;return(0,Kn.jsxs)("label",{className:"permission-checkbox",children:[(0,Kn.jsx)("input",{type:"checkbox",checked:t,onChange:e=>((e,a)=>{h&&f(u(u({},h),{},{permissions:u(u({},h.permissions),{},{[e]:a})}))})(a,e.target.checked)}),a.replace("can","").replace(/([A-Z])/g," $1").trim()]},a)})})]}),(0,Kn.jsxs)("div",{className:"modal-actions",children:[(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>p(!1),children:"Cancelar"}),(0,Kn.jsx)("button",{className:"btn-primary",onClick:async()=>{if(h)try{await Qn.put("/company-users/update-permissions/".concat(h._id),{role:h.role,permissions:h.permissions}),await x(),p(!1),f(null)}catch(e){console.error("Error updating relation:",e)}},children:"Actualizar"})]})]})})]})},yr=[{value:"text",label:"Texto"},{value:"number",label:"N\xfamero"},{value:"date",label:"Fecha"},{value:"email",label:"Email"},{value:"textarea",label:"Texto largo"},{value:"select",label:"Selecci\xf3n"}],jr=e=>{let{supplierId:a,onFieldsAdded:t,userRole:n}=e;const[l,s]=(0,r.useState)(null),[i,o]=(0,r.useState)(!0),[c,d]=(0,r.useState)(null),[m,p]=(0,r.useState)(!1),[h,f]=(0,r.useState)({}),[v,g]=(0,r.useState)(!1),[x,b]=(0,r.useState)(null),[y,j]=(0,r.useState)(!1),[N,_]=(0,r.useState)(!1),[w,C]=(0,r.useState)(null),[S,k]=(0,r.useState)(-1),[E,T]=(0,r.useState)("text"),[P,R]=(0,r.useState)(""),[L,A]=(0,r.useState)(!1),[D,z]=(0,r.useState)(!1),[O,I]=(0,r.useState)(""),q=()=>{const e=(()=>{if(n)return n;try{return JSON.parse(localStorage.getItem("user")||"{}").role||""}catch(e){return""}})();return"super_admin"===e||"admin"===e};(0,r.useEffect)(()=>{a&&F()},[a]);const F=async()=>{try{o(!0),d(null),console.log("\ud83d\udd0d Fetching analysis for supplier:",a);const e=await Qn.get("/field-management/supplier/".concat(a,"/analysis"));console.log("\u2705 Analysis response:",e.data),s(e.data.analysis)}catch(r){var e,t,n;const a=(null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.error)||r.message||"Error al obtener an\xe1lisis de campos";console.error("\u274c Error fetching analysis:",r),console.error("Error details:",null===(n=r.response)||void 0===n?void 0:n.data),d(a)}finally{o(!1)}},M=e=>e>=80?"success":e>=50?"warning":"error",U=e=>{const a=e.toLowerCase();return a.includes("fecha")||a.includes("date")||a.includes("nacimiento")||a.includes("inicio")||a.includes("fin")||a.includes("vencimiento")||a.includes("expedicion")||a.includes("ingreso")?"date":a.includes("email")||a.includes("correo")||a.includes("mail")?"email":a.includes("telefono")||a.includes("celular")||a.includes("phone")||a.includes("salario")||a.includes("monto")||a.includes("valor")?"number":a.includes("descripcion")||a.includes("observacion")||a.includes("direccion")?"textarea":"text"};return i?(0,Kn.jsx)("div",{className:"field-suggestions-panel",children:(0,Kn.jsxs)("div",{className:"loading-container",children:[(0,Kn.jsx)("div",{className:"spinner"}),(0,Kn.jsx)("p",{children:"Cargando an\xe1lisis de campos..."})]})}):c?(0,Kn.jsx)("div",{className:"field-suggestions-panel",children:(0,Kn.jsxs)("div",{className:"alert alert-error",children:[(0,Kn.jsx)("strong",{children:"Error:"})," ",c,(0,Kn.jsx)("button",{className:"btn-link",onClick:F,children:"Reintentar"})]})}):l&&l.hasType?(0,Kn.jsxs)("div",{className:"field-suggestions-panel",children:[(0,Kn.jsxs)("div",{className:"completion-card",children:[(0,Kn.jsxs)("div",{className:"completion-header",children:[(0,Kn.jsx)("h5",{children:"Completitud de Datos"}),(0,Kn.jsx)("button",{className:"btn-refresh",onClick:F,title:"Recargar an\xe1lisis",children:"\u21bb"})]}),(0,Kn.jsxs)("div",{className:"completion-percentage",children:[(0,Kn.jsxs)("div",{className:"percentage-value percentage-".concat(M(l.completionPercentage)),children:[l.completionPercentage,"%"]}),(0,Kn.jsxs)("div",{className:"completion-badge badge-".concat(M(l.completionPercentage)),children:[(B=l.completionPercentage,B>=80?"Buen estado":B>=50?"Completar campos faltantes":"Requiere atenci\xf3n"),l.totalMissing>0&&" (".concat(l.totalMissing," faltantes)")]})]}),(0,Kn.jsx)("div",{className:"progress-bar",children:(0,Kn.jsx)("div",{className:"progress-fill progress-".concat(M(l.completionPercentage)),style:{width:"".concat(l.completionPercentage,"%")}})}),(0,Kn.jsxs)("div",{className:"stats-grid",children:[(0,Kn.jsxs)("div",{className:"stat-item",children:[(0,Kn.jsx)("div",{className:"stat-value stat-primary",children:l.totalRequired}),(0,Kn.jsx)("div",{className:"stat-label",children:"Campos requeridos"})]}),(0,Kn.jsxs)("div",{className:"stat-item",children:[(0,Kn.jsx)("div",{className:"stat-value stat-success",children:l.totalMatched}),(0,Kn.jsx)("div",{className:"stat-label",children:"Completos"})]}),(0,Kn.jsxs)("div",{className:"stat-item",children:[(0,Kn.jsx)("div",{className:"stat-value stat-error",children:l.totalMissing}),(0,Kn.jsx)("div",{className:"stat-label",children:"Faltantes"})]})]})]}),l.missingFields&&l.missingFields.length>0&&(0,Kn.jsxs)("div",{className:"missing-fields-card",children:[(0,Kn.jsxs)("h5",{children:["Campos Faltantes (",l.missingFields.length,")"]}),(0,Kn.jsxs)("div",{className:"alert alert-warning",children:[(0,Kn.jsx)("strong",{children:"\u26a0\ufe0f Completa estos campos para generar contratos"}),(0,Kn.jsx)("p",{style:{marginTop:"0.5rem",marginBottom:0},children:"Los campos marcados como requeridos son necesarios para usar las plantillas asociadas."})]}),(0,Kn.jsx)("div",{className:"fields-list",children:l.missingFields.map((e,a)=>{const t=U(e.name),n=e.type!==t&&"text"!==t;return(0,Kn.jsxs)("div",{className:"field-item",children:[(0,Kn.jsxs)("div",{className:"field-info",children:[(0,Kn.jsxs)("div",{className:"field-header",children:[(0,Kn.jsx)("span",{className:"field-icon ".concat(e.required?"required":"optional"),children:e.required?"\u26a0\ufe0f":"\u2139\ufe0f"}),(0,Kn.jsx)("strong",{className:"field-label",children:e.label}),e.required&&(0,Kn.jsx)("span",{className:"badge badge-error",children:"Requerido"})]}),(0,Kn.jsx)("div",{className:"field-details",children:(0,Kn.jsxs)("small",{children:["Campo: ",(0,Kn.jsx)("code",{children:e.name})," | Tipo: ",(0,Kn.jsx)("strong",{children:e.type}),n&&(0,Kn.jsxs)("span",{className:"type-suggestion",title:"Tipo detectado autom\xe1ticamente",children:[" \u2192 ",(0,Kn.jsxs)("em",{style:{color:"#2563eb"},children:["Sugerido: ",t]})]})]})}),(0,Kn.jsxs)("div",{className:"field-templates",children:[(0,Kn.jsxs)("small",{children:["Usado en ",e.usedInTemplates.length," plantilla(s):"]}),(0,Kn.jsxs)("div",{className:"templates-chips",children:[e.usedInTemplates.slice(0,3).map((e,a)=>(0,Kn.jsxs)("span",{className:"template-chip",children:["\ud83d\udcc4 ",e]},a)),e.usedInTemplates.length>3&&(0,Kn.jsxs)("span",{className:"template-chip",children:["+",e.usedInTemplates.length-3," m\xe1s"]})]})]})]}),(0,Kn.jsxs)("div",{className:"field-actions",children:[q()&&(0,Kn.jsx)("button",{className:"btn-edit",onClick:()=>(async e=>{if(!q())return void alert("No tienes permisos para editar campos");const a=e.templateIds[0];if(a)try{const t=(await Qn.get("/field-management/template/".concat(a,"/fields"))).data.fields||[],n=t.findIndex(a=>a.field_name===e.name||a.field_label===e.label);if(-1===n)return void alert("No se encontr\xf3 el campo en la plantilla");const r=t[n];C(e),I(a),k(n),T(r.field_type||"text"),R(r.field_label||e.label),A(r.required||!1),_(!0)}catch(t){console.error("Error al obtener campos de plantilla:",t),alert("Error al obtener informaci\xf3n del campo")}else alert("No se encontr\xf3 plantilla asociada a este campo")})(e),title:"Editar propiedades del campo",children:"\u270f\ufe0f Editar"}),(0,Kn.jsx)("button",{className:"btn-add",onClick:()=>(e=>{b(e),f(u(u({},h),{},{[e.name]:""})),g(!0)})(e),children:"+ Agregar"})]})]},e.name)})})]}),l.currentFieldsDetail&&l.currentFieldsDetail.length>0&&(0,Kn.jsxs)("div",{className:"current-fields-card",children:[(0,Kn.jsxs)("div",{className:"collapsible-header",onClick:()=>j(!y),children:[(0,Kn.jsxs)("h5",{children:["Campos Actuales (",l.currentFieldsDetail.length,")"]}),(0,Kn.jsx)("span",{className:"collapse-icon",children:y?"\u25bc":"\u25b6"})]}),y&&(0,Kn.jsx)("div",{className:"fields-list",children:l.currentFieldsDetail.map((e,a)=>(0,Kn.jsxs)("div",{className:"field-item current-field",children:[(0,Kn.jsx)("span",{className:"field-icon success",children:"\u2713"}),(0,Kn.jsxs)("div",{className:"field-info",children:[(0,Kn.jsx)("strong",{children:e.name}),(0,Kn.jsxs)("div",{className:"field-details",children:[(0,Kn.jsxs)("small",{children:[(0,Kn.jsx)("strong",{children:"Valor:"})," ",e.value]}),(0,Kn.jsx)("br",{}),(0,Kn.jsxs)("small",{children:["Fuente: ","standard"===e.source?"Campo est\xe1ndar":"Campo personalizado",e.originalField&&" (".concat(e.originalField,")")]})]})]})]},a))})]}),100===l.completionPercentage&&(0,Kn.jsxs)("div",{className:"alert alert-success",children:[(0,Kn.jsx)("strong",{children:"\u2705 Tercero Completo"}),(0,Kn.jsx)("p",{style:{marginTop:"0.5rem",marginBottom:0},children:"Este tercero tiene todos los campos necesarios para generar contratos con las plantillas disponibles."})]}),v&&x&&(0,Kn.jsx)("div",{className:"dialog-overlay",onClick:()=>g(!1),children:(0,Kn.jsxs)("div",{className:"dialog",onClick:e=>e.stopPropagation(),children:[(0,Kn.jsxs)("div",{className:"dialog-header",children:[(0,Kn.jsxs)("h4",{children:["Agregar Campo: ",x.label]}),(0,Kn.jsx)("button",{className:"dialog-close",onClick:()=>g(!1),children:"\xd7"})]}),(0,Kn.jsxs)("div",{className:"dialog-content",children:[(0,Kn.jsxs)("div",{className:"alert alert-info",children:[(0,Kn.jsx)("strong",{children:"Usado en plantillas:"}),(0,Kn.jsx)("ul",{style:{marginTop:"0.5rem",paddingLeft:"1.5rem"},children:x.usedInTemplates.map((e,a)=>(0,Kn.jsx)("li",{children:(0,Kn.jsx)("small",{children:e})},a))})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsxs)("label",{children:[x.label," ",x.required&&(0,Kn.jsx)("span",{className:"required-mark",children:"*"})]}),"date"===x.type?(0,Kn.jsx)("input",{type:"date",value:h[x.name]||"",onChange:e=>f(u(u({},h),{},{[x.name]:e.target.value})),required:x.required,autoFocus:!0}):"textarea"===x.type?(0,Kn.jsx)("textarea",{value:h[x.name]||"",onChange:e=>f(u(u({},h),{},{[x.name]:e.target.value})),required:x.required,placeholder:"Ingrese ".concat(x.label.toLowerCase()),rows:3,autoFocus:!0}):(0,Kn.jsx)("input",{type:"email"===x.type?"email":"number"===x.type?"number":"text",value:h[x.name]||"",onChange:e=>f(u(u({},h),{},{[x.name]:e.target.value})),required:x.required,placeholder:"Ingrese ".concat(x.label.toLowerCase()),autoFocus:!0}),(0,Kn.jsxs)("small",{children:["Campo: ",x.name," | Tipo: ",x.type]})]})]}),(0,Kn.jsxs)("div",{className:"dialog-actions",children:[(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>g(!1),disabled:m,children:"Cancelar"}),(0,Kn.jsx)("button",{className:"btn-primary",onClick:async()=>{if(x&&h[x.name])try{p(!0),console.log("\ud83d\udcbe Saving field:",x.name,"=",h[x.name]);const e=localStorage.getItem("token");if(!e)return console.error("\u274c No hay token en localStorage - Usuario no autenticado"),alert("Sesi\xf3n expirada. Por favor inicia sesi\xf3n nuevamente."),void(window.location.href="/login");console.log("\u2705 Token encontrado:",e.substring(0,20)+"..."),await Qn.post("/field-management/supplier/".concat(a,"/fields"),{fields:[{name:x.name,value:h[x.name],label:x.label}]}),console.log("\u2705 Field saved successfully");const n=u({},h);delete n[x.name],f(n),g(!1),b(null),await F(),t&&t(),alert("Campo agregado exitosamente")}catch(_){var e,n,r,l,s,i,o,c,d,m,v,y,j,N;const t=(null===(e=_.response)||void 0===e||null===(n=e.data)||void 0===n?void 0:n.error)||_.message||"Error al agregar campo";console.group("\u274c ERROR AL GUARDAR CAMPO - DEBUG COMPLETO"),console.error("\ud83d\udccb Datos del Campo:"),console.error("  Nombre:",x.name),console.error("  Valor:",h[x.name]),console.error("  Label:",x.label),console.error("  Supplier ID:",a),console.error("\n\ud83d\udce1 Respuesta del Servidor:"),console.error("  Status:",null===(r=_.response)||void 0===r?void 0:r.status),console.error("  Status Text:",null===(l=_.response)||void 0===l?void 0:l.statusText),console.error("  Error Message:",t),null!==(s=_.response)&&void 0!==s&&s.data&&(console.error("\n\ud83d\udce6 Data Completa del Error:"),console.error("  Error Type:",_.response.data.errorType),console.error("  Error:",_.response.data.error),console.error("  Validation Errors:",_.response.data.validationErrors),_.response.data.details&&(console.error("\n\ud83d\udd0d Stack Trace del Servidor:"),console.error(_.response.data.details)),console.error("\n\ud83d\udcc4 JSON Completo:"),console.error(JSON.stringify(_.response.data,null,2))),console.error("\n\ud83c\udf10 Detalles de la Request:"),console.error("  URL:",null===(i=_.config)||void 0===i?void 0:i.url),console.error("  Method:",null===(o=_.config)||void 0===o?void 0:o.method),console.error("  Headers:",null===(c=_.config)||void 0===c?void 0:c.headers),console.error("  Data enviada:",null===(d=_.config)||void 0===d?void 0:d.data),console.error("\n\ud83d\udcac Error del Cliente:"),console.error("  Message:",_.message),console.error("  Name:",_.name),console.error("  Code:",_.code),_.stack&&(console.error("\n\ud83d\udcda Stack Trace del Cliente:"),console.error(_.stack)),console.error("\n\ud83d\udd27 Error Object Completo:"),console.error(_),console.groupEnd();let u='\u274c Error al guardar campo "'.concat(x.label,'"\n\n');u+="Mensaje: ".concat(t,"\n"),null!==(m=_.response)&&void 0!==m&&m.status&&(u+="HTTP Status: ".concat(_.response.status,"\n")),null!==(v=_.response)&&void 0!==v&&null!==(y=v.data)&&void 0!==y&&y.errorType&&(u+="Tipo: ".concat(_.response.data.errorType,"\n")),null!==(j=_.response)&&void 0!==j&&null!==(N=j.data)&&void 0!==N&&N.validationErrors&&(u+="\nErrores de validaci\xf3n:\n",_.response.data.validationErrors.forEach(e=>{u+="  - ".concat(e,"\n")})),u+="\n\ud83d\udca1 Revisa la consola del navegador (F12) para m\xe1s detalles t\xe9cnicos.",alert(u)}finally{p(!1)}else alert("Por favor ingresa un valor para el campo")},disabled:m||!h[x.name],children:m?"Guardando...":"Guardar"})]})]})}),N&&w&&(0,Kn.jsx)("div",{className:"dialog-overlay",onClick:()=>_(!1),children:(0,Kn.jsxs)("div",{className:"dialog dialog-edit",onClick:e=>e.stopPropagation(),children:[(0,Kn.jsxs)("div",{className:"dialog-header",children:[(0,Kn.jsxs)("h4",{children:["Editar Campo: ",w.label]}),(0,Kn.jsx)("button",{className:"dialog-close",onClick:()=>_(!1),children:"\xd7"})]}),(0,Kn.jsxs)("div",{className:"dialog-content",children:[(0,Kn.jsxs)("div",{className:"alert alert-info",style:{marginBottom:"1rem"},children:[(0,Kn.jsx)("strong",{children:"\u2699\ufe0f Modificar propiedades del campo"}),(0,Kn.jsx)("p",{style:{margin:"0.5rem 0 0 0",fontSize:"0.85rem"},children:"Los cambios afectar\xe1n c\xf3mo se muestra e ingresa este campo en los contratos."})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Nombre del campo (solo lectura)"}),(0,Kn.jsx)("input",{type:"text",value:w.name,disabled:!0,style:{backgroundColor:"#f3f4f6"}})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Etiqueta (Label)"}),(0,Kn.jsx)("input",{type:"text",value:P,onChange:e=>R(e.target.value),placeholder:"Etiqueta visible para el usuario"})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Tipo de Campo"}),(0,Kn.jsxs)("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[(0,Kn.jsx)("select",{value:E,onChange:e=>T(e.target.value),style:{flex:1},children:yr.map(e=>(0,Kn.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,Kn.jsx)("button",{type:"button",className:"btn-detect",onClick:()=>{if(w){const e=U(w.name);T(e)}},title:"Detectar tipo autom\xe1ticamente basado en el nombre",children:"\ud83d\udd0d Auto"})]}),"text"!==U(w.name)&&(0,Kn.jsxs)("small",{style:{color:"#2563eb",marginTop:"0.25rem",display:"block"},children:["\ud83d\udca1 Tipo sugerido: ",(0,Kn.jsx)("strong",{children:U(w.name)})," ",'(basado en el nombre "',w.name,'")']})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[(0,Kn.jsx)("input",{type:"checkbox",checked:L,onChange:e=>A(e.target.checked)}),(0,Kn.jsx)("span",{children:"Campo requerido"})]}),(0,Kn.jsx)("small",{children:"Si est\xe1 marcado, el campo ser\xe1 obligatorio al generar contratos"})]}),(0,Kn.jsxs)("div",{className:"alert",style:{backgroundColor:"#fef3c7",border:"1px solid #f59e0b",color:"#92400e"},children:[(0,Kn.jsx)("strong",{children:"\ud83d\udccb Plantillas afectadas:"}),(0,Kn.jsx)("ul",{style:{marginTop:"0.5rem",paddingLeft:"1.5rem",marginBottom:0},children:w.usedInTemplates.map((e,a)=>(0,Kn.jsx)("li",{children:(0,Kn.jsx)("small",{children:e})},a))})]})]}),(0,Kn.jsxs)("div",{className:"dialog-actions",children:[(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>_(!1),disabled:D,children:"Cancelar"}),(0,Kn.jsx)("button",{className:"btn-primary",onClick:async()=>{if(w&&O&&!(S<0))try{z(!0),await Qn.put("/field-management/template/".concat(O,"/field/").concat(S),{field_type:E,field_label:P,required:L}),_(!1),C(null),await F(),alert("Campo actualizado exitosamente")}catch(t){var e,a;console.error("Error al actualizar campo:",t),alert((null===(e=t.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.error)||"Error al actualizar campo")}finally{z(!1)}},disabled:D||!P.trim(),children:D?"Guardando...":"\ud83d\udcbe Guardar Cambios"})]})]})})]}):(0,Kn.jsx)("div",{className:"field-suggestions-panel",children:(0,Kn.jsxs)("div",{className:"alert alert-info",children:[(0,Kn.jsx)("strong",{children:"Sin tipo de tercero:"})," Asigna un tipo a este tercero para ver sugerencias de campos."]})});var B},Nr=e=>{let{supplierId:a,customFields:t,thirdPartyTypeId:n,onMergeComplete:l}=e;const[s,i]=(0,r.useState)([]),[o,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)(!1),[m,p]=(0,r.useState)(!1),[h,f]=(0,r.useState)(!1);(0,r.useEffect)(()=>{v()},[t]);const v=()=>{if(!t||0===Object.keys(t).length)return void i([]);const e={};Object.entries(t).forEach(a=>{let[t,n]=a;const r=g(t);e[r]||(e[r]=[]),e[r].push({name:t,value:n,normalizedName:r,suggestion:x(r)})});const a=Object.entries(e).filter(e=>{let[a,t]=e;return t.length>1}).map(e=>{let[a,t]=e;const n=t.find(e=>e.value&&""!==e.value)||t[0];return{normalizedName:a,suggestedName:t[0].suggestion||a,fields:t,selectedValue:n.value,selectedField:n.name}});i(a)},g=e=>e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,""),x=e=>({cedula_rep_legal:"cedula_representante_legal",cedula_representante:"cedula_representante_legal",tel:"telefono",phone:"telefono",mail:"email",correo:"email",dir:"direccion",address:"direccion",razon_social:"legal_name",nombre_empresa:"legal_name"}[e]||e),b=(e,a,t)=>{const n=[...s];n[e].selectedField=a,n[e].selectedValue=t,i(n)};return 0===s.length?null:(0,Kn.jsxs)(Kn.Fragment,{children:[(0,Kn.jsx)("div",{className:"field-merger-summary",children:(0,Kn.jsxs)("div",{className:"merger-header",children:[(0,Kn.jsxs)("div",{className:"merger-info",children:[(0,Kn.jsx)("span",{className:"merger-icon",children:"\ud83d\udd04"}),(0,Kn.jsxs)("span",{className:"merger-text",children:[s.length," grupo(s) de campos duplicados detectados"]})]}),(0,Kn.jsx)("button",{className:"btn-show-merger",onClick:()=>f(!0),children:"Ver y Fusionar"})]})}),h&&(0,Kn.jsx)("div",{className:"merger-dialog-overlay",onClick:()=>f(!1),children:(0,Kn.jsxs)("div",{className:"merger-dialog",onClick:e=>e.stopPropagation(),children:[(0,Kn.jsxs)("div",{className:"merger-dialog-header",children:[(0,Kn.jsx)("h3",{children:"Fusionar Campos Duplicados"}),(0,Kn.jsx)("button",{className:"merger-dialog-close",onClick:()=>f(!1),children:"\xd7"})]}),(0,Kn.jsxs)("div",{className:"merger-dialog-content",children:[(0,Kn.jsxs)("div",{className:"merger-alert",children:[(0,Kn.jsx)("strong",{children:"\u26a0\ufe0f Campos duplicados detectados"}),(0,Kn.jsx)("p",{children:"Se encontraron campos con nombres similares o duplicados. Puedes fusionarlos para mantener tu informaci\xf3n organizada."})]}),s.map((e,t)=>(0,Kn.jsxs)("div",{className:"merge-group-card",children:[(0,Kn.jsxs)("div",{className:"merge-group-header",children:[(0,Kn.jsxs)("h4",{children:["Grupo: ",e.normalizedName]}),(0,Kn.jsxs)("span",{className:"merge-group-count",children:[e.fields.length," campos"]})]}),(0,Kn.jsxs)("div",{className:"merge-suggestion",children:[(0,Kn.jsx)("strong",{children:"Nombre sugerido:"})," ",(0,Kn.jsx)("code",{children:e.suggestedName})]}),(0,Kn.jsx)("div",{className:"merge-fields-list",children:e.fields.map((a,n)=>(0,Kn.jsxs)("div",{className:"merge-field-item ".concat(e.selectedField===a.name?"selected":""),onClick:()=>b(t,a.name,a.value),children:[(0,Kn.jsx)("div",{className:"merge-field-radio",children:(0,Kn.jsx)("input",{type:"radio",name:"group-".concat(t),checked:e.selectedField===a.name,onChange:()=>b(t,a.name,a.value)})}),(0,Kn.jsxs)("div",{className:"merge-field-info",children:[(0,Kn.jsxs)("div",{className:"merge-field-name",children:[(0,Kn.jsx)("code",{children:a.name}),a.value&&""!==a.value?null:(0,Kn.jsx)("span",{className:"merge-field-badge empty",children:"Vac\xedo"})]}),(0,Kn.jsxs)("div",{className:"merge-field-value",children:[(0,Kn.jsx)("strong",{children:"Valor:"})," ",a.value||(0,Kn.jsx)("em",{className:"empty-value",children:"(vac\xedo)"})]})]})]},n))}),(0,Kn.jsxs)("div",{className:"merge-group-actions",children:[(0,Kn.jsx)("button",{className:"btn-merge",onClick:()=>(async e=>{const t=s[e];try{u(!0),console.log("\ud83d\udd04 Merging fields:",{group:t.normalizedName,fields:t.fields.map(e=>e.name),selectedField:t.selectedField,selectedValue:t.selectedValue,suggestedName:t.suggestedName}),await Qn.post("/field-management/supplier/".concat(a,"/merge-fields"),{fieldsToMerge:t.fields.map(e=>e.name),targetFieldName:t.suggestedName,targetValue:t.selectedValue,removeOriginals:!0}),console.log("\u2705 Fields merged successfully");const n=s.filter((a,t)=>t!==e);i(n),l&&l(),alert("Campos fusionados exitosamente en: ".concat(t.suggestedName))}catch(o){var n,r;const e=(null===(n=o.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.error)||o.message||"Error al fusionar campos";console.error("\u274c Error merging fields:",o),alert("Error: ".concat(e))}finally{u(!1)}})(t),disabled:d||m,children:d?"Fusionando...":"Fusionar Este Tercero"}),n&&(0,Kn.jsx)("button",{className:"btn-merge-bulk",onClick:()=>(async e=>{const a=s[e];if(!n)return void alert("No se puede determinar el tipo de tercero para la fusi\xf3n masiva");const t="\xbfAplicar esta fusi\xf3n a TODOS los terceros del mismo tipo?\n\nCampos: ".concat(a.fields.map(e=>e.name).join(", "),"\nFusionar en: ").concat(a.suggestedName,"\n\nEsto afectar\xe1 a todos los terceros de este tipo en la empresa.");if(window.confirm(t))try{p(!0),console.log("\ud83d\ude80 Iniciando fusi\xf3n masiva:",{thirdPartyTypeId:n,fieldsToMerge:a.fields.map(e=>e.name),targetFieldName:a.suggestedName});const t=await Qn.post("/field-management/merge-fields-bulk",{thirdPartyTypeId:n,fieldsToMerge:a.fields.map(e=>e.name),targetFieldName:a.suggestedName});console.log("\u2705 Fusi\xf3n masiva completada:",t.data);const r=t.data.results,o="\u2705 Fusi\xf3n masiva completada exitosamente\n\n\ud83d\udcca Resultados:\n"+"\u2022 Total de terceros: ".concat(r.total,"\n")+"\u2022 Terceros actualizados: ".concat(r.merged,"\n")+"\u2022 Terceros sin cambios: ".concat(r.skipped,"\n\n")+"Los campos duplicados han sido fusionados en: ".concat(a.suggestedName);alert(o);const c=s.filter((a,t)=>t!==e);i(c),l&&l()}catch(c){var r,o;console.error("\u274c Error en fusi\xf3n masiva:",c);const e=(null===(r=c.response)||void 0===r||null===(o=r.data)||void 0===o?void 0:o.error)||c.message||"Error al realizar fusi\xf3n masiva";alert("Error: ".concat(e))}finally{p(!1)}})(t),disabled:d||m,title:"Aplicar esta fusi\xf3n a todos los terceros del mismo tipo",children:m?"Aplicando a todos...":"\u26a1 Fusionar Todos del Mismo Tipo"})]})]},t)),s.length>1&&(0,Kn.jsx)("div",{className:"merger-bulk-actions",children:(0,Kn.jsx)("button",{className:"btn-merge-all",onClick:async()=>{if(0!==s.length&&window.confirm("\xbfFusionar ".concat(s.length," grupo(s) de campos duplicados?")))try{u(!0);for(let e=0;e<s.length;e++){const t=s[e];await Qn.post("/field-management/supplier/".concat(a,"/merge-fields"),{fieldsToMerge:t.fields.map(e=>e.name),targetFieldName:t.suggestedName,targetValue:t.selectedValue,removeOriginals:!0})}i([]),l&&l(),alert("Todos los campos han sido fusionados exitosamente")}catch(n){var e,t;const a=(null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.error)||n.message||"Error al fusionar campos";console.error("\u274c Error merging all fields:",n),alert("Error: ".concat(a))}finally{u(!1)}},disabled:d,children:d?"Fusionando...":"Fusionar Todos (".concat(s.length," grupos)")})})]}),(0,Kn.jsx)("div",{className:"merger-dialog-footer",children:(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Nota:"})," La fusi\xf3n eliminar\xe1 los campos originales y crear\xe1 un nuevo campo con el nombre sugerido y el valor seleccionado."]})})]})})]})},_r=e=>{let{onSuccess:a,onCancel:t,preSelectedTemplateId:n}=e;const[l,s]=(0,r.useState)("template"),[i,o]=(0,r.useState)([]),[c,d]=(0,r.useState)(null),[m,p]=(0,r.useState)(null),[h,f]=(0,r.useState)(""),[v,g]=(0,r.useState)(null),[x,b]=(0,r.useState)({identification_type:"CC",identification_number:""}),[y,j]=(0,r.useState)(!1),[N,_]=(0,r.useState)(!0),[w,C]=(0,r.useState)(null),[S,k]=(0,r.useState)(null);(0,r.useEffect)(()=>{E()},[]),(0,r.useEffect)(()=>{if(n&&i.length>0){const e=i.find(e=>e._id===n);e&&T(e)}},[n,i]);const E=async()=>{try{_(!0);const e=await Qn.get("/templates");o(e.data.templates||e.data||[])}catch(e){console.error("Error loading templates:",e),C("Error al cargar plantillas")}finally{_(!1)}},T=async e=>{try{j(!0),C(null),d(e);const a=await(async e=>(await $n.get("/third-party-profiles/template-fields/".concat(e))).data)(e._id);p(a);const t=Object.keys(a.roles);1===t.length?(f(t[0]),g(a.roles[t[0]]),s("fields")):t.length>1?s("role"):C("La plantilla no tiene variables de terceros definidas")}catch(a){console.error("Error loading template fields:",a),C("Error al cargar campos de la plantilla")}finally{j(!1)}},P=(e,a)=>{b(t=>u(u({},t),{},{[e]:a}))},R=async e=>{if(e.preventDefault(),C(null),k(null),x.identification_type&&x.identification_number)if(c&&h)try{j(!0);const e=["identification_type","identification_number","legal_name","legal_name_short","full_name","legal_representative_name","legal_representative_id_type","legal_representative_id_number","email","phone","address","city","country"],t={};Object.keys(x).forEach(a=>{!e.includes(a)&&x[a]&&(t[a]=x[a])});const n={template_id:c._id,role_in_template:h,identification_type:x.identification_type,identification_number:x.identification_number,legal_name:x.legal_name||x["".concat(h,"_nombre")]||x["".concat(h,"_razon_social")],legal_name_short:x.legal_name_short||x["".concat(h,"_razon_social_corta")],full_name:x.full_name||x["".concat(h,"_nombre_completo")],legal_representative_name:x.legal_representative_name||x["".concat(h,"_representante")]||x["".concat(h,"_representante_legal")],email:x.email||x["".concat(h,"_email")]||x["".concat(h,"_correo")],phone:x.phone||x["".concat(h,"_telefono")]||x["".concat(h,"_celular")],address:x.address||x["".concat(h,"_direccion")],city:x.city||x["".concat(h,"_ciudad")],country:x.country,template_fields:t},r=await(async e=>(await $n.post("/third-party-profiles/create-with-supplier",e)).data)(n);k(r.message||"Tercero creado exitosamente"),a&&a(r.supplier,r.profile)}catch(r){var t,n;console.error("Error creating supplier:",r),C((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error)||"Error al crear tercero")}finally{j(!1)}else C("Debe seleccionar una plantilla y un rol");else C("Tipo y n\xfamero de identificaci\xf3n son requeridos")},L=e=>{const a=x[e.field_name]||"";return"select"===e.field_type&&e.options?(0,Kn.jsxs)("select",{className:"form-input",value:a,onChange:a=>P(e.field_name,a.target.value),required:e.required,children:[(0,Kn.jsx)("option",{value:"",children:"Seleccione..."}),e.options.map(e=>(0,Kn.jsx)("option",{value:e,children:e},e))]}):"textarea"===e.field_type?(0,Kn.jsx)("textarea",{className:"form-input",value:a,onChange:a=>P(e.field_name,a.target.value),required:e.required,rows:3}):"date"===e.field_type?(0,Kn.jsx)("input",{type:"date",className:"form-input",value:a,onChange:a=>P(e.field_name,a.target.value),required:e.required}):"number"===e.field_type?(0,Kn.jsx)("input",{type:"number",className:"form-input",value:a,onChange:a=>P(e.field_name,a.target.value),required:e.required}):"email"===e.field_type?(0,Kn.jsx)("input",{type:"email",className:"form-input",value:a,onChange:a=>P(e.field_name,a.target.value),required:e.required}):(0,Kn.jsx)("input",{type:"text",className:"form-input",value:a,onChange:a=>P(e.field_name,a.target.value),required:e.required})};return(0,Kn.jsxs)("div",{className:"template-based-supplier-form",children:[(0,Kn.jsxs)("div",{className:"form-header",children:[(0,Kn.jsx)("h2",{children:"Crear Tercero para Plantilla"}),(0,Kn.jsx)("p",{children:"Complete los datos del tercero seg\xfan los campos requeridos por la plantilla seleccionada"})]}),(0,Kn.jsxs)("div",{className:"steps-progress",children:[(0,Kn.jsxs)("div",{className:"step-indicator ".concat("template"===l?"active":c?"completed":""),children:[(0,Kn.jsx)("span",{className:"step-number",children:"1"}),(0,Kn.jsx)("span",{className:"step-label",children:"Plantilla"})]}),(0,Kn.jsx)("div",{className:"step-connector"}),(0,Kn.jsxs)("div",{className:"step-indicator ".concat("role"===l?"active":h?"completed":""),children:[(0,Kn.jsx)("span",{className:"step-number",children:"2"}),(0,Kn.jsx)("span",{className:"step-label",children:"Rol"})]}),(0,Kn.jsx)("div",{className:"step-connector"}),(0,Kn.jsxs)("div",{className:"step-indicator ".concat("fields"===l?"active":""),children:[(0,Kn.jsx)("span",{className:"step-number",children:"3"}),(0,Kn.jsx)("span",{className:"step-label",children:"Datos"})]})]}),w&&(0,Kn.jsx)("div",{className:"alert alert-error",children:w}),S&&(0,Kn.jsx)("div",{className:"alert alert-success",children:S}),y&&"template"!==l&&(0,Kn.jsxs)("div",{className:"loading-overlay",children:[(0,Kn.jsx)("div",{className:"spinner"}),(0,Kn.jsx)("p",{children:"Procesando..."})]}),"template"===l&&(0,Kn.jsxs)("div",{className:"step-content",children:[(0,Kn.jsxs)("div",{className:"step-header",children:[(0,Kn.jsx)("h3",{children:"Paso 1: Seleccionar Plantilla"}),(0,Kn.jsx)("p",{children:"Seleccione la plantilla para la cual desea crear el tercero"})]}),N?(0,Kn.jsx)("div",{className:"loading",children:"Cargando plantillas..."}):(0,Kn.jsx)("div",{className:"templates-grid",children:i.map(e=>(0,Kn.jsxs)("div",{className:"template-card ".concat((null===c||void 0===c?void 0:c._id)===e._id?"selected":""),onClick:()=>T(e),children:[(0,Kn.jsx)("div",{className:"template-icon",children:"\ud83d\udcc4"}),(0,Kn.jsxs)("div",{className:"template-info",children:[(0,Kn.jsx)("h4",{children:e.name}),(0,Kn.jsx)("span",{className:"template-category",children:e.category})]})]},e._id))}),0===i.length&&!N&&(0,Kn.jsx)("div",{className:"empty-state",children:(0,Kn.jsx)("p",{children:"No hay plantillas disponibles. Primero debe crear una plantilla."})})]}),"role"===l&&(0,Kn.jsxs)("div",{className:"step-content",children:[(0,Kn.jsxs)("div",{className:"step-header",children:[(0,Kn.jsx)("h3",{children:"Paso 2: Seleccionar Rol"}),(0,Kn.jsxs)("p",{children:['La plantilla "',null===c||void 0===c?void 0:c.name,'" tiene varios roles. Seleccione el rol del tercero:']})]}),(0,Kn.jsx)("div",{className:"roles-grid",children:m&&Object.entries(m.roles).map(e=>{let[a,t]=e;return(0,Kn.jsxs)("div",{className:"role-card ".concat(h===a?"selected":""),onClick:()=>(e=>{m&&(f(e),g(m.roles[e]),s("fields"))})(a),children:[(0,Kn.jsx)("div",{className:"role-icon",children:"\ud83d\udc64"}),(0,Kn.jsxs)("div",{className:"role-info",children:[(0,Kn.jsx)("h4",{children:t.role_label}),(0,Kn.jsxs)("span",{className:"role-fields",children:[t.total_fields," campos"]})]})]},a)})}),(0,Kn.jsx)("div",{className:"step-actions",children:(0,Kn.jsx)("button",{type:"button",className:"btn-secondary",onClick:()=>s("template"),children:"Volver"})})]}),"fields"===l&&(()=>{if(!v||!m)return null;const e=[...m.base_fields,...v.fields].filter(e=>"identification"===e.category),a=v.fields.filter(e=>e.supplier_field),t=v.fields.filter(e=>e.is_custom_field);return(0,Kn.jsxs)("div",{className:"step-content",children:[(0,Kn.jsxs)("div",{className:"step-header",children:[(0,Kn.jsx)("h3",{children:"Paso 3: Completar Datos"}),(0,Kn.jsxs)("p",{children:["Plantilla: ",(0,Kn.jsx)("strong",{children:null===c||void 0===c?void 0:c.name})," | Rol: ",(0,Kn.jsx)("strong",{children:v.role_label})]})]}),(0,Kn.jsxs)("form",{onSubmit:R,className:"fields-form",children:[(0,Kn.jsxs)("div",{className:"field-section",children:[(0,Kn.jsx)("h4",{children:"Identificaci\xf3n"}),(0,Kn.jsx)("div",{className:"fields-grid",children:e.map(e=>(0,Kn.jsxs)("div",{className:"field-group",children:[(0,Kn.jsxs)("label",{className:"field-label",children:[e.field_label,e.required&&(0,Kn.jsx)("span",{className:"required",children:"*"})]}),L(e)]},e.field_name))})]}),a.length>0&&(0,Kn.jsxs)("div",{className:"field-section",children:[(0,Kn.jsx)("h4",{children:"Datos del Tercero"}),(0,Kn.jsx)("div",{className:"fields-grid",children:a.map(e=>(0,Kn.jsxs)("div",{className:"field-group",children:[(0,Kn.jsxs)("label",{className:"field-label",children:[e.field_label,e.required&&(0,Kn.jsx)("span",{className:"required",children:"*"})]}),e.description&&(0,Kn.jsx)("small",{className:"field-description",children:e.description}),L(e)]},e.field_name))})]}),t.length>0&&(0,Kn.jsxs)("div",{className:"field-section",children:[(0,Kn.jsx)("h4",{children:"Campos Espec\xedficos de la Plantilla"}),(0,Kn.jsx)("div",{className:"fields-grid",children:t.map(e=>(0,Kn.jsxs)("div",{className:"field-group",children:[(0,Kn.jsxs)("label",{className:"field-label",children:[e.field_label,e.required&&(0,Kn.jsx)("span",{className:"required",children:"*"})]}),e.description&&(0,Kn.jsx)("small",{className:"field-description",children:e.description}),L(e),(0,Kn.jsx)("small",{className:"field-marker",children:e.original_marker})]},e.field_name))})]}),(0,Kn.jsxs)("div",{className:"form-actions",children:[(0,Kn.jsx)("button",{type:"button",className:"btn-secondary",onClick:()=>Object.keys(m.roles).length>1?s("role"):s("template"),children:"Volver"}),(0,Kn.jsx)("button",{type:"submit",className:"btn-primary",disabled:y,children:y?"Guardando...":"Crear Tercero"})]})]})]})})(),t&&(0,Kn.jsx)("div",{className:"cancel-action",children:(0,Kn.jsx)("button",{type:"button",className:"btn-link",onClick:t,children:"Cancelar"})})]})},wr={Colombia:["Bogot\xe1","Medell\xedn","Cali","Barranquilla","Cartagena","C\xfacuta","Bucaramanga","Pereira","Santa Marta","Ibagu\xe9","Pasto","Manizales","Neiva","Villavicencio","Armenia","Valledupar","Monter\xeda","Popay\xe1n","Sincelejo","Tunja"],"Estados Unidos":["Nueva York","Los \xc1ngeles","Chicago","Houston","Phoenix","Filadelfia","San Antonio","San Diego","Dallas","San Jos\xe9","Austin","Jacksonville","Fort Worth","Columbus","Charlotte"],"M\xe9xico":["Ciudad de M\xe9xico","Guadalajara","Monterrey","Puebla","Tijuana","Le\xf3n","Ju\xe1rez","Zapopan","M\xe9rida","San Luis Potos\xed","Aguascalientes","Hermosillo","Saltillo","Mexicali","Culiac\xe1n"],"Espa\xf1a":["Madrid","Barcelona","Valencia","Sevilla","Zaragoza","M\xe1laga","Murcia","Palma","Las Palmas","Bilbao","Alicante","C\xf3rdoba","Valladolid","Vigo","Gij\xf3n"],Argentina:["Buenos Aires","C\xf3rdoba","Rosario","Mendoza","La Plata","San Miguel de Tucum\xe1n","Mar del Plata","Salta","Santa Fe","San Juan","Resistencia","Santiago del Estero","Corrientes","Posadas","Bah\xeda Blanca"],Chile:["Santiago","Valpara\xedso","Concepci\xf3n","La Serena","Antofagasta","Temuco","Rancagua","Talca","Arica","Chill\xe1n","Iquique","Los \xc1ngeles","Puerto Montt","Coquimbo","Osorno"],"Per\xfa":["Lima","Arequipa","Trujillo","Chiclayo","Piura","Iquitos","Cusco","Huancayo","Chimbote","Tacna","Juliaca","Ica","Sullana","Ayacucho","Cajamarca"],Ecuador:["Quito","Guayaquil","Cuenca","Santo Domingo","Machala","Dur\xe1n","Manta","Portoviejo","Loja","Ambato","Esmeraldas","Quevedo","Riobamba","Milagro","Ibarra"],Brasil:["S\xe3o Paulo","R\xedo de Janeiro","Brasilia","Salvador","Fortaleza","Belo Horizonte","Manaos","Curitiba","Recife","Porto Alegre","Bel\xe9m","Goi\xe2nia","Guarulhos","Campinas","S\xe3o Lu\xeds"],Venezuela:["Caracas","Maracaibo","Valencia","Barquisimeto","Maracay","Ciudad Guayana","Barcelona","Matur\xedn","Puerto La Cruz","Petare","Turmero","Ciudad Bol\xedvar","M\xe9rida","Santa Teresa","Valera"],"Panam\xe1":["Ciudad de Panam\xe1","San Miguelito","Tocumen","David","Arraij\xe1n","Col\xf3n","Las Cumbres","La Chorrera","Pacora","Santiago","Chitr\xe9","Penonom\xe9","Changuinola","Aguadulce","Bocas del Toro"],"Costa Rica":["San Jos\xe9","Lim\xf3n","San Francisco","Alajuela","Heredia","Cartago","Puntarenas","Liberia","Para\xedso","Curridabat","San Vicente","San Isidro","Desamparados","Purral","San Felipe"]},Cr=()=>{var e,a,t;const[n,l]=(0,r.useState)([]),[s,i]=(0,r.useState)([]),[o,c]=(0,r.useState)(""),[d,m]=(0,r.useState)("all"),[p,h]=(0,r.useState)(!0),[f,v]=(0,r.useState)(!1),[g,x]=(0,r.useState)(!1),[b,y]=(0,r.useState)(!1),[j,N]=(0,r.useState)(null),[_,w]=(0,r.useState)([]),[C,S]=(0,r.useState)([]),[k,E]=(0,r.useState)({identification_type:"",identification_number:"",id_issue_city:"",legal_name:"",legal_name_short:"",full_name:"",legal_representative_name:"",legal_representative_id_type:"CC",legal_representative_id_number:"",licensee_name:"",email:"",phone:"",address:"",city:"",country:"Colombia",third_party_type:"",custom_fields:{}});(0,r.useEffect)(()=>{console.log("\ud83d\udd35 Suppliers component loaded - VERSION 2025-11-28-01:00 with custom fields for employees"),R(),P(),T()},[]);const T=async()=>{try{const e=(await Qn.get("/users")).data||[];console.log("\ud83d\udc65 System users loaded:",e.length),S(e)}catch(e){console.error("Error fetching system users:",e),S([])}};(0,r.useEffect)(()=>{let e=n;if("all"!==d&&(e=e.filter(e=>{var a;return(null===(a=e.third_party_type)||void 0===a?void 0:a.code)===d})),""!==o.trim()){const a=o.toLowerCase();e=e.filter(e=>e.legal_name.toLowerCase().includes(a)||e.identification_number.toLowerCase().includes(a)||e.email&&e.email.toLowerCase().includes(a))}i(e)},[o,d,n]);const P=async()=>{try{const e="?t=".concat(Date.now()),a=(await Qn.get("/suppliers/types".concat(e))).data.types||[];console.log("\ud83d\udd0d [DEBUG] Tipos de terceros recibidos:",a.length),console.log("\ud83d\udccb [DEBUG] C\xf3digos:",a.map(e=>e.code).join(", ")),console.log("\u2705 [DEBUG] Tiene Propiedad Horizontal (ph):",a.some(e=>"ph"===e.code)),console.log("\u2705 [DEBUG] Tiene Contador PH (contador_ph):",a.some(e=>"contador_ph"===e.code)),w(a)}catch(e){console.error("Error fetching third party types:",e)}},R=async()=>{try{const e=(await Qn.get("/suppliers")).data.suppliers||[],a=await Promise.all(e.map(async e=>{try{const a=await Qn.get("/suppliers/".concat(e._id,"/check-references")),{references:t}=a.data;return u(u({},e),{},{canDelete:t.canDelete,hasReferences:t.hasReferences,referenceDetails:t.details})}catch(a){return console.error("Error checking references for supplier ".concat(e._id,":"),a),u(u({},e),{},{canDelete:!1,hasReferences:!1})}}));l(a)}catch(e){console.error("Error fetching suppliers:",e)}finally{h(!1)}},L=async()=>{if(null!==j&&void 0!==j&&j._id)try{var e;console.log("\ud83d\udd04 Recargando supplier actual:",j._id);const a=await Qn.get("/suppliers/".concat(j._id)),t=a.data.supplier||a.data;console.log("\ud83d\udce6 Response completo:",a.data),console.log("\ud83d\udce6 Supplier extra\xeddo:",t),console.log("\ud83d\udce6 Custom fields del backend:",t.custom_fields),console.log("\ud83d\udce6 identification_type:",t.identification_type),console.log("\ud83d\udce6 identification_number:",t.identification_number),console.log("\ud83d\udce6 legal_name:",t.legal_name),console.log("\ud83d\udce6 third_party_type:",t.third_party_type),N(t);const n=t.country||"Colombia",r={identification_type:t.identification_type,identification_number:t.identification_number,id_issue_city:t.id_issue_city||"",legal_name:t.legal_name,legal_name_short:t.legal_name_short,full_name:t.legal_name,legal_representative_name:t.legal_representative_name,legal_representative_id_type:t.legal_representative_id_type,legal_representative_id_number:t.legal_representative_id_number,licensee_name:t.licensee_name||"",email:t.email||"",phone:t.phone||"",address:t.address||"",city:t.city||"",country:n,third_party_type:(null===(e=t.third_party_type)||void 0===e?void 0:e._id)||"",custom_fields:t.custom_fields||{}};console.log("\ud83d\udcdd Nuevo formData completo:",r),console.log("\ud83d\udcdd Nuevo formData.custom_fields:",r.custom_fields),console.log("\ud83d\udcdd Nuevo formData.third_party_type:",r.third_party_type),E(r),console.log("\u2705 Supplier recargado exitosamente - formData actualizado")}catch(a){console.error("\u274c Error recargando supplier:",a)}},A=e=>{const a=wr[e]||[];E(u(u({},k),{},{country:e,city:a.length>0?a[0]:""}))},D=()=>{E({identification_type:"NIT",identification_number:"",id_issue_city:"",legal_name:"",legal_name_short:"",full_name:"",legal_representative_name:"",legal_representative_id_type:"CC",legal_representative_id_number:"",licensee_name:"",email:"",phone:"",address:"",city:"",country:"Colombia",third_party_type:"",custom_fields:{}})},z=()=>{const e="NIT"===k.identification_type;if(console.log("=== VALIDACI\xd3N DE FORMULARIO ==="),console.log("Tipo de tercero:",k.third_party_type),console.log("Tipos disponibles:",_.length),console.log("Tipo de identificaci\xf3n:",k.identification_type),console.log("N\xfamero de identificaci\xf3n:",k.identification_number),console.log("Es empresa:",e),console.log("Nombre completo:",k.full_name),console.log("Raz\xf3n social:",k.legal_name),_.length>0&&!k.third_party_type)return console.log("\u274c Falta tipo de tercero"),!1;if(!k.identification_type||!k.identification_number)return console.log("\u274c Falta tipo o n\xfamero de identificaci\xf3n"),!1;if(e){const e=!!(k.legal_name&&k.legal_name_short&&k.legal_representative_name&&k.legal_representative_id_type&&k.legal_representative_id_number);return console.log("Validaci\xf3n empresa:",e),e}{const e=!(!k.full_name||!k.full_name.trim());return console.log("Validaci\xf3n persona natural:",e),e}},O=()=>{const e="NIT"===k.identification_type,a=[];return _.length>0&&!k.third_party_type&&a.push("Tipo de Tercero"),k.identification_type||a.push("Tipo de Identificaci\xf3n"),k.identification_number||a.push("N\xfamero de Identificaci\xf3n"),e?(k.legal_name||a.push("Raz\xf3n Social"),k.legal_name_short||a.push("Nombre Corto"),k.legal_representative_name||a.push("Nombre del Representante Legal"),k.legal_representative_id_type||a.push("Tipo de ID del Representante"),k.legal_representative_id_number||a.push("N\xfamero de ID del Representante")):k.full_name&&k.full_name.trim()||a.push("Nombre Completo"),a};return p?(0,Kn.jsx)("div",{className:"loading",children:"Cargando terceros..."}):(0,Kn.jsxs)("div",{className:"suppliers",children:[(0,Kn.jsx)("div",{className:"gradient-header",children:(0,Kn.jsxs)("div",{className:"header-content",children:[(0,Kn.jsxs)("div",{className:"header-text",children:[(0,Kn.jsx)("h1",{children:"Gesti\xf3n de Terceros"}),(0,Kn.jsx)("p",{children:"Administra proveedores, clientes y contactos de tu organizaci\xf3n"})]}),(0,Kn.jsxs)("div",{className:"header-buttons",children:[(0,Kn.jsx)("button",{className:"btn-create-supplier btn-template-based",onClick:()=>y(!0),title:"Crear tercero seleccionando primero la plantilla para conocer los campos requeridos",children:"+ Tercero para Plantilla"}),(0,Kn.jsx)("button",{className:"btn-create-supplier",onClick:()=>v(!0),title:"Crear tercero con campos gen\xe9ricos",children:"+ Tercero Gen\xe9rico"})]})]})}),(0,Kn.jsx)("div",{className:"filters-container",children:(0,Kn.jsxs)("div",{className:"filters-row",children:[(0,Kn.jsxs)("select",{className:"filter-select",value:d,onChange:e=>m(e.target.value),children:[(0,Kn.jsx)("option",{value:"all",children:"Todos los tipos"}),_.map(e=>(0,Kn.jsxs)("option",{value:e.code,children:[e.icon," ",e.label]},e._id))]}),(0,Kn.jsx)("input",{type:"text",className:"search-input",placeholder:"Buscar por raz\xf3n social, n\xfamero ID o email...",value:o,onChange:e=>c(e.target.value)}),(0,Kn.jsxs)("div",{className:"results-badge",children:[s.length," ",1===s.length?"tercero":"terceros"]})]})}),(0,Kn.jsx)("div",{className:"suppliers-list",children:0===s.length?(0,Kn.jsxs)("div",{className:"empty-state",children:[(0,Kn.jsx)("h3",{children:0===n.length?"No hay terceros":"No se encontraron terceros"}),(0,Kn.jsx)("p",{children:0===n.length?"Agrega tu primer tercero para comenzar":"Intenta con otro t\xe9rmino de b\xfasqueda"})]}):(0,Kn.jsx)("div",{className:"table-wrapper",children:(0,Kn.jsxs)("table",{className:"suppliers-table-compact",children:[(0,Kn.jsx)("thead",{children:(0,Kn.jsxs)("tr",{children:[(0,Kn.jsx)("th",{children:"Estado"}),(0,Kn.jsx)("th",{children:"Tipo"}),(0,Kn.jsx)("th",{children:"Informaci\xf3n del Tercero"}),(0,Kn.jsx)("th",{children:"Identificaci\xf3n"}),(0,Kn.jsx)("th",{children:"Empresa"}),(0,Kn.jsx)("th",{children:"Contacto"}),(0,Kn.jsx)("th",{children:"Acciones"})]})}),(0,Kn.jsx)("tbody",{children:s.map(e=>{var a,t;return(0,Kn.jsxs)("tr",{className:e.active?"":"inactive-row",children:[(0,Kn.jsx)("td",{children:(0,Kn.jsx)("span",{className:"status-badge ".concat("approved"===e.approval_status?"approved":"pending"===e.approval_status?"pending":"rejected"),children:"approved"===e.approval_status?"\u2713 Aprobado":"pending"===e.approval_status?"\u23f3 Pendiente":"\u2717 Rechazado"})}),(0,Kn.jsx)("td",{className:"type-col",children:e.third_party_type?(0,Kn.jsxs)("span",{className:"type-badge",title:e.third_party_type.description,children:[e.third_party_type.icon," ",e.third_party_type.label]}):(0,Kn.jsx)("span",{className:"no-type",children:"-"})}),(0,Kn.jsxs)("td",{className:"supplier-info-col",children:[(0,Kn.jsxs)("div",{className:"supplier-name",children:[(0,Kn.jsx)("strong",{children:e.legal_name}),e.legal_name_short&&e.legal_name_short!==e.legal_name&&(0,Kn.jsx)("small",{children:e.legal_name_short})]}),e.legal_representative_name&&(0,Kn.jsxs)("div",{className:"representative-compact",children:[(0,Kn.jsx)("span",{className:"rep-label",children:"Rep. Legal:"})," ",e.legal_representative_name]})]}),(0,Kn.jsx)("td",{className:"id-col",children:(0,Kn.jsxs)("div",{className:"id-info",children:[(0,Kn.jsx)("span",{className:"id-type",children:e.identification_type}),(0,Kn.jsx)("span",{className:"id-number",children:e.identification_number})]})}),(0,Kn.jsx)("td",{className:"company-col",children:e.company?(0,Kn.jsx)("span",{className:"company-badge",title:e.company.name,children:e.company.name}):(0,Kn.jsx)("span",{className:"no-company",children:"-"})}),(0,Kn.jsx)("td",{className:"contact-col",children:(0,Kn.jsxs)("div",{className:"contact-info",children:[e.email&&(0,Kn.jsx)("div",{className:"contact-email",children:e.email}),e.phone&&(0,Kn.jsx)("div",{className:"contact-phone",children:e.phone}),!e.email&&!e.phone&&(0,Kn.jsx)("span",{className:"no-contact",children:"Sin contacto"})]})}),(0,Kn.jsx)("td",{className:"actions-col",children:(0,Kn.jsxs)("div",{className:"supplier-actions",children:[(0,Kn.jsx)("button",{className:"btn-action btn-edit",onClick:()=>(e=>{var a;N(e);const t=e.country||"Colombia";E({identification_type:e.identification_type,identification_number:e.identification_number,id_issue_city:e.id_issue_city||"",legal_name:e.legal_name,legal_name_short:e.legal_name_short,full_name:e.legal_name,legal_representative_name:e.legal_representative_name,legal_representative_id_type:e.legal_representative_id_type,legal_representative_id_number:e.legal_representative_id_number,licensee_name:e.licensee_name||"",email:e.email||"",phone:e.phone||"",address:e.address||"",city:e.city||"",country:t,third_party_type:(null===(a=e.third_party_type)||void 0===a?void 0:a._id)||"",custom_fields:e.custom_fields||{}}),x(!0)})(e),title:"Editar informaci\xf3n de ".concat(e.legal_name),children:(0,Kn.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,Kn.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,Kn.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})}),(0,Kn.jsx)("button",{className:"btn-action ".concat(e.active?"btn-toggle-off":"btn-toggle-on"),onClick:()=>(async e=>{try{await Qn.patch("/suppliers/".concat(e._id,"/toggle-status")),await R()}catch(n){var a,t;console.error("Error toggling supplier status:",n),alert((null===(a=n.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.error)||"Error al cambiar estado del proveedor")}})(e),title:e.hasReferences?"\u26a0\ufe0f Este tercero tiene ".concat((null===(a=e.referenceDetails)||void 0===a?void 0:a.contracts)||0," contrato(s) y ").concat((null===(t=e.referenceDetails)||void 0===t?void 0:t.templates)||0," plantilla(s) asociados. Solo puede ser desactivado, no eliminado."):e.active?"Desactivar a ".concat(e.legal_name," (ya no aparecer\xe1 en listados activos)"):"Activar a ".concat(e.legal_name," (volver\xe1 a aparecer en listados)"),children:e.active?(0,Kn.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,Kn.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,Kn.jsx)("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),(0,Kn.jsx)("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]}):(0,Kn.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,Kn.jsx)("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),(0,Kn.jsx)("polyline",{points:"22 4 12 14.01 9 11.01"})]})}),e.canDelete&&(0,Kn.jsx)("button",{className:"btn-action btn-delete",onClick:()=>(async e=>{try{const a=await Qn.get("/suppliers/".concat(e._id,"/check-references")),{references:t}=a.data;if(!t.canDelete){const e="No se puede eliminar este tercero porque tiene:\n"+"- ".concat(t.details.contracts," contrato(s) asociado(s)\n")+"- ".concat(t.details.templates," plantilla(s) del mismo tipo\n\n")+"Desact\xedvalo en lugar de eliminarlo para mantener la integridad de los datos.";return void alert(e)}if(!window.confirm('\xbfEst\xe1 seguro de eliminar el tercero "'.concat(e.legal_name,'"?\n\nEsta acci\xf3n no se puede deshacer.')))return;await Qn.delete("/suppliers/".concat(e._id)),await R()}catch(l){var a,t,n,r;console.error("Error deleting supplier:",l),null!==(a=l.response)&&void 0!==a&&null!==(t=a.data)&&void 0!==t&&t.suggestion?alert("".concat(l.response.data.error,"\n\n").concat(l.response.data.suggestion)):alert((null===(n=l.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.error)||"Error al eliminar tercero")}})(e),title:"\ud83d\uddd1\ufe0f Eliminar permanentemente a ".concat(e.legal_name,". Esta acci\xf3n no se puede deshacer."),children:(0,Kn.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,Kn.jsx)("polyline",{points:"3 6 5 6 21 6"}),(0,Kn.jsx)("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),(0,Kn.jsx)("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),(0,Kn.jsx)("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]})})]})})]},e._id)})})]})})}),f&&(0,Kn.jsx)("div",{className:"modal-overlay",children:(0,Kn.jsxs)("div",{className:"modal modal-large",children:[(0,Kn.jsx)("h3",{children:"Crear Nuevo Tercero"}),(0,Kn.jsxs)("div",{className:"modal-content",children:[(0,Kn.jsxs)("div",{className:"form-section",children:[(0,Kn.jsx)("h4",{children:"Informaci\xf3n del Tercero"}),_.length>0&&(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Tipo de Tercero:"}),(0,Kn.jsxs)("select",{value:k.third_party_type,onChange:e=>{const a=e.target.value;if(!a)return void E(u(u({},k),{},{third_party_type:""}));const t=_.find(e=>e._id===a),n=null===t||void 0===t?void 0:t.default_identification_types;let r="CC";n&&Array.isArray(n)&&n.length>0&&(r=n[0]);const l="NIT"===r||"NIT"===r;console.log("=== CAMBIO DE TIPO DE TERCERO ==="),console.log("Tipo seleccionado:",null===t||void 0===t?void 0:t.label),console.log("allowedIdTypes:",n),console.log("newIdType asignado:",r),console.log("Es empresa:",l),E(u(u({},k),{},{third_party_type:a,identification_type:r,legal_name:l?k.legal_name:"",legal_name_short:l?k.legal_name_short:"",legal_representative_name:l?k.legal_representative_name:"",legal_representative_id_type:l?k.legal_representative_id_type:"CC",legal_representative_id_number:l?k.legal_representative_id_number:"",licensee_name:l?k.licensee_name:"",full_name:l?"":k.full_name}))},children:[(0,Kn.jsx)("option",{value:"",children:"Seleccione un tipo (opcional)"}),_.map(e=>(0,Kn.jsxs)("option",{value:e._id,children:[e.icon," ",e.label]},e._id))]}),k.third_party_type&&(0,Kn.jsx)("small",{style:{display:"block",marginTop:"0.5rem",color:"#7f8c8d"},children:null===(e=_.find(e=>e._id===k.third_party_type))||void 0===e?void 0:e.description})]}),(0,Kn.jsxs)("div",{className:"form-row",children:[(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Tipo de Identificaci\xf3n: *"}),(0,Kn.jsx)("select",{value:k.identification_type,onChange:e=>E(u(u({},k),{},{identification_type:e.target.value,legal_name:"",legal_name_short:"",full_name:"",legal_representative_name:"",legal_representative_id_type:"CC",legal_representative_id_number:"",licensee_name:""})),required:!0,children:(()=>{const e=_.find(e=>e._id===k.third_party_type),a=null===e||void 0===e?void 0:e.default_identification_types;return a&&a.length>0?a.map(e=>(0,Kn.jsx)("option",{value:e,children:e},e)):(0,Kn.jsxs)(Kn.Fragment,{children:[!k.identification_type&&(0,Kn.jsx)("option",{value:"",children:"Seleccione tipo de identificaci\xf3n"}),(0,Kn.jsx)("option",{value:"NIT",children:"NIT (Empresa)"}),(0,Kn.jsx)("option",{value:"CC",children:"C\xe9dula de Ciudadan\xeda"}),(0,Kn.jsx)("option",{value:"CE",children:"C\xe9dula de Extranjer\xeda"}),(0,Kn.jsx)("option",{value:"Pasaporte",children:"Pasaporte"})]})})()}),k.third_party_type&&(()=>{const e=_.find(e=>e._id===k.third_party_type),a=null===e||void 0===e?void 0:e.default_identification_types;return a&&a.length>0?(0,Kn.jsxs)("small",{style:{display:"block",marginTop:"0.25rem",color:"#2563eb",fontSize:"0.85rem"},children:["Tipos permitidos para este tipo de tercero: ",a.join(", ")]}):null})()]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"N\xfamero de Identificaci\xf3n: *"}),(0,Kn.jsx)("input",{type:"text",value:k.identification_number,onChange:e=>E(u(u({},k),{},{identification_number:e.target.value})),required:!0})]})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Ciudad de Expedici\xf3n:"}),(0,Kn.jsx)("input",{type:"text",value:k.id_issue_city,onChange:e=>E(u(u({},k),{},{id_issue_city:e.target.value})),placeholder:"Ej: Bogot\xe1, Medell\xedn, etc."})]}),"NIT"===k.identification_type&&(0,Kn.jsx)(Kn.Fragment,{children:"NIT"===k.identification_type?(0,Kn.jsxs)(Kn.Fragment,{children:[(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Nombre de la Propiedad Horizontal: *"}),(0,Kn.jsx)("input",{type:"text",value:k.legal_name,onChange:e=>E(u(u({},k),{},{legal_name:e.target.value,legal_name_short:e.target.value})),required:!0})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Nombre del Licenciatario:"}),(0,Kn.jsx)("input",{type:"text",value:k.licensee_name,onChange:e=>E(u(u({},k),{},{licensee_name:e.target.value}))})]})]}):(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Raz\xf3n Social / Nombre: *"}),(0,Kn.jsx)("input",{type:"text",value:k.legal_name,onChange:e=>E(u(u({},k),{},{legal_name:e.target.value,legal_name_short:e.target.value})),required:!0,placeholder:"Ej: Constructora ABC S.A.S."})]})}),"NIT"!==k.identification_type&&(0,Kn.jsx)("div",{className:"form-row",children:(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Nombre Completo: *"}),(0,Kn.jsx)("input",{type:"text",value:k.full_name,onChange:e=>E(u(u({},k),{},{full_name:e.target.value})),required:!0,placeholder:"Ej: Juan P\xe9rez Garc\xeda"})]})})]}),"NIT"===k.identification_type&&(0,Kn.jsxs)("div",{className:"form-section",children:[(0,Kn.jsx)("h4",{children:"Representante Legal"}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Nombre del Representante Legal: *"}),(0,Kn.jsx)("input",{type:"text",value:k.legal_representative_name,onChange:e=>E(u(u({},k),{},{legal_representative_name:e.target.value})),required:!0})]}),(0,Kn.jsxs)("div",{className:"form-row",children:[(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Tipo de Identificaci\xf3n: *"}),(0,Kn.jsxs)("select",{value:k.legal_representative_id_type,onChange:e=>E(u(u({},k),{},{legal_representative_id_type:e.target.value})),required:!0,children:[(0,Kn.jsx)("option",{value:"CC",children:"C\xe9dula de Ciudadan\xeda"}),(0,Kn.jsx)("option",{value:"CE",children:"C\xe9dula de Extranjer\xeda"}),(0,Kn.jsx)("option",{value:"Pasaporte",children:"Pasaporte"})]})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"N\xfamero de Identificaci\xf3n: *"}),(0,Kn.jsx)("input",{type:"text",value:k.legal_representative_id_number,onChange:e=>E(u(u({},k),{},{legal_representative_id_number:e.target.value})),required:!0})]})]})]}),(0,Kn.jsxs)("div",{className:"form-section",children:[(0,Kn.jsx)("h4",{children:"Informaci\xf3n de Contacto (Opcional)"}),(0,Kn.jsxs)("div",{className:"form-row",children:[(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Email:"}),(0,Kn.jsx)("input",{type:"email",value:k.email,onChange:e=>E(u(u({},k),{},{email:e.target.value}))})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Tel\xe9fono:"}),(0,Kn.jsx)("input",{type:"text",value:k.phone,onChange:e=>E(u(u({},k),{},{phone:e.target.value}))})]})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Direcci\xf3n:"}),(0,Kn.jsx)("input",{type:"text",value:k.address,onChange:e=>E(u(u({},k),{},{address:e.target.value}))})]}),(0,Kn.jsxs)("div",{className:"form-row",children:[(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Pa\xeds:"}),(0,Kn.jsx)("select",{value:k.country,onChange:e=>A(e.target.value),children:Object.keys(wr).map(e=>(0,Kn.jsx)("option",{value:e,children:e},e))})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Ciudad:"}),(0,Kn.jsxs)("select",{value:k.city,onChange:e=>E(u(u({},k),{},{city:e.target.value})),children:[(0,Kn.jsx)("option",{value:"",children:"Seleccione una ciudad"}),(wr[k.country||"Colombia"]||[]).map(e=>(0,Kn.jsx)("option",{value:e,children:e},e))]})]})]})]})]}),(0,Kn.jsxs)("div",{className:"modal-actions",children:[(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>{v(!1),D()},children:"Cancelar"}),(0,Kn.jsx)("button",{className:"btn-primary",onClick:async()=>{const e="NIT"===k.identification_type;if(e){if(!k.legal_name.trim())return void alert("La raz\xf3n social es requerida");if(!k.legal_representative_name.trim())return void alert("El nombre del representante legal es requerido")}else if(!k.full_name.trim())return void alert("El nombre completo es requerido");try{const a=u(u({},k),{},e?{full_name:void 0}:{legal_name:k.full_name,legal_name_short:k.full_name,legal_representative_name:void 0,legal_representative_id_type:void 0,legal_representative_id_number:void 0});await Qn.post("/suppliers",a),await R(),v(!1),D()}catch(n){var a,t;console.error("Error creating supplier:",n),alert((null===(a=n.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.error)||"Error al crear proveedor")}},disabled:!z(),title:z()?"":"Campos faltantes: ".concat(O().join(", ")),children:"Crear Tercero"})]}),!z()&&(0,Kn.jsxs)("div",{style:{marginTop:"1rem",padding:"1rem",background:"#fff3cd",border:"1px solid #ffc107",borderRadius:"8px",color:"#856404"},children:[(0,Kn.jsx)("strong",{children:"\u26a0\ufe0f Campos obligatorios faltantes:"}),(0,Kn.jsxs)("div",{style:{fontSize:"0.85rem",marginTop:"0.5rem",color:"#666"},children:["Tipo de ID actual: ",(0,Kn.jsx)("strong",{children:k.identification_type||"(vac\xedo)"})]}),(0,Kn.jsx)("ul",{style:{marginTop:"0.5rem",marginBottom:0,paddingLeft:"1.5rem"},children:O().map((e,a)=>(0,Kn.jsx)("li",{children:e},a))})]})]})}),g&&j&&(0,Kn.jsx)("div",{className:"modal-overlay",children:(0,Kn.jsxs)("div",{className:"modal modal-large",children:[(0,Kn.jsx)("h3",{children:"Editar Tercero"}),(0,Kn.jsxs)("div",{className:"modal-content",children:[(0,Kn.jsxs)("div",{className:"form-section",children:[(0,Kn.jsx)("h4",{children:"Informaci\xf3n del Tercero"}),_.length>0&&(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Tipo de Tercero:"}),(0,Kn.jsxs)("select",{value:k.third_party_type,onChange:e=>{const a=e.target.value;if(!a)return void E(u(u({},k),{},{third_party_type:""}));const t=_.find(e=>e._id===a),n=null===t||void 0===t?void 0:t.default_identification_types;let r="CC";n&&Array.isArray(n)&&n.length>0&&(r=n[0]);const l="NIT"===r||"NIT"===r;console.log("=== CAMBIO DE TIPO DE TERCERO ==="),console.log("Tipo seleccionado:",null===t||void 0===t?void 0:t.label),console.log("allowedIdTypes:",n),console.log("newIdType asignado:",r),console.log("Es empresa:",l),E(u(u({},k),{},{third_party_type:a,identification_type:r,legal_name:l?k.legal_name:"",legal_name_short:l?k.legal_name_short:"",legal_representative_name:l?k.legal_representative_name:"",legal_representative_id_type:l?k.legal_representative_id_type:"CC",legal_representative_id_number:l?k.legal_representative_id_number:"",licensee_name:l?k.licensee_name:"",full_name:l?"":k.full_name}))},children:[(0,Kn.jsx)("option",{value:"",children:"Seleccione un tipo (opcional)"}),_.map(e=>(0,Kn.jsxs)("option",{value:e._id,children:[e.icon," ",e.label]},e._id))]}),k.third_party_type&&(0,Kn.jsx)("small",{style:{display:"block",marginTop:"0.5rem",color:"#7f8c8d"},children:null===(a=_.find(e=>e._id===k.third_party_type))||void 0===a?void 0:a.description})]}),(0,Kn.jsxs)("div",{className:"form-row",children:[(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Tipo de Identificaci\xf3n: *"}),(0,Kn.jsx)("select",{value:k.identification_type,onChange:e=>E(u(u({},k),{},{identification_type:e.target.value,legal_name:"",legal_name_short:"",full_name:"",legal_representative_name:"",legal_representative_id_type:"CC",legal_representative_id_number:"",licensee_name:""})),required:!0,children:(()=>{const e=_.find(e=>e._id===k.third_party_type),a=null===e||void 0===e?void 0:e.default_identification_types;return a&&a.length>0?a.map(e=>(0,Kn.jsx)("option",{value:e,children:e},e)):(0,Kn.jsxs)(Kn.Fragment,{children:[!k.identification_type&&(0,Kn.jsx)("option",{value:"",children:"Seleccione tipo de identificaci\xf3n"}),(0,Kn.jsx)("option",{value:"NIT",children:"NIT (Empresa)"}),(0,Kn.jsx)("option",{value:"CC",children:"C\xe9dula de Ciudadan\xeda"}),(0,Kn.jsx)("option",{value:"CE",children:"C\xe9dula de Extranjer\xeda"}),(0,Kn.jsx)("option",{value:"Pasaporte",children:"Pasaporte"})]})})()}),k.third_party_type&&(()=>{const e=_.find(e=>e._id===k.third_party_type),a=null===e||void 0===e?void 0:e.default_identification_types;return a&&a.length>0?(0,Kn.jsxs)("small",{style:{display:"block",marginTop:"0.25rem",color:"#2563eb",fontSize:"0.85rem"},children:["Tipos permitidos para este tipo de tercero: ",a.join(", ")]}):null})()]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"N\xfamero de Identificaci\xf3n: *"}),(0,Kn.jsx)("input",{type:"text",value:k.identification_number,onChange:e=>E(u(u({},k),{},{identification_number:e.target.value})),required:!0})]})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Ciudad de Expedici\xf3n:"}),(0,Kn.jsx)("input",{type:"text",value:k.id_issue_city,onChange:e=>E(u(u({},k),{},{id_issue_city:e.target.value})),placeholder:"Ej: Bogot\xe1, Medell\xedn, etc."})]}),"NIT"===k.identification_type&&(0,Kn.jsx)(Kn.Fragment,{children:"NIT"===k.identification_type?(0,Kn.jsxs)(Kn.Fragment,{children:[(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Nombre de la Propiedad Horizontal: *"}),(0,Kn.jsx)("input",{type:"text",value:k.legal_name,onChange:e=>E(u(u({},k),{},{legal_name:e.target.value,legal_name_short:e.target.value})),required:!0})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Nombre del Licenciatario:"}),(0,Kn.jsx)("input",{type:"text",value:k.licensee_name,onChange:e=>E(u(u({},k),{},{licensee_name:e.target.value}))})]})]}):(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Raz\xf3n Social / Nombre: *"}),(0,Kn.jsx)("input",{type:"text",value:k.legal_name,onChange:e=>E(u(u({},k),{},{legal_name:e.target.value,legal_name_short:e.target.value})),required:!0,placeholder:"Ej: Constructora ABC S.A.S."})]})}),"NIT"!==k.identification_type&&(0,Kn.jsx)("div",{className:"form-row",children:(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Nombre Completo: *"}),(0,Kn.jsx)("input",{type:"text",value:k.full_name,onChange:e=>E(u(u({},k),{},{full_name:e.target.value})),required:!0,placeholder:"Ej: Juan P\xe9rez Garc\xeda"})]})})]}),"NIT"===k.identification_type&&(0,Kn.jsxs)("div",{className:"form-section",children:[(0,Kn.jsx)("h4",{children:"Representante Legal"}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Nombre del Representante Legal: *"}),(0,Kn.jsx)("input",{type:"text",value:k.legal_representative_name,onChange:e=>E(u(u({},k),{},{legal_representative_name:e.target.value})),required:!0})]}),(0,Kn.jsxs)("div",{className:"form-row",children:[(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Tipo de Identificaci\xf3n: *"}),(0,Kn.jsxs)("select",{value:k.legal_representative_id_type,onChange:e=>E(u(u({},k),{},{legal_representative_id_type:e.target.value})),required:!0,children:[(0,Kn.jsx)("option",{value:"CC",children:"C\xe9dula de Ciudadan\xeda"}),(0,Kn.jsx)("option",{value:"CE",children:"C\xe9dula de Extranjer\xeda"}),(0,Kn.jsx)("option",{value:"Pasaporte",children:"Pasaporte"})]})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"N\xfamero de Identificaci\xf3n: *"}),(0,Kn.jsx)("input",{type:"text",value:k.legal_representative_id_number,onChange:e=>E(u(u({},k),{},{legal_representative_id_number:e.target.value})),required:!0})]})]})]}),(0,Kn.jsxs)("div",{className:"form-section",children:[(0,Kn.jsx)("h4",{children:"Informaci\xf3n de Contacto (Opcional)"}),(0,Kn.jsxs)("div",{className:"form-row",children:[(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Email:"}),(0,Kn.jsx)("input",{type:"email",value:k.email,onChange:e=>E(u(u({},k),{},{email:e.target.value}))})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Tel\xe9fono:"}),(0,Kn.jsx)("input",{type:"text",value:k.phone,onChange:e=>E(u(u({},k),{},{phone:e.target.value}))})]})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Direcci\xf3n:"}),(0,Kn.jsx)("input",{type:"text",value:k.address,onChange:e=>E(u(u({},k),{},{address:e.target.value}))})]}),(0,Kn.jsxs)("div",{className:"form-row",children:[(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Pa\xeds:"}),(0,Kn.jsx)("select",{value:k.country,onChange:e=>A(e.target.value),children:Object.keys(wr).map(e=>(0,Kn.jsx)("option",{value:e,children:e},e))})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Ciudad:"}),(0,Kn.jsxs)("select",{value:k.city,onChange:e=>E(u(u({},k),{},{city:e.target.value})),children:[(0,Kn.jsx)("option",{value:"",children:"Seleccione una ciudad"}),(wr[k.country||"Colombia"]||[]).map(e=>(0,Kn.jsx)("option",{value:e,children:e},e))]})]})]})]}),k.third_party_type&&(()=>{const e=_.find(e=>e._id===k.third_party_type),a=(null===e||void 0===e?void 0:e.fields)||[];return 0===a.length?null:(0,Kn.jsxs)("div",{className:"form-section",children:[(0,Kn.jsxs)("h4",{children:["Campos de ",(null===e||void 0===e?void 0:e.label)||"Tercero"]}),(0,Kn.jsx)("div",{className:"form-row",style:{flexWrap:"wrap",gap:"1rem"},children:a.map(e=>{var a,t,n,r,l,s,i,o;return(0,Kn.jsxs)("div",{className:"form-group",style:{flex:"textarea"===e.field_type?"1 1 100%":"1 1 45%",minWidth:"200px"},children:[(0,Kn.jsxs)("label",{children:[e.label,":",e.required&&(0,Kn.jsx)("span",{style:{color:"red"},children:" *"})]}),"date"===e.field_type&&(0,Kn.jsx)("input",{type:"date",value:(null===(a=k.custom_fields)||void 0===a?void 0:a[e.name])||"",onChange:a=>{const t=a.target.value;E(u(u({},k),{},{custom_fields:u(u({},k.custom_fields),{},{[e.name]:t})}))},placeholder:e.placeholder||"mm/dd/yyyy",required:e.required,style:{padding:"0.5rem",fontSize:"1rem",width:"100%",border:"1px solid #ccc",borderRadius:"4px"}}),"user_select"===e.field_type&&(0,Kn.jsxs)("select",{value:(null===(t=k.custom_fields)||void 0===t?void 0:t[e.name])||"",onChange:a=>{E(u(u({},k),{},{custom_fields:u(u({},k.custom_fields),{},{[e.name]:a.target.value})}))},required:e.required,style:{padding:"0.5rem",fontSize:"1rem",width:"100%",border:"1px solid #ccc",borderRadius:"4px"},children:[(0,Kn.jsx)("option",{value:"",children:"Seleccione un usuario"}),C.map(e=>(0,Kn.jsxs)("option",{value:e._id,children:[e.name," (",e.email,")"]},e._id))]}),"select"===e.field_type&&(0,Kn.jsxs)("select",{value:(null===(n=k.custom_fields)||void 0===n?void 0:n[e.name])||"",onChange:a=>{E(u(u({},k),{},{custom_fields:u(u({},k.custom_fields),{},{[e.name]:a.target.value})}))},required:e.required,style:{padding:"0.5rem",fontSize:"1rem",width:"100%",border:"1px solid #ccc",borderRadius:"4px"},children:[(0,Kn.jsx)("option",{value:"",children:"Seleccione una opci\xf3n"}),(e.options||[]).map(e=>(0,Kn.jsx)("option",{value:e,children:e},e))]}),"textarea"===e.field_type&&(0,Kn.jsx)("textarea",{value:(null===(r=k.custom_fields)||void 0===r?void 0:r[e.name])||"",onChange:a=>{E(u(u({},k),{},{custom_fields:u(u({},k.custom_fields),{},{[e.name]:a.target.value})}))},placeholder:e.placeholder||"",required:e.required,rows:3,style:{padding:"0.5rem",fontSize:"1rem",width:"100%",border:"1px solid #ccc",borderRadius:"4px",resize:"vertical"}}),"checkbox"===e.field_type&&(0,Kn.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[(0,Kn.jsx)("input",{type:"checkbox",checked:!0===(null===(l=k.custom_fields)||void 0===l?void 0:l[e.name])||"true"===(null===(s=k.custom_fields)||void 0===s?void 0:s[e.name]),onChange:a=>{E(u(u({},k),{},{custom_fields:u(u({},k.custom_fields),{},{[e.name]:a.target.checked})}))},style:{width:"18px",height:"18px"}}),(0,Kn.jsx)("span",{style:{color:"#555"},children:e.placeholder||"S\xed"})]}),["text","number","email","phone"].includes(e.field_type)&&(0,Kn.jsx)("input",{type:"phone"===e.field_type?"tel":e.field_type,value:(null===(i=k.custom_fields)||void 0===i?void 0:i[e.name])||"",onChange:a=>{E(u(u({},k),{},{custom_fields:u(u({},k.custom_fields),{},{[e.name]:a.target.value})}))},placeholder:e.placeholder||"",required:e.required,style:{padding:"0.5rem",fontSize:"1rem",width:"100%",border:"1px solid #ccc",borderRadius:"4px"}}),"user_select"===e.field_type&&(null===(o=k.custom_fields)||void 0===o?void 0:o[e.name])&&(0,Kn.jsxs)("small",{style:{display:"block",marginTop:"0.25rem",color:"#666",fontSize:"0.85rem"},children:["ID seleccionado: ",k.custom_fields[e.name]]})]},e.name)})})]})})(),j._id&&(0,Kn.jsxs)("div",{className:"form-section",style:{marginTop:"2rem",borderTop:"2px solid #e0e0e0",paddingTop:"2rem"},children:[(0,Kn.jsx)("h4",{children:"Sugerencias de Campos"}),(0,Kn.jsx)(jr,{supplierId:j._id,onFieldsAdded:async()=>{await L()}})]}),j._id&&j.custom_fields&&Object.keys(j.custom_fields).length>0&&(0,Kn.jsx)("div",{className:"form-section",style:{marginTop:"1rem"},children:(0,Kn.jsx)(Nr,{supplierId:j._id,customFields:j.custom_fields,thirdPartyTypeId:null===(t=j.third_party_type)||void 0===t?void 0:t._id,onMergeComplete:async()=>{await L()}})})]}),(0,Kn.jsxs)("div",{className:"modal-actions",children:[(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>{x(!1),N(null),D()},children:"Cancelar"}),(0,Kn.jsx)("button",{className:"btn-primary",onClick:async()=>{if(!j)return;console.log("\ud83d\ude80 Iniciando actualizaci\xf3n de tercero"),console.log("\ud83d\udccb formData.custom_fields antes de enviar:",k.custom_fields);const e="NIT"===k.identification_type;if(e){if(!k.legal_name.trim())return void alert("La raz\xf3n social es requerida");if(!k.legal_representative_name.trim())return void alert("El nombre del representante legal es requerido")}else if(!k.full_name.trim())return void alert("El nombre completo es requerido");try{const a=u(u({},k),{},e?{full_name:void 0}:{legal_name:k.full_name,legal_name_short:k.full_name,legal_representative_name:void 0,legal_representative_id_type:void 0,legal_representative_id_number:void 0});console.log("\ud83d\udce4 dataToSend.custom_fields:",a.custom_fields),console.log("\ud83d\udd0d Todas las claves de custom_fields:",Object.keys(a.custom_fields||{}));const t=await Qn.put("/suppliers/".concat(j._id),a);console.log("\u2705 Tercero actualizado exitosamente"),console.log("\ud83d\udce4 Respuesta del servidor:",t.data),await R(),x(!1),N(null),D()}catch(n){var a,t;console.error("\u274c Error updating supplier:",n),alert((null===(a=n.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.error)||"Error al actualizar proveedor")}},disabled:!z(),title:z()?"":"Campos faltantes: ".concat(O().join(", ")),children:"Actualizar Tercero"})]}),!z()&&(0,Kn.jsxs)("div",{style:{marginTop:"1rem",padding:"1rem",background:"#fff3cd",border:"1px solid #ffc107",borderRadius:"8px",color:"#856404"},children:[(0,Kn.jsx)("strong",{children:"\u26a0\ufe0f Campos obligatorios faltantes:"}),(0,Kn.jsxs)("div",{style:{fontSize:"0.85rem",marginTop:"0.5rem",color:"#666"},children:["Tipo de ID actual: ",(0,Kn.jsx)("strong",{children:k.identification_type||"(vac\xedo)"})]}),(0,Kn.jsx)("ul",{style:{marginTop:"0.5rem",marginBottom:0,paddingLeft:"1.5rem"},children:O().map((e,a)=>(0,Kn.jsx)("li",{children:e},a))})]})]})}),b&&(0,Kn.jsx)("div",{className:"modal-overlay",children:(0,Kn.jsx)("div",{className:"modal modal-xlarge",children:(0,Kn.jsx)(_r,{onSuccess:async(e,a)=>{console.log("\u2705 Tercero creado:",e),console.log("\u2705 Perfil creado:",a),await R(),y(!1)},onCancel:()=>y(!1)})})})]})},Sr=()=>{const{user:e}=Yn(),[a,t]=(0,r.useState)([]),[n,l]=(0,r.useState)(!0),[s,i]=(0,r.useState)(!1),[o,c]=(0,r.useState)(null),[d,m]=(0,r.useState)([]),[p,h]=(0,r.useState)([]),[f,v]=(0,r.useState)({code:"",label:"",description:"",icon:"\ud83d\udcc4",fields:[],default_identification_types:[],isGeneric:!1,companies:[]}),[g,x]=(0,r.useState)({name:"",label:"",field_type:"text",options:[],required:!1,display_order:0,placeholder:""}),[b,y]=(0,r.useState)(null),[j,N]=(0,r.useState)(null),[_,w]=(0,r.useState)("");(0,r.useEffect)(()=>{C(),S(),"super_admin"!==(null===e||void 0===e?void 0:e.role)&&"admin"!==(null===e||void 0===e?void 0:e.role)||k()},[e]);const C=async()=>{try{const e=await Qn.get("/third-party-types");t(e.data)}catch(e){console.error("Error fetching third party types:",e)}finally{l(!1)}},S=async()=>{try{const e=await Qn.get("/third-party-types/config/field-options");m(e.data.field_types)}catch(e){console.error("Error fetching field options:",e)}},k=async()=>{try{const e=await Qn.get("/third-party-types/config/companies");h(e.data)}catch(e){console.error("Error fetching companies:",e)}},E=()=>{if(_.trim()){const e=_.trim().toUpperCase(),a=f.default_identification_types||[];a.includes(e)||v(u(u({},f),{},{default_identification_types:[...a,e]})),w("")}},T=(e,a)=>{const t=[...f.fields],n="up"===a?e-1:e+1;n<0||n>=t.length||([t[e],t[n]]=[t[n],t[e]],t.forEach((e,a)=>e.display_order=a),v(u(u({},f),{},{fields:t})))},P=()=>{y(null),N(null)},R=()=>{if(null===b||!j)return;if(!j.name||!j.label)return void alert("El nombre y etiqueta del campo son requeridos");const e=[...f.fields];e[b]=j,v(u(u({},f),{},{fields:e})),y(null),N(null)};return n?(0,Kn.jsx)("div",{className:"loading",children:"Cargando tipos de terceros..."}):(0,Kn.jsxs)("div",{className:"third-party-type-management",children:[(0,Kn.jsxs)("div",{className:"header",children:[(0,Kn.jsx)("h1",{children:"Gesti\xf3n de Tipos de Terceros"}),(0,Kn.jsx)("p",{children:"Configura qu\xe9 informaci\xf3n se solicita para cada tipo de tercero"}),(0,Kn.jsx)("button",{onClick:()=>{c(null),v({code:"",label:"",description:"",icon:"\ud83d\udcc4",fields:[],default_identification_types:[],isGeneric:!1,companies:[]}),i(!0)},className:"btn-create",children:"\u2795 Crear Nuevo Tipo"})]}),(0,Kn.jsx)("div",{className:"types-grid",children:a.map(e=>(0,Kn.jsxs)("div",{className:"type-card",children:[(0,Kn.jsxs)("div",{className:"type-header",children:[(0,Kn.jsxs)("div",{className:"type-title",children:[(0,Kn.jsx)("span",{className:"type-icon",children:e.icon}),(0,Kn.jsxs)("div",{children:[(0,Kn.jsx)("h3",{children:e.label}),(0,Kn.jsx)("span",{className:"type-code",children:e.code})]})]}),(0,Kn.jsxs)("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[e.is_system&&(0,Kn.jsx)("span",{className:"system-badge",children:"Sistema"}),e.isGeneric&&(0,Kn.jsx)("span",{className:"system-badge",style:{backgroundColor:"#10b981"},children:"Gen\xe9rico"})]})]}),(0,Kn.jsx)("p",{className:"type-description",children:e.description}),(0,Kn.jsxs)("div",{className:"type-stats",children:[(0,Kn.jsxs)("span",{children:[e.fields.length," campos configurados"]}),!e.isGeneric&&e.companies&&e.companies.length>0&&(0,Kn.jsxs)("span",{style:{color:"#3b82f6",fontSize:"0.85rem"},children:[e.companies.length," empresa",e.companies.length>1?"s":""]})]}),!e.isGeneric&&e.companies&&e.companies.length>0&&(0,Kn.jsxs)("div",{style:{marginTop:"0.5rem"},children:[(0,Kn.jsx)("strong",{style:{fontSize:"0.8rem",color:"#64748b"},children:"Empresas:"}),(0,Kn.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.25rem",marginTop:"0.25rem"},children:e.companies.map(e=>(0,Kn.jsx)("span",{style:{fontSize:"0.75rem",padding:"0.15rem 0.5rem",backgroundColor:"#e0f2fe",color:"#0369a1",borderRadius:"4px",border:"1px solid #bae6fd"},children:e.name},e._id))})]}),e.default_identification_types&&e.default_identification_types.length>0&&(0,Kn.jsxs)("div",{className:"type-id-types-preview",children:[(0,Kn.jsx)("strong",{style:{fontSize:"0.8rem",color:"#64748b"},children:"Tipos de ID:"}),(0,Kn.jsx)("div",{className:"id-types-badges",children:e.default_identification_types.map((e,a)=>(0,Kn.jsx)("span",{className:"id-type-badge-small",children:e},a))})]}),(0,Kn.jsxs)("div",{className:"type-actions",children:[(0,Kn.jsx)("button",{onClick:()=>(e=>{c(e),v({code:e.code,label:e.label,description:e.description,icon:e.icon,fields:e.fields,default_identification_types:e.default_identification_types||[],isGeneric:e.isGeneric||!1,companies:e.companies?e.companies.map(e=>e._id):[]}),i(!0)})(e),className:"btn-edit",children:"\u270f\ufe0f Editar"}),!e.is_system&&(0,Kn.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("\xbfEst\xe1s seguro de eliminar este tipo de tercero?"))try{await Qn.delete("/third-party-types/".concat(e)),alert("Tipo de tercero eliminado exitosamente"),await C()}catch(n){var a,t;console.error("Error deleting third party type:",n),alert((null===(a=n.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.error)||"Error al eliminar tipo de tercero")}})(e._id),className:"btn-delete",children:"\ud83d\uddd1\ufe0f Eliminar"})]})]},e._id))}),s&&(0,Kn.jsx)("div",{className:"modal-overlay",onClick:()=>i(!1),children:(0,Kn.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,Kn.jsxs)("div",{className:"modal-header",children:[(0,Kn.jsx)("h2",{children:o?"Editar Tipo de Tercero":"Crear Nuevo Tipo de Tercero"}),(0,Kn.jsx)("button",{onClick:()=>i(!1),className:"btn-close",children:"\u2716"})]}),(0,Kn.jsxs)("div",{className:"modal-body",children:[(0,Kn.jsxs)("div",{className:"form-section",children:[(0,Kn.jsx)("h3",{children:"Informaci\xf3n General"}),(0,Kn.jsxs)("div",{className:"form-row",children:[(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"C\xf3digo *"}),(0,Kn.jsx)("input",{type:"text",value:f.code,onChange:e=>v(u(u({},f),{},{code:e.target.value.toLowerCase()})),placeholder:"ej: proveedor",disabled:!!o})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"\xcdcono"}),(0,Kn.jsx)("input",{type:"text",value:f.icon,onChange:e=>v(u(u({},f),{},{icon:e.target.value})),placeholder:"\ud83d\udce6"})]})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Nombre *"}),(0,Kn.jsx)("input",{type:"text",value:f.label,onChange:e=>v(u(u({},f),{},{label:e.target.value})),placeholder:"Proveedor"})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Descripci\xf3n"}),(0,Kn.jsx)("textarea",{value:f.description,onChange:e=>v(u(u({},f),{},{description:e.target.value})),placeholder:"Descripci\xf3n del tipo de tercero",rows:2})]})]}),("super_admin"===(null===e||void 0===e?void 0:e.role)||"admin"===(null===e||void 0===e?void 0:e.role))&&(0,Kn.jsxs)("div",{className:"form-section",children:[(0,Kn.jsx)("h3",{children:"Alcance del Tipo de Tercero"}),(0,Kn.jsx)("p",{className:"form-hint",children:"Define si este tipo aplica para todas las empresas o solo para empresas espec\xedficas"}),(0,Kn.jsx)("div",{className:"form-group",children:(0,Kn.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[(0,Kn.jsx)("input",{type:"checkbox",checked:f.isGeneric,onChange:e=>{return a=e.target.checked,void v(u(u({},f),{},{isGeneric:a,companies:a?[]:f.companies}));var a}}),(0,Kn.jsx)("span",{style:{fontWeight:500},children:"Gen\xe9rico (aplica para todas las empresas)"})]})}),!f.isGeneric&&(0,Kn.jsxs)("div",{className:"companies-selector",children:[(0,Kn.jsxs)("label",{style:{marginBottom:"0.5rem",fontWeight:500,display:"block"},children:["Seleccionar empresas (",f.companies.length," seleccionadas):"]}),0===p.length?(0,Kn.jsx)("p",{style:{color:"#64748b",fontSize:"0.9rem"},children:"No hay empresas disponibles"}):(0,Kn.jsx)("div",{className:"companies-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"0.5rem",maxHeight:"200px",overflowY:"auto",border:"1px solid #e2e8f0",borderRadius:"8px",padding:"1rem"},children:p.map(e=>(0,Kn.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem",border:"1px solid #e2e8f0",borderRadius:"6px",cursor:"pointer",backgroundColor:f.companies.includes(e._id)?"#e0f2fe":"white",transition:"all 0.2s"},children:[(0,Kn.jsx)("input",{type:"checkbox",checked:f.companies.includes(e._id),onChange:()=>(e=>{const a=f.companies||[];a.includes(e)?v(u(u({},f),{},{companies:a.filter(a=>a!==e)})):v(u(u({},f),{},{companies:[...a,e]}))})(e._id)}),(0,Kn.jsx)("span",{style:{fontSize:"0.9rem"},children:e.name})]},e._id))})]})]}),(0,Kn.jsxs)("div",{className:"form-section",children:[(0,Kn.jsx)("h3",{children:"Tipos de Identificaci\xf3n Permitidos"}),(0,Kn.jsx)("p",{className:"form-hint",children:"Selecciona los tipos de identificaci\xf3n que se usar\xe1n con este tipo de tercero"}),(0,Kn.jsxs)("div",{className:"id-types-common",children:[(0,Kn.jsx)("label",{style:{marginBottom:"0.5rem",fontWeight:500,display:"block"},children:"Tipos comunes:"}),(0,Kn.jsx)("div",{className:"id-types-grid",children:["NIT","CC","CE","TI","Pasaporte","PEP","RUT","DNI","RUC","CURP"].map(e=>(0,Kn.jsx)("button",{type:"button",className:"id-type-btn ".concat((f.default_identification_types||[]).includes(e)?"selected":""),onClick:()=>(e=>{const a=f.default_identification_types||[];a.includes(e)?v(u(u({},f),{},{default_identification_types:a.filter(a=>a!==e)})):v(u(u({},f),{},{default_identification_types:[...a,e]}))})(e),children:e},e))})]}),(0,Kn.jsxs)("div",{className:"custom-id-input-container",children:[(0,Kn.jsx)("label",{style:{marginBottom:"0.5rem",fontWeight:500,display:"block"},children:"Agregar tipo personalizado:"}),(0,Kn.jsxs)("div",{className:"custom-id-input-wrapper",children:[(0,Kn.jsx)("input",{type:"text",value:_,onChange:e=>w(e.target.value),placeholder:"Ej: RFC, CUIL, etc.",onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),E())},style:{flex:1}}),(0,Kn.jsx)("button",{type:"button",onClick:E,className:"btn-add-custom-id",children:"+ Agregar"})]})]}),f.default_identification_types&&f.default_identification_types.length>0&&(0,Kn.jsxs)("div",{className:"selected-id-types-container",children:[(0,Kn.jsxs)("label",{style:{marginBottom:"0.5rem",fontWeight:500,display:"block"},children:["Tipos seleccionados (",f.default_identification_types.length,"):"]}),(0,Kn.jsx)("div",{className:"selected-id-types-list",children:f.default_identification_types.map(e=>(0,Kn.jsxs)("span",{className:"selected-id-badge",children:[e,(0,Kn.jsx)("button",{type:"button",onClick:()=>(e=>{v(u(u({},f),{},{default_identification_types:(f.default_identification_types||[]).filter(a=>a!==e)}))})(e),className:"remove-id-btn",children:"\xd7"})]},e))})]})]}),(0,Kn.jsxs)("div",{className:"form-section",children:[(0,Kn.jsxs)("h3",{children:["Campos Personalizados (",f.fields.length,")"]}),(0,Kn.jsxs)("div",{className:"add-field-section",children:[(0,Kn.jsx)("h4",{children:"Agregar Campo"}),(0,Kn.jsxs)("div",{className:"form-row",children:[(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Nombre del campo *"}),(0,Kn.jsx)("input",{type:"text",value:g.name,onChange:e=>x(u(u({},g),{},{name:e.target.value.toLowerCase().replace(/\s/g,"_")})),placeholder:"nombre_campo"})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Etiqueta *"}),(0,Kn.jsx)("input",{type:"text",value:g.label,onChange:e=>x(u(u({},g),{},{label:e.target.value})),placeholder:"Etiqueta visible"})]})]}),(0,Kn.jsxs)("div",{className:"form-row",children:[(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Tipo de campo *"}),(0,Kn.jsx)("select",{value:g.field_type,onChange:e=>x(u(u({},g),{},{field_type:e.target.value})),children:d.map(e=>(0,Kn.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Placeholder"}),(0,Kn.jsx)("input",{type:"text",value:g.placeholder,onChange:e=>x(u(u({},g),{},{placeholder:e.target.value}))})]})]}),(0,Kn.jsx)("div",{className:"form-group",children:(0,Kn.jsxs)("label",{children:[(0,Kn.jsx)("input",{type:"checkbox",checked:g.required,onChange:e=>x(u(u({},g),{},{required:e.target.checked}))}),"Campo obligatorio"]})}),(0,Kn.jsx)("button",{onClick:()=>{g.name&&g.label?(v(u(u({},f),{},{fields:[...f.fields,u(u({},g),{},{display_order:f.fields.length})]})),x({name:"",label:"",field_type:"text",options:[],required:!1,display_order:0,placeholder:""})):alert("El nombre y etiqueta del campo son requeridos")},className:"btn-add-field",children:"\u2795 Agregar Campo"})]}),(0,Kn.jsx)("div",{className:"fields-list",children:f.fields.map((e,a)=>(0,Kn.jsx)("div",{className:"field-item",children:b===a?(0,Kn.jsxs)("div",{className:"field-edit-form",children:[(0,Kn.jsxs)("div",{className:"form-row",children:[(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Nombre del Campo (interno)"}),(0,Kn.jsx)("input",{type:"text",value:(null===j||void 0===j?void 0:j.name)||"",onChange:e=>N(u(u({},j),{},{name:e.target.value})),placeholder:"ej: nombre_completo"})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Etiqueta (visible)"}),(0,Kn.jsx)("input",{type:"text",value:(null===j||void 0===j?void 0:j.label)||"",onChange:e=>N(u(u({},j),{},{label:e.target.value})),placeholder:"ej: Nombre Completo"})]})]}),(0,Kn.jsxs)("div",{className:"form-row",children:[(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Tipo de Campo"}),(0,Kn.jsx)("select",{value:(null===j||void 0===j?void 0:j.field_type)||"text",onChange:e=>N(u(u({},j),{},{field_type:e.target.value})),children:d.map(e=>(0,Kn.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Placeholder"}),(0,Kn.jsx)("input",{type:"text",value:(null===j||void 0===j?void 0:j.placeholder)||"",onChange:e=>N(u(u({},j),{},{placeholder:e.target.value})),placeholder:"Texto de ayuda"})]})]}),(0,Kn.jsx)("div",{className:"form-group",children:(0,Kn.jsxs)("label",{children:[(0,Kn.jsx)("input",{type:"checkbox",checked:(null===j||void 0===j?void 0:j.required)||!1,onChange:e=>N(u(u({},j),{},{required:e.target.checked}))}),"Campo obligatorio"]})}),(0,Kn.jsxs)("div",{className:"field-edit-actions",children:[(0,Kn.jsx)("button",{onClick:R,className:"btn-save-field",children:"\u2705 Guardar"}),(0,Kn.jsx)("button",{onClick:P,className:"btn-cancel-field",children:"\u274c Cancelar"})]})]}):(0,Kn.jsxs)(Kn.Fragment,{children:[(0,Kn.jsxs)("div",{className:"field-info",children:[(0,Kn.jsx)("strong",{children:e.label}),(0,Kn.jsxs)("span",{className:"field-details",children:[e.name," \u2022 ",e.field_type,e.required&&" \u2022 Requerido"]})]}),(0,Kn.jsxs)("div",{className:"field-actions",children:[(0,Kn.jsx)("button",{onClick:()=>(e=>{y(e),N(u({},f.fields[e]))})(a),className:"btn-icon btn-edit",title:"Editar campo",children:(0,Kn.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,Kn.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,Kn.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})}),(0,Kn.jsx)("button",{onClick:()=>T(a,"up"),disabled:0===a,className:"btn-icon",title:"Mover arriba",children:(0,Kn.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:(0,Kn.jsx)("polyline",{points:"18 15 12 9 6 15"})})}),(0,Kn.jsx)("button",{onClick:()=>T(a,"down"),disabled:a===f.fields.length-1,className:"btn-icon",title:"Mover abajo",children:(0,Kn.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:(0,Kn.jsx)("polyline",{points:"6 9 12 15 18 9"})})}),(0,Kn.jsx)("button",{onClick:()=>(e=>{const a=f.fields.filter((a,t)=>t!==e);v(u(u({},f),{},{fields:a}))})(a),className:"btn-icon-delete",title:"Eliminar campo",children:(0,Kn.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,Kn.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,Kn.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})]})},a))})]})]}),(0,Kn.jsxs)("div",{className:"modal-footer",children:[(0,Kn.jsx)("button",{onClick:()=>i(!1),className:"btn-cancel",children:"Cancelar"}),(0,Kn.jsx)("button",{onClick:async()=>{try{if(!f.isGeneric&&0===f.companies.length&&("super_admin"===(null===e||void 0===e?void 0:e.role)||"admin"===(null===e||void 0===e?void 0:e.role)))return void alert("Debes seleccionar al menos una empresa o marcar el tipo como gen\xe9rico");o?(await Qn.put("/third-party-types/".concat(o._id),f),alert("Tipo de tercero actualizado exitosamente")):(await Qn.post("/third-party-types",f),alert("Tipo de tercero creado exitosamente")),await C(),i(!1)}catch(n){var a,t;console.error("Error saving third party type:",n),alert((null===(a=n.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.error)||"Error al guardar tipo de tercero")}},className:"btn-save",children:o?"Actualizar":"Crear"})]})]})})]})},kr=()=>{const[e,a]=(0,r.useState)([]),[t,n]=(0,r.useState)({suppliers_count:0,total_contracts:0,suppliers_with_contracts:0,suppliers_without_contracts:0}),[l,s]=(0,r.useState)(!0),[i,o]=(0,r.useState)(null),[c,d]=(0,r.useState)(""),[u,m]=(0,r.useState)("contract_count"),[p,h]=(0,r.useState)(!1),[f,v]=(0,r.useState)(!1),[g,x]=(0,r.useState)(null),[b,y]=(0,r.useState)(null),[j,N]=(0,r.useState)(!1),[_,w]=(0,r.useState)(new Set);(0,r.useEffect)(()=>{C()},[u,p,f]);const C=async()=>{try{s(!0),o(null);const e=await(async e=>{const a=new URLSearchParams;null!==e&&void 0!==e&&e.search&&a.append("search",e.search),null!==e&&void 0!==e&&e.includeInactive&&a.append("includeInactive","true"),null!==e&&void 0!==e&&e.withContractsOnly&&a.append("withContractsOnly","true"),null!==e&&void 0!==e&&e.sortBy&&a.append("sortBy",e.sortBy);const t=a.toString(),n="/suppliers/contracts/consolidated".concat(t?"?".concat(t):"");return(await $n.get(n)).data})({search:c.trim()||void 0,sortBy:u,withContractsOnly:p,includeInactive:f});a(e.data),n(e.totals)}catch(r){var e,t;console.error("Error fetching consolidated data:",r),o((null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.error)||"Error al cargar datos")}finally{s(!1)}},S=async e=>{try{x(e),N(!0);const a=await(async e=>(await $n.get("/suppliers/".concat(e,"/contracts"))).data)(e);y(a)}catch(a){console.error("Error fetching supplier detail:",a),o("Error al cargar detalle del tercero")}finally{N(!1)}},k=()=>{x(null),y(null)},E=e=>{switch(null===e||void 0===e?void 0:e.toLowerCase()){case"active":case"aprobado":case"firmado":return"status-badge-success";case"borrador":case"revision":return"status-badge-warning";case"terminated":case"expired":case"cancelado":return"status-badge-danger";default:return"status-badge-default"}},T=e=>new Date(e).toLocaleDateString("es-CO",{year:"numeric",month:"short",day:"numeric"});return l&&0===e.length?(0,Kn.jsx)("div",{className:"consolidated-container",children:(0,Kn.jsxs)("div",{className:"loading-state",children:[(0,Kn.jsx)("div",{className:"spinner"}),(0,Kn.jsx)("p",{children:"Cargando datos consolidados..."})]})}):(0,Kn.jsxs)("div",{className:"consolidated-container",children:[(0,Kn.jsx)("div",{className:"consolidated-header",children:(0,Kn.jsxs)("div",{className:"header-info",children:[(0,Kn.jsx)("h1",{children:"Contratos por Tercero"}),(0,Kn.jsx)("p",{children:"Vista consolidada de todos los contratos asociados a cada tercero"})]})}),(0,Kn.jsxs)("div",{className:"stats-cards",children:[(0,Kn.jsxs)("div",{className:"stat-card",children:[(0,Kn.jsx)("div",{className:"stat-icon",children:"\ud83d\udc65"}),(0,Kn.jsxs)("div",{className:"stat-content",children:[(0,Kn.jsx)("span",{className:"stat-value",children:t.suppliers_count}),(0,Kn.jsx)("span",{className:"stat-label",children:"Terceros"})]})]}),(0,Kn.jsxs)("div",{className:"stat-card",children:[(0,Kn.jsx)("div",{className:"stat-icon",children:"\ud83d\udcc4"}),(0,Kn.jsxs)("div",{className:"stat-content",children:[(0,Kn.jsx)("span",{className:"stat-value",children:t.total_contracts}),(0,Kn.jsx)("span",{className:"stat-label",children:"Contratos Totales"})]})]}),(0,Kn.jsxs)("div",{className:"stat-card stat-success",children:[(0,Kn.jsx)("div",{className:"stat-icon",children:"\u2713"}),(0,Kn.jsxs)("div",{className:"stat-content",children:[(0,Kn.jsx)("span",{className:"stat-value",children:t.suppliers_with_contracts}),(0,Kn.jsx)("span",{className:"stat-label",children:"Con Contratos"})]})]}),(0,Kn.jsxs)("div",{className:"stat-card stat-warning",children:[(0,Kn.jsx)("div",{className:"stat-icon",children:"\u25cb"}),(0,Kn.jsxs)("div",{className:"stat-content",children:[(0,Kn.jsx)("span",{className:"stat-value",children:t.suppliers_without_contracts}),(0,Kn.jsx)("span",{className:"stat-label",children:"Sin Contratos"})]})]})]}),(0,Kn.jsxs)("div",{className:"filters-section",children:[(0,Kn.jsxs)("form",{onSubmit:e=>{e.preventDefault(),C()},className:"search-form",children:[(0,Kn.jsx)("input",{type:"text",placeholder:"Buscar por nombre, ID o email...",value:c,onChange:e=>d(e.target.value),className:"search-input"}),(0,Kn.jsx)("button",{type:"submit",className:"btn-search",children:"Buscar"})]}),(0,Kn.jsxs)("div",{className:"filter-options",children:[(0,Kn.jsxs)("select",{value:u,onChange:e=>m(e.target.value),className:"filter-select",children:[(0,Kn.jsx)("option",{value:"contract_count",children:"M\xe1s contratos"}),(0,Kn.jsx)("option",{value:"name",children:"Por nombre"}),(0,Kn.jsx)("option",{value:"recent",children:"M\xe1s reciente"})]}),(0,Kn.jsxs)("label",{className:"filter-checkbox",children:[(0,Kn.jsx)("input",{type:"checkbox",checked:p,onChange:e=>h(e.target.checked)}),"Solo con contratos"]}),(0,Kn.jsxs)("label",{className:"filter-checkbox",children:[(0,Kn.jsx)("input",{type:"checkbox",checked:f,onChange:e=>v(e.target.checked)}),"Incluir inactivos"]})]})]}),i&&(0,Kn.jsxs)("div",{className:"error-alert",children:[i,(0,Kn.jsx)("button",{onClick:()=>o(null),children:"\u2715"})]}),(0,Kn.jsxs)("div",{className:"table-container",children:[(0,Kn.jsxs)("table",{className:"consolidated-table",children:[(0,Kn.jsx)("thead",{children:(0,Kn.jsxs)("tr",{children:[(0,Kn.jsx)("th",{className:"expand-col"}),(0,Kn.jsx)("th",{children:"Tercero"}),(0,Kn.jsx)("th",{children:"Tipo"}),(0,Kn.jsx)("th",{children:"Identificaci\xf3n"}),(0,Kn.jsx)("th",{children:"Contacto"}),(0,Kn.jsx)("th",{className:"contracts-col",children:"Contratos"}),(0,Kn.jsx)("th",{className:"profiles-col",children:"Perfiles"}),(0,Kn.jsx)("th",{children:"Acciones"})]})}),(0,Kn.jsx)("tbody",{children:e.map(e=>{return(0,Kn.jsxs)(r.Fragment,{children:[(0,Kn.jsxs)("tr",{className:e.supplier.active?"":"inactive-row",children:[(0,Kn.jsx)("td",{className:"expand-col",children:e.stats.total>0&&(0,Kn.jsx)("button",{className:"btn-expand",onClick:()=>(e=>{const a=new Set(_);a.has(e)?a.delete(e):a.add(e),w(a)})(e.supplier._id),children:_.has(e.supplier._id)?"\u25bc":"\u25b6"})}),(0,Kn.jsx)("td",{children:(0,Kn.jsxs)("div",{className:"supplier-info",children:[(0,Kn.jsx)("strong",{children:e.supplier.legal_name}),e.supplier.legal_name_short&&e.supplier.legal_name_short!==e.supplier.legal_name&&(0,Kn.jsx)("small",{children:e.supplier.legal_name_short})]})}),(0,Kn.jsx)("td",{children:e.supplier.third_party_type?(0,Kn.jsxs)("span",{className:"type-badge",children:[e.supplier.third_party_type.icon," ",e.supplier.third_party_type.label]}):"-"}),(0,Kn.jsx)("td",{children:(0,Kn.jsxs)("div",{className:"id-info",children:[(0,Kn.jsx)("span",{className:"id-type",children:e.supplier.identification_type}),(0,Kn.jsx)("span",{className:"id-number",children:e.supplier.identification_number})]})}),(0,Kn.jsx)("td",{children:(0,Kn.jsxs)("div",{className:"contact-info",children:[e.supplier.email&&(0,Kn.jsx)("span",{className:"email",children:e.supplier.email}),e.supplier.phone&&(0,Kn.jsx)("span",{className:"phone",children:e.supplier.phone}),!e.supplier.email&&!e.supplier.phone&&(0,Kn.jsx)("span",{className:"no-contact",children:"-"})]})}),(0,Kn.jsx)("td",{className:"contracts-col",children:(0,Kn.jsxs)("div",{className:"contract-count ".concat(e.stats.total>0?"has-contracts":""),children:[(0,Kn.jsx)("span",{className:"count-number",children:e.stats.total}),e.stats.total>0&&Object.keys(e.stats.by_status).length>0&&(0,Kn.jsx)("div",{className:"status-breakdown",children:Object.entries(e.stats.by_status).map(e=>{let[a,t]=e;return(0,Kn.jsxs)("span",{className:"mini-badge ".concat(E(a)),children:[t," ",a]},a)})})]})}),(0,Kn.jsx)("td",{className:"profiles-col",children:(0,Kn.jsx)("span",{className:"profile-count",children:e.profile_count})}),(0,Kn.jsx)("td",{children:(0,Kn.jsx)("div",{className:"action-buttons",children:(0,Kn.jsx)("button",{className:"btn-action btn-view",onClick:()=>S(e.supplier._id),title:"Ver detalle",children:"Ver"})})})]}),_.has(e.supplier._id)&&(0,Kn.jsx)("tr",{className:"expanded-row",children:(0,Kn.jsx)("td",{colSpan:8,children:(0,Kn.jsxs)("div",{className:"expanded-content",children:[(0,Kn.jsx)("h4",{children:"Contratos Recientes"}),(a=e.contracts,0===a.length?(0,Kn.jsx)("div",{className:"no-contracts",children:"Sin contratos asociados"}):(0,Kn.jsxs)("div",{className:"contracts-mini-list",children:[a.slice(0,5).map(e=>(0,Kn.jsxs)("div",{className:"contract-mini-item",children:[(0,Kn.jsx)("span",{className:"contract-number",children:e.contract_number}),(0,Kn.jsx)("span",{className:"status-badge ".concat(E(e.status)),children:e.status}),(0,Kn.jsx)("span",{className:"contract-date",children:T(e.createdAt)})]},e._id)),a.length>5&&(0,Kn.jsxs)("div",{className:"more-contracts",children:["+",a.length-5," contratos m\xe1s"]})]})),e.profiles.length>0&&(0,Kn.jsxs)(Kn.Fragment,{children:[(0,Kn.jsx)("h4",{children:"Perfiles de Plantilla"}),(0,Kn.jsx)("div",{className:"profiles-list",children:e.profiles.map(e=>{var a;return(0,Kn.jsxs)("div",{className:"profile-item",children:[(0,Kn.jsx)("span",{className:"profile-template",children:null===(a=e.template)||void 0===a?void 0:a.name}),(0,Kn.jsx)("span",{className:"profile-role",children:e.role_label||e.role_in_template}),(0,Kn.jsx)("span",{className:"profile-complete ".concat(e.is_complete?"complete":"incomplete"),children:e.is_complete?"\u2713 Completo":"\u25cb Incompleto"})]},e._id)})})]})]})})})]},e.supplier._id);var a})})]}),0===e.length&&!l&&(0,Kn.jsxs)("div",{className:"empty-state",children:[(0,Kn.jsx)("h3",{children:"No se encontraron terceros"}),(0,Kn.jsx)("p",{children:"Ajusta los filtros de b\xfasqueda o crea nuevos terceros"})]})]}),g&&(0,Kn.jsx)("div",{className:"modal-overlay",onClick:k,children:(0,Kn.jsxs)("div",{className:"modal-detail",onClick:e=>e.stopPropagation(),children:[(0,Kn.jsxs)("div",{className:"modal-header",children:[(0,Kn.jsx)("h2",{children:"Detalle de Contratos"}),(0,Kn.jsx)("button",{className:"btn-close",onClick:k,children:"\u2715"})]}),j?(0,Kn.jsxs)("div",{className:"loading-state",children:[(0,Kn.jsx)("div",{className:"spinner"}),(0,Kn.jsx)("p",{children:"Cargando..."})]}):b?(0,Kn.jsxs)("div",{className:"modal-content",children:[(0,Kn.jsxs)("div",{className:"detail-section",children:[(0,Kn.jsx)("h3",{children:"Informaci\xf3n del Tercero"}),(0,Kn.jsxs)("div",{className:"supplier-detail-card",children:[(0,Kn.jsxs)("div",{className:"detail-row",children:[(0,Kn.jsx)("span",{className:"label",children:"Nombre:"}),(0,Kn.jsx)("span",{className:"value",children:b.supplier.legal_name})]}),(0,Kn.jsxs)("div",{className:"detail-row",children:[(0,Kn.jsx)("span",{className:"label",children:"Identificaci\xf3n:"}),(0,Kn.jsxs)("span",{className:"value",children:[b.supplier.identification_type," ",b.supplier.identification_number]})]}),b.supplier.email&&(0,Kn.jsxs)("div",{className:"detail-row",children:[(0,Kn.jsx)("span",{className:"label",children:"Email:"}),(0,Kn.jsx)("span",{className:"value",children:b.supplier.email})]}),b.supplier.phone&&(0,Kn.jsxs)("div",{className:"detail-row",children:[(0,Kn.jsx)("span",{className:"label",children:"Tel\xe9fono:"}),(0,Kn.jsx)("span",{className:"value",children:b.supplier.phone})]})]})]}),(0,Kn.jsxs)("div",{className:"detail-section",children:[(0,Kn.jsx)("h3",{children:"Estad\xedsticas"}),(0,Kn.jsxs)("div",{className:"stats-grid",children:[(0,Kn.jsxs)("div",{className:"stat-item",children:[(0,Kn.jsx)("span",{className:"stat-number",children:b.stats.total_contracts}),(0,Kn.jsx)("span",{className:"stat-text",children:"Contratos Totales"})]}),Object.entries(b.stats.by_status).map(e=>{let[a,t]=e;return(0,Kn.jsxs)("div",{className:"stat-item",children:[(0,Kn.jsx)("span",{className:"stat-number",children:t}),(0,Kn.jsx)("span",{className:"stat-text",children:a})]},a)})]})]}),(0,Kn.jsxs)("div",{className:"detail-section",children:[(0,Kn.jsxs)("h3",{children:["Lista de Contratos (",b.contracts.length,")"]}),(0,Kn.jsx)("div",{className:"contracts-detail-list",children:0===b.contracts.length?(0,Kn.jsx)("p",{className:"no-data",children:"No hay contratos asociados"}):b.contracts.map(e=>{var a;return(0,Kn.jsxs)("div",{className:"contract-detail-card",children:[(0,Kn.jsxs)("div",{className:"contract-header",children:[(0,Kn.jsx)("span",{className:"contract-number",children:e.contract_number}),(0,Kn.jsx)("span",{className:"status-badge ".concat(E(e.status)),children:e.status})]}),(0,Kn.jsxs)("div",{className:"contract-body",children:[e.title&&(0,Kn.jsx)("p",{className:"contract-title",children:e.title}),(0,Kn.jsxs)("div",{className:"contract-meta",children:[(0,Kn.jsxs)("span",{children:["Plantilla: ",(null===(a=e.template)||void 0===a?void 0:a.name)||"N/A"]}),(0,Kn.jsxs)("span",{children:["Fecha: ",T(e.createdAt)]}),e.generated_by&&(0,Kn.jsxs)("span",{children:["Generado por: ",e.generated_by.name]})]})]})]},e._id)})})]}),b.profiles.length>0&&(0,Kn.jsxs)("div",{className:"detail-section",children:[(0,Kn.jsxs)("h3",{children:["Perfiles de Plantilla (",b.profiles.length,")"]}),(0,Kn.jsx)("div",{className:"profiles-detail-list",children:b.profiles.map(e=>{var a;return(0,Kn.jsxs)("div",{className:"profile-detail-card",children:[(0,Kn.jsx)("span",{className:"profile-template",children:null===(a=e.template)||void 0===a?void 0:a.name}),(0,Kn.jsx)("span",{className:"profile-role",children:e.role_label||e.role_in_template}),(0,Kn.jsx)("span",{className:"profile-status ".concat(e.is_complete?"complete":"incomplete"),children:e.is_complete?"Completo":"Incompleto"}),(0,Kn.jsxs)("span",{className:"profile-usage",children:["Usado ",e.usage_count," veces"]})]},e._id)})})]})]}):(0,Kn.jsx)("div",{className:"error-state",children:(0,Kn.jsx)("p",{children:"Error al cargar los datos"})})]})})]})},Er=()=>{const[e,a]=(0,r.useState)([]),[t,n]=(0,r.useState)([]),[l,s]=(0,r.useState)(!0),[i,o]=(0,r.useState)(!1),[c,d]=(0,r.useState)(null),[m,p]=(0,r.useState)({name:"",description:"",icon:"document",color:"#3B82F6",template:"",requires_approval:!0,auto_assign_lawyer:!1}),[h,f]=(0,r.useState)([]);(0,r.useEffect)(()=>{v(),g()},[]);const v=async()=>{try{const e=localStorage.getItem("selectedCompanyId");console.log("\ud83d\udd0d Fetching categories with companyId:",e);const t=await Qn.get("/contract-categories");console.log("\u2705 Categories received:",t.data.length),a(t.data),0===t.data.length&&(console.warn("\u26a0\ufe0f  No se encontraron categor\xedas. Verifica:"),console.warn("   - selectedCompanyId en localStorage:",e),console.warn("   - Que el usuario tenga acceso a la empresa"))}catch(l){var e,t,n,r;console.error("\u274c Error fetching categories:",l),console.error("   Response:",null===(e=l.response)||void 0===e?void 0:e.data),console.error("   Status:",null===(t=l.response)||void 0===t?void 0:t.status),alert((null===(n=l.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.error)||"Error al cargar las categor\xedas")}finally{s(!1)}},g=async()=>{try{const e=await Qn.get("/templates");n(e.data)}catch(e){console.error("Error fetching templates:",e)}},x=(e,a,t)=>{const n=[...h];n[e]=u(u({},n[e]),{},{[a]:t}),f(n)},b=(e,a)=>{if("up"===a&&0===e||"down"===a&&e===h.length-1)return;const t="up"===a?e-1:e+1,n=[...h];[n[e],n[t]]=[n[t],n[e]],n.forEach((e,a)=>{e.order=a+1}),f(n)};return l?(0,Kn.jsx)("div",{className:"loading",children:"Cargando categor\xedas..."}):(0,Kn.jsxs)("div",{className:"category-management",children:[(0,Kn.jsxs)("div",{className:"page-header",children:[(0,Kn.jsx)("h1",{children:"Gesti\xf3n de Categor\xedas de Contratos"}),(0,Kn.jsx)("button",{className:"btn-primary",onClick:()=>{d(null),p({name:"",description:"",icon:"document",color:"#3B82F6",template:"",requires_approval:!0,auto_assign_lawyer:!1}),f([]),o(!0)},children:"Nueva Categor\xeda"})]}),(0,Kn.jsx)("div",{className:"categories-grid",children:0===e.length?(0,Kn.jsxs)("div",{className:"empty-state",children:[(0,Kn.jsx)("h3",{children:"No hay categor\xedas"}),(0,Kn.jsx)("p",{children:"Crea la primera categor\xeda para comenzar"})]}):e.map(e=>(0,Kn.jsxs)("div",{className:"category-card",style:{borderLeftColor:e.color},children:[(0,Kn.jsxs)("div",{className:"category-header",children:[(0,Kn.jsx)("div",{className:"category-icon",style:{backgroundColor:e.color+"20",color:e.color},children:"\ud83d\udccb"}),(0,Kn.jsx)("h3",{children:e.name})]}),(0,Kn.jsx)("p",{className:"category-description",children:e.description}),(0,Kn.jsxs)("div",{className:"category-meta",children:[(0,Kn.jsxs)("span",{className:"badge",children:[e.questionnaire.length," preguntas"]}),e.requires_approval&&(0,Kn.jsx)("span",{className:"badge badge-warning",children:"Requiere aprobaci\xf3n"}),e.template&&(0,Kn.jsx)("span",{className:"badge badge-info",children:e.template.name})]}),(0,Kn.jsxs)("div",{className:"category-actions",children:[(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>(e=>{var a;d(e),p({name:e.name,description:e.description,icon:e.icon,color:e.color,template:(null===(a=e.template)||void 0===a?void 0:a._id)||"",requires_approval:e.requires_approval,auto_assign_lawyer:e.auto_assign_lawyer}),f([...e.questionnaire]),o(!0)})(e),children:"Editar"}),(0,Kn.jsx)("button",{className:"btn-danger",onClick:()=>(async e=>{if(window.confirm("\xbfEst\xe1 seguro de que desea desactivar esta categor\xeda?"))try{await Qn.delete("/contract-categories/".concat(e)),await v()}catch(a){console.error("Error deleting category:",a),alert("Error al eliminar la categor\xeda")}})(e._id),children:"Desactivar"})]})]},e._id))}),i&&(0,Kn.jsx)("div",{className:"modal-overlay",children:(0,Kn.jsxs)("div",{className:"modal modal-large",children:[(0,Kn.jsx)("h3",{children:c?"Editar Categor\xeda":"Nueva Categor\xeda"}),(0,Kn.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=u(u({},m),{},{questionnaire:h.sort((e,a)=>e.order-a.order)});c?await Qn.put("/contract-categories/".concat(c._id),e):await Qn.post("/contract-categories",e),await v(),o(!1)}catch(n){var a,t;console.error("Error saving category:",n),alert((null===(a=n.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.error)||"Error al guardar la categor\xeda")}},children:[(0,Kn.jsxs)("div",{className:"form-row",children:[(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Nombre de la Categor\xeda *"}),(0,Kn.jsx)("input",{type:"text",value:m.name,onChange:e=>p(u(u({},m),{},{name:e.target.value})),required:!0,placeholder:"Ej: Contrato Laboral, NDA, Contrato Comercial"})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Color"}),(0,Kn.jsx)("input",{type:"color",value:m.color,onChange:e=>p(u(u({},m),{},{color:e.target.value}))})]})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Descripci\xf3n *"}),(0,Kn.jsx)("textarea",{value:m.description,onChange:e=>p(u(u({},m),{},{description:e.target.value})),required:!0,rows:3,placeholder:"Describe el tipo de contratos de esta categor\xeda"})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Plantilla Asociada"}),(0,Kn.jsxs)("select",{value:m.template,onChange:e=>p(u(u({},m),{},{template:e.target.value})),children:[(0,Kn.jsx)("option",{value:"",children:"Seleccionar plantilla..."}),t.map(e=>(0,Kn.jsx)("option",{value:e._id,children:e.name},e._id))]})]}),(0,Kn.jsxs)("div",{className:"form-row",children:[(0,Kn.jsx)("div",{className:"form-group checkbox-group",children:(0,Kn.jsxs)("label",{children:[(0,Kn.jsx)("input",{type:"checkbox",checked:m.requires_approval,onChange:e=>p(u(u({},m),{},{requires_approval:e.target.checked}))}),"Requiere aprobaci\xf3n de abogado"]})}),(0,Kn.jsx)("div",{className:"form-group checkbox-group",children:(0,Kn.jsxs)("label",{children:[(0,Kn.jsx)("input",{type:"checkbox",checked:m.auto_assign_lawyer,onChange:e=>p(u(u({},m),{},{auto_assign_lawyer:e.target.checked}))}),"Auto-asignar abogado disponible"]})})]}),(0,Kn.jsx)("hr",{}),(0,Kn.jsxs)("div",{className:"questionnaire-section",children:[(0,Kn.jsxs)("div",{className:"section-header",children:[(0,Kn.jsx)("h4",{children:"Cuestionario"}),(0,Kn.jsx)("button",{type:"button",className:"btn-secondary btn-sm",onClick:()=>{const e={question:"",field_name:"",type:"text",required:!0,order:h.length+1};f([...h,e])},children:"+ Agregar Pregunta"})]}),h.map((e,a)=>(0,Kn.jsxs)("div",{className:"question-editor",children:[(0,Kn.jsxs)("div",{className:"question-header",children:[(0,Kn.jsxs)("span",{className:"question-number",children:["Pregunta ",a+1]}),(0,Kn.jsxs)("div",{className:"question-controls",children:[(0,Kn.jsx)("button",{type:"button",onClick:()=>b(a,"up"),disabled:0===a,className:"btn-icon",children:"\u2191"}),(0,Kn.jsx)("button",{type:"button",onClick:()=>b(a,"down"),disabled:a===h.length-1,className:"btn-icon",children:"\u2193"}),(0,Kn.jsx)("button",{type:"button",onClick:()=>(e=>{f(h.filter((a,t)=>t!==e))})(a),className:"btn-icon btn-danger",children:"\ud83d\uddd1\ufe0f"})]})]}),(0,Kn.jsxs)("div",{className:"form-row",children:[(0,Kn.jsxs)("div",{className:"form-group flex-2",children:[(0,Kn.jsx)("label",{children:"Pregunta"}),(0,Kn.jsx)("input",{type:"text",value:e.question,onChange:e=>x(a,"question",e.target.value),placeholder:"\xbfCu\xe1l es...?"})]}),(0,Kn.jsxs)("div",{className:"form-group flex-1",children:[(0,Kn.jsx)("label",{children:"Nombre del campo"}),(0,Kn.jsx)("input",{type:"text",value:e.field_name,onChange:e=>x(a,"field_name",e.target.value),placeholder:"nombre_campo"})]})]}),(0,Kn.jsxs)("div",{className:"form-row",children:[(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Tipo de campo"}),(0,Kn.jsxs)("select",{value:e.type,onChange:e=>x(a,"type",e.target.value),children:[(0,Kn.jsx)("option",{value:"text",children:"Texto"}),(0,Kn.jsx)("option",{value:"textarea",children:"Texto largo"}),(0,Kn.jsx)("option",{value:"number",children:"N\xfamero"}),(0,Kn.jsx)("option",{value:"date",children:"Fecha"}),(0,Kn.jsx)("option",{value:"email",children:"Email"}),(0,Kn.jsx)("option",{value:"phone",children:"Tel\xe9fono"}),(0,Kn.jsx)("option",{value:"select",children:"Selecci\xf3n \xfanica"}),(0,Kn.jsx)("option",{value:"multiselect",children:"Selecci\xf3n m\xfaltiple"}),(0,Kn.jsx)("option",{value:"radio",children:"Radio buttons"}),(0,Kn.jsx)("option",{value:"checkbox",children:"Checkbox"})]})]}),(0,Kn.jsx)("div",{className:"form-group checkbox-group",children:(0,Kn.jsxs)("label",{children:[(0,Kn.jsx)("input",{type:"checkbox",checked:e.required,onChange:e=>x(a,"required",e.target.checked)}),"Campo obligatorio"]})})]}),["select","multiselect","radio"].includes(e.type)&&(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Opciones (una por l\xednea)"}),(0,Kn.jsx)("textarea",{value:(e.options||[]).join("\n"),onChange:e=>x(a,"options",e.target.value.split("\n").filter(e=>e.trim())),rows:3,placeholder:"Opci\xf3n 1\nOpci\xf3n 2\nOpci\xf3n 3"})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Texto de ayuda (opcional)"}),(0,Kn.jsx)("input",{type:"text",value:e.help_text||"",onChange:e=>x(a,"help_text",e.target.value),placeholder:"Informaci\xf3n adicional para el usuario"})]})]},a)),0===h.length&&(0,Kn.jsxs)("div",{className:"empty-questionnaire",children:[(0,Kn.jsx)("p",{children:"No hay preguntas en el cuestionario"}),(0,Kn.jsx)("p",{className:"text-muted",children:'Haz clic en "Agregar Pregunta" para comenzar'})]})]}),(0,Kn.jsxs)("div",{className:"modal-actions",children:[(0,Kn.jsx)("button",{type:"button",className:"btn-secondary",onClick:()=>o(!1),children:"Cancelar"}),(0,Kn.jsxs)("button",{type:"submit",className:"btn-primary",children:[c?"Actualizar":"Crear"," Categor\xeda"]})]})]})]})})]})},Tr=()=>{const e=pe(),a=ve(),t=()=>{const a=new URLSearchParams(e.search).get("tab");return"terceros"===a||"tipos"===a||"contratos"===a||"categorias"===a?a:"terceros"},[n,l]=(0,r.useState)(t()),s=e=>{l(e),a("?tab=".concat(e),{replace:!0})};(0,r.useEffect)(()=>{const e=t();e!==n&&l(e)},[e.search]);return(0,Kn.jsxs)("div",{className:"third-parties-hub",children:[(0,Kn.jsxs)("div",{className:"hub-header",children:[(0,Kn.jsx)("h1",{children:"Terceros"}),(0,Kn.jsx)("p",{children:"Gestion integral de terceros, contratos y categorias"})]}),(0,Kn.jsxs)("div",{className:"hub-tabs",children:[(0,Kn.jsxs)("button",{className:"hub-tab ".concat("terceros"===n?"active":""),onClick:()=>s("terceros"),children:[(0,Kn.jsx)("span",{className:"tab-icon",children:"\ud83d\udc65"}),(0,Kn.jsx)("span",{className:"tab-text",children:"Gestion de Terceros"})]}),(0,Kn.jsxs)("button",{className:"hub-tab ".concat("tipos"===n?"active":""),onClick:()=>s("tipos"),children:[(0,Kn.jsx)("span",{className:"tab-icon",children:"\u2699\ufe0f"}),(0,Kn.jsx)("span",{className:"tab-text",children:"Tipos de Terceros"})]}),(0,Kn.jsxs)("button",{className:"hub-tab ".concat("contratos"===n?"active":""),onClick:()=>s("contratos"),children:[(0,Kn.jsx)("span",{className:"tab-icon",children:"\ud83d\udcc4"}),(0,Kn.jsx)("span",{className:"tab-text",children:"Contratos por Tercero"})]}),(0,Kn.jsxs)("button",{className:"hub-tab ".concat("categorias"===n?"active":""),onClick:()=>s("categorias"),children:[(0,Kn.jsx)("span",{className:"tab-icon",children:"\ud83c\udff7\ufe0f"}),(0,Kn.jsx)("span",{className:"tab-text",children:"Categorias de Contratos"})]})]}),(0,Kn.jsx)("div",{className:"hub-content",children:(()=>{switch(n){case"terceros":default:return(0,Kn.jsx)(Cr,{});case"tipos":return(0,Kn.jsx)(Sr,{});case"contratos":return(0,Kn.jsx)(kr,{});case"categorias":return(0,Kn.jsx)(Er,{})}})()})]})},Pr=e=>{let{questions:a,answers:t,onChange:n,errors:r={},disabled:l=!1}=e;const s=e=>{var a,s,i,o,c;const d=t[e.field_name]||"",m=r[e.field_name],p={disabled:l,required:e.required,placeholder:e.placeholder||""};switch(e.type){case"text":case"email":case"phone":return(0,Kn.jsx)("input",u(u({type:e.type,value:d,onChange:a=>n(e.field_name,a.target.value)},p),{},{className:m?"input-error":""}));case"textarea":return(0,Kn.jsx)("textarea",u(u({value:d,onChange:a=>n(e.field_name,a.target.value),rows:4},p),{},{className:m?"input-error":""}));case"number":return(0,Kn.jsx)("input",u(u({type:"number",value:d,onChange:a=>{const t=a.target.value;n(e.field_name,t?parseInt(t,10):"")},min:null===(a=e.validation)||void 0===a?void 0:a.min,max:null===(s=e.validation)||void 0===s?void 0:s.max,step:"1"},p),{},{className:m?"input-error":""}));case"date":return(0,Kn.jsx)("input",u(u({type:"date",value:d,onChange:a=>n(e.field_name,a.target.value)},p),{},{className:m?"input-error":""}));case"select":return(0,Kn.jsxs)("select",{value:d,onChange:a=>n(e.field_name,a.target.value),disabled:l,required:e.required,className:m?"input-error":"",children:[(0,Kn.jsx)("option",{value:"",children:"Seleccionar..."}),null===(i=e.options)||void 0===i?void 0:i.map((e,a)=>(0,Kn.jsx)("option",{value:e,children:e},a))]});case"multiselect":return(0,Kn.jsx)("div",{className:"multiselect",children:null===(o=e.options)||void 0===o?void 0:o.map((a,t)=>(0,Kn.jsxs)("label",{className:"checkbox-label",children:[(0,Kn.jsx)("input",{type:"checkbox",checked:Array.isArray(d)&&d.includes(a),onChange:t=>{const r=Array.isArray(d)?[...d]:[];t.target.checked?n(e.field_name,[...r,a]):n(e.field_name,r.filter(e=>e!==a))},disabled:l}),(0,Kn.jsx)("span",{children:a})]},t))});case"radio":return(0,Kn.jsx)("div",{className:"radio-group",children:null===(c=e.options)||void 0===c?void 0:c.map((a,t)=>(0,Kn.jsxs)("label",{className:"radio-label",children:[(0,Kn.jsx)("input",{type:"radio",name:e.field_name,value:a,checked:d===a,onChange:a=>n(e.field_name,a.target.value),disabled:l,required:e.required}),(0,Kn.jsx)("span",{children:a})]},t))});case"checkbox":return(0,Kn.jsxs)("label",{className:"checkbox-label single",children:[(0,Kn.jsx)("input",{type:"checkbox",checked:!!d,onChange:a=>n(e.field_name,a.target.checked),disabled:l,required:e.required}),(0,Kn.jsx)("span",{children:e.placeholder||"Acepto"})]});default:return(0,Kn.jsx)("input",{type:"text",value:d,disabled:!0})}};return(0,Kn.jsx)("div",{className:"dynamic-questionnaire",children:a.map((e,a)=>(0,Kn.jsxs)("div",{className:"question-group",children:[(0,Kn.jsxs)("label",{className:"question-label",children:[e.question,e.required&&(0,Kn.jsx)("span",{className:"required",children:"*"})]}),e.help_text&&(0,Kn.jsx)("p",{className:"help-text",children:e.help_text}),s(e),r[e.field_name]&&(0,Kn.jsx)("span",{className:"error-message",children:r[e.field_name]})]},e.field_name))})},Rr=()=>{const[e,a]=(0,r.useState)([]),[t,n]=(0,r.useState)(null),[l,s]=(0,r.useState)(!0),[i,o]=(0,r.useState)(!1),[c,d]=(0,r.useState)(""),[m,p]=(0,r.useState)("medium"),[h,f]=(0,r.useState)({}),[v,g]=(0,r.useState)({});(0,r.useEffect)(()=>{x()},[]);const x=async()=>{try{const e=await Qn.get("/contract-categories");a(e.data)}catch(e){console.error("Error fetching categories:",e)}finally{s(!1)}},b=()=>{n(null),f({}),g({})};return l?(0,Kn.jsx)("div",{className:"loading",children:"Cargando categorias..."}):(0,Kn.jsx)("div",{className:"new-request-tab",children:t?(0,Kn.jsxs)("div",{className:"request-form-container",children:[(0,Kn.jsxs)("div",{className:"form-header",children:[(0,Kn.jsx)("button",{className:"btn-back",onClick:b,children:"\u2190 Cambiar categoria"}),(0,Kn.jsx)("div",{className:"selected-category",children:(0,Kn.jsx)("div",{className:"category-badge",style:{backgroundColor:t.color},children:t.name})})]}),(0,Kn.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return c&&""!==c.trim()||(e.title="El titulo es requerido"),!!t&&(t.questionnaire.forEach(a=>{const t=h[a.field_name];a.required&&(!t||""===t||Array.isArray(t)&&0===t.length)&&(e[a.field_name]="".concat(a.question," es obligatorio")),t&&"email"===a.type&&!t.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/)&&(e[a.field_name]="Email invalido")}),g(e),0===Object.keys(e).length)})()){o(!0);try{await Qn.post("/contract-requests-v2",{category_id:t._id,title:c.trim(),questionnaire_answers:h,field_data:h,priority:m}),alert("Solicitud enviada exitosamente!"),n(null),d(""),f({}),p("medium"),g({})}catch(l){var a,r;alert((null===(a=l.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.error)||"Error al enviar la solicitud")}finally{o(!1)}}},children:[(0,Kn.jsxs)("div",{className:"form-section",children:[(0,Kn.jsx)("h3",{children:"Informacion General"}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsxs)("label",{children:["Titulo de la Solicitud ",(0,Kn.jsx)("span",{className:"required",children:"*"})]}),(0,Kn.jsx)("input",{type:"text",value:c,onChange:e=>{if(d(e.target.value),v.title){const e=u({},v);delete e.title,g(e)}},placeholder:"Ej: ".concat(t.name," - Nombre del Cliente"),className:v.title?"input-error":""}),v.title&&(0,Kn.jsx)("span",{className:"error-message",children:v.title})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Prioridad"}),(0,Kn.jsxs)("select",{value:m,onChange:e=>p(e.target.value),children:[(0,Kn.jsx)("option",{value:"low",children:"Baja"}),(0,Kn.jsx)("option",{value:"medium",children:"Media"}),(0,Kn.jsx)("option",{value:"high",children:"Alta"}),(0,Kn.jsx)("option",{value:"urgent",children:"Urgente"})]})]})]}),(0,Kn.jsxs)("div",{className:"form-section",children:[(0,Kn.jsx)("h3",{children:"Informacion Especifica del Contrato"}),(0,Kn.jsx)(Pr,{questions:t.questionnaire,answers:h,onChange:(e,a)=>{if(f(u(u({},h),{},{[e]:a})),v[e]){const a=u({},v);delete a[e],g(a)}},errors:v})]}),(0,Kn.jsxs)("div",{className:"form-actions",children:[(0,Kn.jsx)("button",{type:"button",className:"btn-secondary",onClick:b,children:"Cancelar"}),(0,Kn.jsx)("button",{type:"submit",className:"btn-primary",disabled:i,children:i?"Enviando...":"Enviar Solicitud"})]})]})]}):(0,Kn.jsxs)("div",{className:"categories-selection",children:[(0,Kn.jsx)("h2",{children:"Selecciona el tipo de contrato"}),0===e.length?(0,Kn.jsxs)("div",{className:"empty-state",children:[(0,Kn.jsx)("h3",{children:"No hay categorias disponibles"}),(0,Kn.jsx)("p",{children:"Contacta a un administrador para crear categorias de contratos"})]}):(0,Kn.jsx)("div",{className:"categories-grid",children:e.map(e=>(0,Kn.jsxs)("div",{className:"category-option",style:{borderColor:e.color},onClick:()=>(e=>{n(e),f({}),g({}),d("".concat(e.name," - "))})(e),children:[(0,Kn.jsx)("div",{className:"category-icon",style:{backgroundColor:e.color+"20",color:e.color},children:e.icon||"\ud83d\udccb"}),(0,Kn.jsx)("h3",{children:e.name}),(0,Kn.jsx)("p",{children:e.description}),(0,Kn.jsx)("div",{className:"category-info",children:(0,Kn.jsxs)("span",{className:"badge",children:[e.questionnaire.length," preguntas"]})})]},e._id))})]})})},Lr=()=>{const[e,a]=(0,r.useState)([]),[t,n]=(0,r.useState)(null),[l,s]=(0,r.useState)(!0),[i,o]=(0,r.useState)("all");(0,r.useEffect)(()=>{c()},[i]);const c=async()=>{try{const e="all"!==i?{status:i}:{},t=await Qn.get("/contract-requests-v2",{params:e});a(t.data)}catch(e){console.error("Error fetching requests:",e)}finally{s(!1)}},d=e=>{const a={pending:{bg:"#fef3c7",color:"#92400e",text:"Pendiente",icon:"\u23f3"},in_review:{bg:"#dbeafe",color:"#1e40af",text:"En Revision",icon:"\ud83d\udc41\ufe0f"},approved:{bg:"#d1fae5",color:"#065f46",text:"Aprobado",icon:"\u2705"},rejected:{bg:"#fee2e2",color:"#991b1b",text:"Rechazado",icon:"\u274c"},completed:{bg:"#d1fae5",color:"#065f46",text:"Completado",icon:"\ud83c\udf89"}},t=a[e]||a.pending;return(0,Kn.jsxs)("span",{className:"status-badge",style:{background:t.bg,color:t.color},children:[t.icon," ",t.text]})},u=e=>{const a={low:{bg:"#e5e7eb",color:"#374151",text:"Baja"},medium:{bg:"#fef3c7",color:"#92400e",text:"Media"},high:{bg:"#fed7aa",color:"#9a3412",text:"Alta"},urgent:{bg:"#fecaca",color:"#991b1b",text:"Urgente"}},t=a[e]||a.medium;return(0,Kn.jsx)("span",{className:"priority-badge",style:{background:t.bg,color:t.color},children:t.text})};return l?(0,Kn.jsx)("div",{className:"loading",children:"Cargando solicitudes..."}):(0,Kn.jsxs)("div",{className:"my-requests-tab",children:[(0,Kn.jsxs)("div",{className:"filter-bar",children:[(0,Kn.jsx)("button",{className:"all"===i?"filter-btn active":"filter-btn",onClick:()=>o("all"),children:"Todas"}),(0,Kn.jsx)("button",{className:"pending"===i?"filter-btn active":"filter-btn",onClick:()=>o("pending"),children:"\u23f3 Pendientes"}),(0,Kn.jsx)("button",{className:"in_review"===i?"filter-btn active":"filter-btn",onClick:()=>o("in_review"),children:"\ud83d\udc41\ufe0f En Revision"}),(0,Kn.jsx)("button",{className:"approved"===i?"filter-btn active":"filter-btn",onClick:()=>o("approved"),children:"\u2705 Aprobadas"}),(0,Kn.jsx)("button",{className:"rejected"===i?"filter-btn active":"filter-btn",onClick:()=>o("rejected"),children:"\u274c Rechazadas"})]}),0===e.length?(0,Kn.jsxs)("div",{className:"empty-state",children:[(0,Kn.jsx)("h3",{children:"No hay solicitudes"}),(0,Kn.jsx)("p",{children:"all"===i?"Aun no has creado ninguna solicitud":'No tienes solicitudes con estado "'.concat(i,'"')})]}):(0,Kn.jsx)("div",{className:"requests-grid",children:e.map(e=>(0,Kn.jsxs)("div",{className:"request-card","data-status":e.status,children:[(0,Kn.jsxs)("div",{className:"card-header",children:[(0,Kn.jsx)("div",{className:"category-badge",style:{backgroundColor:e.category.color+"20",color:e.category.color},children:e.category.name}),d(e.status)]}),(0,Kn.jsx)("h3",{className:"request-title",children:e.title}),(0,Kn.jsxs)("div",{className:"request-meta",children:[(0,Kn.jsxs)("div",{className:"meta-item",children:[(0,Kn.jsx)("span",{className:"meta-label",children:"Prioridad:"}),u(e.priority)]}),(0,Kn.jsxs)("div",{className:"meta-item",children:[(0,Kn.jsx)("span",{className:"meta-label",children:"Fecha:"}),(0,Kn.jsx)("span",{children:new Date(e.createdAt).toLocaleDateString("es-ES")})]})]}),e.rejection_reason&&(0,Kn.jsxs)("div",{className:"rejection-notice",children:[(0,Kn.jsx)("strong",{children:"Razon del rechazo:"})," ",e.rejection_reason]}),e.generated_contract&&(0,Kn.jsxs)("div",{className:"contract-notice",children:[(0,Kn.jsx)("strong",{children:"\u2705 Contrato:"})," ",e.generated_contract.contract_number]}),(0,Kn.jsx)("div",{className:"card-actions",children:(0,Kn.jsx)("button",{className:"btn-view",onClick:()=>n(e),children:"Ver Detalles"})})]},e._id))}),t&&(0,Kn.jsx)("div",{className:"modal-overlay",onClick:()=>n(null),children:(0,Kn.jsxs)("div",{className:"modal modal-large",onClick:e=>e.stopPropagation(),children:[(0,Kn.jsxs)("div",{className:"modal-header",children:[(0,Kn.jsxs)("div",{children:[(0,Kn.jsx)("h3",{children:t.title}),(0,Kn.jsx)("div",{style:{marginTop:"0.5rem"},children:d(t.status)})]}),(0,Kn.jsx)("button",{className:"modal-close",onClick:()=>n(null),children:"\xd7"})]}),(0,Kn.jsxs)("div",{className:"modal-body",children:[(0,Kn.jsxs)("div",{className:"detail-section",children:[(0,Kn.jsx)("h4",{children:"Informacion General"}),(0,Kn.jsxs)("div",{className:"detail-grid",children:[(0,Kn.jsxs)("div",{children:[(0,Kn.jsx)("label",{children:"Categoria:"}),(0,Kn.jsx)("span",{children:t.category.name})]}),(0,Kn.jsxs)("div",{children:[(0,Kn.jsx)("label",{children:"Prioridad:"}),u(t.priority)]}),(0,Kn.jsxs)("div",{children:[(0,Kn.jsx)("label",{children:"Fecha:"}),(0,Kn.jsx)("span",{children:new Date(t.createdAt).toLocaleDateString("es-ES")})]})]})]}),(0,Kn.jsxs)("div",{className:"detail-section",children:[(0,Kn.jsx)("h4",{children:"Informacion Proporcionada"}),(0,Kn.jsx)("div",{className:"answers-list",children:Object.entries(t.questionnaire_answers).map(e=>{let[a,t]=e;return(0,Kn.jsxs)("div",{className:"answer-item",children:[(0,Kn.jsxs)("label",{children:[a.replace(/_/g," "),":"]}),(0,Kn.jsx)("span",{children:Array.isArray(t)?t.join(", "):"boolean"===typeof t?t?"Si":"No":t||"N/A"})]},a)})})]}),t.legal_notes&&(0,Kn.jsxs)("div",{className:"detail-section",children:[(0,Kn.jsx)("h4",{children:"Notas Legales"}),(0,Kn.jsx)("p",{children:t.legal_notes})]})]}),(0,Kn.jsx)("div",{className:"modal-footer",children:(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>n(null),children:"Cerrar"})})]})})]})},Ar=()=>{const[e,a]=(0,r.useState)([]),[t,n]=(0,r.useState)("pending"),[l,s]=(0,r.useState)(!0),[i,o]=(0,r.useState)(null),[c,d]=(0,r.useState)("");(0,r.useEffect)(()=>{u()},[t]);const u=async()=>{try{const e="pending"===t?"/supplier-approvals/pending":"/supplier-approvals/all",n=await Qn.get(e);a(n.data)}catch(e){console.error("Error fetching suppliers:",e)}finally{s(!1)}},m=e=>{const a={pending:{bg:"#fef3c7",color:"#92400e",text:"Pendiente"},approved:{bg:"#d1fae5",color:"#065f46",text:"Aprobado"},rejected:{bg:"#fee2e2",color:"#991b1b",text:"Rechazado"}},t=a[e]||a.pending;return(0,Kn.jsx)("span",{className:"status-badge",style:{background:t.bg,color:t.color},children:t.text})};return l?(0,Kn.jsx)("div",{className:"loading",children:"Cargando terceros..."}):(0,Kn.jsxs)("div",{className:"supplier-approvals-tab",children:[(0,Kn.jsxs)("div",{className:"filter-buttons",children:[(0,Kn.jsx)("button",{onClick:()=>n("pending"),className:"pending"===t?"btn-primary":"btn-secondary",children:"Pendientes"}),(0,Kn.jsx)("button",{onClick:()=>n("all"),className:"all"===t?"btn-primary":"btn-secondary",children:"Todos"})]}),0===e.length?(0,Kn.jsxs)("div",{className:"empty-state",children:[(0,Kn.jsxs)("h3",{children:["No hay terceros ","pending"===t?"pendientes":""]}),(0,Kn.jsx)("p",{children:"pending"===t?"Todos los terceros han sido revisados":"No hay terceros registrados"})]}):(0,Kn.jsx)("div",{className:"approvals-table-wrapper",children:(0,Kn.jsxs)("table",{className:"approvals-table",children:[(0,Kn.jsx)("thead",{children:(0,Kn.jsxs)("tr",{children:[(0,Kn.jsx)("th",{children:"Tercero"}),(0,Kn.jsx)("th",{children:"Identificacion"}),(0,Kn.jsx)("th",{children:"Representante"}),(0,Kn.jsx)("th",{children:"Contacto"}),(0,Kn.jsx)("th",{children:"Creado Por"}),(0,Kn.jsx)("th",{children:"Estado"}),(0,Kn.jsx)("th",{children:"Acciones"})]})}),(0,Kn.jsx)("tbody",{children:e.map(e=>(0,Kn.jsxs)("tr",{className:"approval-row status-".concat(e.approval_status),children:[(0,Kn.jsx)("td",{children:(0,Kn.jsxs)("div",{className:"supplier-name-info",children:[(0,Kn.jsx)("strong",{children:e.legal_name}),e.rejection_reason&&(0,Kn.jsxs)("small",{className:"inline-rejection",children:["Rechazado: ",e.rejection_reason]})]})}),(0,Kn.jsx)("td",{children:(0,Kn.jsxs)("div",{className:"id-badge",children:[(0,Kn.jsx)("span",{className:"id-type",children:e.identification_type}),(0,Kn.jsx)("span",{className:"id-number",children:e.identification_number})]})}),(0,Kn.jsx)("td",{children:e.legal_representative_name}),(0,Kn.jsx)("td",{children:(0,Kn.jsxs)("div",{className:"contact-info",children:[e.email&&(0,Kn.jsxs)("span",{className:"contact-item",children:["\ud83d\udce7 ",e.email]}),e.phone&&(0,Kn.jsxs)("span",{className:"contact-item",children:["\ud83d\udcde ",e.phone]}),!e.email&&!e.phone&&(0,Kn.jsx)("span",{className:"no-contact",children:"N/A"})]})}),(0,Kn.jsx)("td",{children:(0,Kn.jsxs)("div",{className:"creator-info",children:[(0,Kn.jsx)("span",{children:e.created_by.name}),(0,Kn.jsx)("small",{children:new Date(e.createdAt).toLocaleDateString("es-ES")})]})}),(0,Kn.jsx)("td",{children:m(e.approval_status)}),(0,Kn.jsx)("td",{children:(0,Kn.jsxs)("div",{className:"action-buttons",children:["pending"===e.approval_status&&!i&&(0,Kn.jsxs)(Kn.Fragment,{children:[(0,Kn.jsx)("button",{className:"btn-action btn-approve-action",onClick:()=>(async e=>{if(window.confirm("Aprobar este tercero?"))try{await Qn.post("/supplier-approvals/".concat(e,"/approve")),alert("Tercero aprobado exitosamente"),u()}catch(n){var a,t;alert((null===(a=n.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.error)||"Error al aprobar")}})(e._id),title:"Aprobar",children:"\u2713"}),(0,Kn.jsx)("button",{className:"btn-action btn-reject-action",onClick:()=>o(e._id),title:"Rechazar",children:"\u2715"})]}),i===e._id&&(0,Kn.jsxs)("div",{className:"inline-rejection-form",children:[(0,Kn.jsx)("textarea",{value:c,onChange:e=>d(e.target.value),rows:2,placeholder:"Razon del rechazo...",className:"inline-textarea"}),(0,Kn.jsxs)("div",{className:"inline-buttons",children:[(0,Kn.jsx)("button",{className:"btn-action btn-danger-sm",onClick:()=>(async e=>{if(c.trim())try{await Qn.post("/supplier-approvals/".concat(e,"/reject"),{rejection_reason:c}),alert("Tercero rechazado"),o(null),d(""),u()}catch(n){var a,t;alert((null===(a=n.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.error)||"Error al rechazar")}else alert("Debes proporcionar una razon del rechazo")})(e._id),children:"\u2713"}),(0,Kn.jsx)("button",{className:"btn-action btn-cancel-sm",onClick:()=>{o(null),d("")},children:"\u2715"})]})]})]})})]},e._id))})]})})]})},Dr=()=>{var e,a;const[t,n]=(0,r.useState)([]),[l,s]=(0,r.useState)(null),[i,o]=(0,r.useState)(!0),[c,d]=(0,r.useState)(""),[u,m]=(0,r.useState)("");(0,r.useEffect)(()=>{p()},[]);const p=async()=>{try{const e=await Qn.get("/contract-requests-v2");n(e.data)}catch(e){console.error("Error fetching requests:",e)}finally{o(!1)}},h=e=>{const a={pending:{bg:"#fef3c7",color:"#92400e",text:"Pendiente"},in_review:{bg:"#dbeafe",color:"#1e40af",text:"En Revision"},approved:{bg:"#d1fae5",color:"#065f46",text:"Aprobado"},rejected:{bg:"#fee2e2",color:"#991b1b",text:"Rechazado"},completed:{bg:"#d1fae5",color:"#065f46",text:"Completado"}},t=a[e]||a.pending;return(0,Kn.jsx)("span",{className:"status-badge",style:{background:t.bg,color:t.color},children:t.text})},f=e=>{const a={low:{bg:"#e5e7eb",color:"#374151",text:"Baja"},medium:{bg:"#fef3c7",color:"#92400e",text:"Media"},high:{bg:"#fed7aa",color:"#9a3412",text:"Alta"},urgent:{bg:"#fecaca",color:"#991b1b",text:"Urgente"}},t=a[e]||a.medium;return(0,Kn.jsx)("span",{className:"priority-badge",style:{background:t.bg,color:t.color},children:t.text})};return i?(0,Kn.jsx)("div",{className:"loading",children:"Cargando solicitudes..."}):(0,Kn.jsxs)("div",{className:"contract-approvals-tab",children:[0===t.length?(0,Kn.jsxs)("div",{className:"empty-state",children:[(0,Kn.jsx)("h3",{children:"No hay solicitudes"}),(0,Kn.jsx)("p",{children:"Las solicitudes apareceran aqui cuando sean creadas"})]}):(0,Kn.jsx)("div",{className:"requests-table-wrapper",children:(0,Kn.jsxs)("table",{className:"requests-table",children:[(0,Kn.jsx)("thead",{children:(0,Kn.jsxs)("tr",{children:[(0,Kn.jsx)("th",{children:"Solicitud"}),(0,Kn.jsx)("th",{children:"Categoria"}),(0,Kn.jsx)("th",{children:"Prioridad"}),(0,Kn.jsx)("th",{children:"Solicitante"}),(0,Kn.jsx)("th",{children:"Fecha"}),(0,Kn.jsx)("th",{children:"Asignado"}),(0,Kn.jsx)("th",{children:"Estado"}),(0,Kn.jsx)("th",{children:"Acciones"})]})}),(0,Kn.jsx)("tbody",{children:t.map(e=>{var a,t;return(0,Kn.jsxs)("tr",{className:"request-row status-".concat(e.status),children:[(0,Kn.jsx)("td",{children:(0,Kn.jsx)("strong",{children:e.title})}),(0,Kn.jsx)("td",{children:(0,Kn.jsx)("span",{className:"category-badge-compact",style:{background:e.category.color+"20",color:e.category.color},children:e.category.name})}),(0,Kn.jsx)("td",{children:f(e.priority)}),(0,Kn.jsx)("td",{children:(null===(a=e.requester)||void 0===a?void 0:a.name)||"N/A"}),(0,Kn.jsx)("td",{children:new Date(e.createdAt).toLocaleDateString("es-ES")}),(0,Kn.jsx)("td",{children:(null===(t=e.assigned_lawyer)||void 0===t?void 0:t.name)||(0,Kn.jsx)("span",{className:"not-assigned",children:"No asignado"})}),(0,Kn.jsx)("td",{children:h(e.status)}),(0,Kn.jsx)("td",{children:(0,Kn.jsxs)("div",{className:"action-buttons",children:["pending"===e.status&&(0,Kn.jsx)("button",{className:"btn-action btn-assign",onClick:()=>(async e=>{try{await Qn.post("/contract-requests-v2/".concat(e,"/assign"),{}),alert("Solicitud asignada a ti"),p()}catch(n){var a,t;alert((null===(a=n.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.error)||"Error al asignar")}})(e._id),title:"Asignarme",children:"\ud83d\udc64+"}),(0,Kn.jsx)("button",{className:"btn-action btn-view",onClick:()=>s(e),title:"Ver detalles",children:"\ud83d\udc41\ufe0f"})]})})]},e._id)})})]})}),l&&(0,Kn.jsx)("div",{className:"modal-overlay",onClick:()=>s(null),children:(0,Kn.jsxs)("div",{className:"modal modal-large",onClick:e=>e.stopPropagation(),children:[(0,Kn.jsxs)("div",{className:"modal-header",children:[(0,Kn.jsx)("h3",{children:l.title}),(0,Kn.jsx)("button",{className:"modal-close",onClick:()=>s(null),children:"\xd7"})]}),(0,Kn.jsxs)("div",{className:"modal-body",children:[(0,Kn.jsxs)("div",{className:"request-detail-section",children:[(0,Kn.jsx)("h4",{children:"Informacion General"}),(0,Kn.jsxs)("div",{className:"detail-grid",children:[(0,Kn.jsxs)("div",{children:[(0,Kn.jsx)("label",{children:"Categoria:"}),(0,Kn.jsx)("span",{children:l.category.name})]}),(0,Kn.jsxs)("div",{children:[(0,Kn.jsx)("label",{children:"Prioridad:"}),f(l.priority)]}),(0,Kn.jsxs)("div",{children:[(0,Kn.jsx)("label",{children:"Estado:"}),h(l.status)]}),(0,Kn.jsxs)("div",{children:[(0,Kn.jsx)("label",{children:"Solicitante:"}),(0,Kn.jsx)("span",{children:(null===(e=l.requester)||void 0===e?void 0:e.name)||"N/A"})]})]})]}),(0,Kn.jsxs)("div",{className:"request-detail-section",children:[(0,Kn.jsx)("h4",{children:"Respuestas del Cuestionario"}),(0,Kn.jsx)("div",{className:"questionnaire-answers",children:null===(a=l.category.questionnaire)||void 0===a?void 0:a.map(e=>{const a=l.questionnaire_answers[e.field_name];return(0,Kn.jsxs)("div",{className:"answer-row",children:[(0,Kn.jsxs)("label",{children:[e.question,":"]}),(0,Kn.jsx)("span",{children:Array.isArray(a)?a.join(", "):"boolean"===typeof a?a?"Si":"No":a||"N/A"})]},e.field_name)})})]}),l.rejection_reason&&(0,Kn.jsxs)("div",{className:"rejection-notice",children:[(0,Kn.jsx)("strong",{children:"Razon del rechazo:"})," ",l.rejection_reason]}),("in_review"===l.status||"pending"===l.status)&&(0,Kn.jsxs)("div",{className:"approval-section",children:[(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Notas Legales (opcional):"}),(0,Kn.jsx)("textarea",{value:u,onChange:e=>m(e.target.value),rows:3,placeholder:"Agrega notas o comentarios legales..."})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Razon del Rechazo (si aplica):"}),(0,Kn.jsx)("textarea",{value:c,onChange:e=>d(e.target.value),rows:3,placeholder:"Explica por que se rechaza..."})]}),(0,Kn.jsxs)("div",{className:"modal-actions",children:[(0,Kn.jsx)("button",{className:"btn-approve",onClick:()=>(async e=>{if(window.confirm("Aprobar y generar contrato automaticamente?"))try{await Qn.post("/contract-requests-v2/".concat(e,"/approve"),{legal_notes:u}),alert("Contrato generado exitosamente!"),s(null),m(""),p()}catch(n){var a,t;alert((null===(a=n.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.error)||"Error al aprobar")}})(l._id),children:"\u2713 Aprobar y Generar Contrato"}),(0,Kn.jsx)("button",{className:"btn-danger",onClick:()=>(async e=>{if(c.trim())try{await Qn.post("/contract-requests-v2/".concat(e,"/reject"),{rejection_reason:c}),alert("Solicitud rechazada"),s(null),d(""),p()}catch(n){var a,t;alert((null===(a=n.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.error)||"Error al rechazar")}else alert("Proporciona una razon del rechazo")})(l._id),disabled:!c.trim(),children:"\xd7 Rechazar Solicitud"})]})]}),("completed"===l.status||"approved"===l.status)&&(0,Kn.jsx)("div",{className:"success-notice",children:"\u2713 Esta solicitud ya fue aprobada y el contrato fue generado"})]}),(0,Kn.jsx)("div",{className:"modal-footer",children:(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>s(null),children:"Cerrar"})})]})})]})},zr=()=>{const{user:e}=Yn(),a=pe(),t=ve(),n="requester"===(null===e||void 0===e?void 0:e.role),l=["super_admin","admin","lawyer"].includes((null===e||void 0===e?void 0:e.role)||""),s=()=>{const e=new URLSearchParams(a.search).get("tab");return"new-request"===e||"my-requests"===e||"supplier-approvals"===e||"contract-approvals"===e?e:n?"my-requests":l?"contract-approvals":"my-requests"},[i,o]=(0,r.useState)(s()),c=e=>{o(e),t("?tab=".concat(e),{replace:!0})};(0,r.useEffect)(()=>{const e=s();e!==i&&o(e)},[a.search]);return(0,Kn.jsxs)("div",{className:"requests-approvals-container",children:[(0,Kn.jsxs)("div",{className:"page-header",children:[(0,Kn.jsx)("h1",{children:"Solicitudes y Aprobaciones"}),(0,Kn.jsx)("p",{className:"subtitle",children:"Gestiona solicitudes de contratos y aprobaciones de terceros"})]}),(0,Kn.jsxs)("div",{className:"tabs-container",children:[(0,Kn.jsxs)("div",{className:"tabs-nav",children:[(n||l)&&(0,Kn.jsxs)("button",{className:"tab-btn ".concat("new-request"===i?"active":""),onClick:()=>c("new-request"),children:[(0,Kn.jsx)("span",{className:"tab-icon",children:"\ud83d\udcdd"}),"Nueva Solicitud"]}),(0,Kn.jsxs)("button",{className:"tab-btn ".concat("my-requests"===i?"active":""),onClick:()=>c("my-requests"),children:[(0,Kn.jsx)("span",{className:"tab-icon",children:"\ud83d\udccb"}),"Mis Solicitudes"]}),l&&(0,Kn.jsxs)(Kn.Fragment,{children:[(0,Kn.jsxs)("button",{className:"tab-btn ".concat("supplier-approvals"===i?"active":""),onClick:()=>c("supplier-approvals"),children:[(0,Kn.jsx)("span",{className:"tab-icon",children:"\ud83d\udc65"}),"Aprobar Terceros"]}),(0,Kn.jsxs)("button",{className:"tab-btn ".concat("contract-approvals"===i?"active":""),onClick:()=>c("contract-approvals"),children:[(0,Kn.jsx)("span",{className:"tab-icon",children:"\u2705"}),"Aprobar Solicitudes"]})]})]}),(0,Kn.jsx)("div",{className:"tab-content",children:(()=>{switch(i){case"new-request":return(0,Kn.jsx)(Rr,{});case"my-requests":return(0,Kn.jsx)(Lr,{});case"supplier-approvals":return(0,Kn.jsx)(Ar,{});case"contract-approvals":return(0,Kn.jsx)(Dr,{});default:return null}})()})]})]})},Or=()=>{const[e,a]=(0,r.useState)(null),[t,n]=(0,r.useState)(!0),[l,s]=(0,r.useState)(null);(0,r.useEffect)(()=>{i()},[]);const i=async()=>{try{n(!0);const e=await Qn.get("/vacations-v2/my-balance");a(e.data.data)}catch(r){var e,t;s((null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.error)||"Error cargando balance")}finally{n(!1)}};if(t)return(0,Kn.jsx)("div",{className:"loading",children:"Cargando balance..."});if(l)return(0,Kn.jsx)("div",{className:"error-message",children:l});if(!e)return(0,Kn.jsx)("div",{className:"no-data",children:"No tienes balance de vacaciones configurado. Contacta a Talento Humano."});const{summary:o,causacion:c}=e;return(0,Kn.jsxs)("div",{className:"balance-view",children:[(0,Kn.jsxs)("div",{className:"balance-cards",children:[(0,Kn.jsxs)("div",{className:"balance-card primary",children:[(0,Kn.jsx)("h3",{children:"D\xedas Disponibles"}),(0,Kn.jsx)("div",{className:"balance-value",children:o.availableDays.toFixed(2)}),(0,Kn.jsx)("p",{children:"d\xedas h\xe1biles"})]}),(0,Kn.jsxs)("div",{className:"balance-card",children:[(0,Kn.jsx)("h3",{children:"D\xedas Causados"}),(0,Kn.jsx)("div",{className:"balance-value",children:o.accruedDays.toFixed(2)}),(0,Kn.jsx)("p",{children:"total acumulado"})]}),(0,Kn.jsxs)("div",{className:"balance-card",children:[(0,Kn.jsx)("h3",{children:"D\xedas Disfrutados"}),(0,Kn.jsx)("div",{className:"balance-value",children:o.totalEnjoyedDays.toFixed(2)}),(0,Kn.jsx)("p",{children:o.historicalEnjoyedDays>0&&"(".concat(o.historicalEnjoyedDays," hist\xf3ricos)")})]}),(0,Kn.jsxs)("div",{className:"balance-card",children:[(0,Kn.jsx)("h3",{children:"D\xedas Pendientes"}),(0,Kn.jsx)("div",{className:"balance-value",children:o.approvedPendingDays.toFixed(2)}),(0,Kn.jsx)("p",{children:"aprobados por disfrutar"})]})]}),(0,Kn.jsxs)("div",{className:"balance-details",children:[(0,Kn.jsx)("h3",{children:"Informaci\xf3n Laboral"}),(0,Kn.jsxs)("div",{className:"details-grid",children:[(0,Kn.jsxs)("div",{className:"detail-item",children:[(0,Kn.jsx)("label",{children:"Fecha de Contrataci\xf3n:"}),(0,Kn.jsx)("span",{children:new Date(e.balance.hireDate).toLocaleDateString("es-CO")})]}),(0,Kn.jsxs)("div",{className:"detail-item",children:[(0,Kn.jsx)("label",{children:"A\xf1os de Servicio:"}),(0,Kn.jsxs)("span",{children:[o.yearsOfService.toFixed(2)," a\xf1os"]})]}),(0,Kn.jsxs)("div",{className:"detail-item",children:[(0,Kn.jsx)("label",{children:"Factor de Jornada:"}),(0,Kn.jsxs)("span",{children:[(100*o.workTimeFactor).toFixed(0),"% (",1===o.workTimeFactor?"Tiempo completo":"Tiempo parcial",")"]})]}),(0,Kn.jsxs)("div",{className:"detail-item",children:[(0,Kn.jsx)("label",{children:"Base de C\xe1lculo:"}),(0,Kn.jsxs)("span",{children:[o.calculationBase," d\xedas"]})]})]})]}),c&&(0,Kn.jsxs)("div",{className:"causation-info",children:[(0,Kn.jsx)("h3",{children:"C\xe1lculo de Causaci\xf3n"}),(0,Kn.jsxs)("p",{className:"formula",children:["F\xf3rmula: (D\xedas trabajados / ",c.base,") \xd7 15 d\xedas = ",c.diasCausados.toFixed(4)," d\xedas"]}),(0,Kn.jsxs)("div",{className:"details-grid",children:[(0,Kn.jsxs)("div",{className:"detail-item",children:[(0,Kn.jsx)("label",{children:"D\xedas Calendario:"}),(0,Kn.jsx)("span",{children:c.diasCalendario})]}),(0,Kn.jsxs)("div",{className:"detail-item",children:[(0,Kn.jsx)("label",{children:"D\xedas Trabajados:"}),(0,Kn.jsx)("span",{children:c.diasTrabajados})]}),(0,Kn.jsxs)("div",{className:"detail-item",children:[(0,Kn.jsx)("label",{children:"Tasa Diaria:"}),(0,Kn.jsxs)("span",{children:[c.tasaDiaria.toFixed(6)," d\xedas/d\xeda"]})]})]})]})]})},Ir=()=>{const[e,a]=(0,r.useState)([]),[t,n]=(0,r.useState)(!0);(0,r.useEffect)(()=>{l()},[]);const l=async()=>{try{n(!0);const e=await Qn.get("/vacations-v2/requests/my");a(e.data.data.requests)}catch(e){console.error("Error fetching requests:",e)}finally{n(!1)}},s=e=>{const a={requested:{label:"Pendiente L\xedder",class:"warning"},leader_approved:{label:"Pendiente TH",class:"info"},leader_rejected:{label:"Rechazada (L\xedder)",class:"error"},hr_approved:{label:"Aprobada",class:"success"},hr_rejected:{label:"Rechazada (TH)",class:"error"},scheduled:{label:"Programada",class:"success"},enjoyed:{label:"Disfrutada",class:"default"},cancelled:{label:"Cancelada",class:"default"}}[e.status]||{label:e.status,class:"default"};return(0,Kn.jsx)("span",{className:"status-badge ".concat(a.class),children:a.label})};return t?(0,Kn.jsx)("div",{className:"loading",children:"Cargando solicitudes..."}):(0,Kn.jsxs)("div",{className:"requests-list",children:[(0,Kn.jsx)("h3",{children:"Mis Solicitudes de Vacaciones"}),0===e.length?(0,Kn.jsx)("div",{className:"no-data",children:"No tienes solicitudes de vacaciones"}):(0,Kn.jsxs)("table",{className:"requests-table",children:[(0,Kn.jsx)("thead",{children:(0,Kn.jsxs)("tr",{children:[(0,Kn.jsx)("th",{children:"Fecha Solicitud"}),(0,Kn.jsx)("th",{children:"D\xedas"}),(0,Kn.jsx)("th",{children:"Per\xedodo"}),(0,Kn.jsx)("th",{children:"Estado"}),(0,Kn.jsx)("th",{children:"Notas"})]})}),(0,Kn.jsx)("tbody",{children:e.map(e=>(0,Kn.jsxs)("tr",{children:[(0,Kn.jsx)("td",{children:new Date(e.requestDate).toLocaleDateString("es-CO")}),(0,Kn.jsx)("td",{children:e.requestedDays}),(0,Kn.jsxs)("td",{children:[new Date(e.startDate).toLocaleDateString("es-CO")," - ",new Date(e.endDate).toLocaleDateString("es-CO")]}),(0,Kn.jsx)("td",{children:s(e)}),(0,Kn.jsxs)("td",{children:[e.rejectionReason&&(0,Kn.jsxs)("span",{className:"rejection-reason",children:["Rechazo: ",e.rejectionReason]}),e.leaderComments&&(0,Kn.jsxs)("span",{className:"comment",children:["L\xedder: ",e.leaderComments]}),e.hrComments&&(0,Kn.jsxs)("span",{className:"comment",children:["TH: ",e.hrComments]})]})]},e._id))})]})]})},qr=e=>{let{onSuccess:a}=e;const[t,n]=(0,r.useState)({requestedDays:"",startDate:"",endDate:"",employeeNotes:""}),[l,s]=(0,r.useState)(null),[i,o]=(0,r.useState)(!1),[c,d]=(0,r.useState)(null),[m,p]=(0,r.useState)(!1);(0,r.useEffect)(()=>{h()},[]);const h=async()=>{try{const e=await Qn.get("/vacations-v2/my-balance");s(e.data.data)}catch(e){console.error("Error fetching balance:",e)}};return l?(0,Kn.jsxs)("div",{className:"new-request-form",children:[(0,Kn.jsx)("h3",{children:"Nueva Solicitud de Vacaciones"}),(0,Kn.jsx)("div",{className:"balance-summary",children:(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"D\xedas disponibles:"})," ",l.summary.availableDays.toFixed(2)," d\xedas"]})}),m&&(0,Kn.jsx)("div",{className:"success-message",children:"Solicitud creada exitosamente. Ser\xe1 revisada por tu l\xedder y luego por Talento Humano."}),c&&(0,Kn.jsx)("div",{className:"error-message",children:c}),(0,Kn.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),o(!0),d(null);try{await Qn.post("/vacations-v2/requests",{requestedDays:parseFloat(t.requestedDays),startDate:t.startDate,endDate:t.endDate,employeeNotes:t.employeeNotes||void 0}),p(!0),n({requestedDays:"",startDate:"",endDate:"",employeeNotes:""}),setTimeout(()=>{a&&a()},2e3)}catch(s){var r,l;d((null===(r=s.response)||void 0===r||null===(l=r.data)||void 0===l?void 0:l.error)||"Error creando solicitud")}finally{o(!1)}},children:[(0,Kn.jsx)("div",{className:"form-row",children:(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"D\xedas Solicitados *"}),(0,Kn.jsx)("input",{type:"number",step:"0.5",min:"0.5",max:l.summary.availableDays,value:t.requestedDays,onChange:e=>n(u(u({},t),{},{requestedDays:e.target.value})),required:!0})]})}),(0,Kn.jsxs)("div",{className:"form-row",children:[(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Fecha Inicio *"}),(0,Kn.jsx)("input",{type:"date",value:t.startDate,onChange:e=>n(u(u({},t),{},{startDate:e.target.value})),min:new Date(Date.now()+432e6).toISOString().split("T")[0],required:!0})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Fecha Fin *"}),(0,Kn.jsx)("input",{type:"date",value:t.endDate,onChange:e=>n(u(u({},t),{},{endDate:e.target.value})),min:t.startDate||(new Date).toISOString().split("T")[0],required:!0})]})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Observaciones (opcional)"}),(0,Kn.jsx)("textarea",{value:t.employeeNotes,onChange:e=>n(u(u({},t),{},{employeeNotes:e.target.value})),maxLength:500,rows:3,placeholder:"Agrega cualquier observaci\xf3n relevante..."})]}),(0,Kn.jsxs)("div",{className:"form-info",children:[(0,Kn.jsx)("p",{children:"El flujo de aprobaci\xf3n es:"}),(0,Kn.jsxs)("ol",{children:[(0,Kn.jsx)("li",{children:"Aprobaci\xf3n del L\xedder/Jefe inmediato"}),(0,Kn.jsx)("li",{children:"Aprobaci\xf3n de Talento Humano"})]}),(0,Kn.jsx)("p",{children:"Recibir\xe1s notificaci\xf3n cuando tu solicitud sea procesada."})]}),(0,Kn.jsx)("button",{type:"submit",className:"btn-primary",disabled:i,children:i?"Enviando...":"Enviar Solicitud"})]})]}):(0,Kn.jsx)("div",{className:"no-data",children:"No tienes balance de vacaciones configurado. Contacta a Talento Humano."})},Fr=()=>{const[e,a]=(0,r.useState)([]),[t,n]=(0,r.useState)(!0),[l,s]=(0,r.useState)(null),[i,o]=(0,r.useState)({open:!1,requestId:null,reason:""});(0,r.useEffect)(()=>{c()},[]);const c=async()=>{try{n(!0);const e=await Qn.get("/vacations-v2/pending/leader");a(e.data.data)}catch(e){console.error("Error fetching pending:",e)}finally{n(!1)}};return t?(0,Kn.jsx)("div",{className:"loading",children:"Cargando solicitudes pendientes..."}):(0,Kn.jsxs)("div",{className:"approvals-list",children:[(0,Kn.jsx)("h3",{children:"Solicitudes Pendientes de Aprobaci\xf3n (L\xedder)"}),0===e.length?(0,Kn.jsx)("div",{className:"no-data",children:"No hay solicitudes pendientes de aprobaci\xf3n"}):(0,Kn.jsxs)("table",{className:"requests-table",children:[(0,Kn.jsx)("thead",{children:(0,Kn.jsxs)("tr",{children:[(0,Kn.jsx)("th",{children:"Empleado"}),(0,Kn.jsx)("th",{children:"Fecha Solicitud"}),(0,Kn.jsx)("th",{children:"D\xedas"}),(0,Kn.jsx)("th",{children:"Per\xedodo"}),(0,Kn.jsx)("th",{children:"Notas"}),(0,Kn.jsx)("th",{children:"Acciones"})]})}),(0,Kn.jsx)("tbody",{children:e.map(e=>(0,Kn.jsxs)("tr",{children:[(0,Kn.jsxs)("td",{children:[(0,Kn.jsx)("strong",{children:e.employeeId.name}),(0,Kn.jsx)("br",{}),(0,Kn.jsx)("small",{children:e.employeeId.email})]}),(0,Kn.jsx)("td",{children:new Date(e.requestDate).toLocaleDateString("es-CO")}),(0,Kn.jsx)("td",{children:e.requestedDays}),(0,Kn.jsxs)("td",{children:[new Date(e.startDate).toLocaleDateString("es-CO")," - ",new Date(e.endDate).toLocaleDateString("es-CO")]}),(0,Kn.jsx)("td",{children:e.employeeNotes||"-"}),(0,Kn.jsx)("td",{children:(0,Kn.jsxs)("div",{className:"action-buttons",children:[(0,Kn.jsx)("button",{className:"btn-approve",onClick:()=>(async e=>{try{s(e),await Qn.put("/vacations-v2/requests/".concat(e,"/approve-leader"),{comments:"Aprobado"}),c()}catch(n){var a,t;alert((null===(a=n.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.error)||"Error aprobando solicitud")}finally{s(null)}})(e._id),disabled:l===e._id,children:"Aprobar"}),(0,Kn.jsx)("button",{className:"btn-reject",onClick:()=>o({open:!0,requestId:e._id,reason:""}),disabled:l===e._id,children:"Rechazar"})]})})]},e._id))})]}),i.open&&(0,Kn.jsx)("div",{className:"modal-overlay",children:(0,Kn.jsxs)("div",{className:"modal",children:[(0,Kn.jsx)("h3",{children:"Rechazar Solicitud"}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Raz\xf3n del rechazo *"}),(0,Kn.jsx)("textarea",{value:i.reason,onChange:e=>o(u(u({},i),{},{reason:e.target.value})),rows:3,placeholder:"Explica la raz\xf3n del rechazo..."})]}),(0,Kn.jsxs)("div",{className:"modal-actions",children:[(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>o({open:!1,requestId:null,reason:""}),children:"Cancelar"}),(0,Kn.jsx)("button",{className:"btn-reject",onClick:async()=>{if(i.requestId&&i.reason.trim())try{s(i.requestId),await Qn.put("/vacations-v2/requests/".concat(i.requestId,"/reject-leader"),{reason:i.reason}),o({open:!1,requestId:null,reason:""}),c()}catch(t){var e,a;alert((null===(e=t.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.error)||"Error rechazando solicitud")}finally{s(null)}},disabled:!i.reason.trim(),children:"Confirmar Rechazo"})]})]})})]})},Mr=()=>{const[e,a]=(0,r.useState)([]),[t,n]=(0,r.useState)(!0),[l,s]=(0,r.useState)(null),[i,o]=(0,r.useState)({open:!1,requestId:null,reason:""});(0,r.useEffect)(()=>{c()},[]);const c=async()=>{try{n(!0);const e=await Qn.get("/vacations-v2/pending/hr");a(e.data.data)}catch(e){console.error("Error fetching pending:",e)}finally{n(!1)}};return t?(0,Kn.jsx)("div",{className:"loading",children:"Cargando solicitudes pendientes..."}):(0,Kn.jsxs)("div",{className:"approvals-list",children:[(0,Kn.jsx)("h3",{children:"Solicitudes Pendientes de Aprobaci\xf3n (Talento Humano)"}),(0,Kn.jsx)("p",{className:"info-text",children:"Estas solicitudes ya fueron aprobadas por el l\xedder y requieren aprobaci\xf3n final."}),0===e.length?(0,Kn.jsx)("div",{className:"no-data",children:"No hay solicitudes pendientes de aprobaci\xf3n"}):(0,Kn.jsxs)("table",{className:"requests-table",children:[(0,Kn.jsx)("thead",{children:(0,Kn.jsxs)("tr",{children:[(0,Kn.jsx)("th",{children:"Empleado"}),(0,Kn.jsx)("th",{children:"Fecha Solicitud"}),(0,Kn.jsx)("th",{children:"D\xedas"}),(0,Kn.jsx)("th",{children:"Per\xedodo"}),(0,Kn.jsx)("th",{children:"Aprobado por L\xedder"}),(0,Kn.jsx)("th",{children:"Acciones"})]})}),(0,Kn.jsx)("tbody",{children:e.map(e=>{var a;return(0,Kn.jsxs)("tr",{children:[(0,Kn.jsxs)("td",{children:[(0,Kn.jsx)("strong",{children:e.employeeId.name}),(0,Kn.jsx)("br",{}),(0,Kn.jsx)("small",{children:e.employeeId.email})]}),(0,Kn.jsx)("td",{children:new Date(e.requestDate).toLocaleDateString("es-CO")}),(0,Kn.jsx)("td",{children:e.requestedDays}),(0,Kn.jsxs)("td",{children:[new Date(e.startDate).toLocaleDateString("es-CO")," - ",new Date(e.endDate).toLocaleDateString("es-CO")]}),(0,Kn.jsxs)("td",{children:[(null===(a=e.leaderId)||void 0===a?void 0:a.name)||"N/A",(0,Kn.jsx)("br",{}),(0,Kn.jsx)("small",{children:e.leaderApprovalDate&&new Date(e.leaderApprovalDate).toLocaleDateString("es-CO")})]}),(0,Kn.jsx)("td",{children:(0,Kn.jsxs)("div",{className:"action-buttons",children:[(0,Kn.jsx)("button",{className:"btn-approve",onClick:()=>(async e=>{try{s(e),await Qn.put("/vacations-v2/requests/".concat(e,"/approve-hr"),{comments:"Aprobado por Talento Humano"}),c()}catch(n){var a,t;alert((null===(a=n.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.error)||"Error aprobando solicitud")}finally{s(null)}})(e._id),disabled:l===e._id,children:"Aprobar (Final)"}),(0,Kn.jsx)("button",{className:"btn-reject",onClick:()=>o({open:!0,requestId:e._id,reason:""}),disabled:l===e._id,children:"Rechazar"})]})})]},e._id)})})]}),i.open&&(0,Kn.jsx)("div",{className:"modal-overlay",children:(0,Kn.jsxs)("div",{className:"modal",children:[(0,Kn.jsx)("h3",{children:"Rechazar Solicitud"}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Raz\xf3n del rechazo *"}),(0,Kn.jsx)("textarea",{value:i.reason,onChange:e=>o(u(u({},i),{},{reason:e.target.value})),rows:3,placeholder:"Explica la raz\xf3n del rechazo..."})]}),(0,Kn.jsxs)("div",{className:"modal-actions",children:[(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>o({open:!1,requestId:null,reason:""}),children:"Cancelar"}),(0,Kn.jsx)("button",{className:"btn-reject",onClick:async()=>{if(i.requestId&&i.reason.trim())try{s(i.requestId),await Qn.put("/vacations-v2/requests/".concat(i.requestId,"/reject-hr"),{reason:i.reason}),o({open:!1,requestId:null,reason:""}),c()}catch(t){var e,a;alert((null===(e=t.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.error)||"Error rechazando solicitud")}finally{s(null)}},disabled:!i.reason.trim(),children:"Confirmar Rechazo"})]})]})})]})},Ur=()=>{const[e,a]=(0,r.useState)([]),[t,n]=(0,r.useState)(!0),[l,s]=(0,r.useState)(!1),[i,o]=(0,r.useState)([]),[c,d]=(0,r.useState)([]),[m,p]=(0,r.useState)({employeeId:"",hireDate:"",leaderId:"",position:"",department:"",historicalEnjoyedDays:"0"}),[h,f]=(0,r.useState)(!1),[v,g]=(0,r.useState)(null),[x,b]=(0,r.useState)(!1),[y,j]=(0,r.useState)(null),[N,_]=(0,r.useState)(null),[w,C]=(0,r.useState)(!1),[S,k]=(0,r.useState)({employeeId:"",employeeName:"",leaderId:"",position:"",department:""}),[E,T]=(0,r.useState)(!1),[P,R]=(0,r.useState)(null);(0,r.useEffect)(()=>{A(),z(),D()},[]);const L=e=>{p(u(u({},m),{},{employeeId:e,hireDate:"",position:"",department:"",leaderId:""})),j(null),_(null),e&&(async e=>{if(e)try{b(!0);const n=await Qn.get("/vacations-v2/employee-data/".concat(e));if(n.data.success&&n.data.data.found){const e=n.data.data;p(a=>u(u({},a),{},{hireDate:e.hireDate||a.hireDate,position:e.position||a.position,department:e.department||a.department,leaderId:e.leaderId||a.leaderId})),j("Tercero tipo Empleado"),e.leaderName&&_(e.leaderName)}else try{const t=await Qn.get("/vacations-v2/employee-hire-date/".concat(e));var a;t.data.success&&t.data.data.found?(p(e=>u(u({},e),{},{hireDate:t.data.data.hireDate})),j((null===(a=t.data.data.contractInfo)||void 0===a?void 0:a.title)||"Contrato de trabajo")):j(null)}catch(t){j(null)}}catch(t){console.error("Error fetching employee data:",t),j(null)}finally{b(!1)}else j(null)})(e)},A=async()=>{try{n(!0);const e=await Qn.get("/vacations-v2/employees");a(e.data.data)}catch(e){console.error("Error fetching employees:",e)}finally{n(!1)}},D=async()=>{try{const e=await Qn.get("/users");d(e.data.users||e.data)}catch(e){console.error("Error fetching users:",e)}},z=async()=>{try{var e;const a=await Qn.get("/suppliers?type=empleado");o((null===(e=a.data)||void 0===e?void 0:e.suppliers)||[])}catch(a){console.error("Error fetching employee terceros:",a),o([])}};return t?(0,Kn.jsx)("div",{className:"loading",children:"Cargando empleados..."}):(0,Kn.jsxs)("div",{className:"employees-list",children:[(0,Kn.jsxs)("div",{className:"list-header",children:[(0,Kn.jsx)("h3",{children:"Gesti\xf3n de Empleados"}),(0,Kn.jsx)("button",{className:"btn-primary",onClick:()=>s(!0),children:"+ Inicializar Empleado"})]}),0===e.length?(0,Kn.jsx)("div",{className:"no-data",children:"No hay empleados con balance de vacaciones"}):(0,Kn.jsxs)("table",{className:"employees-table",children:[(0,Kn.jsx)("thead",{children:(0,Kn.jsxs)("tr",{children:[(0,Kn.jsx)("th",{children:"Empleado"}),(0,Kn.jsx)("th",{children:"Departamento"}),(0,Kn.jsx)("th",{children:"L\xedder"}),(0,Kn.jsx)("th",{children:"A\xf1os Servicio"}),(0,Kn.jsx)("th",{children:"Causados"}),(0,Kn.jsx)("th",{children:"Disfrutados"}),(0,Kn.jsx)("th",{children:"Disponibles"}),(0,Kn.jsx)("th",{children:"Acciones"})]})}),(0,Kn.jsx)("tbody",{children:e.map(e=>{var a,t,n,r,l,s;return(0,Kn.jsxs)("tr",{children:[(0,Kn.jsxs)("td",{children:[(0,Kn.jsx)("strong",{children:(null===(a=e.employeeId)||void 0===a?void 0:a.name)||"N/A"}),(0,Kn.jsx)("br",{}),(0,Kn.jsx)("small",{children:e.position||"-"})]}),(0,Kn.jsx)("td",{children:e.department||"-"}),(0,Kn.jsx)("td",{children:(null===(t=e.leaderId)||void 0===t?void 0:t.name)||"-"}),(0,Kn.jsx)("td",{children:(null===(n=e.yearsOfService)||void 0===n?void 0:n.toFixed(2))||"0"}),(0,Kn.jsx)("td",{children:(null===(r=e.accruedDays)||void 0===r?void 0:r.toFixed(2))||"0"}),(0,Kn.jsxs)("td",{children:[(null===(l=e.enjoyedDays)||void 0===l?void 0:l.toFixed(2))||"0",e.historicalEnjoyedDays>0&&(0,Kn.jsxs)("small",{children:[" (+",e.historicalEnjoyedDays," hist.)"]})]}),(0,Kn.jsx)("td",{children:(0,Kn.jsx)("strong",{children:(null===(s=e.availableDays)||void 0===s?void 0:s.toFixed(2))||"0"})}),(0,Kn.jsx)("td",{children:(0,Kn.jsx)("button",{className:"btn-small",onClick:()=>(e=>{var a,t,n;k({employeeId:(null===(a=e.employeeId)||void 0===a?void 0:a._id)||e.employeeId,employeeName:(null===(t=e.employeeId)||void 0===t?void 0:t.name)||"N/A",leaderId:(null===(n=e.leaderId)||void 0===n?void 0:n._id)||"",position:e.position||"",department:e.department||""}),R(null),C(!0)})(e),children:"Editar"})})]},e._id)})})]}),l&&(0,Kn.jsx)("div",{className:"modal-overlay",children:(0,Kn.jsxs)("div",{className:"modal wide",children:[(0,Kn.jsx)("h3",{children:"Inicializar Balance de Empleado"}),v&&(0,Kn.jsx)("div",{className:"error-message",children:v}),(0,Kn.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),f(!0),g(null),!m.employeeId)return g("Debe seleccionar un empleado"),void f(!1);if(!m.hireDate)return g("La fecha de contrataci\xf3n es requerida. Por favor ingrese la fecha manualmente o verifique que el empleado tenga esta informaci\xf3n en su ficha de tercero."),void f(!1);const a=new Date(m.hireDate);if(isNaN(a.getTime()))return g("La fecha de contrataci\xf3n no es v\xe1lida. Formato esperado: YYYY-MM-DD"),void f(!1);if(a>new Date)return g("La fecha de contrataci\xf3n no puede ser una fecha futura"),void f(!1);try{await Qn.post("/vacations-v2/balance/initialize",{employeeId:m.employeeId,hireDate:m.hireDate,leaderId:m.leaderId||void 0,position:m.position||void 0,department:m.department||void 0,historicalEnjoyedDays:parseFloat(m.historicalEnjoyedDays)||0}),s(!1),p({employeeId:"",hireDate:"",leaderId:"",position:"",department:"",historicalEnjoyedDays:"0"}),A()}catch(r){var t,n;g((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error)||"Error inicializando balance")}finally{f(!1)}},children:[(0,Kn.jsxs)("div",{className:"form-row",children:[(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsxs)("label",{children:["Empleado * ",(0,Kn.jsx)("small",{style:{color:"#666",fontWeight:"normal"},children:"(Terceros tipo Empleado de la empresa activa)"})]}),(0,Kn.jsxs)("select",{value:m.employeeId,onChange:e=>L(e.target.value),required:!0,children:[(0,Kn.jsx)("option",{value:"",children:"Seleccionar..."}),i.map(e=>(0,Kn.jsxs)("option",{value:e._id,children:[e.legal_name||e.full_name," ",e.identification_number?"(".concat(e.identification_number,")"):""]},e._id))]}),0===i.length&&(0,Kn.jsx)("small",{style:{color:"#dc3545",display:"block",marginTop:"4px"},children:'No hay empleados registrados como terceros en esta empresa. Debe crear primero el tercero tipo "Empleado".'})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsxs)("label",{children:["Fecha de Contrataci\xf3n *",x&&(0,Kn.jsx)("span",{style:{marginLeft:"8px",color:"#666"},children:"(Buscando...)"}),y&&!x&&(0,Kn.jsxs)("span",{style:{marginLeft:"8px",color:"#28a745",fontSize:"0.85em"},children:["\u2713 Datos de: ",y]})]}),(0,Kn.jsx)("input",{type:"date",value:m.hireDate,onChange:e=>p(u(u({},m),{},{hireDate:e.target.value})),required:!0,disabled:x})]})]}),(0,Kn.jsxs)("div",{className:"form-row",children:[(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsxs)("label",{children:["L\xedder/Jefe Inmediato",N&&!x&&(0,Kn.jsxs)("span",{style:{marginLeft:"8px",color:"#28a745",fontSize:"0.85em"},children:["\u2713 Del tercero: ",N]})]}),(0,Kn.jsxs)("select",{value:m.leaderId,onChange:e=>p(u(u({},m),{},{leaderId:e.target.value})),disabled:x,children:[(0,Kn.jsx)("option",{value:"",children:"Seleccionar..."}),c.map(e=>(0,Kn.jsxs)("option",{value:e._id,children:[e.name," (",e.role,")"]},e._id))]})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Cargo"}),(0,Kn.jsx)("input",{type:"text",value:m.position,onChange:e=>p(u(u({},m),{},{position:e.target.value})),placeholder:"Ej: Desarrollador Senior"})]})]}),(0,Kn.jsxs)("div",{className:"form-row",children:[(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Departamento"}),(0,Kn.jsx)("input",{type:"text",value:m.department,onChange:e=>p(u(u({},m),{},{department:e.target.value})),placeholder:"Ej: Tecnolog\xeda"})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"D\xedas Hist\xf3ricos Disfrutados"}),(0,Kn.jsx)("input",{type:"number",step:"0.5",min:"0",value:m.historicalEnjoyedDays,onChange:e=>p(u(u({},m),{},{historicalEnjoyedDays:e.target.value})),placeholder:"D\xedas disfrutados antes del sistema"}),(0,Kn.jsx)("small",{children:"Vacaciones disfrutadas antes de implementar el sistema"})]})]}),(0,Kn.jsxs)("div",{className:"modal-actions",children:[(0,Kn.jsx)("button",{type:"button",className:"btn-secondary",onClick:()=>s(!1),children:"Cancelar"}),(0,Kn.jsx)("button",{type:"submit",className:"btn-primary",disabled:h,children:h?"Guardando...":"Inicializar Balance"})]})]})]})}),w&&(0,Kn.jsx)("div",{className:"modal-overlay",children:(0,Kn.jsxs)("div",{className:"modal",children:[(0,Kn.jsxs)("h3",{children:["Editar Empleado: ",S.employeeName]}),P&&(0,Kn.jsx)("div",{className:"error-message",children:P}),(0,Kn.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),T(!0),R(null);try{await Qn.put("/vacations-v2/balance/".concat(S.employeeId),{leaderId:S.leaderId||void 0,position:S.position||void 0,department:S.department||void 0}),C(!1),k({employeeId:"",employeeName:"",leaderId:"",position:"",department:""}),A()}catch(n){var a,t;R((null===(a=n.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.error)||"Error actualizando empleado")}finally{T(!1)}},children:[(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"L\xedder/Jefe Inmediato"}),(0,Kn.jsxs)("select",{value:S.leaderId,onChange:e=>k(u(u({},S),{},{leaderId:e.target.value})),children:[(0,Kn.jsx)("option",{value:"",children:"Seleccionar..."}),c.map(e=>(0,Kn.jsxs)("option",{value:e._id,children:[e.name," (",e.role,")"]},e._id))]})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Cargo"}),(0,Kn.jsx)("input",{type:"text",value:S.position,onChange:e=>k(u(u({},S),{},{position:e.target.value})),placeholder:"Ej: Desarrollador Senior"})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Departamento"}),(0,Kn.jsx)("input",{type:"text",value:S.department,onChange:e=>k(u(u({},S),{},{department:e.target.value})),placeholder:"Ej: Tecnolog\xeda"})]}),(0,Kn.jsxs)("div",{className:"modal-actions",children:[(0,Kn.jsx)("button",{type:"button",className:"btn-secondary",onClick:()=>C(!1),children:"Cancelar"}),(0,Kn.jsx)("button",{type:"submit",className:"btn-primary",disabled:E,children:E?"Guardando...":"Guardar Cambios"})]})]})]})})]})},Br=()=>{const[e,a]=(0,r.useState)([]),[t,n]=(0,r.useState)(""),[l,s]=(0,r.useState)(null),[i,o]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!1),[m,p]=(0,r.useState)({daysEnjoyed:"",enjoyedStartDate:"",enjoyedEndDate:"",supportDocument:"",notes:""}),[h,f]=(0,r.useState)(!1),[v,g]=(0,r.useState)(null);(0,r.useEffect)(()=>{x()},[]);const x=async()=>{try{const e=await Qn.get("/vacations-v2/employees");a(e.data.data)}catch(e){console.error("Error fetching employees:",e)}},b=async e=>{try{o(!0);const a=await Qn.get("/vacations-v2/historical/".concat(e));s(a.data.data)}catch(a){console.error("Error fetching history:",a)}finally{o(!1)}};return(0,Kn.jsxs)("div",{className:"historical-tab",children:[(0,Kn.jsx)("h3",{children:"Registro de Vacaciones Hist\xf3ricas"}),(0,Kn.jsx)("p",{className:"info-text",children:"Registra vacaciones disfrutadas antes de la implementaci\xf3n del sistema."}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Seleccionar Empleado"}),(0,Kn.jsxs)("select",{value:t,onChange:e=>{return a=e.target.value,n(a),void(a?b(a):s(null));var a},children:[(0,Kn.jsx)("option",{value:"",children:"Seleccionar empleado..."}),e.map(e=>{var a,t;return(0,Kn.jsxs)("option",{value:null===(a=e.employeeId)||void 0===a?void 0:a._id,children:[null===(t=e.employeeId)||void 0===t?void 0:t.name," - ",e.department||"Sin departamento"]},e._id)})]})]}),t&&(0,Kn.jsxs)(Kn.Fragment,{children:[(0,Kn.jsx)("div",{className:"historical-actions",children:(0,Kn.jsx)("button",{className:"btn-primary",onClick:()=>d(!0),children:"+ Agregar Registro Hist\xf3rico"})}),i?(0,Kn.jsx)("div",{className:"loading",children:"Cargando historial..."}):l?(0,Kn.jsxs)(Kn.Fragment,{children:[(0,Kn.jsxs)("div",{className:"historical-summary",children:[(0,Kn.jsxs)("div",{className:"summary-card",children:[(0,Kn.jsx)("label",{children:"Total Registros"}),(0,Kn.jsx)("span",{children:l.summary.totalRecords})]}),(0,Kn.jsxs)("div",{className:"summary-card",children:[(0,Kn.jsx)("label",{children:"Total D\xedas"}),(0,Kn.jsx)("span",{children:l.summary.totalDays.toFixed(2)})]}),(0,Kn.jsxs)("div",{className:"summary-card",children:[(0,Kn.jsx)("label",{children:"Verificados"}),(0,Kn.jsx)("span",{children:l.summary.verifiedDays.toFixed(2)})]}),(0,Kn.jsxs)("div",{className:"summary-card",children:[(0,Kn.jsx)("label",{children:"Pendientes Verificaci\xf3n"}),(0,Kn.jsx)("span",{children:l.summary.pendingVerificationCount})]})]}),l.records.length>0&&(0,Kn.jsxs)("table",{className:"historical-table",children:[(0,Kn.jsx)("thead",{children:(0,Kn.jsxs)("tr",{children:[(0,Kn.jsx)("th",{children:"Per\xedodo"}),(0,Kn.jsx)("th",{children:"D\xedas"}),(0,Kn.jsx)("th",{children:"Documento"}),(0,Kn.jsx)("th",{children:"Registrado Por"}),(0,Kn.jsx)("th",{children:"Estado"}),(0,Kn.jsx)("th",{children:"Acciones"})]})}),(0,Kn.jsx)("tbody",{children:l.records.map(e=>{var a;return(0,Kn.jsxs)("tr",{children:[(0,Kn.jsxs)("td",{children:[new Date(e.enjoyedStartDate).toLocaleDateString("es-CO")," - ",new Date(e.enjoyedEndDate).toLocaleDateString("es-CO")]}),(0,Kn.jsx)("td",{children:e.daysEnjoyed}),(0,Kn.jsx)("td",{children:e.supportDocument||"-"}),(0,Kn.jsx)("td",{children:(null===(a=e.registeredBy)||void 0===a?void 0:a.name)||"N/A"}),(0,Kn.jsx)("td",{children:e.isVerified?(0,Kn.jsx)("span",{className:"status-badge success",children:"Verificado"}):(0,Kn.jsx)("span",{className:"status-badge warning",children:"Pendiente"})}),(0,Kn.jsx)("td",{children:!e.isVerified&&(0,Kn.jsx)("button",{className:"btn-small",onClick:()=>(async e=>{try{await Qn.put("/vacations-v2/historical/".concat(e,"/verify")),b(t)}catch(r){var a,n;alert((null===(a=r.response)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.error)||"Error verificando registro")}})(e._id),children:"Verificar"})})]},e._id)})})]})]}):(0,Kn.jsx)("div",{className:"no-data",children:"No hay registros hist\xf3ricos"})]}),c&&(0,Kn.jsx)("div",{className:"modal-overlay",children:(0,Kn.jsxs)("div",{className:"modal",children:[(0,Kn.jsx)("h3",{children:"Agregar Registro Hist\xf3rico"}),v&&(0,Kn.jsx)("div",{className:"error-message",children:v}),(0,Kn.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),t){f(!0),g(null);try{await Qn.post("/vacations-v2/historical",{employeeId:t,daysEnjoyed:parseFloat(m.daysEnjoyed),enjoyedStartDate:m.enjoyedStartDate,enjoyedEndDate:m.enjoyedEndDate,supportDocument:m.supportDocument||void 0,notes:m.notes||void 0}),d(!1),p({daysEnjoyed:"",enjoyedStartDate:"",enjoyedEndDate:"",supportDocument:"",notes:""}),b(t)}catch(r){var a,n;g((null===(a=r.response)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.error)||"Error registrando hist\xf3rico")}finally{f(!1)}}},children:[(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"D\xedas Disfrutados *"}),(0,Kn.jsx)("input",{type:"number",step:"0.5",min:"0.5",value:m.daysEnjoyed,onChange:e=>p(u(u({},m),{},{daysEnjoyed:e.target.value})),required:!0})]}),(0,Kn.jsxs)("div",{className:"form-row",children:[(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Fecha Inicio *"}),(0,Kn.jsx)("input",{type:"date",value:m.enjoyedStartDate,onChange:e=>p(u(u({},m),{},{enjoyedStartDate:e.target.value})),required:!0})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Fecha Fin *"}),(0,Kn.jsx)("input",{type:"date",value:m.enjoyedEndDate,onChange:e=>p(u(u({},m),{},{enjoyedEndDate:e.target.value})),required:!0})]})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Documento de Soporte"}),(0,Kn.jsx)("input",{type:"text",value:m.supportDocument,onChange:e=>p(u(u({},m),{},{supportDocument:e.target.value})),placeholder:"Ej: Resoluci\xf3n No. 001-2023"})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Notas"}),(0,Kn.jsx)("textarea",{value:m.notes,onChange:e=>p(u(u({},m),{},{notes:e.target.value})),rows:2,placeholder:"Observaciones adicionales..."})]}),(0,Kn.jsxs)("div",{className:"modal-actions",children:[(0,Kn.jsx)("button",{type:"button",className:"btn-secondary",onClick:()=>d(!1),children:"Cancelar"}),(0,Kn.jsx)("button",{type:"submit",className:"btn-primary",disabled:h,children:h?"Guardando...":"Guardar Registro"})]})]})]})})]})},Vr=()=>{const{user:e}=Yn(),a=pe(),t=ve(),n=null===e||void 0===e?void 0:e.role,l="admin"===n||"talento_humano"===n||"super_admin"===n,s="talento_humano"===n||"admin"===n||"super_admin"===n,i=()=>{const e=new URLSearchParams(a.search).get("tab");return e&&["my-balance","my-requests","new-request","leader-approvals","hr-approvals","employees","historical"].includes(e)?e:"my-balance"},[o,c]=(0,r.useState)(i()),d=e=>{c(e),t("?tab=".concat(e),{replace:!0})};(0,r.useEffect)(()=>{const e=i();e!==o&&c(e)},[a.search]);return(0,Kn.jsxs)("div",{className:"vacation-management",children:[(0,Kn.jsxs)("div",{className:"vacation-header",children:[(0,Kn.jsx)("h1",{children:"Gesti\xf3n de Vacaciones"}),(0,Kn.jsx)("p",{className:"subtitle",children:"Sistema seg\xfan legislaci\xf3n colombiana (CST Art. 186)"})]}),(0,Kn.jsxs)("div",{className:"vacation-tabs",children:[(0,Kn.jsx)("button",{className:"tab-btn ".concat("my-balance"===o?"active":""),onClick:()=>d("my-balance"),children:"Mi Balance"}),(0,Kn.jsx)("button",{className:"tab-btn ".concat("my-requests"===o?"active":""),onClick:()=>d("my-requests"),children:"Mis Solicitudes"}),(0,Kn.jsx)("button",{className:"tab-btn ".concat("new-request"===o?"active":""),onClick:()=>d("new-request"),children:"Nueva Solicitud"}),l&&(0,Kn.jsx)("button",{className:"tab-btn ".concat("leader-approvals"===o?"active":""),onClick:()=>d("leader-approvals"),children:"Aprobaciones (L\xedder)"}),s&&(0,Kn.jsxs)(Kn.Fragment,{children:[(0,Kn.jsx)("button",{className:"tab-btn ".concat("hr-approvals"===o?"active":""),onClick:()=>d("hr-approvals"),children:"Aprobaciones (TH)"}),(0,Kn.jsx)("button",{className:"tab-btn ".concat("employees"===o?"active":""),onClick:()=>d("employees"),children:"Empleados"}),(0,Kn.jsx)("button",{className:"tab-btn ".concat("historical"===o?"active":""),onClick:()=>d("historical"),children:"Hist\xf3rico"})]})]}),(0,Kn.jsx)("div",{className:"tab-content",children:(()=>{switch(o){case"my-balance":default:return(0,Kn.jsx)(Or,{});case"my-requests":return(0,Kn.jsx)(Ir,{});case"new-request":return(0,Kn.jsx)(qr,{onSuccess:()=>d("my-requests")});case"leader-approvals":return(0,Kn.jsx)(Fr,{});case"hr-approvals":return(0,Kn.jsx)(Mr,{});case"employees":return(0,Kn.jsx)(Ur,{});case"historical":return(0,Kn.jsx)(Br,{})}})()})]})},Hr={users:{canView:!1,canCreate:!1,canEdit:!1,canDelete:!1,canAssignToCompanies:!1,canChangeRoles:!1},companies:{canView:!1,canCreate:!1,canEdit:!1,canDelete:!1},contracts:{canView:!0,canCreate:!1,canEdit:!1,canDelete:!1,canApprove:!1,canSign:!1},requests:{canView:!0,canCreate:!0,canEdit:!1,canDelete:!1,canApprove:!1},thirdParties:{canView:!1,canCreate:!1,canEdit:!1,canDelete:!1},vacations:{canView:!0,canRequest:!0,canApproveAsLeader:!1,canApproveAsTalentoHumano:!1,canManageBalances:!1,canRunAccrual:!1,canViewAllEmployees:!1},dashboard:{canView:!0,canViewAnalytics:!1,canExportReports:!1},settings:{canView:!1,canEdit:!1,canManageRoles:!1,canManageTemplates:!1}},Wr=[{id:"dashboard",label:"Dashboard",icon:"chart-bar"},{id:"contracts",label:"Contratos",icon:"file-text"},{id:"requests",label:"Solicitudes",icon:"inbox"},{id:"users",label:"Usuarios",icon:"users"},{id:"companies",label:"Empresas",icon:"building"},{id:"third-parties",label:"Terceros",icon:"user-plus"},{id:"vacations",label:"Vacaciones",icon:"calendar"},{id:"templates",label:"Plantillas",icon:"file-plus"},{id:"reports",label:"Reportes",icon:"pie-chart"},{id:"settings",label:"Configuracion",icon:"settings"},{id:"audit",label:"Auditoria",icon:"shield"}],Gr={users:{canView:"Ver usuarios",canCreate:"Crear usuarios",canEdit:"Editar usuarios",canDelete:"Eliminar usuarios",canAssignToCompanies:"Asignar a empresas",canChangeRoles:"Cambiar roles"},companies:{canView:"Ver empresas",canCreate:"Crear empresas",canEdit:"Editar empresas",canDelete:"Eliminar empresas"},contracts:{canView:"Ver contratos",canCreate:"Crear contratos",canEdit:"Editar contratos",canDelete:"Eliminar contratos",canApprove:"Aprobar contratos",canSign:"Firmar contratos"},requests:{canView:"Ver solicitudes",canCreate:"Crear solicitudes",canEdit:"Editar solicitudes",canDelete:"Eliminar solicitudes",canApprove:"Aprobar solicitudes"},thirdParties:{canView:"Ver terceros",canCreate:"Crear terceros",canEdit:"Editar terceros",canDelete:"Eliminar terceros"},vacations:{canView:"Ver vacaciones",canRequest:"Solicitar vacaciones",canApproveAsLeader:"Aprobar como lider",canApproveAsTalentoHumano:"Aprobar como TH",canManageBalances:"Gestionar saldos",canRunAccrual:"Ejecutar causacion",canViewAllEmployees:"Ver todos los empleados"},dashboard:{canView:"Ver dashboard",canViewAnalytics:"Ver analiticas",canExportReports:"Exportar reportes"},settings:{canView:"Ver configuracion",canEdit:"Editar configuracion",canManageRoles:"Gestionar roles",canManageTemplates:"Gestionar plantillas"}},$r={users:"Usuarios",companies:"Empresas",contracts:"Contratos",requests:"Solicitudes",thirdParties:"Terceros",vacations:"Vacaciones",dashboard:"Dashboard",settings:"Configuracion"},Qr=()=>{var e,a;const[t,n]=(0,r.useState)([]),[l,s]=(0,r.useState)(!0),[i,o]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!1),[m,p]=(0,r.useState)(!1),[h,f]=(0,r.useState)(null),[v,g]=(0,r.useState)("all"),[x,b]=(0,r.useState)(""),[y,j]=(0,r.useState)({name:"",code:"",description:"",hierarchyLevel:20,color:"#6c757d",icon:"",permissions:Hr,accessibleModules:["dashboard"]}),N=(0,r.useCallback)(async()=>{try{s(!0);const e=await Qn.get("/roles");Array.isArray(e.data)?n(e.data):(console.error("Respuesta inesperada de /roles:",e.data),n([]))}catch(e){console.error("Error fetching roles:",e),n([])}finally{s(!1)}},[]);(0,r.useEffect)(()=>{N()},[N]);const _=e=>{f(e),j({name:e.name,code:e.code,description:e.description,hierarchyLevel:e.hierarchyLevel,color:e.color,icon:e.icon,permissions:e.permissions||Hr,accessibleModules:e.accessibleModules||["dashboard"]}),d(!0)},w=()=>{j({name:"",code:"",description:"",hierarchyLevel:20,color:"#6c757d",icon:"",permissions:Hr,accessibleModules:["dashboard"]})},C=(e,a,t)=>{j(n=>{const r=n.permissions[e];return u(u({},n),{},{permissions:u(u({},n.permissions),{},{[e]:u(u({},r),{},{[a]:t})})})})},S=(e,a)=>{const t=y.permissions[e];return t&&t[a]||!1},k=e=>{j(a=>u(u({},a),{},{accessibleModules:a.accessibleModules.includes(e)?a.accessibleModules.filter(a=>a!==e):[...a.accessibleModules,e]}))},E=t.filter(e=>{const a=e.name.toLowerCase().includes(x.toLowerCase())||e.code.toLowerCase().includes(x.toLowerCase()),t="all"===v||"system"===v&&e.isSystemRole||"custom"===v&&!e.isSystemRole;return a&&t});return l?(0,Kn.jsx)("div",{className:"loading",children:"Cargando gestion de roles..."}):(0,Kn.jsxs)("div",{className:"role-management",children:[(0,Kn.jsxs)("div",{className:"page-header",children:[(0,Kn.jsxs)("div",{className:"header-left",children:[(0,Kn.jsx)("h1",{children:"Gestion de Roles"}),(0,Kn.jsx)("p",{className:"header-description",children:"Administra los roles y permisos del sistema"})]}),(0,Kn.jsxs)("div",{className:"header-actions",children:[(0,Kn.jsx)("button",{className:"btn-secondary",onClick:async()=>{try{await Qn.post("/roles/initialize"),await N(),alert("Roles del sistema inicializados exitosamente")}catch(t){var e,a;console.error("Error initializing roles:",t),alert((null===(e=t.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.error)||"Error al inicializar roles")}},children:"Inicializar Roles Sistema"}),(0,Kn.jsx)("button",{className:"btn-primary",onClick:()=>{w(),o(!0)},children:"+ Crear Rol"})]})]}),(0,Kn.jsxs)("div",{className:"filters-section",children:[(0,Kn.jsxs)("div",{className:"filters-row",children:[(0,Kn.jsxs)("div",{className:"filter-group",children:[(0,Kn.jsx)("label",{children:"Buscar:"}),(0,Kn.jsx)("input",{type:"text",placeholder:"Nombre o codigo...",value:x,onChange:e=>b(e.target.value),className:"filter-input"})]}),(0,Kn.jsxs)("div",{className:"filter-group",children:[(0,Kn.jsx)("label",{children:"Tipo:"}),(0,Kn.jsxs)("select",{value:v,onChange:e=>g(e.target.value),className:"filter-select",children:[(0,Kn.jsx)("option",{value:"all",children:"Todos"}),(0,Kn.jsx)("option",{value:"system",children:"Roles del Sistema"}),(0,Kn.jsx)("option",{value:"custom",children:"Roles Personalizados"})]})]})]}),(0,Kn.jsxs)("div",{className:"results-count",children:["Mostrando ",E.length," de ",t.length," roles"]})]}),(0,Kn.jsxs)("div",{className:"roles-table-container",children:[(0,Kn.jsxs)("table",{className:"roles-table",children:[(0,Kn.jsx)("thead",{children:(0,Kn.jsxs)("tr",{children:[(0,Kn.jsx)("th",{children:"Rol"}),(0,Kn.jsx)("th",{children:"Codigo"}),(0,Kn.jsx)("th",{children:"Descripcion"}),(0,Kn.jsx)("th",{children:"Nivel"}),(0,Kn.jsx)("th",{children:"Modulos"}),(0,Kn.jsx)("th",{children:"Tipo"}),(0,Kn.jsx)("th",{children:"Acciones"})]})}),(0,Kn.jsx)("tbody",{children:E.map(e=>{var a,t;return(0,Kn.jsxs)("tr",{className:e.isSystemRole?"system-role-row":"custom-role-row",children:[(0,Kn.jsx)("td",{className:"role-name-cell",children:(0,Kn.jsxs)("div",{className:"role-name-wrapper",children:[(0,Kn.jsx)("div",{className:"role-icon-small",style:{backgroundColor:e.color},children:e.icon||e.name.charAt(0).toUpperCase()}),(0,Kn.jsx)("span",{className:"role-name-text",children:e.name})]})}),(0,Kn.jsx)("td",{children:(0,Kn.jsx)("span",{className:"role-code",children:e.code})}),(0,Kn.jsx)("td",{className:"role-description-cell",children:(0,Kn.jsx)("span",{className:"role-description-text",children:e.description||"Sin descripcion"})}),(0,Kn.jsx)("td",{className:"role-level-cell",children:(0,Kn.jsx)("span",{className:"level-badge",children:e.hierarchyLevel})}),(0,Kn.jsx)("td",{className:"role-modules-cell",children:(0,Kn.jsxs)("div",{className:"modules-inline",children:[null===(a=e.accessibleModules)||void 0===a?void 0:a.slice(0,3).map(e=>(0,Kn.jsx)("span",{className:"module-tag-small",children:e},e)),(null===(t=e.accessibleModules)||void 0===t?void 0:t.length)>3&&(0,Kn.jsxs)("span",{className:"module-tag-small more",children:["+",e.accessibleModules.length-3]})]})}),(0,Kn.jsx)("td",{children:e.isSystemRole?(0,Kn.jsx)("span",{className:"system-badge",children:"Sistema"}):(0,Kn.jsx)("span",{className:"custom-badge",children:"Personalizado"})}),(0,Kn.jsx)("td",{className:"role-actions-cell",children:(0,Kn.jsxs)("div",{className:"actions-inline",children:[(0,Kn.jsx)("button",{className:"btn-icon-small",onClick:()=>(e=>{f(e),j(u(u({},y),{},{permissions:e.permissions||Hr,accessibleModules:e.accessibleModules||["dashboard"]})),p(!0)})(e),title:"Ver permisos",children:"\ud83d\udd10"}),(0,Kn.jsx)("button",{className:"btn-icon-small",onClick:()=>_(e),title:"Editar rol",children:"\u270f\ufe0f"}),(0,Kn.jsx)("button",{className:"btn-icon-small",onClick:()=>(async e=>{const a=prompt("Nombre para el nuevo rol:","".concat(e.name," (Copia)"));if(!a)return;const t=prompt("Codigo para el nuevo rol:","".concat(e.code,"_copy"));if(t)try{await Qn.post("/roles/duplicate/".concat(e._id),{name:a,code:t.toLowerCase().replace(/\s+/g,"_")}),await N(),alert("Rol duplicado exitosamente")}catch(l){var n,r;console.error("Error duplicating role:",l),alert((null===(n=l.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.error)||"Error al duplicar rol")}})(e),title:"Duplicar rol",children:"\ud83d\udccb"}),(0,Kn.jsx)("button",{className:"btn-icon-small btn-danger",onClick:()=>(async e=>{const a=e.isSystemRole?'ADVERTENCIA: "'.concat(e.name,'" es un rol del SISTEMA. \xbfEstas SEGURO de eliminarlo?'):'\xbfEliminar el rol "'.concat(e.name,'"? Esta accion no se puede deshacer.');if(window.confirm(a))try{const a=e.isSystemRole?"/roles/".concat(e._id,"?force=true"):"/roles/".concat(e._id);await Qn.delete(a),await N(),alert("Rol eliminado exitosamente")}catch(r){var t,n;console.error("Error deleting role:",r),alert((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error)||"Error al eliminar rol")}})(e),title:e.isSystemRole?"Eliminar rol del sistema (Super Admin)":"Eliminar rol",children:"\ud83d\uddd1\ufe0f"})]})})]},e._id)})})]}),0===E.length&&(0,Kn.jsx)("div",{className:"no-roles-message",children:"No se encontraron roles con los filtros aplicados"})]}),i&&(0,Kn.jsx)("div",{className:"modal-overlay",onClick:()=>o(!1),children:(0,Kn.jsxs)("div",{className:"modal modal-large",onClick:e=>e.stopPropagation(),children:[(0,Kn.jsxs)("div",{className:"modal-header",children:[(0,Kn.jsx)("h2",{children:"Crear Nuevo Rol"}),(0,Kn.jsx)("button",{className:"btn-close",onClick:()=>o(!1),children:"\xd7"})]}),(0,Kn.jsxs)("div",{className:"modal-body",children:[(0,Kn.jsxs)("div",{className:"form-row",children:[(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Nombre del Rol *"}),(0,Kn.jsx)("input",{type:"text",value:y.name,onChange:e=>j(u(u({},y),{},{name:e.target.value})),placeholder:"Ej: Supervisor de Area"})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Codigo *"}),(0,Kn.jsx)("input",{type:"text",value:y.code,onChange:e=>j(u(u({},y),{},{code:e.target.value.toLowerCase().replace(/\s+/g,"_")})),placeholder:"Ej: supervisor_area"}),(0,Kn.jsx)("small",{children:"Solo letras minusculas y guiones bajos"})]})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Descripcion"}),(0,Kn.jsx)("textarea",{value:y.description,onChange:e=>j(u(u({},y),{},{description:e.target.value})),placeholder:"Describe las responsabilidades de este rol...",rows:2})]}),(0,Kn.jsxs)("div",{className:"form-row",children:[(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Nivel de Jerarquia (0-99)"}),(0,Kn.jsx)("input",{type:"number",min:"0",max:"99",value:y.hierarchyLevel,onChange:e=>j(u(u({},y),{},{hierarchyLevel:parseInt(e.target.value)||0}))}),(0,Kn.jsx)("small",{children:"Mayor numero = mas permisos"})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Color"}),(0,Kn.jsx)("input",{type:"color",value:y.color,onChange:e=>j(u(u({},y),{},{color:e.target.value}))})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Icono (emoji)"}),(0,Kn.jsx)("input",{type:"text",value:y.icon,onChange:e=>j(u(u({},y),{},{icon:e.target.value})),placeholder:"",maxLength:2})]})]}),(0,Kn.jsxs)("div",{className:"form-section",children:[(0,Kn.jsx)("h4",{children:"Modulos Accesibles"}),(0,Kn.jsx)("div",{className:"modules-grid",children:Wr.map(e=>(0,Kn.jsxs)("label",{className:"module-checkbox",children:[(0,Kn.jsx)("input",{type:"checkbox",checked:y.accessibleModules.includes(e.id),onChange:()=>k(e.id)}),(0,Kn.jsx)("span",{children:e.label})]},e.id))})]}),(0,Kn.jsxs)("div",{className:"form-section",children:[(0,Kn.jsx)("h4",{children:"Permisos por Modulo"}),(0,Kn.jsx)("div",{className:"permissions-accordion",children:Object.entries(Gr).map(e=>{let[a,t]=e;return(0,Kn.jsxs)("details",{className:"permission-group",children:[(0,Kn.jsx)("summary",{children:$r[a]||a}),(0,Kn.jsx)("div",{className:"permission-checkboxes",children:Object.entries(t).map(e=>{let[t,n]=e;return(0,Kn.jsxs)("label",{className:"permission-checkbox",children:[(0,Kn.jsx)("input",{type:"checkbox",checked:S(a,t),onChange:e=>C(a,t,e.target.checked)}),(0,Kn.jsx)("span",{children:n})]},t)})})]},a)})})]})]}),(0,Kn.jsxs)("div",{className:"modal-footer",children:[(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>o(!1),children:"Cancelar"}),(0,Kn.jsx)("button",{className:"btn-primary",onClick:async()=>{try{if(!y.name||!y.code)return void alert("El nombre y codigo son requeridos");await Qn.post("/roles",y),await N(),o(!1),w(),alert("Rol creado exitosamente")}catch(t){var e,a;console.error("Error creating role:",t),alert((null===(e=t.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.error)||"Error al crear rol")}},children:"Crear Rol"})]})]})}),c&&h&&(0,Kn.jsx)("div",{className:"modal-overlay",onClick:()=>d(!1),children:(0,Kn.jsxs)("div",{className:"modal modal-large",onClick:e=>e.stopPropagation(),children:[(0,Kn.jsxs)("div",{className:"modal-header",children:[(0,Kn.jsxs)("h2",{children:["Editar Rol: ",h.name]}),(0,Kn.jsx)("button",{className:"btn-close",onClick:()=>d(!1),children:"\xd7"})]}),(0,Kn.jsxs)("div",{className:"modal-body",children:[h.isSystemRole&&(0,Kn.jsx)("div",{className:"alert alert-info",children:"Este es un rol del sistema. Como Super Admin, puedes modificar todos los campos."}),(0,Kn.jsxs)("div",{className:"form-row",children:[(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Nombre del Rol"}),(0,Kn.jsx)("input",{type:"text",value:y.name,onChange:e=>j(u(u({},y),{},{name:e.target.value}))})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Codigo"}),(0,Kn.jsx)("input",{type:"text",value:y.code,disabled:!0})]})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Descripcion"}),(0,Kn.jsx)("textarea",{value:y.description,onChange:e=>j(u(u({},y),{},{description:e.target.value})),rows:2})]}),(0,Kn.jsxs)("div",{className:"form-row",children:[(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Nivel de Jerarquia"}),(0,Kn.jsx)("input",{type:"number",min:"0",max:"100",value:y.hierarchyLevel,onChange:e=>j(u(u({},y),{},{hierarchyLevel:parseInt(e.target.value)||0}))})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Color"}),(0,Kn.jsx)("input",{type:"color",value:y.color,onChange:e=>j(u(u({},y),{},{color:e.target.value}))})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Icono"}),(0,Kn.jsx)("input",{type:"text",value:y.icon,onChange:e=>j(u(u({},y),{},{icon:e.target.value})),maxLength:2})]})]}),(0,Kn.jsxs)("div",{className:"form-section",children:[(0,Kn.jsx)("h4",{children:"Modulos Accesibles"}),(0,Kn.jsx)("div",{className:"modules-grid",children:Wr.map(e=>(0,Kn.jsxs)("label",{className:"module-checkbox",children:[(0,Kn.jsx)("input",{type:"checkbox",checked:y.accessibleModules.includes(e.id),onChange:()=>k(e.id)}),(0,Kn.jsx)("span",{children:e.label})]},e.id))})]}),(0,Kn.jsxs)("div",{className:"form-section",children:[(0,Kn.jsx)("h4",{children:"Permisos por Modulo"}),(0,Kn.jsx)("div",{className:"permissions-accordion",children:Object.entries(Gr).map(e=>{let[a,t]=e;return(0,Kn.jsxs)("details",{className:"permission-group",children:[(0,Kn.jsx)("summary",{children:$r[a]||a}),(0,Kn.jsx)("div",{className:"permission-checkboxes",children:Object.entries(t).map(e=>{let[t,n]=e;return(0,Kn.jsxs)("label",{className:"permission-checkbox",children:[(0,Kn.jsx)("input",{type:"checkbox",checked:S(a,t),onChange:e=>C(a,t,e.target.checked)}),(0,Kn.jsx)("span",{children:n})]},t)})})]},a)})})]})]}),(0,Kn.jsxs)("div",{className:"modal-footer",children:[(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>d(!1),children:"Cancelar"}),(0,Kn.jsx)("button",{className:"btn-primary",onClick:async()=>{if(h)try{const e=h.isSystemRole?"/roles/".concat(h._id,"?force=true"):"/roles/".concat(h._id);await Qn.put(e,y),await N(),d(!1),f(null),w(),alert("Rol actualizado exitosamente")}catch(t){var e,a;console.error("Error updating role:",t),alert((null===(e=t.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.error)||"Error al actualizar rol")}},children:"Guardar Cambios"})]})]})}),m&&h&&(0,Kn.jsx)("div",{className:"modal-overlay",onClick:()=>p(!1),children:(0,Kn.jsxs)("div",{className:"modal modal-large",onClick:e=>e.stopPropagation(),children:[(0,Kn.jsxs)("div",{className:"modal-header",children:[(0,Kn.jsxs)("h2",{children:[(0,Kn.jsx)("span",{style:{backgroundColor:h.color,padding:"4px 8px",borderRadius:"4px",marginRight:"8px"},children:h.icon||h.name.charAt(0)}),"Permisos de ",h.name]}),(0,Kn.jsx)("button",{className:"btn-close",onClick:()=>p(!1),children:"\xd7"})]}),(0,Kn.jsx)("div",{className:"modal-body",children:(0,Kn.jsxs)("div",{className:"permissions-summary",children:[(0,Kn.jsxs)("div",{className:"summary-section",children:[(0,Kn.jsx)("h4",{children:"Informacion General"}),(0,Kn.jsxs)("div",{className:"summary-grid",children:[(0,Kn.jsxs)("div",{children:[(0,Kn.jsx)("strong",{children:"Codigo:"})," ",h.code]}),(0,Kn.jsxs)("div",{children:[(0,Kn.jsx)("strong",{children:"Nivel:"})," ",h.hierarchyLevel]}),(0,Kn.jsxs)("div",{children:[(0,Kn.jsx)("strong",{children:"Tipo:"})," ",h.isSystemRole?"Sistema":"Personalizado"]})]})]}),(0,Kn.jsxs)("div",{className:"summary-section",children:[(0,Kn.jsxs)("h4",{children:["Modulos Accesibles (",(null===(e=h.accessibleModules)||void 0===e?void 0:e.length)||0,")"]}),(0,Kn.jsx)("div",{className:"modules-list",children:null===(a=h.accessibleModules)||void 0===a?void 0:a.map(e=>(0,Kn.jsx)("span",{className:"module-badge",children:e},e))})]}),(0,Kn.jsxs)("div",{className:"summary-section",children:[(0,Kn.jsx)("h4",{children:"Permisos Detallados"}),(0,Kn.jsx)("div",{className:"permissions-detail",children:Object.entries(h.permissions||{}).map(e=>{let[a,t]=e;return(0,Kn.jsxs)("div",{className:"permission-module",children:[(0,Kn.jsx)("h5",{children:$r[a]||a}),(0,Kn.jsx)("div",{className:"permission-items",children:Object.entries(t).map(e=>{var t;let[n,r]=e;return(0,Kn.jsxs)("span",{className:"permission-item ".concat(r?"granted":"denied"),children:[r?"\u2713":"\u2717"," ",(null===(t=Gr[a])||void 0===t?void 0:t[n])||n]},n)})})]},a)})})]})]})}),(0,Kn.jsxs)("div",{className:"modal-footer",children:[(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>p(!1),children:"Cerrar"}),(0,Kn.jsx)("button",{className:"btn-primary",onClick:()=>{p(!1),_(h)},children:"Editar Permisos"})]})]})})]})},Kr=()=>{const{selectedCompanyId:e,selectedCompanyName:a,userCompanies:t,selectCompany:n,currentRoles:l}=tr(),[s,i]=(0,r.useState)(!1),o=l.includes("super_admin");return t.length<=1&&!o?(0,Kn.jsx)("div",{className:"company-switcher-single",children:(0,Kn.jsx)("span",{className:"menu-icon",children:"\u2630"})}):(0,Kn.jsxs)("div",{className:"company-switcher",children:[(0,Kn.jsx)("button",{className:"company-switcher-button",onClick:()=>i(!s),"aria-expanded":s,title:"Cambiar empresa",children:(0,Kn.jsx)("span",{className:"menu-icon",children:"\u2630"})}),s&&(0,Kn.jsxs)("div",{className:"company-dropdown",children:[(0,Kn.jsxs)("div",{className:"dropdown-header",children:[(0,Kn.jsxs)("div",{className:"dropdown-header-content",children:[(0,Kn.jsx)("span",{className:"dropdown-title",children:"Empresas"}),(0,Kn.jsx)("span",{className:"dropdown-current",children:a})]}),(0,Kn.jsx)("button",{className:"close-button",onClick:()=>i(!1),children:"\u2715"})]}),(0,Kn.jsxs)("div",{className:"company-list",children:[l.includes("super_admin")&&(0,Kn.jsxs)("button",{className:"company-item ".concat("ALL"===e?"active":""),onClick:()=>{n("ALL"),i(!1)},children:[(0,Kn.jsxs)("div",{className:"company-item-details",children:[(0,Kn.jsx)("span",{className:"company-item-name",children:"\ud83c\udf10 Todas las empresas"}),(0,Kn.jsx)("span",{className:"company-item-roles",children:"Vista Global"})]}),"ALL"===e&&(0,Kn.jsx)("span",{className:"check-icon",children:"\u2713"})]},"ALL"),t.map(a=>(0,Kn.jsxs)("button",{className:"company-item ".concat(e===a.companyId?"active":""),onClick:()=>{n(a.companyId),i(!1)},children:[(0,Kn.jsxs)("div",{className:"company-item-details",children:[(0,Kn.jsx)("span",{className:"company-item-name",children:a.companyName}),(0,Kn.jsx)("span",{className:"company-item-roles",children:a.roles.join(", ")})]}),e===a.companyId&&(0,Kn.jsx)("span",{className:"check-icon",children:"\u2713"})]},a.companyId))]})]}),s&&(0,Kn.jsx)("div",{className:"company-dropdown-overlay",onClick:()=>i(!1)})]})},Jr=()=>{const{user:e,logout:a}=Yn(),t=pe(),[n,l]=(0,r.useState)(!1),[s,i]=(0,r.useState)(!1),[o,c]=(0,r.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),[d,m]=(0,r.useState)(""),[p,h]=(0,r.useState)(""),f=(0,r.useRef)(null),v=e=>t.pathname===e;(0,r.useEffect)(()=>{const e=e=>{f.current&&!f.current.contains(e.target)&&l(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const g=["/companies","/user-management","/company-users","/role-management","/admin"].some(e=>t.pathname===e),x="/terceros"===t.pathname,b="/vacaciones"===t.pathname;return(0,Kn.jsxs)("nav",{className:"navbar",children:[(0,Kn.jsxs)("div",{className:"navbar-left",children:[(0,Kn.jsx)(Kr,{}),(0,Kn.jsx)("div",{className:"navbar-brand",children:(0,Kn.jsx)(ga,{to:"/dashboard",children:"Legal Bot"})})]}),(0,Kn.jsxs)("div",{className:"navbar-links",children:[(0,Kn.jsx)(ga,{to:"/dashboard",className:v("/dashboard")?"active":"",children:"Dashboard"}),(0,Kn.jsx)(rr,{allowedRoles:["super_admin","admin","lawyer"],children:(0,Kn.jsx)(ga,{to:"/unified-templates",className:v("/unified-templates")?"active":"",children:"\ud83d\ude80 Contratos"})}),(0,Kn.jsx)(ga,{to:"/requests-approvals",className:v("/requests-approvals")?"active":"",children:"\ud83d\udccb Solicitudes"}),(0,Kn.jsx)(ga,{to:"/vacaciones",className:b?"active":"",children:"\ud83c\udfd6\ufe0f Vacaciones"}),(0,Kn.jsx)(rr,{allowedRoles:["super_admin","admin","lawyer"],children:(0,Kn.jsx)(ga,{to:"/terceros",className:x?"active":"",children:"\ud83d\udc65 Terceros"})}),(0,Kn.jsx)(rr,{allowedRoles:["super_admin"],children:(0,Kn.jsxs)("div",{className:"navbar-dropdown",ref:f,children:[(0,Kn.jsxs)("button",{className:"navbar-dropdown-button ".concat(g?"active":""),onClick:()=>l(!n),children:["Administracion",(0,Kn.jsx)("span",{className:"dropdown-arrow ".concat(n?"open":""),children:"\u25bc"})]}),n&&(0,Kn.jsxs)("div",{className:"navbar-dropdown-menu",children:[(0,Kn.jsx)(ga,{to:"/companies",className:v("/companies")?"active":"",onClick:()=>l(!1),children:"Empresas"}),(0,Kn.jsx)(ga,{to:"/user-management",className:v("/user-management")?"active":"",onClick:()=>l(!1),children:"Gestion de Usuarios"}),(0,Kn.jsx)(ga,{to:"/company-users",className:v("/company-users")?"active":"",onClick:()=>l(!1),children:"Relaciones Empresa-Usuario"}),(0,Kn.jsx)(ga,{to:"/role-management",className:v("/role-management")?"active":"",onClick:()=>l(!1),children:"Gestion de Roles"})]})]})})]}),(0,Kn.jsxs)("div",{className:"navbar-user",children:[(0,Kn.jsxs)("span",{children:["Hola, ",(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.email)]}),(0,Kn.jsx)("button",{onClick:()=>{i(!0),c({currentPassword:"",newPassword:"",confirmPassword:""}),m(""),h("")},className:"change-password-btn",title:"Cambiar Contrase\xf1a",children:"Cambiar Contrase\xf1a"}),(0,Kn.jsx)("button",{onClick:a,className:"logout-btn",children:"Cerrar Sesion"})]}),s&&(0,Kn.jsx)("div",{className:"modal-overlay",onClick:()=>i(!1),children:(0,Kn.jsxs)("div",{className:"modal-content password-modal",onClick:e=>e.stopPropagation(),children:[(0,Kn.jsx)("button",{className:"modal-close-btn",onClick:()=>i(!1),title:"Cerrar",children:"\xd7"}),(0,Kn.jsx)("h2",{children:"Cambiar Contrase\xf1a"}),d&&(0,Kn.jsx)("div",{className:"error-message",children:d}),p&&(0,Kn.jsx)("div",{className:"success-message",children:p}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Contrase\xf1a Actual:"}),(0,Kn.jsx)("input",{type:"password",value:o.currentPassword,onChange:e=>c(u(u({},o),{},{currentPassword:e.target.value})),placeholder:"Ingresa tu contrase\xf1a actual"})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Nueva Contrase\xf1a:"}),(0,Kn.jsx)("input",{type:"password",value:o.newPassword,onChange:e=>c(u(u({},o),{},{newPassword:e.target.value})),placeholder:"Minimo 6 caracteres"})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Confirmar Nueva Contrase\xf1a:"}),(0,Kn.jsx)("input",{type:"password",value:o.confirmPassword,onChange:e=>c(u(u({},o),{},{confirmPassword:e.target.value})),placeholder:"Repite la nueva contrase\xf1a"})]}),(0,Kn.jsxs)("div",{className:"modal-actions",children:[(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>i(!1),children:"Cancelar"}),(0,Kn.jsx)("button",{className:"btn-primary",onClick:async()=>{if(m(""),h(""),o.newPassword===o.confirmPassword)if(o.newPassword.length<6)m("La nueva contrase\xf1a debe tener al menos 6 caracteres");else try{await Qn.patch("/users/me/password",{currentPassword:o.currentPassword,newPassword:o.newPassword}),h("Contrase\xf1a actualizada exitosamente"),c({currentPassword:"",newPassword:"",confirmPassword:""}),setTimeout(()=>{i(!1),h("")},2e3)}catch(t){var e,a;m((null===(e=t.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.error)||"Error al cambiar contrase\xf1a")}else m("Las contrase\xf1as nuevas no coinciden")},disabled:!o.currentPassword||!o.newPassword||!o.confirmPassword,children:"Cambiar Contrase\xf1a"})]})]})})]})},Yr=e=>{let{children:a}=e;const{isAuthenticated:t}=Yn();return t?(0,Kn.jsx)(Kn.Fragment,{children:a}):(0,Kn.jsx)(Ae,{to:"/login",replace:!0})},Xr=()=>{const{isAuthenticated:e}=Yn();return(0,Kn.jsxs)("div",{className:"App",children:[e&&(0,Kn.jsx)(Jr,{}),(0,Kn.jsx)("main",{className:"main-content",children:(0,Kn.jsxs)(Oe,{children:[(0,Kn.jsx)(De,{path:"/login",element:e?(0,Kn.jsx)(Ae,{to:"/dashboard",replace:!0}):(0,Kn.jsx)(er,{})}),(0,Kn.jsx)(De,{path:"/dashboard",element:(0,Kn.jsx)(Yr,{children:(0,Kn.jsx)(lr,{})})}),(0,Kn.jsx)(De,{path:"/contracts",element:(0,Kn.jsx)(Yr,{children:(0,Kn.jsx)(sr,{})})}),(0,Kn.jsx)(De,{path:"/contract-generator",element:(0,Kn.jsx)(Yr,{children:(0,Kn.jsx)(or,{})})}),(0,Kn.jsx)(De,{path:"/templates",element:(0,Kn.jsx)(Yr,{children:(0,Kn.jsx)(pr,{})})}),(0,Kn.jsx)(De,{path:"/unified-templates",element:(0,Kn.jsx)(Yr,{children:(0,Kn.jsx)(vr,{})})}),(0,Kn.jsx)(De,{path:"/companies",element:(0,Kn.jsx)(Yr,{children:(0,Kn.jsx)(gr,{})})}),(0,Kn.jsx)(De,{path:"/user-management",element:(0,Kn.jsx)(Yr,{children:(0,Kn.jsx)(xr,{})})}),(0,Kn.jsx)(De,{path:"/company-users",element:(0,Kn.jsx)(Yr,{children:(0,Kn.jsx)(br,{})})}),(0,Kn.jsx)(De,{path:"/terceros",element:(0,Kn.jsx)(Yr,{children:(0,Kn.jsx)(Tr,{})})}),(0,Kn.jsx)(De,{path:"/requests-approvals",element:(0,Kn.jsx)(Yr,{children:(0,Kn.jsx)(zr,{})})}),(0,Kn.jsx)(De,{path:"/vacaciones",element:(0,Kn.jsx)(Yr,{children:(0,Kn.jsx)(Vr,{})})}),(0,Kn.jsx)(De,{path:"/role-management",element:(0,Kn.jsx)(Yr,{children:(0,Kn.jsx)(Qr,{})})}),(0,Kn.jsx)(De,{path:"/contract-request",element:(0,Kn.jsx)(Ae,{to:"/requests-approvals",replace:!0})}),(0,Kn.jsx)(De,{path:"/my-requests",element:(0,Kn.jsx)(Ae,{to:"/requests-approvals",replace:!0})}),(0,Kn.jsx)(De,{path:"/supplier-approvals",element:(0,Kn.jsx)(Ae,{to:"/requests-approvals",replace:!0})}),(0,Kn.jsx)(De,{path:"/contract-approvals",element:(0,Kn.jsx)(Ae,{to:"/requests-approvals",replace:!0})}),(0,Kn.jsx)(De,{path:"/third-parties",element:(0,Kn.jsx)(Ae,{to:"/terceros?tab=terceros",replace:!0})}),(0,Kn.jsx)(De,{path:"/suppliers",element:(0,Kn.jsx)(Ae,{to:"/terceros?tab=terceros",replace:!0})}),(0,Kn.jsx)(De,{path:"/third-party-types",element:(0,Kn.jsx)(Ae,{to:"/terceros?tab=tipos",replace:!0})}),(0,Kn.jsx)(De,{path:"/supplier-contracts",element:(0,Kn.jsx)(Ae,{to:"/terceros?tab=contratos",replace:!0})}),(0,Kn.jsx)(De,{path:"/contract-categories",element:(0,Kn.jsx)(Ae,{to:"/terceros?tab=categorias",replace:!0})}),(0,Kn.jsx)(De,{path:"/",element:(0,Kn.jsx)(Ae,{to:e?"/dashboard":"/login",replace:!0})})]})})]})},Zr=()=>(0,Kn.jsx)(Zn,{children:(0,Kn.jsx)(fa,{children:(0,Kn.jsx)(nr,{children:(0,Kn.jsx)(Xr,{})})})});l.createRoot(document.getElementById("root")).render((0,Kn.jsx)(r.StrictMode,{children:(0,Kn.jsx)(Zr,{})}))})();
//# sourceMappingURL=main.90411a74.js.map