/*! For license information please see main.5664bfbb.js.LICENSE.txt */
(()=>{"use strict";var e={4:(e,t,a)=>{var n=a(853),r=a(43),l=a(950);function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function o(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(a=t.return),e=t.return}while(e)}return 3===t.tag?a:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function d(e){if(31===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(o(e)!==e)throw Error(s(188))}function p(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=p(e)))return t;e=e.sibling}return null}var m=Object.assign,h=Symbol.for("react.element"),f=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),b=Symbol.for("react.consumer"),j=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),w=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),S=Symbol.for("react.lazy");Symbol.for("react.scope");var k=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var E=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var T=Symbol.iterator;function P(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=T&&e[T]||e["@@iterator"])?e:null}var R=Symbol.for("react.client.reference");function L(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===R?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case v:return"Fragment";case y:return"Profiler";case x:return"StrictMode";case _:return"Suspense";case w:return"SuspenseList";case k:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case g:return"Portal";case j:return e.displayName||"Context";case b:return(e._context.displayName||"Context")+".Consumer";case N:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case C:return null!==(t=e.displayName||null)?t:L(e.type)||"Memo";case S:t=e._payload,e=e._init;try{return L(e(t))}catch(a){}}return null}var A=Array.isArray,z=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O=l.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D={pending:!1,data:null,method:null,action:null},I=[],F=-1;function q(e){return{current:e}}function M(e){0>F||(e.current=I[F],I[F]=null,F--)}function U(e,t){F++,I[F]=e.current,e.current=t}var B,H,V=q(null),W=q(null),G=q(null),$=q(null);function Q(e,t){switch(U(G,t),U(W,e),U(V,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?vu(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=xu(t=vu(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}M(V),U(V,e)}function K(){M(V),M(W),M(G)}function J(e){null!==e.memoizedState&&U($,e);var t=V.current,a=xu(t,e.type);t!==a&&(U(W,e),U(V,a))}function Y(e){W.current===e&&(M(V),M(W)),$.current===e&&(M($),dp._currentValue=D)}function X(e){if(void 0===B)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);B=t&&t[1]||"",H=-1<a.stack.indexOf("\n    at")?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+B+e+H}var Z=!1;function ee(e,t){if(!e||Z)return"";Z=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(t){var a=function(){throw Error()};if(Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(a,[])}catch(r){var n=r}Reflect.construct(e,[],a)}else{try{a.call()}catch(l){n=l}e.call(a.prototype)}}else{try{throw Error()}catch(s){n=s}(a=e())&&"function"===typeof a.catch&&a.catch(function(){})}}catch(i){if(i&&n&&"string"===typeof i.stack)return[i.stack,n.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var l=n.DetermineComponentFrameRoot(),s=l[0],i=l[1];if(s&&i){var o=s.split("\n"),c=i.split("\n");for(r=n=0;n<o.length&&!o[n].includes("DetermineComponentFrameRoot");)n++;for(;r<c.length&&!c[r].includes("DetermineComponentFrameRoot");)r++;if(n===o.length||r===c.length)for(n=o.length-1,r=c.length-1;1<=n&&0<=r&&o[n]!==c[r];)r--;for(;1<=n&&0<=r;n--,r--)if(o[n]!==c[r]){if(1!==n||1!==r)do{if(n--,0>--r||o[n]!==c[r]){var d="\n"+o[n].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}}while(1<=n&&0<=r);break}}}finally{Z=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?X(a):""}function te(e,t){switch(e.tag){case 26:case 27:case 5:return X(e.type);case 16:return X("Lazy");case 13:return e.child!==t&&null!==t?X("Suspense Fallback"):X("Suspense");case 19:return X("SuspenseList");case 0:case 15:return ee(e.type,!1);case 11:return ee(e.type.render,!1);case 1:return ee(e.type,!0);case 31:return X("Activity");default:return""}}function ae(e){try{var t="",a=null;do{t+=te(e,a),a=e,e=e.return}while(e);return t}catch(n){return"\nError generating stack: "+n.message+"\n"+n.stack}}var ne=Object.prototype.hasOwnProperty,re=n.unstable_scheduleCallback,le=n.unstable_cancelCallback,se=n.unstable_shouldYield,ie=n.unstable_requestPaint,oe=n.unstable_now,ce=n.unstable_getCurrentPriorityLevel,de=n.unstable_ImmediatePriority,ue=n.unstable_UserBlockingPriority,pe=n.unstable_NormalPriority,me=n.unstable_LowPriority,he=n.unstable_IdlePriority,fe=n.log,ge=n.unstable_setDisableYieldValue,ve=null,xe=null;function ye(e){if("function"===typeof fe&&ge(e),xe&&"function"===typeof xe.setStrictMode)try{xe.setStrictMode(ve,e)}catch(t){}}var be=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(je(e)/Ne|0)|0},je=Math.log,Ne=Math.LN2;var _e=256,we=262144,Ce=4194304;function Se(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return 261888&e;case 262144:case 524288:case 1048576:case 2097152:return 3932160&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ke(e,t,a){var n=e.pendingLanes;if(0===n)return 0;var r=0,l=e.suspendedLanes,s=e.pingedLanes;e=e.warmLanes;var i=134217727&n;return 0!==i?0!==(n=i&~l)?r=Se(n):0!==(s&=i)?r=Se(s):a||0!==(a=i&~e)&&(r=Se(a)):0!==(i=n&~l)?r=Se(i):0!==s?r=Se(s):a||0!==(a=n&~e)&&(r=Se(a)),0===r?0:0!==t&&t!==r&&0===(t&l)&&((l=r&-r)>=(a=t&-t)||32===l&&0!==(4194048&a))?t:r}function Ee(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Te(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Pe(){var e=Ce;return 0===(62914560&(Ce<<=1))&&(Ce=4194304),e}function Re(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function Le(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ae(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var n=31-be(t);e.entangledLanes|=t,e.entanglements[n]=1073741824|e.entanglements[n]|261930&a}function ze(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var n=31-be(a),r=1<<n;r&t|e[n]&t&&(e[n]|=t),a&=~r}}function Oe(e,t){var a=t&-t;return 0!==((a=0!==(42&a)?1:De(a))&(e.suspendedLanes|t))?0:a}function De(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ie(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Fe(){var e=O.p;return 0!==e?e:void 0===(e=window.event)?32:Sp(e.type)}function qe(e,t){var a=O.p;try{return O.p=e,t()}finally{O.p=a}}var Me=Math.random().toString(36).slice(2),Ue="__reactFiber$"+Me,Be="__reactProps$"+Me,He="__reactContainer$"+Me,Ve="__reactEvents$"+Me,We="__reactListeners$"+Me,Ge="__reactHandles$"+Me,$e="__reactResources$"+Me,Qe="__reactMarker$"+Me;function Ke(e){delete e[Ue],delete e[Be],delete e[Ve],delete e[We],delete e[Ge]}function Je(e){var t=e[Ue];if(t)return t;for(var a=e.parentNode;a;){if(t=a[He]||a[Ue]){if(a=t.alternate,null!==t.child||null!==a&&null!==a.child)for(e=Du(e);null!==e;){if(a=e[Ue])return a;e=Du(e)}return t}a=(e=a).parentNode}return null}function Ye(e){if(e=e[Ue]||e[He]){var t=e.tag;if(5===t||6===t||13===t||31===t||26===t||27===t||3===t)return e}return null}function Xe(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(s(33))}function Ze(e){var t=e[$e];return t||(t=e[$e]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function et(e){e[Qe]=!0}var tt=new Set,at={};function nt(e,t){rt(e,t),rt(e+"Capture",t)}function rt(e,t){for(at[e]=t,e=0;e<t.length;e++)tt.add(t[e])}var lt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),st={},it={};function ot(e,t,a){if(r=t,ne.call(it,r)||!ne.call(st,r)&&(lt.test(r)?it[r]=!0:(st[r]=!0,0)))if(null===a)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var n=t.toLowerCase().slice(0,5);if("data-"!==n&&"aria-"!==n)return void e.removeAttribute(t)}e.setAttribute(t,""+a)}var r}function ct(e,t,a){if(null===a)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+a)}}function dt(e,t,a,n){if(null===n)e.removeAttribute(a);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(a)}e.setAttributeNS(t,a,""+n)}}function ut(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function pt(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function mt(e){if(!e._valueTracker){var t=pt(e)?"checked":"value";e._valueTracker=function(e,t,a){var n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){a=""+e,l.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return a},setValue:function(e){a=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e,t,""+e[t])}}function ht(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),n="";return e&&(n=pt(e)?e.checked?"true":"false":e.value),(e=n)!==a&&(t.setValue(e),!0)}function ft(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var gt=/[\n"\\]/g;function vt(e){return e.replace(gt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function xt(e,t,a,n,r,l,s,i){e.name="",null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s?e.type=s:e.removeAttribute("type"),null!=t?"number"===s?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ut(t)):e.value!==""+ut(t)&&(e.value=""+ut(t)):"submit"!==s&&"reset"!==s||e.removeAttribute("value"),null!=t?bt(e,s,ut(t)):null!=a?bt(e,s,ut(a)):null!=n&&e.removeAttribute("value"),null==r&&null!=l&&(e.defaultChecked=!!l),null!=r&&(e.checked=r&&"function"!==typeof r&&"symbol"!==typeof r),null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i?e.name=""+ut(i):e.removeAttribute("name")}function yt(e,t,a,n,r,l,s,i){if(null!=l&&"function"!==typeof l&&"symbol"!==typeof l&&"boolean"!==typeof l&&(e.type=l),null!=t||null!=a){if(!("submit"!==l&&"reset"!==l||void 0!==t&&null!==t))return void mt(e);a=null!=a?""+ut(a):"",t=null!=t?""+ut(t):a,i||t===e.value||(e.value=t),e.defaultValue=t}n="function"!==typeof(n=null!=n?n:r)&&"symbol"!==typeof n&&!!n,e.checked=i?e.checked:!!n,e.defaultChecked=!!n,null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s&&(e.name=s),mt(e)}function bt(e,t,a){"number"===t&&ft(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function jt(e,t,a,n){if(e=e.options,t){t={};for(var r=0;r<a.length;r++)t["$"+a[r]]=!0;for(a=0;a<e.length;a++)r=t.hasOwnProperty("$"+e[a].value),e[a].selected!==r&&(e[a].selected=r),r&&n&&(e[a].defaultSelected=!0)}else{for(a=""+ut(a),t=null,r=0;r<e.length;r++){if(e[r].value===a)return e[r].selected=!0,void(n&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function Nt(e,t,a){null==t||((t=""+ut(t))!==e.value&&(e.value=t),null!=a)?e.defaultValue=null!=a?""+ut(a):"":e.defaultValue!==t&&(e.defaultValue=t)}function _t(e,t,a,n){if(null==t){if(null!=n){if(null!=a)throw Error(s(92));if(A(n)){if(1<n.length)throw Error(s(93));n=n[0]}a=n}null==a&&(a=""),t=a}a=ut(t),e.defaultValue=a,(n=e.textContent)===a&&""!==n&&null!==n&&(e.value=n),mt(e)}function wt(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&3===a.nodeType)return void(a.nodeValue=t)}e.textContent=t}var Ct=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function St(e,t,a){var n=0===t.indexOf("--");null==a||"boolean"===typeof a||""===a?n?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":n?e.setProperty(t,a):"number"!==typeof a||0===a||Ct.has(t)?"float"===t?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function kt(e,t,a){if(null!=t&&"object"!==typeof t)throw Error(s(62));if(e=e.style,null!=a){for(var n in a)!a.hasOwnProperty(n)||null!=t&&t.hasOwnProperty(n)||(0===n.indexOf("--")?e.setProperty(n,""):"float"===n?e.cssFloat="":e[n]="");for(var r in t)n=t[r],t.hasOwnProperty(r)&&a[r]!==n&&St(e,r,n)}else for(var l in t)t.hasOwnProperty(l)&&St(e,l,t[l])}function Et(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Pt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Rt(e){return Pt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Lt(){}var At=null;function zt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ot=null,Dt=null;function It(e){var t=Ye(e);if(t&&(e=t.stateNode)){var a=e[Be]||null;e:switch(e=t.stateNode,t.type){case"input":if(xt(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,"radio"===a.type&&null!=t){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+vt(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var n=a[t];if(n!==e&&n.form===e.form){var r=n[Be]||null;if(!r)throw Error(s(90));xt(n,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<a.length;t++)(n=a[t]).form===e.form&&ht(n)}break e;case"textarea":Nt(e,a.value,a.defaultValue);break e;case"select":null!=(t=a.value)&&jt(e,!!a.multiple,t,!1)}}}var Ft=!1;function qt(e,t,a){if(Ft)return e(t,a);Ft=!0;try{return e(t)}finally{if(Ft=!1,(null!==Ot||null!==Dt)&&(Zc(),Ot&&(t=Ot,e=Dt,Dt=Ot=null,It(t),e)))for(t=0;t<e.length;t++)It(e[t])}}function Mt(e,t){var a=e.stateNode;if(null===a)return null;var n=a[Be]||null;if(null===n)return null;a=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(a&&"function"!==typeof a)throw Error(s(231,t,typeof a));return a}var Ut=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Bt=!1;if(Ut)try{var Ht={};Object.defineProperty(Ht,"passive",{get:function(){Bt=!0}}),window.addEventListener("test",Ht,Ht),window.removeEventListener("test",Ht,Ht)}catch(Yp){Bt=!1}var Vt=null,Wt=null,Gt=null;function $t(){if(Gt)return Gt;var e,t,a=Wt,n=a.length,r="value"in Vt?Vt.value:Vt.textContent,l=r.length;for(e=0;e<n&&a[e]===r[e];e++);var s=n-e;for(t=1;t<=s&&a[n-t]===r[l-t];t++);return Gt=r.slice(e,1<t?1-t:void 0)}function Qt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Kt(){return!0}function Jt(){return!1}function Yt(e){function t(t,a,n,r,l){for(var s in this._reactName=t,this._targetInst=n,this.type=a,this.nativeEvent=r,this.target=l,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(r):r[s]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?Kt:Jt,this.isPropagationStopped=Jt,this}return m(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Kt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Kt)},persist:function(){},isPersistent:Kt}),t}var Xt,Zt,ea,ta={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},aa=Yt(ta),na=m({},ta,{view:0,detail:0}),ra=Yt(na),la=m({},na,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ga,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ea&&(ea&&"mousemove"===e.type?(Xt=e.screenX-ea.screenX,Zt=e.screenY-ea.screenY):Zt=Xt=0,ea=e),Xt)},movementY:function(e){return"movementY"in e?e.movementY:Zt}}),sa=Yt(la),ia=Yt(m({},la,{dataTransfer:0})),oa=Yt(m({},na,{relatedTarget:0})),ca=Yt(m({},ta,{animationName:0,elapsedTime:0,pseudoElement:0})),da=Yt(m({},ta,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),ua=Yt(m({},ta,{data:0})),pa={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ma={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ha={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fa(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=ha[e])&&!!t[e]}function ga(){return fa}var va=Yt(m({},na,{key:function(e){if(e.key){var t=pa[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Qt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?ma[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ga,charCode:function(e){return"keypress"===e.type?Qt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Qt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),xa=Yt(m({},la,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),ya=Yt(m({},na,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ga})),ba=Yt(m({},ta,{propertyName:0,elapsedTime:0,pseudoElement:0})),ja=Yt(m({},la,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Na=Yt(m({},ta,{newState:0,oldState:0})),_a=[9,13,27,32],wa=Ut&&"CompositionEvent"in window,Ca=null;Ut&&"documentMode"in document&&(Ca=document.documentMode);var Sa=Ut&&"TextEvent"in window&&!Ca,ka=Ut&&(!wa||Ca&&8<Ca&&11>=Ca),Ea=String.fromCharCode(32),Ta=!1;function Pa(e,t){switch(e){case"keyup":return-1!==_a.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ra(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var La=!1;var Aa={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function za(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Aa[e.type]:"textarea"===t}function Oa(e,t,a,n){Ot?Dt?Dt.push(n):Dt=[n]:Ot=n,0<(t=nu(t,"onChange")).length&&(a=new aa("onChange","change",null,a,n),e.push({event:a,listeners:t}))}var Da=null,Ia=null;function Fa(e){Kd(e,0)}function qa(e){if(ht(Xe(e)))return e}function Ma(e,t){if("change"===e)return t}var Ua=!1;if(Ut){var Ba;if(Ut){var Ha="oninput"in document;if(!Ha){var Va=document.createElement("div");Va.setAttribute("oninput","return;"),Ha="function"===typeof Va.oninput}Ba=Ha}else Ba=!1;Ua=Ba&&(!document.documentMode||9<document.documentMode)}function Wa(){Da&&(Da.detachEvent("onpropertychange",Ga),Ia=Da=null)}function Ga(e){if("value"===e.propertyName&&qa(Ia)){var t=[];Oa(t,Ia,e,zt(e)),qt(Fa,t)}}function $a(e,t,a){"focusin"===e?(Wa(),Ia=a,(Da=t).attachEvent("onpropertychange",Ga)):"focusout"===e&&Wa()}function Qa(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return qa(Ia)}function Ka(e,t){if("click"===e)return qa(t)}function Ja(e,t){if("input"===e||"change"===e)return qa(t)}var Ya="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Xa(e,t){if(Ya(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var a=Object.keys(e),n=Object.keys(t);if(a.length!==n.length)return!1;for(n=0;n<a.length;n++){var r=a[n];if(!ne.call(t,r)||!Ya(e[r],t[r]))return!1}return!0}function Za(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function en(e,t){var a,n=Za(e);for(e=0;n;){if(3===n.nodeType){if(a=e+n.textContent.length,e<=t&&a>=t)return{node:n,offset:t-e};e=a}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Za(n)}}function tn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?tn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function an(e){for(var t=ft((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var a="string"===typeof t.contentWindow.location.href}catch(n){a=!1}if(!a)break;t=ft((e=t.contentWindow).document)}return t}function nn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var rn=Ut&&"documentMode"in document&&11>=document.documentMode,ln=null,sn=null,on=null,cn=!1;function dn(e,t,a){var n=a.window===a?a.document:9===a.nodeType?a:a.ownerDocument;cn||null==ln||ln!==ft(n)||("selectionStart"in(n=ln)&&nn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},on&&Xa(on,n)||(on=n,0<(n=nu(sn,"onSelect")).length&&(t=new aa("onSelect","select",null,t,a),e.push({event:t,listeners:n}),t.target=ln)))}function un(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var pn={animationend:un("Animation","AnimationEnd"),animationiteration:un("Animation","AnimationIteration"),animationstart:un("Animation","AnimationStart"),transitionrun:un("Transition","TransitionRun"),transitionstart:un("Transition","TransitionStart"),transitioncancel:un("Transition","TransitionCancel"),transitionend:un("Transition","TransitionEnd")},mn={},hn={};function fn(e){if(mn[e])return mn[e];if(!pn[e])return e;var t,a=pn[e];for(t in a)if(a.hasOwnProperty(t)&&t in hn)return mn[e]=a[t];return e}Ut&&(hn=document.createElement("div").style,"AnimationEvent"in window||(delete pn.animationend.animation,delete pn.animationiteration.animation,delete pn.animationstart.animation),"TransitionEvent"in window||delete pn.transitionend.transition);var gn=fn("animationend"),vn=fn("animationiteration"),xn=fn("animationstart"),yn=fn("transitionrun"),bn=fn("transitionstart"),jn=fn("transitioncancel"),Nn=fn("transitionend"),_n=new Map,wn="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cn(e,t){_n.set(e,t),nt(t,[e])}wn.push("scrollEnd");var Sn="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},kn=[],En=0,Tn=0;function Pn(){for(var e=En,t=Tn=En=0;t<e;){var a=kn[t];kn[t++]=null;var n=kn[t];kn[t++]=null;var r=kn[t];kn[t++]=null;var l=kn[t];if(kn[t++]=null,null!==n&&null!==r){var s=n.pending;null===s?r.next=r:(r.next=s.next,s.next=r),n.pending=r}0!==l&&zn(a,r,l)}}function Rn(e,t,a,n){kn[En++]=e,kn[En++]=t,kn[En++]=a,kn[En++]=n,Tn|=n,e.lanes|=n,null!==(e=e.alternate)&&(e.lanes|=n)}function Ln(e,t,a,n){return Rn(e,t,a,n),On(e)}function An(e,t){return Rn(e,null,null,t),On(e)}function zn(e,t,a){e.lanes|=a;var n=e.alternate;null!==n&&(n.lanes|=a);for(var r=!1,l=e.return;null!==l;)l.childLanes|=a,null!==(n=l.alternate)&&(n.childLanes|=a),22===l.tag&&(null===(e=l.stateNode)||1&e._visibility||(r=!0)),e=l,l=l.return;return 3===e.tag?(l=e.stateNode,r&&null!==t&&(r=31-be(a),null===(n=(e=l.hiddenUpdates)[r])?e[r]=[t]:n.push(t),t.lane=536870912|a),l):null}function On(e){if(50<Vc)throw Vc=0,Wc=null,Error(s(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Dn={};function In(e,t,a,n){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fn(e,t,a,n){return new In(e,t,a,n)}function qn(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Mn(e,t){var a=e.alternate;return null===a?((a=Fn(e.tag,t,e.key,e.mode)).elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=65011712&e.flags,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Un(e,t){e.flags&=65011714;var a=e.alternate;return null===a?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Bn(e,t,a,n,r,l){var i=0;if(n=e,"function"===typeof e)qn(e)&&(i=1);else if("string"===typeof e)i=function(e,t,a){if(1===a||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,a,V.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case k:return(e=Fn(31,a,t,r)).elementType=k,e.lanes=l,e;case v:return Hn(a.children,r,l,t);case x:i=8,r|=24;break;case y:return(e=Fn(12,a,t,2|r)).elementType=y,e.lanes=l,e;case _:return(e=Fn(13,a,t,r)).elementType=_,e.lanes=l,e;case w:return(e=Fn(19,a,t,r)).elementType=w,e.lanes=l,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case j:i=10;break e;case b:i=9;break e;case N:i=11;break e;case C:i=14;break e;case S:i=16,n=null;break e}i=29,a=Error(s(130,null===e?"null":typeof e,"")),n=null}return(t=Fn(i,a,t,r)).elementType=e,t.type=n,t.lanes=l,t}function Hn(e,t,a,n){return(e=Fn(7,e,n,t)).lanes=a,e}function Vn(e,t,a){return(e=Fn(6,e,null,t)).lanes=a,e}function Wn(e){var t=Fn(18,null,null,0);return t.stateNode=e,t}function Gn(e,t,a){return(t=Fn(4,null!==e.children?e.children:[],e.key,t)).lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var $n=new WeakMap;function Qn(e,t){if("object"===typeof e&&null!==e){var a=$n.get(e);return void 0!==a?a:(t={value:e,source:t,stack:ae(t)},$n.set(e,t),t)}return{value:e,source:t,stack:ae(t)}}var Kn=[],Jn=0,Yn=null,Xn=0,Zn=[],er=0,tr=null,ar=1,nr="";function rr(e,t){Kn[Jn++]=Xn,Kn[Jn++]=Yn,Yn=e,Xn=t}function lr(e,t,a){Zn[er++]=ar,Zn[er++]=nr,Zn[er++]=tr,tr=e;var n=ar;e=nr;var r=32-be(n)-1;n&=~(1<<r),a+=1;var l=32-be(t)+r;if(30<l){var s=r-r%5;l=(n&(1<<s)-1).toString(32),n>>=s,r-=s,ar=1<<32-be(t)+r|a<<r|n,nr=l+e}else ar=1<<l|a<<r|n,nr=e}function sr(e){null!==e.return&&(rr(e,1),lr(e,1,0))}function ir(e){for(;e===Yn;)Yn=Kn[--Jn],Kn[Jn]=null,Xn=Kn[--Jn],Kn[Jn]=null;for(;e===tr;)tr=Zn[--er],Zn[er]=null,nr=Zn[--er],Zn[er]=null,ar=Zn[--er],Zn[er]=null}function or(e,t){Zn[er++]=ar,Zn[er++]=nr,Zn[er++]=tr,ar=t.id,nr=t.overflow,tr=e}var cr=null,dr=null,ur=!1,pr=null,mr=!1,hr=Error(s(519));function fr(e){throw jr(Qn(Error(s(418,1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"text":"HTML","")),e)),hr}function gr(e){var t=e.stateNode,a=e.type,n=e.memoizedProps;switch(t[Ue]=e,t[Be]=n,a){case"dialog":Jd("cancel",t),Jd("close",t);break;case"iframe":case"object":case"embed":Jd("load",t);break;case"video":case"audio":for(a=0;a<$d.length;a++)Jd($d[a],t);break;case"source":Jd("error",t);break;case"img":case"image":case"link":Jd("error",t),Jd("load",t);break;case"details":Jd("toggle",t);break;case"input":Jd("invalid",t),yt(t,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0);break;case"select":Jd("invalid",t);break;case"textarea":Jd("invalid",t),_t(t,n.value,n.defaultValue,n.children)}"string"!==typeof(a=n.children)&&"number"!==typeof a&&"bigint"!==typeof a||t.textContent===""+a||!0===n.suppressHydrationWarning||cu(t.textContent,a)?(null!=n.popover&&(Jd("beforetoggle",t),Jd("toggle",t)),null!=n.onScroll&&Jd("scroll",t),null!=n.onScrollEnd&&Jd("scrollend",t),null!=n.onClick&&(t.onclick=Lt),t=!0):t=!1,t||fr(e,!0)}function vr(e){for(cr=e.return;cr;)switch(cr.tag){case 5:case 31:case 13:return void(mr=!1);case 27:case 3:return void(mr=!0);default:cr=cr.return}}function xr(e){if(e!==cr)return!1;if(!ur)return vr(e),ur=!0,!1;var t,a=e.tag;if((t=3!==a&&27!==a)&&((t=5===a)&&(t=!("form"!==(t=e.type)&&"button"!==t)||yu(e.type,e.memoizedProps)),t=!t),t&&dr&&fr(e),vr(e),13===a){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));dr=Ou(e)}else if(31===a){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));dr=Ou(e)}else 27===a?(a=dr,Su(e.type)?(e=zu,zu=null,dr=e):dr=a):dr=cr?Au(e.stateNode.nextSibling):null;return!0}function yr(){dr=cr=null,ur=!1}function br(){var e=pr;return null!==e&&(null===Pc?Pc=e:Pc.push.apply(Pc,e),pr=null),e}function jr(e){null===pr?pr=[e]:pr.push(e)}var Nr=q(null),_r=null,wr=null;function Cr(e,t,a){U(Nr,t._currentValue),t._currentValue=a}function Sr(e){e._currentValue=Nr.current,M(Nr)}function kr(e,t,a){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===a)break;e=e.return}}function Er(e,t,a,n){var r=e.child;for(null!==r&&(r.return=e);null!==r;){var l=r.dependencies;if(null!==l){var i=r.child;l=l.firstContext;e:for(;null!==l;){var o=l;l=r;for(var c=0;c<t.length;c++)if(o.context===t[c]){l.lanes|=a,null!==(o=l.alternate)&&(o.lanes|=a),kr(l.return,a,e),n||(i=null);break e}l=o.next}}else if(18===r.tag){if(null===(i=r.return))throw Error(s(341));i.lanes|=a,null!==(l=i.alternate)&&(l.lanes|=a),kr(i,a,e),i=null}else i=r.child;if(null!==i)i.return=r;else for(i=r;null!==i;){if(i===e){i=null;break}if(null!==(r=i.sibling)){r.return=i.return,i=r;break}i=i.return}r=i}}function Tr(e,t,a,n){e=null;for(var r=t,l=!1;null!==r;){if(!l)if(0!==(524288&r.flags))l=!0;else if(0!==(262144&r.flags))break;if(10===r.tag){var i=r.alternate;if(null===i)throw Error(s(387));if(null!==(i=i.memoizedProps)){var o=r.type;Ya(r.pendingProps.value,i.value)||(null!==e?e.push(o):e=[o])}}else if(r===$.current){if(null===(i=r.alternate))throw Error(s(387));i.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(null!==e?e.push(dp):e=[dp])}r=r.return}null!==e&&Er(t,e,a,n),t.flags|=262144}function Pr(e){for(e=e.firstContext;null!==e;){if(!Ya(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Rr(e){_r=e,wr=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Lr(e){return zr(_r,e)}function Ar(e,t){return null===_r&&Rr(e),zr(e,t)}function zr(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},null===wr){if(null===e)throw Error(s(308));wr=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else wr=wr.next=t;return a}var Or="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,a){e.push(a)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Dr=n.unstable_scheduleCallback,Ir=n.unstable_NormalPriority,Fr={$$typeof:j,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function qr(){return{controller:new Or,data:new Map,refCount:0}}function Mr(e){e.refCount--,0===e.refCount&&Dr(Ir,function(){e.controller.abort()})}var Ur=null,Br=0,Hr=0,Vr=null;function Wr(){if(0===--Br&&null!==Ur){null!==Vr&&(Vr.status="fulfilled");var e=Ur;Ur=null,Hr=0,Vr=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Gr=z.S;z.S=function(e,t){Ac=oe(),"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Ur){var a=Ur=[];Br=0,Hr=Bd(),Vr={status:"pending",value:void 0,then:function(e){a.push(e)}}}Br++,t.then(Wr,Wr)}(0,t),null!==Gr&&Gr(e,t)};var $r=q(null);function Qr(){var e=$r.current;return null!==e?e:hc.pooledCache}function Kr(e,t){U($r,null===t?$r.current:t.pool)}function Jr(){var e=Qr();return null===e?null:{parent:Fr._currentValue,pool:e}}var Yr=Error(s(460)),Xr=Error(s(474)),Zr=Error(s(542)),el={then:function(){}};function tl(e){return"fulfilled"===(e=e.status)||"rejected"===e}function al(e,t,a){switch(void 0===(a=e[a])?e.push(t):a!==t&&(t.then(Lt,Lt),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw sl(e=t.reason),e;default:if("string"===typeof t.status)t.then(Lt,Lt);else{if(null!==(e=hc)&&100<e.shellSuspendCounter)throw Error(s(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var a=t;a.status="fulfilled",a.value=e}},function(e){if("pending"===t.status){var a=t;a.status="rejected",a.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw sl(e=t.reason),e}throw rl=t,Yr}}function nl(e){try{return(0,e._init)(e._payload)}catch(t){if(null!==t&&"object"===typeof t&&"function"===typeof t.then)throw rl=t,Yr;throw t}}var rl=null;function ll(){if(null===rl)throw Error(s(459));var e=rl;return rl=null,e}function sl(e){if(e===Yr||e===Zr)throw Error(s(483))}var il=null,ol=0;function cl(e){var t=ol;return ol+=1,null===il&&(il=[]),al(il,e,t)}function dl(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function ul(e,t){if(t.$$typeof===h)throw Error(s(525));throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function pl(e){function t(t,a){if(e){var n=t.deletions;null===n?(t.deletions=[a],t.flags|=16):n.push(a)}}function a(a,n){if(!e)return null;for(;null!==n;)t(a,n),n=n.sibling;return null}function n(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function r(e,t){return(e=Mn(e,t)).index=0,e.sibling=null,e}function l(t,a,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<a?(t.flags|=67108866,a):n:(t.flags|=67108866,a):(t.flags|=1048576,a)}function i(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function o(e,t,a,n){return null===t||6!==t.tag?((t=Vn(a,e.mode,n)).return=e,t):((t=r(t,a)).return=e,t)}function c(e,t,a,n){var l=a.type;return l===v?u(e,t,a.props.children,n,a.key):null!==t&&(t.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===S&&nl(l)===t.type)?(dl(t=r(t,a.props),a),t.return=e,t):(dl(t=Bn(a.type,a.key,a.props,null,e.mode,n),a),t.return=e,t)}function d(e,t,a,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==a.containerInfo||t.stateNode.implementation!==a.implementation?((t=Gn(a,e.mode,n)).return=e,t):((t=r(t,a.children||[])).return=e,t)}function u(e,t,a,n,l){return null===t||7!==t.tag?((t=Hn(a,e.mode,n,l)).return=e,t):((t=r(t,a)).return=e,t)}function p(e,t,a){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Vn(""+t,e.mode,a)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case f:return dl(a=Bn(t.type,t.key,t.props,null,e.mode,a),t),a.return=e,a;case g:return(t=Gn(t,e.mode,a)).return=e,t;case S:return p(e,t=nl(t),a)}if(A(t)||P(t))return(t=Hn(t,e.mode,a,null)).return=e,t;if("function"===typeof t.then)return p(e,cl(t),a);if(t.$$typeof===j)return p(e,Ar(e,t),a);ul(e,t)}return null}function m(e,t,a,n){var r=null!==t?t.key:null;if("string"===typeof a&&""!==a||"number"===typeof a||"bigint"===typeof a)return null!==r?null:o(e,t,""+a,n);if("object"===typeof a&&null!==a){switch(a.$$typeof){case f:return a.key===r?c(e,t,a,n):null;case g:return a.key===r?d(e,t,a,n):null;case S:return m(e,t,a=nl(a),n)}if(A(a)||P(a))return null!==r?null:u(e,t,a,n,null);if("function"===typeof a.then)return m(e,t,cl(a),n);if(a.$$typeof===j)return m(e,t,Ar(e,a),n);ul(e,a)}return null}function h(e,t,a,n,r){if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return o(t,e=e.get(a)||null,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case f:return c(t,e=e.get(null===n.key?a:n.key)||null,n,r);case g:return d(t,e=e.get(null===n.key?a:n.key)||null,n,r);case S:return h(e,t,a,n=nl(n),r)}if(A(n)||P(n))return u(t,e=e.get(a)||null,n,r,null);if("function"===typeof n.then)return h(e,t,a,cl(n),r);if(n.$$typeof===j)return h(e,t,a,Ar(t,n),r);ul(t,n)}return null}function x(o,c,d,u){if("object"===typeof d&&null!==d&&d.type===v&&null===d.key&&(d=d.props.children),"object"===typeof d&&null!==d){switch(d.$$typeof){case f:e:{for(var y=d.key;null!==c;){if(c.key===y){if((y=d.type)===v){if(7===c.tag){a(o,c.sibling),(u=r(c,d.props.children)).return=o,o=u;break e}}else if(c.elementType===y||"object"===typeof y&&null!==y&&y.$$typeof===S&&nl(y)===c.type){a(o,c.sibling),dl(u=r(c,d.props),d),u.return=o,o=u;break e}a(o,c);break}t(o,c),c=c.sibling}d.type===v?((u=Hn(d.props.children,o.mode,u,d.key)).return=o,o=u):(dl(u=Bn(d.type,d.key,d.props,null,o.mode,u),d),u.return=o,o=u)}return i(o);case g:e:{for(y=d.key;null!==c;){if(c.key===y){if(4===c.tag&&c.stateNode.containerInfo===d.containerInfo&&c.stateNode.implementation===d.implementation){a(o,c.sibling),(u=r(c,d.children||[])).return=o,o=u;break e}a(o,c);break}t(o,c),c=c.sibling}(u=Gn(d,o.mode,u)).return=o,o=u}return i(o);case S:return x(o,c,d=nl(d),u)}if(A(d))return function(r,s,i,o){for(var c=null,d=null,u=s,f=s=0,g=null;null!==u&&f<i.length;f++){u.index>f?(g=u,u=null):g=u.sibling;var v=m(r,u,i[f],o);if(null===v){null===u&&(u=g);break}e&&u&&null===v.alternate&&t(r,u),s=l(v,s,f),null===d?c=v:d.sibling=v,d=v,u=g}if(f===i.length)return a(r,u),ur&&rr(r,f),c;if(null===u){for(;f<i.length;f++)null!==(u=p(r,i[f],o))&&(s=l(u,s,f),null===d?c=u:d.sibling=u,d=u);return ur&&rr(r,f),c}for(u=n(u);f<i.length;f++)null!==(g=h(u,r,f,i[f],o))&&(e&&null!==g.alternate&&u.delete(null===g.key?f:g.key),s=l(g,s,f),null===d?c=g:d.sibling=g,d=g);return e&&u.forEach(function(e){return t(r,e)}),ur&&rr(r,f),c}(o,c,d,u);if(P(d)){if("function"!==typeof(y=P(d)))throw Error(s(150));return function(r,i,o,c){if(null==o)throw Error(s(151));for(var d=null,u=null,f=i,g=i=0,v=null,x=o.next();null!==f&&!x.done;g++,x=o.next()){f.index>g?(v=f,f=null):v=f.sibling;var y=m(r,f,x.value,c);if(null===y){null===f&&(f=v);break}e&&f&&null===y.alternate&&t(r,f),i=l(y,i,g),null===u?d=y:u.sibling=y,u=y,f=v}if(x.done)return a(r,f),ur&&rr(r,g),d;if(null===f){for(;!x.done;g++,x=o.next())null!==(x=p(r,x.value,c))&&(i=l(x,i,g),null===u?d=x:u.sibling=x,u=x);return ur&&rr(r,g),d}for(f=n(f);!x.done;g++,x=o.next())null!==(x=h(f,r,g,x.value,c))&&(e&&null!==x.alternate&&f.delete(null===x.key?g:x.key),i=l(x,i,g),null===u?d=x:u.sibling=x,u=x);return e&&f.forEach(function(e){return t(r,e)}),ur&&rr(r,g),d}(o,c,d=y.call(d),u)}if("function"===typeof d.then)return x(o,c,cl(d),u);if(d.$$typeof===j)return x(o,c,Ar(o,d),u);ul(o,d)}return"string"===typeof d&&""!==d||"number"===typeof d||"bigint"===typeof d?(d=""+d,null!==c&&6===c.tag?(a(o,c.sibling),(u=r(c,d)).return=o,o=u):(a(o,c),(u=Vn(d,o.mode,u)).return=o,o=u),i(o)):a(o,c)}return function(e,t,a,n){try{ol=0;var r=x(e,t,a,n);return il=null,r}catch(s){if(s===Yr||s===Zr)throw s;var l=Fn(29,s,null,e.mode);return l.lanes=n,l.return=e,l}}}var ml=pl(!0),hl=pl(!1),fl=!1;function gl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function vl(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function xl(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function yl(e,t,a){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!==(2&mc)){var r=n.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),n.pending=t,t=On(e),zn(e,null,a),t}return Rn(e,n,t,a),On(e)}function bl(e,t,a){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&a))){var n=t.lanes;a|=n&=e.pendingLanes,t.lanes=a,ze(e,a)}}function jl(e,t){var a=e.updateQueue,n=e.alternate;if(null!==n&&a===(n=n.updateQueue)){var r=null,l=null;if(null!==(a=a.firstBaseUpdate)){do{var s={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};null===l?r=l=s:l=l.next=s,a=a.next}while(null!==a);null===l?r=l=t:l=l.next=t}else r=l=t;return a={baseState:n.baseState,firstBaseUpdate:r,lastBaseUpdate:l,shared:n.shared,callbacks:n.callbacks},void(e.updateQueue=a)}null===(e=a.lastBaseUpdate)?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var Nl=!1;function _l(){if(Nl){if(null!==Vr)throw Vr}}function wl(e,t,a,n){Nl=!1;var r=e.updateQueue;fl=!1;var l=r.firstBaseUpdate,s=r.lastBaseUpdate,i=r.shared.pending;if(null!==i){r.shared.pending=null;var o=i,c=o.next;o.next=null,null===s?l=c:s.next=c,s=o;var d=e.alternate;null!==d&&((i=(d=d.updateQueue).lastBaseUpdate)!==s&&(null===i?d.firstBaseUpdate=c:i.next=c,d.lastBaseUpdate=o))}if(null!==l){var u=r.baseState;for(s=0,d=c=o=null,i=l;;){var p=-536870913&i.lane,h=p!==i.lane;if(h?(gc&p)===p:(n&p)===p){0!==p&&p===Hr&&(Nl=!0),null!==d&&(d=d.next={lane:0,tag:i.tag,payload:i.payload,callback:null,next:null});e:{var f=e,g=i;p=t;var v=a;switch(g.tag){case 1:if("function"===typeof(f=g.payload)){u=f.call(v,u,p);break e}u=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(p="function"===typeof(f=g.payload)?f.call(v,u,p):f)||void 0===p)break e;u=m({},u,p);break e;case 2:fl=!0}}null!==(p=i.callback)&&(e.flags|=64,h&&(e.flags|=8192),null===(h=r.callbacks)?r.callbacks=[p]:h.push(p))}else h={lane:p,tag:i.tag,payload:i.payload,callback:i.callback,next:null},null===d?(c=d=h,o=u):d=d.next=h,s|=p;if(null===(i=i.next)){if(null===(i=r.shared.pending))break;i=(h=i).next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}null===d&&(o=u),r.baseState=o,r.firstBaseUpdate=c,r.lastBaseUpdate=d,null===l&&(r.shared.lanes=0),wc|=s,e.lanes=s,e.memoizedState=u}}function Cl(e,t){if("function"!==typeof e)throw Error(s(191,e));e.call(t)}function Sl(e,t){var a=e.callbacks;if(null!==a)for(e.callbacks=null,e=0;e<a.length;e++)Cl(a[e],t)}var kl=q(null),El=q(0);function Tl(e,t){U(El,e=Nc),U(kl,t),Nc=e|t.baseLanes}function Pl(){U(El,Nc),U(kl,kl.current)}function Rl(){Nc=El.current,M(kl),M(El)}var Ll=q(null),Al=null;function zl(e){var t=e.alternate;U(ql,1&ql.current),U(Ll,e),null===Al&&(null===t||null!==kl.current||null!==t.memoizedState)&&(Al=e)}function Ol(e){U(ql,ql.current),U(Ll,e),null===Al&&(Al=e)}function Dl(e){22===e.tag?(U(ql,ql.current),U(Ll,e),null===Al&&(Al=e)):Il()}function Il(){U(ql,ql.current),U(Ll,Ll.current)}function Fl(e){M(Ll),Al===e&&(Al=null),M(ql)}var ql=q(0);function Ml(e){for(var t=e;null!==t;){if(13===t.tag){var a=t.memoizedState;if(null!==a&&(null===(a=a.dehydrated)||Ru(a)||Lu(a)))return t}else if(19!==t.tag||"forwards"!==t.memoizedProps.revealOrder&&"backwards"!==t.memoizedProps.revealOrder&&"unstable_legacy-backwards"!==t.memoizedProps.revealOrder&&"together"!==t.memoizedProps.revealOrder){if(null!==t.child){t.child.return=t,t=t.child;continue}}else if(0!==(128&t.flags))return t;if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ul=0,Bl=null,Hl=null,Vl=null,Wl=!1,Gl=!1,$l=!1,Ql=0,Kl=0,Jl=null,Yl=0;function Xl(){throw Error(s(321))}function Zl(e,t){if(null===t)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!Ya(e[a],t[a]))return!1;return!0}function es(e,t,a,n,r,l){return Ul=l,Bl=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,z.H=null===e||null===e.memoizedState?fi:gi,$l=!1,l=a(n,r),$l=!1,Gl&&(l=as(t,a,n,r)),ts(e),l}function ts(e){z.H=hi;var t=null!==Hl&&null!==Hl.next;if(Ul=0,Vl=Hl=Bl=null,Wl=!1,Kl=0,Jl=null,t)throw Error(s(300));null===e||Li||null!==(e=e.dependencies)&&Pr(e)&&(Li=!0)}function as(e,t,a,n){Bl=e;var r=0;do{if(Gl&&(Jl=null),Kl=0,Gl=!1,25<=r)throw Error(s(301));if(r+=1,Vl=Hl=null,null!=e.updateQueue){var l=e.updateQueue;l.lastEffect=null,l.events=null,l.stores=null,null!=l.memoCache&&(l.memoCache.index=0)}z.H=vi,l=t(a,n)}while(Gl);return l}function ns(){var e=z.H,t=e.useState()[0];return t="function"===typeof t.then?cs(t):t,e=e.useState()[0],(null!==Hl?Hl.memoizedState:null)!==e&&(Bl.flags|=1024),t}function rs(){var e=0!==Ql;return Ql=0,e}function ls(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function ss(e){if(Wl){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Wl=!1}Ul=0,Vl=Hl=Bl=null,Gl=!1,Kl=Ql=0,Jl=null}function is(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Vl?Bl.memoizedState=Vl=e:Vl=Vl.next=e,Vl}function os(){if(null===Hl){var e=Bl.alternate;e=null!==e?e.memoizedState:null}else e=Hl.next;var t=null===Vl?Bl.memoizedState:Vl.next;if(null!==t)Vl=t,Hl=e;else{if(null===e){if(null===Bl.alternate)throw Error(s(467));throw Error(s(310))}e={memoizedState:(Hl=e).memoizedState,baseState:Hl.baseState,baseQueue:Hl.baseQueue,queue:Hl.queue,next:null},null===Vl?Bl.memoizedState=Vl=e:Vl=Vl.next=e}return Vl}function cs(e){var t=Kl;return Kl+=1,null===Jl&&(Jl=[]),e=al(Jl,e,t),t=Bl,null===(null===Vl?t.memoizedState:Vl.next)&&(t=t.alternate,z.H=null===t||null===t.memoizedState?fi:gi),e}function ds(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return cs(e);if(e.$$typeof===j)return Lr(e)}throw Error(s(438,String(e)))}function us(e){var t=null,a=Bl.updateQueue;if(null!==a&&(t=a.memoCache),null==t){var n=Bl.alternate;null!==n&&(null!==(n=n.updateQueue)&&(null!=(n=n.memoCache)&&(t={data:n.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===a&&(a={lastEffect:null,events:null,stores:null,memoCache:null},Bl.updateQueue=a),a.memoCache=t,void 0===(a=t.data[t.index]))for(a=t.data[t.index]=Array(e),n=0;n<e;n++)a[n]=E;return t.index++,a}function ps(e,t){return"function"===typeof t?t(e):t}function ms(e){return hs(os(),Hl,e)}function hs(e,t,a){var n=e.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=a;var r=e.baseQueue,l=n.pending;if(null!==l){if(null!==r){var i=r.next;r.next=l.next,l.next=i}t.baseQueue=r=l,n.pending=null}if(l=e.baseState,null===r)e.memoizedState=l;else{var o=i=null,c=null,d=t=r.next,u=!1;do{var p=-536870913&d.lane;if(p!==d.lane?(gc&p)===p:(Ul&p)===p){var m=d.revertLane;if(0===m)null!==c&&(c=c.next={lane:0,revertLane:0,gesture:null,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),p===Hr&&(u=!0);else{if((Ul&m)===m){d=d.next,m===Hr&&(u=!0);continue}p={lane:0,revertLane:d.revertLane,gesture:null,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},null===c?(o=c=p,i=l):c=c.next=p,Bl.lanes|=m,wc|=m}p=d.action,$l&&a(l,p),l=d.hasEagerState?d.eagerState:a(l,p)}else m={lane:p,revertLane:d.revertLane,gesture:d.gesture,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},null===c?(o=c=m,i=l):c=c.next=m,Bl.lanes|=p,wc|=p;d=d.next}while(null!==d&&d!==t);if(null===c?i=l:c.next=o,!Ya(l,e.memoizedState)&&(Li=!0,u&&null!==(a=Vr)))throw a;e.memoizedState=l,e.baseState=i,e.baseQueue=c,n.lastRenderedState=l}return null===r&&(n.lanes=0),[e.memoizedState,n.dispatch]}function fs(e){var t=os(),a=t.queue;if(null===a)throw Error(s(311));a.lastRenderedReducer=e;var n=a.dispatch,r=a.pending,l=t.memoizedState;if(null!==r){a.pending=null;var i=r=r.next;do{l=e(l,i.action),i=i.next}while(i!==r);Ya(l,t.memoizedState)||(Li=!0),t.memoizedState=l,null===t.baseQueue&&(t.baseState=l),a.lastRenderedState=l}return[l,n]}function gs(e,t,a){var n=Bl,r=os(),l=ur;if(l){if(void 0===a)throw Error(s(407));a=a()}else a=t();var i=!Ya((Hl||r).memoizedState,a);if(i&&(r.memoizedState=a,Li=!0),r=r.queue,Us(ys.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||null!==Vl&&1&Vl.memoizedState.tag){if(n.flags|=2048,Ds(9,{destroy:void 0},xs.bind(null,n,r,a,t),null),null===hc)throw Error(s(349));l||0!==(127&Ul)||vs(n,t,a)}return a}function vs(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},null===(t=Bl.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},Bl.updateQueue=t,t.stores=[e]):null===(a=t.stores)?t.stores=[e]:a.push(e)}function xs(e,t,a,n){t.value=a,t.getSnapshot=n,bs(t)&&js(e)}function ys(e,t,a){return a(function(){bs(t)&&js(e)})}function bs(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!Ya(e,a)}catch(n){return!0}}function js(e){var t=An(e,2);null!==t&&Qc(t,e,2)}function Ns(e){var t=is();if("function"===typeof e){var a=e;if(e=a(),$l){ye(!0);try{a()}finally{ye(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ps,lastRenderedState:e},t}function _s(e,t,a,n){return e.baseState=a,hs(e,Hl,"function"===typeof n?n:ps)}function ws(e,t,a,n,r){if(ui(e))throw Error(s(485));if(null!==(e=t.action)){var l={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){l.listeners.push(e)}};null!==z.T?a(!0):l.isTransition=!1,n(l),null===(a=t.pending)?(l.next=t.pending=l,Cs(t,l)):(l.next=a.next,t.pending=a.next=l)}}function Cs(e,t){var a=t.action,n=t.payload,r=e.state;if(t.isTransition){var l=z.T,s={};z.T=s;try{var i=a(r,n),o=z.S;null!==o&&o(s,i),Ss(e,t,i)}catch(c){Es(e,t,c)}finally{null!==l&&null!==s.types&&(l.types=s.types),z.T=l}}else try{Ss(e,t,l=a(r,n))}catch(d){Es(e,t,d)}}function Ss(e,t,a){null!==a&&"object"===typeof a&&"function"===typeof a.then?a.then(function(a){ks(e,t,a)},function(a){return Es(e,t,a)}):ks(e,t,a)}function ks(e,t,a){t.status="fulfilled",t.value=a,Ts(t),e.state=a,null!==(t=e.pending)&&((a=t.next)===t?e.pending=null:(a=a.next,t.next=a,Cs(e,a)))}function Es(e,t,a){var n=e.pending;if(e.pending=null,null!==n){n=n.next;do{t.status="rejected",t.reason=a,Ts(t),t=t.next}while(t!==n)}e.action=null}function Ts(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Ps(e,t){return t}function Rs(e,t){if(ur){var a=hc.formState;if(null!==a){e:{var n=Bl;if(ur){if(dr){t:{for(var r=dr,l=mr;8!==r.nodeType;){if(!l){r=null;break t}if(null===(r=Au(r.nextSibling))){r=null;break t}}r="F!"===(l=r.data)||"F"===l?r:null}if(r){dr=Au(r.nextSibling),n="F!"===r.data;break e}}fr(n)}n=!1}n&&(t=a[0])}}return(a=is()).memoizedState=a.baseState=t,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ps,lastRenderedState:t},a.queue=n,a=oi.bind(null,Bl,n),n.dispatch=a,n=Ns(!1),l=di.bind(null,Bl,!1,n.queue),r={state:t,dispatch:null,action:e,pending:null},(n=is()).queue=r,a=ws.bind(null,Bl,r,l,a),r.dispatch=a,n.memoizedState=e,[t,a,!1]}function Ls(e){return As(os(),Hl,e)}function As(e,t,a){if(t=hs(e,t,Ps)[0],e=ms(ps)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var n=cs(t)}catch(s){if(s===Yr)throw Zr;throw s}else n=t;var r=(t=os()).queue,l=r.dispatch;return a!==t.memoizedState&&(Bl.flags|=2048,Ds(9,{destroy:void 0},zs.bind(null,r,a),null)),[n,l,e]}function zs(e,t){e.action=t}function Os(e){var t=os(),a=Hl;if(null!==a)return As(t,a,e);os(),t=t.memoizedState;var n=(a=os()).queue.dispatch;return a.memoizedState=e,[t,n,!1]}function Ds(e,t,a,n){return e={tag:e,create:a,deps:n,inst:t,next:null},null===(t=Bl.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Bl.updateQueue=t),null===(a=t.lastEffect)?t.lastEffect=e.next=e:(n=a.next,a.next=e,e.next=n,t.lastEffect=e),e}function Is(){return os().memoizedState}function Fs(e,t,a,n){var r=is();Bl.flags|=e,r.memoizedState=Ds(1|t,{destroy:void 0},a,void 0===n?null:n)}function qs(e,t,a,n){var r=os();n=void 0===n?null:n;var l=r.memoizedState.inst;null!==Hl&&null!==n&&Zl(n,Hl.memoizedState.deps)?r.memoizedState=Ds(t,l,a,n):(Bl.flags|=e,r.memoizedState=Ds(1|t,l,a,n))}function Ms(e,t){Fs(8390656,8,e,t)}function Us(e,t){qs(2048,8,e,t)}function Bs(e){var t=os().memoizedState;return function(e){Bl.flags|=4;var t=Bl.updateQueue;if(null===t)t={lastEffect:null,events:null,stores:null,memoCache:null},Bl.updateQueue=t,t.events=[e];else{var a=t.events;null===a?t.events=[e]:a.push(e)}}({ref:t,nextImpl:e}),function(){if(0!==(2&mc))throw Error(s(440));return t.impl.apply(void 0,arguments)}}function Hs(e,t){return qs(4,2,e,t)}function Vs(e,t){return qs(4,4,e,t)}function Ws(e,t){if("function"===typeof t){e=e();var a=t(e);return function(){"function"===typeof a?a():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function Gs(e,t,a){a=null!==a&&void 0!==a?a.concat([e]):null,qs(4,4,Ws.bind(null,t,e),a)}function $s(){}function Qs(e,t){var a=os();t=void 0===t?null:t;var n=a.memoizedState;return null!==t&&Zl(t,n[1])?n[0]:(a.memoizedState=[e,t],e)}function Ks(e,t){var a=os();t=void 0===t?null:t;var n=a.memoizedState;if(null!==t&&Zl(t,n[1]))return n[0];if(n=e(),$l){ye(!0);try{e()}finally{ye(!1)}}return a.memoizedState=[n,t],n}function Js(e,t,a){return void 0===a||0!==(1073741824&Ul)&&0===(261930&gc)?e.memoizedState=t:(e.memoizedState=a,e=$c(),Bl.lanes|=e,wc|=e,a)}function Ys(e,t,a,n){return Ya(a,t)?a:null!==kl.current?(e=Js(e,a,n),Ya(e,t)||(Li=!0),e):0===(42&Ul)||0!==(1073741824&Ul)&&0===(261930&gc)?(Li=!0,e.memoizedState=a):(e=$c(),Bl.lanes|=e,wc|=e,t)}function Xs(e,t,a,n,r){var l=O.p;O.p=0!==l&&8>l?l:8;var s=z.T,i={};z.T=i,di(e,!1,t,a);try{var o=r(),c=z.S;if(null!==c&&c(i,o),null!==o&&"object"===typeof o&&"function"===typeof o.then)ci(e,t,function(e,t){var a=[],n={status:"pending",value:null,reason:null,then:function(e){a.push(e)}};return e.then(function(){n.status="fulfilled",n.value=t;for(var e=0;e<a.length;e++)(0,a[e])(t)},function(e){for(n.status="rejected",n.reason=e,e=0;e<a.length;e++)(0,a[e])(void 0)}),n}(o,n),Gc());else ci(e,t,n,Gc())}catch(d){ci(e,t,{then:function(){},status:"rejected",reason:d},Gc())}finally{O.p=l,null!==s&&null!==i.types&&(s.types=i.types),z.T=s}}function Zs(){}function ei(e,t,a,n){if(5!==e.tag)throw Error(s(476));var r=ti(e).queue;Xs(e,r,t,D,null===a?Zs:function(){return ai(e),a(n)})}function ti(e){var t=e.memoizedState;if(null!==t)return t;var a={};return(t={memoizedState:D,baseState:D,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ps,lastRenderedState:D},next:null}).next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ps,lastRenderedState:a},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function ai(e){var t=ti(e);null===t.next&&(t=e.alternate.memoizedState),ci(e,t.next.queue,{},Gc())}function ni(){return Lr(dp)}function ri(){return os().memoizedState}function li(){return os().memoizedState}function si(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var a=Gc(),n=yl(t,e=xl(a),a);return null!==n&&(Qc(n,t,a),bl(n,t,a)),t={cache:qr()},void(e.payload=t)}t=t.return}}function ii(e,t,a){var n=Gc();a={lane:n,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},ui(e)?pi(t,a):null!==(a=Ln(e,t,a,n))&&(Qc(a,e,n),mi(a,t,n))}function oi(e,t,a){ci(e,t,a,Gc())}function ci(e,t,a,n){var r={lane:n,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(ui(e))pi(t,r);else{var l=e.alternate;if(0===e.lanes&&(null===l||0===l.lanes)&&null!==(l=t.lastRenderedReducer))try{var s=t.lastRenderedState,i=l(s,a);if(r.hasEagerState=!0,r.eagerState=i,Ya(i,s))return Rn(e,t,r,0),null===hc&&Pn(),!1}catch(o){}if(null!==(a=Ln(e,t,r,n)))return Qc(a,e,n),mi(a,t,n),!0}return!1}function di(e,t,a,n){if(n={lane:2,revertLane:Bd(),gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},ui(e)){if(t)throw Error(s(479))}else null!==(t=Ln(e,a,n,2))&&Qc(t,e,2)}function ui(e){var t=e.alternate;return e===Bl||null!==t&&t===Bl}function pi(e,t){Gl=Wl=!0;var a=e.pending;null===a?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function mi(e,t,a){if(0!==(4194048&a)){var n=t.lanes;a|=n&=e.pendingLanes,t.lanes=a,ze(e,a)}}var hi={readContext:Lr,use:ds,useCallback:Xl,useContext:Xl,useEffect:Xl,useImperativeHandle:Xl,useLayoutEffect:Xl,useInsertionEffect:Xl,useMemo:Xl,useReducer:Xl,useRef:Xl,useState:Xl,useDebugValue:Xl,useDeferredValue:Xl,useTransition:Xl,useSyncExternalStore:Xl,useId:Xl,useHostTransitionStatus:Xl,useFormState:Xl,useActionState:Xl,useOptimistic:Xl,useMemoCache:Xl,useCacheRefresh:Xl};hi.useEffectEvent=Xl;var fi={readContext:Lr,use:ds,useCallback:function(e,t){return is().memoizedState=[e,void 0===t?null:t],e},useContext:Lr,useEffect:Ms,useImperativeHandle:function(e,t,a){a=null!==a&&void 0!==a?a.concat([e]):null,Fs(4194308,4,Ws.bind(null,t,e),a)},useLayoutEffect:function(e,t){return Fs(4194308,4,e,t)},useInsertionEffect:function(e,t){Fs(4,2,e,t)},useMemo:function(e,t){var a=is();t=void 0===t?null:t;var n=e();if($l){ye(!0);try{e()}finally{ye(!1)}}return a.memoizedState=[n,t],n},useReducer:function(e,t,a){var n=is();if(void 0!==a){var r=a(t);if($l){ye(!0);try{a(t)}finally{ye(!1)}}}else r=t;return n.memoizedState=n.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},n.queue=e,e=e.dispatch=ii.bind(null,Bl,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},is().memoizedState=e},useState:function(e){var t=(e=Ns(e)).queue,a=oi.bind(null,Bl,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:$s,useDeferredValue:function(e,t){return Js(is(),e,t)},useTransition:function(){var e=Ns(!1);return e=Xs.bind(null,Bl,e.queue,!0,!1),is().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var n=Bl,r=is();if(ur){if(void 0===a)throw Error(s(407));a=a()}else{if(a=t(),null===hc)throw Error(s(349));0!==(127&gc)||vs(n,t,a)}r.memoizedState=a;var l={value:a,getSnapshot:t};return r.queue=l,Ms(ys.bind(null,n,l,e),[e]),n.flags|=2048,Ds(9,{destroy:void 0},xs.bind(null,n,l,a,t),null),a},useId:function(){var e=is(),t=hc.identifierPrefix;if(ur){var a=nr;t="_"+t+"R_"+(a=(ar&~(1<<32-be(ar)-1)).toString(32)+a),0<(a=Ql++)&&(t+="H"+a.toString(32)),t+="_"}else t="_"+t+"r_"+(a=Yl++).toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:ni,useFormState:Rs,useActionState:Rs,useOptimistic:function(e){var t=is();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=di.bind(null,Bl,!0,a),a.dispatch=t,[e,t]},useMemoCache:us,useCacheRefresh:function(){return is().memoizedState=si.bind(null,Bl)},useEffectEvent:function(e){var t=is(),a={impl:e};return t.memoizedState=a,function(){if(0!==(2&mc))throw Error(s(440));return a.impl.apply(void 0,arguments)}}},gi={readContext:Lr,use:ds,useCallback:Qs,useContext:Lr,useEffect:Us,useImperativeHandle:Gs,useInsertionEffect:Hs,useLayoutEffect:Vs,useMemo:Ks,useReducer:ms,useRef:Is,useState:function(){return ms(ps)},useDebugValue:$s,useDeferredValue:function(e,t){return Ys(os(),Hl.memoizedState,e,t)},useTransition:function(){var e=ms(ps)[0],t=os().memoizedState;return["boolean"===typeof e?e:cs(e),t]},useSyncExternalStore:gs,useId:ri,useHostTransitionStatus:ni,useFormState:Ls,useActionState:Ls,useOptimistic:function(e,t){return _s(os(),0,e,t)},useMemoCache:us,useCacheRefresh:li};gi.useEffectEvent=Bs;var vi={readContext:Lr,use:ds,useCallback:Qs,useContext:Lr,useEffect:Us,useImperativeHandle:Gs,useInsertionEffect:Hs,useLayoutEffect:Vs,useMemo:Ks,useReducer:fs,useRef:Is,useState:function(){return fs(ps)},useDebugValue:$s,useDeferredValue:function(e,t){var a=os();return null===Hl?Js(a,e,t):Ys(a,Hl.memoizedState,e,t)},useTransition:function(){var e=fs(ps)[0],t=os().memoizedState;return["boolean"===typeof e?e:cs(e),t]},useSyncExternalStore:gs,useId:ri,useHostTransitionStatus:ni,useFormState:Os,useActionState:Os,useOptimistic:function(e,t){var a=os();return null!==Hl?_s(a,0,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:us,useCacheRefresh:li};function xi(e,t,a,n){a=null===(a=a(n,t=e.memoizedState))||void 0===a?t:m({},t,a),e.memoizedState=a,0===e.lanes&&(e.updateQueue.baseState=a)}vi.useEffectEvent=Bs;var yi={enqueueSetState:function(e,t,a){e=e._reactInternals;var n=Gc(),r=xl(n);r.payload=t,void 0!==a&&null!==a&&(r.callback=a),null!==(t=yl(e,r,n))&&(Qc(t,e,n),bl(t,e,n))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var n=Gc(),r=xl(n);r.tag=1,r.payload=t,void 0!==a&&null!==a&&(r.callback=a),null!==(t=yl(e,r,n))&&(Qc(t,e,n),bl(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=Gc(),n=xl(a);n.tag=2,void 0!==t&&null!==t&&(n.callback=t),null!==(t=yl(e,n,a))&&(Qc(t,e,a),bl(t,e,a))}};function bi(e,t,a,n,r,l,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,l,s):!t.prototype||!t.prototype.isPureReactComponent||(!Xa(a,n)||!Xa(r,l))}function ji(e,t,a,n){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(a,n),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(a,n),t.state!==e&&yi.enqueueReplaceState(t,t.state,null)}function Ni(e,t){var a=t;if("ref"in t)for(var n in a={},t)"ref"!==n&&(a[n]=t[n]);if(e=e.defaultProps)for(var r in a===t&&(a=m({},a)),e)void 0===a[r]&&(a[r]=e[r]);return a}function _i(e){Sn(e)}function wi(e){console.error(e)}function Ci(e){Sn(e)}function Si(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(a){setTimeout(function(){throw a})}}function ki(e,t,a){try{(0,e.onCaughtError)(a.value,{componentStack:a.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(n){setTimeout(function(){throw n})}}function Ei(e,t,a){return(a=xl(a)).tag=3,a.payload={element:null},a.callback=function(){Si(e,t)},a}function Ti(e){return(e=xl(e)).tag=3,e}function Pi(e,t,a,n){var r=a.type.getDerivedStateFromError;if("function"===typeof r){var l=n.value;e.payload=function(){return r(l)},e.callback=function(){ki(t,a,n)}}var s=a.stateNode;null!==s&&"function"===typeof s.componentDidCatch&&(e.callback=function(){ki(t,a,n),"function"!==typeof r&&(null===Dc?Dc=new Set([this]):Dc.add(this));var e=n.stack;this.componentDidCatch(n.value,{componentStack:null!==e?e:""})})}var Ri=Error(s(461)),Li=!1;function Ai(e,t,a,n){t.child=null===e?hl(t,null,a,n):ml(t,e.child,a,n)}function zi(e,t,a,n,r){a=a.render;var l=t.ref;if("ref"in n){var s={};for(var i in n)"ref"!==i&&(s[i]=n[i])}else s=n;return Rr(t),n=es(e,t,a,s,l,r),i=rs(),null===e||Li?(ur&&i&&sr(t),t.flags|=1,Ai(e,t,n,r),t.child):(ls(e,t,r),no(e,t,r))}function Oi(e,t,a,n,r){if(null===e){var l=a.type;return"function"!==typeof l||qn(l)||void 0!==l.defaultProps||null!==a.compare?((e=Bn(a.type,null,n,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=l,Di(e,t,l,n,r))}if(l=e.child,!ro(e,r)){var s=l.memoizedProps;if((a=null!==(a=a.compare)?a:Xa)(s,n)&&e.ref===t.ref)return no(e,t,r)}return t.flags|=1,(e=Mn(l,n)).ref=t.ref,e.return=t,t.child=e}function Di(e,t,a,n,r){if(null!==e){var l=e.memoizedProps;if(Xa(l,n)&&e.ref===t.ref){if(Li=!1,t.pendingProps=n=l,!ro(e,r))return t.lanes=e.lanes,no(e,t,r);0!==(131072&e.flags)&&(Li=!0)}}return Hi(e,t,a,n,r)}function Ii(e,t,a,n){var r=n.children,l=null!==e?e.memoizedState:null;if(null===e&&null===t.stateNode&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),"hidden"===n.mode){if(0!==(128&t.flags)){if(l=null!==l?l.baseLanes|a:a,null!==e){for(n=t.child=e.child,r=0;null!==n;)r=r|n.lanes|n.childLanes,n=n.sibling;n=r&~l}else n=0,t.child=null;return qi(e,t,l,a,n)}if(0===(536870912&a))return n=t.lanes=536870912,qi(e,t,null!==l?l.baseLanes|a:a,a,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Kr(0,null!==l?l.cachePool:null),null!==l?Tl(t,l):Pl(),Dl(t)}else null!==l?(Kr(0,l.cachePool),Tl(t,l),Il(),t.memoizedState=null):(null!==e&&Kr(0,null),Pl(),Il());return Ai(e,t,r,a),t.child}function Fi(e,t){return null!==e&&22===e.tag||null!==t.stateNode||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function qi(e,t,a,n,r){var l=Qr();return l=null===l?null:{parent:Fr._currentValue,pool:l},t.memoizedState={baseLanes:a,cachePool:l},null!==e&&Kr(0,null),Pl(),Dl(t),null!==e&&Tr(e,t,n,!0),t.childLanes=r,null}function Mi(e,t){return(t=Xi({mode:t.mode,children:t.children},e.mode)).ref=e.ref,e.child=t,t.return=e,t}function Ui(e,t,a){return ml(t,e.child,null,a),(e=Mi(t,t.pendingProps)).flags|=2,Fl(t),t.memoizedState=null,e}function Bi(e,t){var a=t.ref;if(null===a)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof a&&"object"!==typeof a)throw Error(s(284));null!==e&&e.ref===a||(t.flags|=4194816)}}function Hi(e,t,a,n,r){return Rr(t),a=es(e,t,a,n,void 0,r),n=rs(),null===e||Li?(ur&&n&&sr(t),t.flags|=1,Ai(e,t,a,r),t.child):(ls(e,t,r),no(e,t,r))}function Vi(e,t,a,n,r,l){return Rr(t),t.updateQueue=null,a=as(t,n,a,r),ts(e),n=rs(),null===e||Li?(ur&&n&&sr(t),t.flags|=1,Ai(e,t,a,l),t.child):(ls(e,t,l),no(e,t,l))}function Wi(e,t,a,n,r){if(Rr(t),null===t.stateNode){var l=Dn,s=a.contextType;"object"===typeof s&&null!==s&&(l=Lr(s)),l=new a(n,l),t.memoizedState=null!==l.state&&void 0!==l.state?l.state:null,l.updater=yi,t.stateNode=l,l._reactInternals=t,(l=t.stateNode).props=n,l.state=t.memoizedState,l.refs={},gl(t),s=a.contextType,l.context="object"===typeof s&&null!==s?Lr(s):Dn,l.state=t.memoizedState,"function"===typeof(s=a.getDerivedStateFromProps)&&(xi(t,a,s,n),l.state=t.memoizedState),"function"===typeof a.getDerivedStateFromProps||"function"===typeof l.getSnapshotBeforeUpdate||"function"!==typeof l.UNSAFE_componentWillMount&&"function"!==typeof l.componentWillMount||(s=l.state,"function"===typeof l.componentWillMount&&l.componentWillMount(),"function"===typeof l.UNSAFE_componentWillMount&&l.UNSAFE_componentWillMount(),s!==l.state&&yi.enqueueReplaceState(l,l.state,null),wl(t,n,l,r),_l(),l.state=t.memoizedState),"function"===typeof l.componentDidMount&&(t.flags|=4194308),n=!0}else if(null===e){l=t.stateNode;var i=t.memoizedProps,o=Ni(a,i);l.props=o;var c=l.context,d=a.contextType;s=Dn,"object"===typeof d&&null!==d&&(s=Lr(d));var u=a.getDerivedStateFromProps;d="function"===typeof u||"function"===typeof l.getSnapshotBeforeUpdate,i=t.pendingProps!==i,d||"function"!==typeof l.UNSAFE_componentWillReceiveProps&&"function"!==typeof l.componentWillReceiveProps||(i||c!==s)&&ji(t,l,n,s),fl=!1;var p=t.memoizedState;l.state=p,wl(t,n,l,r),_l(),c=t.memoizedState,i||p!==c||fl?("function"===typeof u&&(xi(t,a,u,n),c=t.memoizedState),(o=fl||bi(t,a,o,n,p,c,s))?(d||"function"!==typeof l.UNSAFE_componentWillMount&&"function"!==typeof l.componentWillMount||("function"===typeof l.componentWillMount&&l.componentWillMount(),"function"===typeof l.UNSAFE_componentWillMount&&l.UNSAFE_componentWillMount()),"function"===typeof l.componentDidMount&&(t.flags|=4194308)):("function"===typeof l.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),l.props=n,l.state=c,l.context=s,n=o):("function"===typeof l.componentDidMount&&(t.flags|=4194308),n=!1)}else{l=t.stateNode,vl(e,t),d=Ni(a,s=t.memoizedProps),l.props=d,u=t.pendingProps,p=l.context,c=a.contextType,o=Dn,"object"===typeof c&&null!==c&&(o=Lr(c)),(c="function"===typeof(i=a.getDerivedStateFromProps)||"function"===typeof l.getSnapshotBeforeUpdate)||"function"!==typeof l.UNSAFE_componentWillReceiveProps&&"function"!==typeof l.componentWillReceiveProps||(s!==u||p!==o)&&ji(t,l,n,o),fl=!1,p=t.memoizedState,l.state=p,wl(t,n,l,r),_l();var m=t.memoizedState;s!==u||p!==m||fl||null!==e&&null!==e.dependencies&&Pr(e.dependencies)?("function"===typeof i&&(xi(t,a,i,n),m=t.memoizedState),(d=fl||bi(t,a,d,n,p,m,o)||null!==e&&null!==e.dependencies&&Pr(e.dependencies))?(c||"function"!==typeof l.UNSAFE_componentWillUpdate&&"function"!==typeof l.componentWillUpdate||("function"===typeof l.componentWillUpdate&&l.componentWillUpdate(n,m,o),"function"===typeof l.UNSAFE_componentWillUpdate&&l.UNSAFE_componentWillUpdate(n,m,o)),"function"===typeof l.componentDidUpdate&&(t.flags|=4),"function"===typeof l.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof l.componentDidUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!==typeof l.getSnapshotBeforeUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=m),l.props=n,l.state=m,l.context=o,n=d):("function"!==typeof l.componentDidUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!==typeof l.getSnapshotBeforeUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),n=!1)}return l=n,Bi(e,t),n=0!==(128&t.flags),l||n?(l=t.stateNode,a=n&&"function"!==typeof a.getDerivedStateFromError?null:l.render(),t.flags|=1,null!==e&&n?(t.child=ml(t,e.child,null,r),t.child=ml(t,null,a,r)):Ai(e,t,a,r),t.memoizedState=l.state,e=t.child):e=no(e,t,r),e}function Gi(e,t,a,n){return yr(),t.flags|=256,Ai(e,t,a,n),t.child}var $i={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Qi(e){return{baseLanes:e,cachePool:Jr()}}function Ki(e,t,a){return e=null!==e?e.childLanes&~a:0,t&&(e|=kc),e}function Ji(e,t,a){var n,r=t.pendingProps,l=!1,i=0!==(128&t.flags);if((n=i)||(n=(null===e||null!==e.memoizedState)&&0!==(2&ql.current)),n&&(l=!0,t.flags&=-129),n=0!==(32&t.flags),t.flags&=-33,null===e){if(ur){if(l?zl(t):Il(),(e=dr)?null!==(e=null!==(e=Pu(e,mr))&&"&"!==e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==tr?{id:ar,overflow:nr}:null,retryLane:536870912,hydrationErrors:null},(a=Wn(e)).return=t,t.child=a,cr=t,dr=null):e=null,null===e)throw fr(t);return Lu(e)?t.lanes=32:t.lanes=536870912,null}var o=r.children;return r=r.fallback,l?(Il(),o=Xi({mode:"hidden",children:o},l=t.mode),r=Hn(r,l,a,null),o.return=t,r.return=t,o.sibling=r,t.child=o,(r=t.child).memoizedState=Qi(a),r.childLanes=Ki(e,n,a),t.memoizedState=$i,Fi(null,r)):(zl(t),Yi(t,o))}var c=e.memoizedState;if(null!==c&&null!==(o=c.dehydrated)){if(i)256&t.flags?(zl(t),t.flags&=-257,t=Zi(e,t,a)):null!==t.memoizedState?(Il(),t.child=e.child,t.flags|=128,t=null):(Il(),o=r.fallback,l=t.mode,r=Xi({mode:"visible",children:r.children},l),(o=Hn(o,l,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,ml(t,e.child,null,a),(r=t.child).memoizedState=Qi(a),r.childLanes=Ki(e,n,a),t.memoizedState=$i,t=Fi(null,r));else if(zl(t),Lu(o)){if(n=o.nextSibling&&o.nextSibling.dataset)var d=n.dgst;n=d,(r=Error(s(419))).stack="",r.digest=n,jr({value:r,source:null,stack:null}),t=Zi(e,t,a)}else if(Li||Tr(e,t,a,!1),n=0!==(a&e.childLanes),Li||n){if(null!==(n=hc)&&(0!==(r=Oe(n,a))&&r!==c.retryLane))throw c.retryLane=r,An(e,r),Qc(n,e,r),Ri;Ru(o)||sd(),t=Zi(e,t,a)}else Ru(o)?(t.flags|=192,t.child=e.child,t=null):(e=c.treeContext,dr=Au(o.nextSibling),cr=t,ur=!0,pr=null,mr=!1,null!==e&&or(t,e),(t=Yi(t,r.children)).flags|=4096);return t}return l?(Il(),o=r.fallback,l=t.mode,d=(c=e.child).sibling,(r=Mn(c,{mode:"hidden",children:r.children})).subtreeFlags=65011712&c.subtreeFlags,null!==d?o=Mn(d,o):(o=Hn(o,l,a,null)).flags|=2,o.return=t,r.return=t,r.sibling=o,t.child=r,Fi(null,r),r=t.child,null===(o=e.child.memoizedState)?o=Qi(a):(null!==(l=o.cachePool)?(c=Fr._currentValue,l=l.parent!==c?{parent:c,pool:c}:l):l=Jr(),o={baseLanes:o.baseLanes|a,cachePool:l}),r.memoizedState=o,r.childLanes=Ki(e,n,a),t.memoizedState=$i,Fi(e.child,r)):(zl(t),e=(a=e.child).sibling,(a=Mn(a,{mode:"visible",children:r.children})).return=t,a.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=a,t.memoizedState=null,a)}function Yi(e,t){return(t=Xi({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Xi(e,t){return(e=Fn(22,e,null,t)).lanes=0,e}function Zi(e,t,a){return ml(t,e.child,null,a),(e=Yi(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function eo(e,t,a){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),kr(e.return,t,a)}function to(e,t,a,n,r,l){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:a,tailMode:r,treeForkCount:l}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=a,s.tailMode=r,s.treeForkCount=l)}function ao(e,t,a){var n=t.pendingProps,r=n.revealOrder,l=n.tail;n=n.children;var s=ql.current,i=0!==(2&s);if(i?(s=1&s|2,t.flags|=128):s&=1,U(ql,s),Ai(e,t,n,a),n=ur?Xn:0,!i&&null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&eo(e,a,t);else if(19===e.tag)eo(e,a,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(r){case"forwards":for(a=t.child,r=null;null!==a;)null!==(e=a.alternate)&&null===Ml(e)&&(r=a),a=a.sibling;null===(a=r)?(r=t.child,t.child=null):(r=a.sibling,a.sibling=null),to(t,!1,r,a,l,n);break;case"backwards":case"unstable_legacy-backwards":for(a=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===Ml(e)){t.child=r;break}e=r.sibling,r.sibling=a,a=r,r=e}to(t,!0,a,null,l,n);break;case"together":to(t,!1,null,null,void 0,n);break;default:t.memoizedState=null}return t.child}function no(e,t,a){if(null!==e&&(t.dependencies=e.dependencies),wc|=t.lanes,0===(a&t.childLanes)){if(null===e)return null;if(Tr(e,t,a,!1),0===(a&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(a=Mn(e=t.child,e.pendingProps),t.child=a,a.return=t;null!==e.sibling;)e=e.sibling,(a=a.sibling=Mn(e,e.pendingProps)).return=t;a.sibling=null}return t.child}function ro(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Pr(e))}function lo(e,t,a){if(null!==e)if(e.memoizedProps!==t.pendingProps)Li=!0;else{if(!ro(e,a)&&0===(128&t.flags))return Li=!1,function(e,t,a){switch(t.tag){case 3:Q(t,t.stateNode.containerInfo),Cr(0,Fr,e.memoizedState.cache),yr();break;case 27:case 5:J(t);break;case 4:Q(t,t.stateNode.containerInfo);break;case 10:Cr(0,t.type,t.memoizedProps.value);break;case 31:if(null!==t.memoizedState)return t.flags|=128,Ol(t),null;break;case 13:var n=t.memoizedState;if(null!==n)return null!==n.dehydrated?(zl(t),t.flags|=128,null):0!==(a&t.child.childLanes)?Ji(e,t,a):(zl(t),null!==(e=no(e,t,a))?e.sibling:null);zl(t);break;case 19:var r=0!==(128&e.flags);if((n=0!==(a&t.childLanes))||(Tr(e,t,a,!1),n=0!==(a&t.childLanes)),r){if(n)return ao(e,t,a);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),U(ql,ql.current),n)break;return null;case 22:return t.lanes=0,Ii(e,t,a,t.pendingProps);case 24:Cr(0,Fr,e.memoizedState.cache)}return no(e,t,a)}(e,t,a);Li=0!==(131072&e.flags)}else Li=!1,ur&&0!==(1048576&t.flags)&&lr(t,Xn,t.index);switch(t.lanes=0,t.tag){case 16:e:{var n=t.pendingProps;if(e=nl(t.elementType),t.type=e,"function"!==typeof e){if(void 0!==e&&null!==e){var r=e.$$typeof;if(r===N){t.tag=11,t=zi(null,t,e,n,a);break e}if(r===C){t.tag=14,t=Oi(null,t,e,n,a);break e}}throw t=L(e)||e,Error(s(306,t,""))}qn(e)?(n=Ni(e,n),t.tag=1,t=Wi(null,t,e,n,a)):(t.tag=0,t=Hi(null,t,e,n,a))}return t;case 0:return Hi(e,t,t.type,t.pendingProps,a);case 1:return Wi(e,t,n=t.type,r=Ni(n,t.pendingProps),a);case 3:e:{if(Q(t,t.stateNode.containerInfo),null===e)throw Error(s(387));n=t.pendingProps;var l=t.memoizedState;r=l.element,vl(e,t),wl(t,n,null,a);var i=t.memoizedState;if(n=i.cache,Cr(0,Fr,n),n!==l.cache&&Er(t,[Fr],a,!0),_l(),n=i.element,l.isDehydrated){if(l={element:n,isDehydrated:!1,cache:i.cache},t.updateQueue.baseState=l,t.memoizedState=l,256&t.flags){t=Gi(e,t,n,a);break e}if(n!==r){jr(r=Qn(Error(s(424)),t)),t=Gi(e,t,n,a);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(dr=Au(e.firstChild),cr=t,ur=!0,pr=null,mr=!0,a=hl(t,null,n,a),t.child=a;a;)a.flags=-3&a.flags|4096,a=a.sibling}else{if(yr(),n===r){t=no(e,t,a);break e}Ai(e,t,n,a)}t=t.child}return t;case 26:return Bi(e,t),null===e?(a=Wu(t.type,null,t.pendingProps,null))?t.memoizedState=a:ur||(a=t.type,e=t.pendingProps,(n=gu(G.current).createElement(a))[Ue]=t,n[Be]=e,pu(n,a,e),et(n),t.stateNode=n):t.memoizedState=Wu(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return J(t),null===e&&ur&&(n=t.stateNode=Iu(t.type,t.pendingProps,G.current),cr=t,mr=!0,r=dr,Su(t.type)?(zu=r,dr=Au(n.firstChild)):dr=r),Ai(e,t,t.pendingProps.children,a),Bi(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&ur&&((r=n=dr)&&(null!==(n=function(e,t,a,n){for(;1===e.nodeType;){var r=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!n&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(n){if(!e[Qe])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(l=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(l!==r.rel||e.getAttribute("href")!==(null==r.href||""===r.href?null:r.href)||e.getAttribute("crossorigin")!==(null==r.crossOrigin?null:r.crossOrigin)||e.getAttribute("title")!==(null==r.title?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((l=e.getAttribute("src"))!==(null==r.src?null:r.src)||e.getAttribute("type")!==(null==r.type?null:r.type)||e.getAttribute("crossorigin")!==(null==r.crossOrigin?null:r.crossOrigin))&&l&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var l=null==r.name?null:""+r.name;if("hidden"===r.type&&e.getAttribute("name")===l)return e}if(null===(e=Au(e.nextSibling)))break}return null}(n,t.type,t.pendingProps,mr))?(t.stateNode=n,cr=t,dr=Au(n.firstChild),mr=!1,r=!0):r=!1),r||fr(t)),J(t),r=t.type,l=t.pendingProps,i=null!==e?e.memoizedProps:null,n=l.children,yu(r,l)?n=null:null!==i&&yu(r,i)&&(t.flags|=32),null!==t.memoizedState&&(r=es(e,t,ns,null,null,a),dp._currentValue=r),Bi(e,t),Ai(e,t,n,a),t.child;case 6:return null===e&&ur&&((e=a=dr)&&(null!==(a=function(e,t,a){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!a)return null;if(null===(e=Au(e.nextSibling)))return null}return e}(a,t.pendingProps,mr))?(t.stateNode=a,cr=t,dr=null,e=!0):e=!1),e||fr(t)),null;case 13:return Ji(e,t,a);case 4:return Q(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=ml(t,null,n,a):Ai(e,t,n,a),t.child;case 11:return zi(e,t,t.type,t.pendingProps,a);case 7:return Ai(e,t,t.pendingProps,a),t.child;case 8:case 12:return Ai(e,t,t.pendingProps.children,a),t.child;case 10:return n=t.pendingProps,Cr(0,t.type,n.value),Ai(e,t,n.children,a),t.child;case 9:return r=t.type._context,n=t.pendingProps.children,Rr(t),n=n(r=Lr(r)),t.flags|=1,Ai(e,t,n,a),t.child;case 14:return Oi(e,t,t.type,t.pendingProps,a);case 15:return Di(e,t,t.type,t.pendingProps,a);case 19:return ao(e,t,a);case 31:return function(e,t,a){var n=t.pendingProps,r=0!==(128&t.flags);if(t.flags&=-129,null===e){if(ur){if("hidden"===n.mode)return e=Mi(t,n),t.lanes=536870912,Fi(null,e);if(Ol(t),(e=dr)?null!==(e=null!==(e=Pu(e,mr))&&"&"===e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==tr?{id:ar,overflow:nr}:null,retryLane:536870912,hydrationErrors:null},(a=Wn(e)).return=t,t.child=a,cr=t,dr=null):e=null,null===e)throw fr(t);return t.lanes=536870912,null}return Mi(t,n)}var l=e.memoizedState;if(null!==l){var i=l.dehydrated;if(Ol(t),r)if(256&t.flags)t.flags&=-257,t=Ui(e,t,a);else{if(null===t.memoizedState)throw Error(s(558));t.child=e.child,t.flags|=128,t=null}else if(Li||Tr(e,t,a,!1),r=0!==(a&e.childLanes),Li||r){if(null!==(n=hc)&&0!==(i=Oe(n,a))&&i!==l.retryLane)throw l.retryLane=i,An(e,i),Qc(n,e,i),Ri;sd(),t=Ui(e,t,a)}else e=l.treeContext,dr=Au(i.nextSibling),cr=t,ur=!0,pr=null,mr=!1,null!==e&&or(t,e),(t=Mi(t,n)).flags|=4096;return t}return(e=Mn(e.child,{mode:n.mode,children:n.children})).ref=t.ref,t.child=e,e.return=t,e}(e,t,a);case 22:return Ii(e,t,a,t.pendingProps);case 24:return Rr(t),n=Lr(Fr),null===e?(null===(r=Qr())&&(r=hc,l=qr(),r.pooledCache=l,l.refCount++,null!==l&&(r.pooledCacheLanes|=a),r=l),t.memoizedState={parent:n,cache:r},gl(t),Cr(0,Fr,r)):(0!==(e.lanes&a)&&(vl(e,t),wl(t,null,null,a),_l()),r=e.memoizedState,l=t.memoizedState,r.parent!==n?(r={parent:n,cache:n},t.memoizedState=r,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=r),Cr(0,Fr,n)):(n=l.cache,Cr(0,Fr,n),n!==r.cache&&Er(t,[Fr],a,!0))),Ai(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function so(e){e.flags|=4}function io(e,t,a,n,r){if((t=0!==(32&e.mode))&&(t=!1),t){if(e.flags|=16777216,(335544128&r)===r)if(e.stateNode.complete)e.flags|=8192;else{if(!nd())throw rl=el,Xr;e.flags|=8192}}else e.flags&=-16777217}function oo(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!rp(t)){if(!nd())throw rl=el,Xr;e.flags|=8192}}function co(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Pe():536870912,e.lanes|=t,Ec|=t)}function uo(e,t){if(!ur)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;null!==t;)null!==t.alternate&&(a=t),t=t.sibling;null===a?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var n=null;null!==a;)null!==a.alternate&&(n=a),a=a.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function po(e){var t=null!==e.alternate&&e.alternate.child===e.child,a=0,n=0;if(t)for(var r=e.child;null!==r;)a|=r.lanes|r.childLanes,n|=65011712&r.subtreeFlags,n|=65011712&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)a|=r.lanes|r.childLanes,n|=r.subtreeFlags,n|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=n,e.childLanes=a,t}function mo(e,t,a){var n=t.pendingProps;switch(ir(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return po(t),null;case 3:return a=t.stateNode,n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Sr(Fr),K(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),null!==e&&null!==e.child||(xr(t)?so(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,br())),po(t),null;case 26:var r=t.type,l=t.memoizedState;return null===e?(so(t),null!==l?(po(t),oo(t,l)):(po(t),io(t,r,0,0,a))):l?l!==e.memoizedState?(so(t),po(t),oo(t,l)):(po(t),t.flags&=-16777217):((e=e.memoizedProps)!==n&&so(t),po(t),io(t,r,0,0,a)),null;case 27:if(Y(t),a=G.current,r=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==n&&so(t);else{if(!n){if(null===t.stateNode)throw Error(s(166));return po(t),null}e=V.current,xr(t)?gr(t):(e=Iu(r,n,a),t.stateNode=e,so(t))}return po(t),null;case 5:if(Y(t),r=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==n&&so(t);else{if(!n){if(null===t.stateNode)throw Error(s(166));return po(t),null}if(l=V.current,xr(t))gr(t);else{var i=gu(G.current);switch(l){case 1:l=i.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:l=i.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":l=i.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":l=i.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":(l=i.createElement("div")).innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l="string"===typeof n.is?i.createElement("select",{is:n.is}):i.createElement("select"),n.multiple?l.multiple=!0:n.size&&(l.size=n.size);break;default:l="string"===typeof n.is?i.createElement(r,{is:n.is}):i.createElement(r)}}l[Ue]=t,l[Be]=n;e:for(i=t.child;null!==i;){if(5===i.tag||6===i.tag)l.appendChild(i.stateNode);else if(4!==i.tag&&27!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;null===i.sibling;){if(null===i.return||i.return===t)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}t.stateNode=l;e:switch(pu(l,r,n),r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&so(t)}}return po(t),io(t,t.type,null===e||e.memoizedProps,t.pendingProps,a),null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==n&&so(t);else{if("string"!==typeof n&&null===t.stateNode)throw Error(s(166));if(e=G.current,xr(t)){if(e=t.stateNode,a=t.memoizedProps,n=null,null!==(r=cr))switch(r.tag){case 27:case 5:n=r.memoizedProps}e[Ue]=t,(e=!!(e.nodeValue===a||null!==n&&!0===n.suppressHydrationWarning||cu(e.nodeValue,a)))||fr(t,!0)}else(e=gu(e).createTextNode(n))[Ue]=t,t.stateNode=e}return po(t),null;case 31:if(a=t.memoizedState,null===e||null!==e.memoizedState){if(n=xr(t),null!==a){if(null===e){if(!n)throw Error(s(318));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(s(557));e[Ue]=t}else yr(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;po(t),e=!1}else a=br(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return 256&t.flags?(Fl(t),t):(Fl(t),null);if(0!==(128&t.flags))throw Error(s(558))}return po(t),null;case 13:if(n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(r=xr(t),null!==n&&null!==n.dehydrated){if(null===e){if(!r)throw Error(s(318));if(!(r=null!==(r=t.memoizedState)?r.dehydrated:null))throw Error(s(317));r[Ue]=t}else yr(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;po(t),r=!1}else r=br(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return 256&t.flags?(Fl(t),t):(Fl(t),null)}return Fl(t),0!==(128&t.flags)?(t.lanes=a,t):(a=null!==n,e=null!==e&&null!==e.memoizedState,a&&(r=null,null!==(n=t.child).alternate&&null!==n.alternate.memoizedState&&null!==n.alternate.memoizedState.cachePool&&(r=n.alternate.memoizedState.cachePool.pool),l=null,null!==n.memoizedState&&null!==n.memoizedState.cachePool&&(l=n.memoizedState.cachePool.pool),l!==r&&(n.flags|=2048)),a!==e&&a&&(t.child.flags|=8192),co(t,t.updateQueue),po(t),null);case 4:return K(),null===e&&Zd(t.stateNode.containerInfo),po(t),null;case 10:return Sr(t.type),po(t),null;case 19:if(M(ql),null===(n=t.memoizedState))return po(t),null;if(r=0!==(128&t.flags),null===(l=n.rendering))if(r)uo(n,!1);else{if(0!==_c||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=Ml(e))){for(t.flags|=128,uo(n,!1),e=l.updateQueue,t.updateQueue=e,co(t,e),t.subtreeFlags=0,e=a,a=t.child;null!==a;)Un(a,e),a=a.sibling;return U(ql,1&ql.current|2),ur&&rr(t,n.treeForkCount),t.child}e=e.sibling}null!==n.tail&&oe()>zc&&(t.flags|=128,r=!0,uo(n,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=Ml(l))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,co(t,e),uo(n,!0),null===n.tail&&"hidden"===n.tailMode&&!l.alternate&&!ur)return po(t),null}else 2*oe()-n.renderingStartTime>zc&&536870912!==a&&(t.flags|=128,r=!0,uo(n,!1),t.lanes=4194304);n.isBackwards?(l.sibling=t.child,t.child=l):(null!==(e=n.last)?e.sibling=l:t.child=l,n.last=l)}return null!==n.tail?(e=n.tail,n.rendering=e,n.tail=e.sibling,n.renderingStartTime=oe(),e.sibling=null,a=ql.current,U(ql,r?1&a|2:1&a),ur&&rr(t,n.treeForkCount),e):(po(t),null);case 22:case 23:return Fl(t),Rl(),n=null!==t.memoizedState,null!==e?null!==e.memoizedState!==n&&(t.flags|=8192):n&&(t.flags|=8192),n?0!==(536870912&a)&&0===(128&t.flags)&&(po(t),6&t.subtreeFlags&&(t.flags|=8192)):po(t),null!==(a=t.updateQueue)&&co(t,a.retryQueue),a=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(a=e.memoizedState.cachePool.pool),n=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(n=t.memoizedState.cachePool.pool),n!==a&&(t.flags|=2048),null!==e&&M($r),null;case 24:return a=null,null!==e&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),Sr(Fr),po(t),null;case 25:case 30:return null}throw Error(s(156,t.tag))}function ho(e,t){switch(ir(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Sr(Fr),K(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Y(t),null;case 31:if(null!==t.memoizedState){if(Fl(t),null===t.alternate)throw Error(s(340));yr()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 13:if(Fl(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));yr()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return M(ql),null;case 4:return K(),null;case 10:return Sr(t.type),null;case 22:case 23:return Fl(t),Rl(),null!==e&&M($r),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return Sr(Fr),null;default:return null}}function fo(e,t){switch(ir(t),t.tag){case 3:Sr(Fr),K();break;case 26:case 27:case 5:Y(t);break;case 4:K();break;case 31:null!==t.memoizedState&&Fl(t);break;case 13:Fl(t);break;case 19:M(ql);break;case 10:Sr(t.type);break;case 22:case 23:Fl(t),Rl(),null!==e&&M($r);break;case 24:Sr(Fr)}}function go(e,t){try{var a=t.updateQueue,n=null!==a?a.lastEffect:null;if(null!==n){var r=n.next;a=r;do{if((a.tag&e)===e){n=void 0;var l=a.create,s=a.inst;n=l(),s.destroy=n}a=a.next}while(a!==r)}}catch(i){_d(t,t.return,i)}}function vo(e,t,a){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var l=r.next;n=l;do{if((n.tag&e)===e){var s=n.inst,i=s.destroy;if(void 0!==i){s.destroy=void 0,r=t;var o=a,c=i;try{c()}catch(d){_d(r,o,d)}}}n=n.next}while(n!==l)}}catch(d){_d(t,t.return,d)}}function xo(e){var t=e.updateQueue;if(null!==t){var a=e.stateNode;try{Sl(t,a)}catch(n){_d(e,e.return,n)}}}function yo(e,t,a){a.props=Ni(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(n){_d(e,t,n)}}function bo(e,t){try{var a=e.ref;if(null!==a){switch(e.tag){case 26:case 27:case 5:var n=e.stateNode;break;default:n=e.stateNode}"function"===typeof a?e.refCleanup=a(n):a.current=n}}catch(r){_d(e,t,r)}}function jo(e,t){var a=e.ref,n=e.refCleanup;if(null!==a)if("function"===typeof n)try{n()}catch(r){_d(e,t,r)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof a)try{a(null)}catch(l){_d(e,t,l)}else a.current=null}function No(e){var t=e.type,a=e.memoizedProps,n=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break e;case"img":a.src?n.src=a.src:a.srcSet&&(n.srcset=a.srcSet)}}catch(r){_d(e,e.return,r)}}function _o(e,t,a){try{var n=e.stateNode;!function(e,t,a,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,l=null,i=null,o=null,c=null,d=null,u=null;for(h in a){var p=a[h];if(a.hasOwnProperty(h)&&null!=p)switch(h){case"checked":case"value":break;case"defaultValue":c=p;default:n.hasOwnProperty(h)||du(e,t,h,null,n,p)}}for(var m in n){var h=n[m];if(p=a[m],n.hasOwnProperty(m)&&(null!=h||null!=p))switch(m){case"type":l=h;break;case"name":r=h;break;case"checked":d=h;break;case"defaultChecked":u=h;break;case"value":i=h;break;case"defaultValue":o=h;break;case"children":case"dangerouslySetInnerHTML":if(null!=h)throw Error(s(137,t));break;default:h!==p&&du(e,t,m,h,n,p)}}return void xt(e,i,o,c,d,u,l,r);case"select":for(l in h=i=o=m=null,a)if(c=a[l],a.hasOwnProperty(l)&&null!=c)switch(l){case"value":break;case"multiple":h=c;default:n.hasOwnProperty(l)||du(e,t,l,null,n,c)}for(r in n)if(l=n[r],c=a[r],n.hasOwnProperty(r)&&(null!=l||null!=c))switch(r){case"value":m=l;break;case"defaultValue":o=l;break;case"multiple":i=l;default:l!==c&&du(e,t,r,l,n,c)}return t=o,a=i,n=h,void(null!=m?jt(e,!!a,m,!1):!!n!==!!a&&(null!=t?jt(e,!!a,t,!0):jt(e,!!a,a?[]:"",!1)));case"textarea":for(o in h=m=null,a)if(r=a[o],a.hasOwnProperty(o)&&null!=r&&!n.hasOwnProperty(o))switch(o){case"value":case"children":break;default:du(e,t,o,null,n,r)}for(i in n)if(r=n[i],l=a[i],n.hasOwnProperty(i)&&(null!=r||null!=l))switch(i){case"value":m=r;break;case"defaultValue":h=r;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=r)throw Error(s(91));break;default:r!==l&&du(e,t,i,r,n,l)}return void Nt(e,m,h);case"option":for(var f in a)if(m=a[f],a.hasOwnProperty(f)&&null!=m&&!n.hasOwnProperty(f))if("selected"===f)e.selected=!1;else du(e,t,f,null,n,m);for(c in n)if(m=n[c],h=a[c],n.hasOwnProperty(c)&&m!==h&&(null!=m||null!=h))if("selected"===c)e.selected=m&&"function"!==typeof m&&"symbol"!==typeof m;else du(e,t,c,m,n,h);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in a)m=a[g],a.hasOwnProperty(g)&&null!=m&&!n.hasOwnProperty(g)&&du(e,t,g,null,n,m);for(d in n)if(m=n[d],h=a[d],n.hasOwnProperty(d)&&m!==h&&(null!=m||null!=h))switch(d){case"children":case"dangerouslySetInnerHTML":if(null!=m)throw Error(s(137,t));break;default:du(e,t,d,m,n,h)}return;default:if(Et(t)){for(var v in a)m=a[v],a.hasOwnProperty(v)&&void 0!==m&&!n.hasOwnProperty(v)&&uu(e,t,v,void 0,n,m);for(u in n)m=n[u],h=a[u],!n.hasOwnProperty(u)||m===h||void 0===m&&void 0===h||uu(e,t,u,m,n,h);return}}for(var x in a)m=a[x],a.hasOwnProperty(x)&&null!=m&&!n.hasOwnProperty(x)&&du(e,t,x,null,n,m);for(p in n)m=n[p],h=a[p],!n.hasOwnProperty(p)||m===h||null==m&&null==h||du(e,t,p,m,n,h)}(n,e.type,a,t),n[Be]=t}catch(r){_d(e,e.return,r)}}function wo(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&Su(e.type)||4===e.tag}function Co(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||wo(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&Su(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function So(e,t,a){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?(9===a.nodeType?a.body:"HTML"===a.nodeName?a.ownerDocument.body:a).insertBefore(e,t):((t=9===a.nodeType?a.body:"HTML"===a.nodeName?a.ownerDocument.body:a).appendChild(e),null!==(a=a._reactRootContainer)&&void 0!==a||null!==t.onclick||(t.onclick=Lt));else if(4!==n&&(27===n&&Su(e.type)&&(a=e.stateNode,t=null),null!==(e=e.child)))for(So(e,t,a),e=e.sibling;null!==e;)So(e,t,a),e=e.sibling}function ko(e,t,a){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(4!==n&&(27===n&&Su(e.type)&&(a=e.stateNode),null!==(e=e.child)))for(ko(e,t,a),e=e.sibling;null!==e;)ko(e,t,a),e=e.sibling}function Eo(e){var t=e.stateNode,a=e.memoizedProps;try{for(var n=e.type,r=t.attributes;r.length;)t.removeAttributeNode(r[0]);pu(t,n,a),t[Ue]=e,t[Be]=a}catch(l){_d(e,e.return,l)}}var To=!1,Po=!1,Ro=!1,Lo="function"===typeof WeakSet?WeakSet:Set,Ao=null;function zo(e,t,a){var n=a.flags;switch(a.tag){case 0:case 11:case 15:Qo(e,a),4&n&&go(5,a);break;case 1:if(Qo(e,a),4&n)if(e=a.stateNode,null===t)try{e.componentDidMount()}catch(s){_d(a,a.return,s)}else{var r=Ni(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(i){_d(a,a.return,i)}}64&n&&xo(a),512&n&&bo(a,a.return);break;case 3:if(Qo(e,a),64&n&&null!==(e=a.updateQueue)){if(t=null,null!==a.child)switch(a.child.tag){case 27:case 5:case 1:t=a.child.stateNode}try{Sl(e,t)}catch(s){_d(a,a.return,s)}}break;case 27:null===t&&4&n&&Eo(a);case 26:case 5:Qo(e,a),null===t&&4&n&&No(a),512&n&&bo(a,a.return);break;case 12:Qo(e,a);break;case 31:Qo(e,a),4&n&&Mo(e,a);break;case 13:Qo(e,a),4&n&&Uo(e,a),64&n&&(null!==(e=a.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var a=e.ownerDocument;if("$~"===e.data)e._reactRetry=t;else if("$?"!==e.data||"loading"!==a.readyState)t();else{var n=function(){t(),a.removeEventListener("DOMContentLoaded",n)};a.addEventListener("DOMContentLoaded",n),e._reactRetry=n}}(e,a=kd.bind(null,a))));break;case 22:if(!(n=null!==a.memoizedState||To)){t=null!==t&&null!==t.memoizedState||Po,r=To;var l=Po;To=n,(Po=t)&&!l?Jo(e,a,0!==(8772&a.subtreeFlags)):Qo(e,a),To=r,Po=l}break;case 30:break;default:Qo(e,a)}}function Oo(e){var t=e.alternate;null!==t&&(e.alternate=null,Oo(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Ke(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Do=null,Io=!1;function Fo(e,t,a){for(a=a.child;null!==a;)qo(e,t,a),a=a.sibling}function qo(e,t,a){if(xe&&"function"===typeof xe.onCommitFiberUnmount)try{xe.onCommitFiberUnmount(ve,a)}catch(l){}switch(a.tag){case 26:Po||jo(a,t),Fo(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode).parentNode.removeChild(a);break;case 27:Po||jo(a,t);var n=Do,r=Io;Su(a.type)&&(Do=a.stateNode,Io=!1),Fo(e,t,a),Fu(a.stateNode),Do=n,Io=r;break;case 5:Po||jo(a,t);case 6:if(n=Do,r=Io,Do=null,Fo(e,t,a),Io=r,null!==(Do=n))if(Io)try{(9===Do.nodeType?Do.body:"HTML"===Do.nodeName?Do.ownerDocument.body:Do).removeChild(a.stateNode)}catch(s){_d(a,t,s)}else try{Do.removeChild(a.stateNode)}catch(s){_d(a,t,s)}break;case 18:null!==Do&&(Io?(ku(9===(e=Do).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,a.stateNode),Vp(e)):ku(Do,a.stateNode));break;case 4:n=Do,r=Io,Do=a.stateNode.containerInfo,Io=!0,Fo(e,t,a),Do=n,Io=r;break;case 0:case 11:case 14:case 15:vo(2,a,t),Po||vo(4,a,t),Fo(e,t,a);break;case 1:Po||(jo(a,t),"function"===typeof(n=a.stateNode).componentWillUnmount&&yo(a,t,n)),Fo(e,t,a);break;case 21:Fo(e,t,a);break;case 22:Po=(n=Po)||null!==a.memoizedState,Fo(e,t,a),Po=n;break;default:Fo(e,t,a)}}function Mo(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&null!==(e=e.memoizedState))){e=e.dehydrated;try{Vp(e)}catch(a){_d(t,t.return,a)}}}function Uo(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Vp(e)}catch(a){_d(t,t.return,a)}}function Bo(e,t){var a=function(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Lo),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Lo),t;default:throw Error(s(435,e.tag))}}(e);t.forEach(function(t){if(!a.has(t)){a.add(t);var n=Ed.bind(null,e,t);t.then(n,n)}})}function Ho(e,t){var a=t.deletions;if(null!==a)for(var n=0;n<a.length;n++){var r=a[n],l=e,i=t,o=i;e:for(;null!==o;){switch(o.tag){case 27:if(Su(o.type)){Do=o.stateNode,Io=!1;break e}break;case 5:Do=o.stateNode,Io=!1;break e;case 3:case 4:Do=o.stateNode.containerInfo,Io=!0;break e}o=o.return}if(null===Do)throw Error(s(160));qo(l,i,r),Do=null,Io=!1,null!==(l=r.alternate)&&(l.return=null),r.return=null}if(13886&t.subtreeFlags)for(t=t.child;null!==t;)Wo(t,e),t=t.sibling}var Vo=null;function Wo(e,t){var a=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ho(t,e),Go(e),4&n&&(vo(3,e,e.return),go(3,e),vo(5,e,e.return));break;case 1:Ho(t,e),Go(e),512&n&&(Po||null===a||jo(a,a.return)),64&n&&To&&(null!==(e=e.updateQueue)&&(null!==(n=e.callbacks)&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===a?n:a.concat(n))));break;case 26:var r=Vo;if(Ho(t,e),Go(e),512&n&&(Po||null===a||jo(a,a.return)),4&n){var l=null!==a?a.memoizedState:null;if(n=e.memoizedState,null===a)if(null===n)if(null===e.stateNode){e:{n=e.type,a=e.memoizedProps,r=r.ownerDocument||r;t:switch(n){case"title":(!(l=r.getElementsByTagName("title")[0])||l[Qe]||l[Ue]||"http://www.w3.org/2000/svg"===l.namespaceURI||l.hasAttribute("itemprop"))&&(l=r.createElement(n),r.head.insertBefore(l,r.querySelector("head > title"))),pu(l,n,a),l[Ue]=e,et(l),n=l;break e;case"link":var i=ap("link","href",r).get(n+(a.href||""));if(i)for(var o=0;o<i.length;o++)if((l=i[o]).getAttribute("href")===(null==a.href||""===a.href?null:a.href)&&l.getAttribute("rel")===(null==a.rel?null:a.rel)&&l.getAttribute("title")===(null==a.title?null:a.title)&&l.getAttribute("crossorigin")===(null==a.crossOrigin?null:a.crossOrigin)){i.splice(o,1);break t}pu(l=r.createElement(n),n,a),r.head.appendChild(l);break;case"meta":if(i=ap("meta","content",r).get(n+(a.content||"")))for(o=0;o<i.length;o++)if((l=i[o]).getAttribute("content")===(null==a.content?null:""+a.content)&&l.getAttribute("name")===(null==a.name?null:a.name)&&l.getAttribute("property")===(null==a.property?null:a.property)&&l.getAttribute("http-equiv")===(null==a.httpEquiv?null:a.httpEquiv)&&l.getAttribute("charset")===(null==a.charSet?null:a.charSet)){i.splice(o,1);break t}pu(l=r.createElement(n),n,a),r.head.appendChild(l);break;default:throw Error(s(468,n))}l[Ue]=e,et(l),n=l}e.stateNode=n}else np(r,e.type,e.stateNode);else e.stateNode=Yu(r,n,e.memoizedProps);else l!==n?(null===l?null!==a.stateNode&&(a=a.stateNode).parentNode.removeChild(a):l.count--,null===n?np(r,e.type,e.stateNode):Yu(r,n,e.memoizedProps)):null===n&&null!==e.stateNode&&_o(e,e.memoizedProps,a.memoizedProps)}break;case 27:Ho(t,e),Go(e),512&n&&(Po||null===a||jo(a,a.return)),null!==a&&4&n&&_o(e,e.memoizedProps,a.memoizedProps);break;case 5:if(Ho(t,e),Go(e),512&n&&(Po||null===a||jo(a,a.return)),32&e.flags){r=e.stateNode;try{wt(r,"")}catch(f){_d(e,e.return,f)}}4&n&&null!=e.stateNode&&_o(e,r=e.memoizedProps,null!==a?a.memoizedProps:r),1024&n&&(Ro=!0);break;case 6:if(Ho(t,e),Go(e),4&n){if(null===e.stateNode)throw Error(s(162));n=e.memoizedProps,a=e.stateNode;try{a.nodeValue=n}catch(f){_d(e,e.return,f)}}break;case 3:if(tp=null,r=Vo,Vo=Uu(t.containerInfo),Ho(t,e),Vo=r,Go(e),4&n&&null!==a&&a.memoizedState.isDehydrated)try{Vp(t.containerInfo)}catch(f){_d(e,e.return,f)}Ro&&(Ro=!1,$o(e));break;case 4:n=Vo,Vo=Uu(e.stateNode.containerInfo),Ho(t,e),Go(e),Vo=n;break;case 12:default:Ho(t,e),Go(e);break;case 31:case 19:Ho(t,e),Go(e),4&n&&(null!==(n=e.updateQueue)&&(e.updateQueue=null,Bo(e,n)));break;case 13:Ho(t,e),Go(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==a&&null!==a.memoizedState)&&(Lc=oe()),4&n&&(null!==(n=e.updateQueue)&&(e.updateQueue=null,Bo(e,n)));break;case 22:r=null!==e.memoizedState;var c=null!==a&&null!==a.memoizedState,d=To,u=Po;if(To=d||r,Po=u||c,Ho(t,e),Po=u,To=d,Go(e),8192&n)e:for(t=e.stateNode,t._visibility=r?-2&t._visibility:1|t._visibility,r&&(null===a||c||To||Po||Ko(e)),a=null,t=e;;){if(5===t.tag||26===t.tag){if(null===a){c=a=t;try{if(l=c.stateNode,r)"function"===typeof(i=l.style).setProperty?i.setProperty("display","none","important"):i.display="none";else{o=c.stateNode;var p=c.memoizedProps.style,m=void 0!==p&&null!==p&&p.hasOwnProperty("display")?p.display:null;o.style.display=null==m||"boolean"===typeof m?"":(""+m).trim()}}catch(f){_d(c,c.return,f)}}}else if(6===t.tag){if(null===a){c=t;try{c.stateNode.nodeValue=r?"":c.memoizedProps}catch(f){_d(c,c.return,f)}}}else if(18===t.tag){if(null===a){c=t;try{var h=c.stateNode;r?Eu(h,!0):Eu(c.stateNode,!1)}catch(f){_d(c,c.return,f)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}4&n&&(null!==(n=e.updateQueue)&&(null!==(a=n.retryQueue)&&(n.retryQueue=null,Bo(e,a))));case 30:case 21:}}function Go(e){var t=e.flags;if(2&t){try{for(var a,n=e.return;null!==n;){if(wo(n)){a=n;break}n=n.return}if(null==a)throw Error(s(160));switch(a.tag){case 27:var r=a.stateNode;ko(e,Co(e),r);break;case 5:var l=a.stateNode;32&a.flags&&(wt(l,""),a.flags&=-33),ko(e,Co(e),l);break;case 3:case 4:var i=a.stateNode.containerInfo;So(e,Co(e),i);break;default:throw Error(s(161))}}catch(o){_d(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function $o(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;$o(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Qo(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)zo(e,t.alternate,t),t=t.sibling}function Ko(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:vo(4,t,t.return),Ko(t);break;case 1:jo(t,t.return);var a=t.stateNode;"function"===typeof a.componentWillUnmount&&yo(t,t.return,a),Ko(t);break;case 27:Fu(t.stateNode);case 26:case 5:jo(t,t.return),Ko(t);break;case 22:null===t.memoizedState&&Ko(t);break;default:Ko(t)}e=e.sibling}}function Jo(e,t,a){for(a=a&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var n=t.alternate,r=e,l=t,s=l.flags;switch(l.tag){case 0:case 11:case 15:Jo(r,l,a),go(4,l);break;case 1:if(Jo(r,l,a),"function"===typeof(r=(n=l).stateNode).componentDidMount)try{r.componentDidMount()}catch(c){_d(n,n.return,c)}if(null!==(r=(n=l).updateQueue)){var i=n.stateNode;try{var o=r.shared.hiddenCallbacks;if(null!==o)for(r.shared.hiddenCallbacks=null,r=0;r<o.length;r++)Cl(o[r],i)}catch(c){_d(n,n.return,c)}}a&&64&s&&xo(l),bo(l,l.return);break;case 27:Eo(l);case 26:case 5:Jo(r,l,a),a&&null===n&&4&s&&No(l),bo(l,l.return);break;case 12:Jo(r,l,a);break;case 31:Jo(r,l,a),a&&4&s&&Mo(r,l);break;case 13:Jo(r,l,a),a&&4&s&&Uo(r,l);break;case 22:null===l.memoizedState&&Jo(r,l,a),bo(l,l.return);break;case 30:break;default:Jo(r,l,a)}t=t.sibling}}function Yo(e,t){var a=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(a=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==a&&(null!=e&&e.refCount++,null!=a&&Mr(a))}function Xo(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Mr(e))}function Zo(e,t,a,n){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)ec(e,t,a,n),t=t.sibling}function ec(e,t,a,n){var r=t.flags;switch(t.tag){case 0:case 11:case 15:Zo(e,t,a,n),2048&r&&go(9,t);break;case 1:case 31:case 13:default:Zo(e,t,a,n);break;case 3:Zo(e,t,a,n),2048&r&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Mr(e)));break;case 12:if(2048&r){Zo(e,t,a,n),e=t.stateNode;try{var l=t.memoizedProps,s=l.id,i=l.onPostCommit;"function"===typeof i&&i(s,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(o){_d(t,t.return,o)}}else Zo(e,t,a,n);break;case 23:break;case 22:l=t.stateNode,s=t.alternate,null!==t.memoizedState?2&l._visibility?Zo(e,t,a,n):ac(e,t):2&l._visibility?Zo(e,t,a,n):(l._visibility|=2,tc(e,t,a,n,0!==(10256&t.subtreeFlags)||!1)),2048&r&&Yo(s,t);break;case 24:Zo(e,t,a,n),2048&r&&Xo(t.alternate,t)}}function tc(e,t,a,n,r){for(r=r&&(0!==(10256&t.subtreeFlags)||!1),t=t.child;null!==t;){var l=e,s=t,i=a,o=n,c=s.flags;switch(s.tag){case 0:case 11:case 15:tc(l,s,i,o,r),go(8,s);break;case 23:break;case 22:var d=s.stateNode;null!==s.memoizedState?2&d._visibility?tc(l,s,i,o,r):ac(l,s):(d._visibility|=2,tc(l,s,i,o,r)),r&&2048&c&&Yo(s.alternate,s);break;case 24:tc(l,s,i,o,r),r&&2048&c&&Xo(s.alternate,s);break;default:tc(l,s,i,o,r)}t=t.sibling}}function ac(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var a=e,n=t,r=n.flags;switch(n.tag){case 22:ac(a,n),2048&r&&Yo(n.alternate,n);break;case 24:ac(a,n),2048&r&&Xo(n.alternate,n);break;default:ac(a,n)}t=t.sibling}}var nc=8192;function rc(e,t,a){if(e.subtreeFlags&nc)for(e=e.child;null!==e;)lc(e,t,a),e=e.sibling}function lc(e,t,a){switch(e.tag){case 26:rc(e,t,a),e.flags&nc&&null!==e.memoizedState&&function(e,t,a,n){if("stylesheet"===a.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&a.state.loading)){if(null===a.instance){var r=Gu(n.href),l=t.querySelector($u(r));if(l)return null!==(t=l._p)&&"object"===typeof t&&"function"===typeof t.then&&(e.count++,e=sp.bind(e),t.then(e,e)),a.state.loading|=4,a.instance=l,void et(l);l=t.ownerDocument||t,n=Qu(n),(r=qu.get(r))&&Zu(n,r),et(l=l.createElement("link"));var s=l;s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),pu(l,"link",n),a.instance=l}null===e.stylesheets&&(e.stylesheets=new Map),e.stylesheets.set(a,t),(t=a.state.preload)&&0===(3&a.state.loading)&&(e.count++,a=sp.bind(e),t.addEventListener("load",a),t.addEventListener("error",a))}}(a,Vo,e.memoizedState,e.memoizedProps);break;case 5:default:rc(e,t,a);break;case 3:case 4:var n=Vo;Vo=Uu(e.stateNode.containerInfo),rc(e,t,a),Vo=n;break;case 22:null===e.memoizedState&&(null!==(n=e.alternate)&&null!==n.memoizedState?(n=nc,nc=16777216,rc(e,t,a),nc=n):rc(e,t,a))}}function sc(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function ic(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var a=0;a<t.length;a++){var n=t[a];Ao=n,dc(n,e)}sc(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)oc(e),e=e.sibling}function oc(e){switch(e.tag){case 0:case 11:case 15:ic(e),2048&e.flags&&vo(9,e,e.return);break;case 3:case 12:default:ic(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,cc(e)):ic(e)}}function cc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var a=0;a<t.length;a++){var n=t[a];Ao=n,dc(n,e)}sc(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:vo(8,t,t.return),cc(t);break;case 22:2&(a=t.stateNode)._visibility&&(a._visibility&=-3,cc(t));break;default:cc(t)}e=e.sibling}}function dc(e,t){for(;null!==Ao;){var a=Ao;switch(a.tag){case 0:case 11:case 15:vo(8,a,t);break;case 23:case 22:if(null!==a.memoizedState&&null!==a.memoizedState.cachePool){var n=a.memoizedState.cachePool.pool;null!=n&&n.refCount++}break;case 24:Mr(a.memoizedState.cache)}if(null!==(n=a.child))n.return=a,Ao=n;else e:for(a=e;null!==Ao;){var r=(n=Ao).sibling,l=n.return;if(Oo(n),n===a){Ao=null;break e}if(null!==r){r.return=l,Ao=r;break e}Ao=l}}}var uc={getCacheForType:function(e){var t=Lr(Fr),a=t.data.get(e);return void 0===a&&(a=e(),t.data.set(e,a)),a},cacheSignal:function(){return Lr(Fr).controller.signal}},pc="function"===typeof WeakMap?WeakMap:Map,mc=0,hc=null,fc=null,gc=0,vc=0,xc=null,yc=!1,bc=!1,jc=!1,Nc=0,_c=0,wc=0,Cc=0,Sc=0,kc=0,Ec=0,Tc=null,Pc=null,Rc=!1,Lc=0,Ac=0,zc=1/0,Oc=null,Dc=null,Ic=0,Fc=null,qc=null,Mc=0,Uc=0,Bc=null,Hc=null,Vc=0,Wc=null;function Gc(){return 0!==(2&mc)&&0!==gc?gc&-gc:null!==z.T?Bd():Fe()}function $c(){if(0===kc)if(0===(536870912&gc)||ur){var e=we;0===(3932160&(we<<=1))&&(we=262144),kc=e}else kc=536870912;return null!==(e=Ll.current)&&(e.flags|=32),kc}function Qc(e,t,a){(e!==hc||2!==vc&&9!==vc)&&null===e.cancelPendingCommit||(td(e,0),Xc(e,gc,kc,!1)),Le(e,a),0!==(2&mc)&&e===hc||(e===hc&&(0===(2&mc)&&(Cc|=a),4===_c&&Xc(e,gc,kc,!1)),Od(e))}function Kc(e,t,a){if(0!==(6&mc))throw Error(s(327));for(var n=!a&&0===(127&t)&&0===(t&e.expiredLanes)||Ee(e,t),r=n?function(e,t){var a=mc;mc|=2;var n=rd(),r=ld();hc!==e||gc!==t?(Oc=null,zc=oe()+500,td(e,t)):bc=Ee(e,t);e:for(;;)try{if(0!==vc&&null!==fc){t=fc;var l=xc;t:switch(vc){case 1:vc=0,xc=null,pd(e,t,l,1);break;case 2:case 9:if(tl(l)){vc=0,xc=null,ud(t);break}t=function(){2!==vc&&9!==vc||hc!==e||(vc=7),Od(e)},l.then(t,t);break e;case 3:vc=7;break e;case 4:vc=5;break e;case 7:tl(l)?(vc=0,xc=null,ud(t)):(vc=0,xc=null,pd(e,t,l,7));break;case 5:var i=null;switch(fc.tag){case 26:i=fc.memoizedState;case 5:case 27:var o=fc;if(i?rp(i):o.stateNode.complete){vc=0,xc=null;var c=o.sibling;if(null!==c)fc=c;else{var d=o.return;null!==d?(fc=d,md(d)):fc=null}break t}}vc=0,xc=null,pd(e,t,l,5);break;case 6:vc=0,xc=null,pd(e,t,l,6);break;case 8:ed(),_c=6;break e;default:throw Error(s(462))}}cd();break}catch(u){ad(e,u)}return wr=_r=null,z.H=n,z.A=r,mc=a,null!==fc?0:(hc=null,gc=0,Pn(),_c)}(e,t):id(e,t,!0),l=n;;){if(0===r){bc&&!n&&Xc(e,t,0,!1);break}if(a=e.current.alternate,!l||Yc(a)){if(2===r){if(l=t,e.errorRecoveryDisabledLanes&l)var i=0;else i=0!==(i=-536870913&e.pendingLanes)?i:536870912&i?536870912:0;if(0!==i){t=i;e:{var o=e;r=Tc;var c=o.current.memoizedState.isDehydrated;if(c&&(td(o,i).flags|=256),2!==(i=id(o,i,!1))){if(jc&&!c){o.errorRecoveryDisabledLanes|=l,Cc|=l,r=4;break e}l=Pc,Pc=r,null!==l&&(null===Pc?Pc=l:Pc.push.apply(Pc,l))}r=i}if(l=!1,2!==r)continue}}if(1===r){td(e,0),Xc(e,t,0,!0);break}e:{switch(n=e,l=r){case 0:case 1:throw Error(s(345));case 4:if((4194048&t)!==t)break;case 6:Xc(n,t,kc,!yc);break e;case 2:Pc=null;break;case 3:case 5:break;default:throw Error(s(329))}if((62914560&t)===t&&10<(r=Lc+300-oe())){if(Xc(n,t,kc,!yc),0!==ke(n,0,!0))break e;Mc=t,n.timeoutHandle=ju(Jc.bind(null,n,a,Pc,Oc,Rc,t,kc,Cc,Ec,yc,l,"Throttled",-0,0),r)}else Jc(n,a,Pc,Oc,Rc,t,kc,Cc,Ec,yc,l,null,-0,0)}break}r=id(e,t,!1),l=!1}Od(e)}function Jc(e,t,a,n,r,l,s,i,o,c,d,u,p,m){if(e.timeoutHandle=-1,8192&(u=t.subtreeFlags)||16785408===(16785408&u)){lc(t,l,u={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Lt});var h=(62914560&l)===l?Lc-oe():(4194048&l)===l?Ac-oe():0;if(null!==(h=function(e,t){return e.stylesheets&&0===e.count&&op(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var n=setTimeout(function(){if(e.stylesheets&&op(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&0===lp&&(lp=62500*function(){if("function"===typeof performance.getEntriesByType){for(var e=0,t=0,a=performance.getEntriesByType("resource"),n=0;n<a.length;n++){var r=a[n],l=r.transferSize,s=r.initiatorType,i=r.duration;if(l&&i&&mu(s)){for(s=0,i=r.responseEnd,n+=1;n<a.length;n++){var o=a[n],c=o.startTime;if(c>i)break;var d=o.transferSize,u=o.initiatorType;d&&mu(u)&&(s+=d*((o=o.responseEnd)<i?1:(i-c)/(o-c)))}if(--n,t+=8*(l+s)/(r.duration/1e3),10<++e)break}}if(0<e)return t/e/1e6}return navigator.connection&&"number"===typeof(e=navigator.connection.downlink)?e:5}());var r=setTimeout(function(){if(e.waitingForImages=!1,0===e.count&&(e.stylesheets&&op(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>lp?50:800)+t);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(n),clearTimeout(r)}}:null}(u,h)))return Mc=l,e.cancelPendingCommit=h(fd.bind(null,e,t,l,a,n,r,s,i,o,d,u,null,p,m)),void Xc(e,l,s,!c)}fd(e,t,l,a,n,r,s,i,o)}function Yc(e){for(var t=e;;){var a=t.tag;if((0===a||11===a||15===a)&&16384&t.flags&&(null!==(a=t.updateQueue)&&null!==(a=a.stores)))for(var n=0;n<a.length;n++){var r=a[n],l=r.getSnapshot;r=r.value;try{if(!Ya(l(),r))return!1}catch(s){return!1}}if(a=t.child,16384&t.subtreeFlags&&null!==a)a.return=t,t=a;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Xc(e,t,a,n){t&=~Sc,t&=~Cc,e.suspendedLanes|=t,e.pingedLanes&=~t,n&&(e.warmLanes|=t),n=e.expirationTimes;for(var r=t;0<r;){var l=31-be(r),s=1<<l;n[l]=-1,r&=~s}0!==a&&Ae(e,a,t)}function Zc(){return 0!==(6&mc)||(Dd(0,!1),!1)}function ed(){if(null!==fc){if(0===vc)var e=fc.return;else wr=_r=null,ss(e=fc),il=null,ol=0,e=fc;for(;null!==e;)fo(e.alternate,e),e=e.return;fc=null}}function td(e,t){var a=e.timeoutHandle;-1!==a&&(e.timeoutHandle=-1,Nu(a)),null!==(a=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,a()),Mc=0,ed(),hc=e,fc=a=Mn(e.current,null),gc=t,vc=0,xc=null,yc=!1,bc=Ee(e,t),jc=!1,Ec=kc=Sc=Cc=wc=_c=0,Pc=Tc=null,Rc=!1,0!==(8&t)&&(t|=32&t);var n=e.entangledLanes;if(0!==n)for(e=e.entanglements,n&=t;0<n;){var r=31-be(n),l=1<<r;t|=e[r],n&=~l}return Nc=t,Pn(),a}function ad(e,t){Bl=null,z.H=hi,t===Yr||t===Zr?(t=ll(),vc=3):t===Xr?(t=ll(),vc=4):vc=t===Ri?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,xc=t,null===fc&&(_c=1,Si(e,Qn(t,e.current)))}function nd(){var e=Ll.current;return null===e||((4194048&gc)===gc?null===Al:((62914560&gc)===gc||0!==(536870912&gc))&&e===Al)}function rd(){var e=z.H;return z.H=hi,null===e?hi:e}function ld(){var e=z.A;return z.A=uc,e}function sd(){_c=4,yc||(4194048&gc)!==gc&&null!==Ll.current||(bc=!0),0===(134217727&wc)&&0===(134217727&Cc)||null===hc||Xc(hc,gc,kc,!1)}function id(e,t,a){var n=mc;mc|=2;var r=rd(),l=ld();hc===e&&gc===t||(Oc=null,td(e,t)),t=!1;var s=_c;e:for(;;)try{if(0!==vc&&null!==fc){var i=fc,o=xc;switch(vc){case 8:ed(),s=6;break e;case 3:case 2:case 9:case 6:null===Ll.current&&(t=!0);var c=vc;if(vc=0,xc=null,pd(e,i,o,c),a&&bc){s=0;break e}break;default:c=vc,vc=0,xc=null,pd(e,i,o,c)}}od(),s=_c;break}catch(d){ad(e,d)}return t&&e.shellSuspendCounter++,wr=_r=null,mc=n,z.H=r,z.A=l,null===fc&&(hc=null,gc=0,Pn()),s}function od(){for(;null!==fc;)dd(fc)}function cd(){for(;null!==fc&&!se();)dd(fc)}function dd(e){var t=lo(e.alternate,e,Nc);e.memoizedProps=e.pendingProps,null===t?md(e):fc=t}function ud(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=Vi(a,t,t.pendingProps,t.type,void 0,gc);break;case 11:t=Vi(a,t,t.pendingProps,t.type.render,t.ref,gc);break;case 5:ss(t);default:fo(a,t),t=lo(a,t=fc=Un(t,Nc),Nc)}e.memoizedProps=e.pendingProps,null===t?md(e):fc=t}function pd(e,t,a,n){wr=_r=null,ss(t),il=null,ol=0;var r=t.return;try{if(function(e,t,a,n,r){if(a.flags|=32768,null!==n&&"object"===typeof n&&"function"===typeof n.then){if(null!==(t=a.alternate)&&Tr(t,a,r,!0),null!==(a=Ll.current)){switch(a.tag){case 31:case 13:return null===Al?sd():null===a.alternate&&0===_c&&(_c=3),a.flags&=-257,a.flags|=65536,a.lanes=r,n===el?a.flags|=16384:(null===(t=a.updateQueue)?a.updateQueue=new Set([n]):t.add(n),wd(e,n,r)),!1;case 22:return a.flags|=65536,n===el?a.flags|=16384:(null===(t=a.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([n])},a.updateQueue=t):null===(a=t.retryQueue)?t.retryQueue=new Set([n]):a.add(n),wd(e,n,r)),!1}throw Error(s(435,a.tag))}return wd(e,n,r),sd(),!1}if(ur)return null!==(t=Ll.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=r,n!==hr&&jr(Qn(e=Error(s(422),{cause:n}),a))):(n!==hr&&jr(Qn(t=Error(s(423),{cause:n}),a)),(e=e.current.alternate).flags|=65536,r&=-r,e.lanes|=r,n=Qn(n,a),jl(e,r=Ei(e.stateNode,n,r)),4!==_c&&(_c=2)),!1;var l=Error(s(520),{cause:n});if(l=Qn(l,a),null===Tc?Tc=[l]:Tc.push(l),4!==_c&&(_c=2),null===t)return!0;n=Qn(n,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=r&-r,a.lanes|=e,jl(a,e=Ei(a.stateNode,n,e)),!1;case 1:if(t=a.type,l=a.stateNode,0===(128&a.flags)&&("function"===typeof t.getDerivedStateFromError||null!==l&&"function"===typeof l.componentDidCatch&&(null===Dc||!Dc.has(l))))return a.flags|=65536,r&=-r,a.lanes|=r,Pi(r=Ti(r),e,a,n),jl(a,r),!1}a=a.return}while(null!==a);return!1}(e,r,t,a,gc))return _c=1,Si(e,Qn(a,e.current)),void(fc=null)}catch(l){if(null!==r)throw fc=r,l;return _c=1,Si(e,Qn(a,e.current)),void(fc=null)}32768&t.flags?(ur||1===n?e=!0:bc||0!==(536870912&gc)?e=!1:(yc=e=!0,(2===n||9===n||3===n||6===n)&&(null!==(n=Ll.current)&&13===n.tag&&(n.flags|=16384))),hd(t,e)):md(t)}function md(e){var t=e;do{if(0!==(32768&t.flags))return void hd(t,yc);e=t.return;var a=mo(t.alternate,t,Nc);if(null!==a)return void(fc=a);if(null!==(t=t.sibling))return void(fc=t);fc=t=e}while(null!==t);0===_c&&(_c=5)}function hd(e,t){do{var a=ho(e.alternate,e);if(null!==a)return a.flags&=32767,void(fc=a);if(null!==(a=e.return)&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&null!==(e=e.sibling))return void(fc=e);fc=e=a}while(null!==e);_c=6,fc=null}function fd(e,t,a,n,r,l,i,o,c){e.cancelPendingCommit=null;do{bd()}while(0!==Ic);if(0!==(6&mc))throw Error(s(327));if(null!==t){if(t===e.current)throw Error(s(177));if(l=t.lanes|t.childLanes,function(e,t,a,n,r,l){var s=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var i=e.entanglements,o=e.expirationTimes,c=e.hiddenUpdates;for(a=s&~a;0<a;){var d=31-be(a),u=1<<d;i[d]=0,o[d]=-1;var p=c[d];if(null!==p)for(c[d]=null,d=0;d<p.length;d++){var m=p[d];null!==m&&(m.lane&=-536870913)}a&=~u}0!==n&&Ae(e,n,0),0!==l&&0===r&&0!==e.tag&&(e.suspendedLanes|=l&~(s&~t))}(e,a,l|=Tn,i,o,c),e===hc&&(fc=hc=null,gc=0),qc=t,Fc=e,Mc=a,Uc=l,Bc=r,Hc=n,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,re(pe,function(){return jd(),null})):(e.callbackNode=null,e.callbackPriority=0),n=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||n){n=z.T,z.T=null,r=O.p,O.p=2,i=mc,mc|=4;try{!function(e,t){if(e=e.containerInfo,hu=yp,nn(e=an(e))){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(a=(a=e.ownerDocument)&&a.defaultView||window).getSelection&&a.getSelection();if(n&&0!==n.rangeCount){a=n.anchorNode;var r=n.anchorOffset,l=n.focusNode;n=n.focusOffset;try{a.nodeType,l.nodeType}catch(g){a=null;break e}var i=0,o=-1,c=-1,d=0,u=0,p=e,m=null;t:for(;;){for(var h;p!==a||0!==r&&3!==p.nodeType||(o=i+r),p!==l||0!==n&&3!==p.nodeType||(c=i+n),3===p.nodeType&&(i+=p.nodeValue.length),null!==(h=p.firstChild);)m=p,p=h;for(;;){if(p===e)break t;if(m===a&&++d===r&&(o=i),m===l&&++u===n&&(c=i),null!==(h=p.nextSibling))break;m=(p=m).parentNode}p=h}a=-1===o||-1===c?null:{start:o,end:c}}else a=null}a=a||{start:0,end:0}}else a=null;for(fu={focusedElem:e,selectionRange:a},yp=!1,Ao=t;null!==Ao;)if(e=(t=Ao).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ao=e;else for(;null!==Ao;){switch(l=(t=Ao).alternate,e=t.flags,t.tag){case 0:if(0!==(4&e)&&null!==(e=null!==(e=t.updateQueue)?e.events:null))for(a=0;a<e.length;a++)(r=e[a]).ref.impl=r.nextImpl;break;case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==l){e=void 0,a=t,r=l.memoizedProps,l=l.memoizedState,n=a.stateNode;try{var f=Ni(a.type,r);e=n.getSnapshotBeforeUpdate(f,l),n.__reactInternalSnapshotBeforeUpdate=e}catch(v){_d(a,a.return,v)}}break;case 3:if(0!==(1024&e))if(9===(a=(e=t.stateNode.containerInfo).nodeType))Tu(e);else if(1===a)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Tu(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(s(163))}if(null!==(e=t.sibling)){e.return=t.return,Ao=e;break}Ao=t.return}}(e,t)}finally{mc=i,O.p=r,z.T=n}}Ic=1,gd(),vd(),xd()}}function gd(){if(1===Ic){Ic=0;var e=Fc,t=qc,a=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||a){a=z.T,z.T=null;var n=O.p;O.p=2;var r=mc;mc|=4;try{Wo(t,e);var l=fu,s=an(e.containerInfo),i=l.focusedElem,o=l.selectionRange;if(s!==i&&i&&i.ownerDocument&&tn(i.ownerDocument.documentElement,i)){if(null!==o&&nn(i)){var c=o.start,d=o.end;if(void 0===d&&(d=c),"selectionStart"in i)i.selectionStart=c,i.selectionEnd=Math.min(d,i.value.length);else{var u=i.ownerDocument||document,p=u&&u.defaultView||window;if(p.getSelection){var m=p.getSelection(),h=i.textContent.length,f=Math.min(o.start,h),g=void 0===o.end?f:Math.min(o.end,h);!m.extend&&f>g&&(s=g,g=f,f=s);var v=en(i,f),x=en(i,g);if(v&&x&&(1!==m.rangeCount||m.anchorNode!==v.node||m.anchorOffset!==v.offset||m.focusNode!==x.node||m.focusOffset!==x.offset)){var y=u.createRange();y.setStart(v.node,v.offset),m.removeAllRanges(),f>g?(m.addRange(y),m.extend(x.node,x.offset)):(y.setEnd(x.node,x.offset),m.addRange(y))}}}}for(u=[],m=i;m=m.parentNode;)1===m.nodeType&&u.push({element:m,left:m.scrollLeft,top:m.scrollTop});for("function"===typeof i.focus&&i.focus(),i=0;i<u.length;i++){var b=u[i];b.element.scrollLeft=b.left,b.element.scrollTop=b.top}}yp=!!hu,fu=hu=null}finally{mc=r,O.p=n,z.T=a}}e.current=t,Ic=2}}function vd(){if(2===Ic){Ic=0;var e=Fc,t=qc,a=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||a){a=z.T,z.T=null;var n=O.p;O.p=2;var r=mc;mc|=4;try{zo(e,t.alternate,t)}finally{mc=r,O.p=n,z.T=a}}Ic=3}}function xd(){if(4===Ic||3===Ic){Ic=0,ie();var e=Fc,t=qc,a=Mc,n=Hc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Ic=5:(Ic=0,qc=Fc=null,yd(e,e.pendingLanes));var r=e.pendingLanes;if(0===r&&(Dc=null),Ie(a),t=t.stateNode,xe&&"function"===typeof xe.onCommitFiberRoot)try{xe.onCommitFiberRoot(ve,t,void 0,128===(128&t.current.flags))}catch(o){}if(null!==n){t=z.T,r=O.p,O.p=2,z.T=null;try{for(var l=e.onRecoverableError,s=0;s<n.length;s++){var i=n[s];l(i.value,{componentStack:i.stack})}}finally{z.T=t,O.p=r}}0!==(3&Mc)&&bd(),Od(e),r=e.pendingLanes,0!==(261930&a)&&0!==(42&r)?e===Wc?Vc++:(Vc=0,Wc=e):Vc=0,Dd(0,!1)}}function yd(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Mr(t)))}function bd(){return gd(),vd(),xd(),jd()}function jd(){if(5!==Ic)return!1;var e=Fc,t=Uc;Uc=0;var a=Ie(Mc),n=z.T,r=O.p;try{O.p=32>a?32:a,z.T=null,a=Bc,Bc=null;var l=Fc,i=Mc;if(Ic=0,qc=Fc=null,Mc=0,0!==(6&mc))throw Error(s(331));var o=mc;if(mc|=4,oc(l.current),ec(l,l.current,i,a),mc=o,Dd(0,!1),xe&&"function"===typeof xe.onPostCommitFiberRoot)try{xe.onPostCommitFiberRoot(ve,l)}catch(c){}return!0}finally{O.p=r,z.T=n,yd(e,t)}}function Nd(e,t,a){t=Qn(a,t),null!==(e=yl(e,t=Ei(e.stateNode,t,2),2))&&(Le(e,2),Od(e))}function _d(e,t,a){if(3===e.tag)Nd(e,e,a);else for(;null!==t;){if(3===t.tag){Nd(t,e,a);break}if(1===t.tag){var n=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===Dc||!Dc.has(n))){e=Qn(a,e),null!==(n=yl(t,a=Ti(2),2))&&(Pi(a,n,t,e),Le(n,2),Od(n));break}}t=t.return}}function wd(e,t,a){var n=e.pingCache;if(null===n){n=e.pingCache=new pc;var r=new Set;n.set(t,r)}else void 0===(r=n.get(t))&&(r=new Set,n.set(t,r));r.has(a)||(jc=!0,r.add(a),e=Cd.bind(null,e,t,a),t.then(e,e))}function Cd(e,t,a){var n=e.pingCache;null!==n&&n.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,hc===e&&(gc&a)===a&&(4===_c||3===_c&&(62914560&gc)===gc&&300>oe()-Lc?0===(2&mc)&&td(e,0):Sc|=a,Ec===gc&&(Ec=0)),Od(e)}function Sd(e,t){0===t&&(t=Pe()),null!==(e=An(e,t))&&(Le(e,t),Od(e))}function kd(e){var t=e.memoizedState,a=0;null!==t&&(a=t.retryLane),Sd(e,a)}function Ed(e,t){var a=0;switch(e.tag){case 31:case 13:var n=e.stateNode,r=e.memoizedState;null!==r&&(a=r.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(s(314))}null!==n&&n.delete(t),Sd(e,a)}var Td=null,Pd=null,Rd=!1,Ld=!1,Ad=!1,zd=0;function Od(e){e!==Pd&&null===e.next&&(null===Pd?Td=Pd=e:Pd=Pd.next=e),Ld=!0,Rd||(Rd=!0,wu(function(){0!==(6&mc)?re(de,Id):Fd()}))}function Dd(e,t){if(!Ad&&Ld){Ad=!0;do{for(var a=!1,n=Td;null!==n;){if(!t)if(0!==e){var r=n.pendingLanes;if(0===r)var l=0;else{var s=n.suspendedLanes,i=n.pingedLanes;l=(1<<31-be(42|e)+1)-1,l=201326741&(l&=r&~(s&~i))?201326741&l|1:l?2|l:0}0!==l&&(a=!0,Ud(n,l))}else l=gc,0===(3&(l=ke(n,n===hc?l:0,null!==n.cancelPendingCommit||-1!==n.timeoutHandle)))||Ee(n,l)||(a=!0,Ud(n,l));n=n.next}}while(a);Ad=!1}}function Id(){Fd()}function Fd(){Ld=Rd=!1;var e=0;0!==zd&&function(){var e=window.event;if(e&&"popstate"===e.type)return e!==bu&&(bu=e,!0);return bu=null,!1}()&&(e=zd);for(var t=oe(),a=null,n=Td;null!==n;){var r=n.next,l=qd(n,t);0===l?(n.next=null,null===a?Td=r:a.next=r,null===r&&(Pd=a)):(a=n,(0!==e||0!==(3&l))&&(Ld=!0)),n=r}0!==Ic&&5!==Ic||Dd(e,!1),0!==zd&&(zd=0)}function qd(e,t){for(var a=e.suspendedLanes,n=e.pingedLanes,r=e.expirationTimes,l=-62914561&e.pendingLanes;0<l;){var s=31-be(l),i=1<<s,o=r[s];-1===o?0!==(i&a)&&0===(i&n)||(r[s]=Te(i,t)):o<=t&&(e.expiredLanes|=i),l&=~i}if(a=gc,a=ke(e,e===(t=hc)?a:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),n=e.callbackNode,0===a||e===t&&(2===vc||9===vc)||null!==e.cancelPendingCommit)return null!==n&&null!==n&&le(n),e.callbackNode=null,e.callbackPriority=0;if(0===(3&a)||Ee(e,a)){if((t=a&-a)===e.callbackPriority)return t;switch(null!==n&&le(n),Ie(a)){case 2:case 8:a=ue;break;case 32:default:a=pe;break;case 268435456:a=he}return n=Md.bind(null,e),a=re(a,n),e.callbackPriority=t,e.callbackNode=a,t}return null!==n&&null!==n&&le(n),e.callbackPriority=2,e.callbackNode=null,2}function Md(e,t){if(0!==Ic&&5!==Ic)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(bd()&&e.callbackNode!==a)return null;var n=gc;return 0===(n=ke(e,e===hc?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Kc(e,n,t),qd(e,oe()),null!=e.callbackNode&&e.callbackNode===a?Md.bind(null,e):null)}function Ud(e,t){if(bd())return null;Kc(e,t,!0)}function Bd(){if(0===zd){var e=Hr;0===e&&(e=_e,0===(261888&(_e<<=1))&&(_e=256)),zd=e}return zd}function Hd(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Rt(""+e)}function Vd(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}for(var Wd=0;Wd<wn.length;Wd++){var Gd=wn[Wd];Cn(Gd.toLowerCase(),"on"+(Gd[0].toUpperCase()+Gd.slice(1)))}Cn(gn,"onAnimationEnd"),Cn(vn,"onAnimationIteration"),Cn(xn,"onAnimationStart"),Cn("dblclick","onDoubleClick"),Cn("focusin","onFocus"),Cn("focusout","onBlur"),Cn(yn,"onTransitionRun"),Cn(bn,"onTransitionStart"),Cn(jn,"onTransitionCancel"),Cn(Nn,"onTransitionEnd"),rt("onMouseEnter",["mouseout","mouseover"]),rt("onMouseLeave",["mouseout","mouseover"]),rt("onPointerEnter",["pointerout","pointerover"]),rt("onPointerLeave",["pointerout","pointerover"]),nt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),nt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),nt("onBeforeInput",["compositionend","keypress","textInput","paste"]),nt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),nt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),nt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $d="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qd=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat($d));function Kd(e,t){t=0!==(4&t);for(var a=0;a<e.length;a++){var n=e[a],r=n.event;n=n.listeners;e:{var l=void 0;if(t)for(var s=n.length-1;0<=s;s--){var i=n[s],o=i.instance,c=i.currentTarget;if(i=i.listener,o!==l&&r.isPropagationStopped())break e;l=i,r.currentTarget=c;try{l(r)}catch(d){Sn(d)}r.currentTarget=null,l=o}else for(s=0;s<n.length;s++){if(o=(i=n[s]).instance,c=i.currentTarget,i=i.listener,o!==l&&r.isPropagationStopped())break e;l=i,r.currentTarget=c;try{l(r)}catch(d){Sn(d)}r.currentTarget=null,l=o}}}}function Jd(e,t){var a=t[Ve];void 0===a&&(a=t[Ve]=new Set);var n=e+"__bubble";a.has(n)||(eu(t,e,2,!1),a.add(n))}function Yd(e,t,a){var n=0;t&&(n|=4),eu(a,e,n,t)}var Xd="_reactListening"+Math.random().toString(36).slice(2);function Zd(e){if(!e[Xd]){e[Xd]=!0,tt.forEach(function(t){"selectionchange"!==t&&(Qd.has(t)||Yd(t,!1,e),Yd(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Xd]||(t[Xd]=!0,Yd("selectionchange",!1,t))}}function eu(e,t,a,n){switch(Sp(t)){case 2:var r=bp;break;case 8:r=jp;break;default:r=Np}a=r.bind(null,t,a,e),r=void 0,!Bt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),n?void 0!==r?e.addEventListener(t,a,{capture:!0,passive:r}):e.addEventListener(t,a,!0):void 0!==r?e.addEventListener(t,a,{passive:r}):e.addEventListener(t,a,!1)}function tu(e,t,a,n,r){var l=n;if(0===(1&t)&&0===(2&t)&&null!==n)e:for(;;){if(null===n)return;var s=n.tag;if(3===s||4===s){var i=n.stateNode.containerInfo;if(i===r)break;if(4===s)for(s=n.return;null!==s;){var c=s.tag;if((3===c||4===c)&&s.stateNode.containerInfo===r)return;s=s.return}for(;null!==i;){if(null===(s=Je(i)))return;if(5===(c=s.tag)||6===c||26===c||27===c){n=l=s;continue e}i=i.parentNode}}n=n.return}qt(function(){var n=l,r=zt(a),s=[];e:{var i=_n.get(e);if(void 0!==i){var c=aa,d=e;switch(e){case"keypress":if(0===Qt(a))break e;case"keydown":case"keyup":c=va;break;case"focusin":d="focus",c=oa;break;case"focusout":d="blur",c=oa;break;case"beforeblur":case"afterblur":c=oa;break;case"click":if(2===a.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=sa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=ia;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=ya;break;case gn:case vn:case xn:c=ca;break;case Nn:c=ba;break;case"scroll":case"scrollend":c=ra;break;case"wheel":c=ja;break;case"copy":case"cut":case"paste":c=da;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=xa;break;case"toggle":case"beforetoggle":c=Na}var u=0!==(4&t),p=!u&&("scroll"===e||"scrollend"===e),m=u?null!==i?i+"Capture":null:i;u=[];for(var h,f=n;null!==f;){var g=f;if(h=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===h||null===m||null!=(g=Mt(f,m))&&u.push(au(f,g,h)),p)break;f=f.return}0<u.length&&(i=new c(i,d,null,a,r),s.push({event:i,listeners:u}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(i="mouseover"===e||"pointerover"===e)||a===At||!(d=a.relatedTarget||a.fromElement)||!Je(d)&&!d[He])&&(c||i)&&(i=r.window===r?r:(i=r.ownerDocument)?i.defaultView||i.parentWindow:window,c?(c=n,null!==(d=(d=a.relatedTarget||a.toElement)?Je(d):null)&&(p=o(d),u=d.tag,d!==p||5!==u&&27!==u&&6!==u)&&(d=null)):(c=null,d=n),c!==d)){if(u=sa,g="onMouseLeave",m="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=xa,g="onPointerLeave",m="onPointerEnter",f="pointer"),p=null==c?i:Xe(c),h=null==d?i:Xe(d),(i=new u(g,f+"leave",c,a,r)).target=p,i.relatedTarget=h,g=null,Je(r)===n&&((u=new u(m,f+"enter",d,a,r)).target=h,u.relatedTarget=p,g=u),p=g,c&&d)e:{for(u=ru,f=d,h=0,g=m=c;g;g=u(g))h++;g=0;for(var v=f;v;v=u(v))g++;for(;0<h-g;)m=u(m),h--;for(;0<g-h;)f=u(f),g--;for(;h--;){if(m===f||null!==f&&m===f.alternate){u=m;break e}m=u(m),f=u(f)}u=null}else u=null;null!==c&&lu(s,i,c,u,!1),null!==d&&null!==p&&lu(s,p,d,u,!0)}if("select"===(c=(i=n?Xe(n):window).nodeName&&i.nodeName.toLowerCase())||"input"===c&&"file"===i.type)var x=Ma;else if(za(i))if(Ua)x=Ja;else{x=Qa;var y=$a}else!(c=i.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==i.type&&"radio"!==i.type?n&&Et(n.elementType)&&(x=Ma):x=Ka;switch(x&&(x=x(e,n))?Oa(s,x,a,r):(y&&y(e,i,n),"focusout"===e&&n&&"number"===i.type&&null!=n.memoizedProps.value&&bt(i,"number",i.value)),y=n?Xe(n):window,e){case"focusin":(za(y)||"true"===y.contentEditable)&&(ln=y,sn=n,on=null);break;case"focusout":on=sn=ln=null;break;case"mousedown":cn=!0;break;case"contextmenu":case"mouseup":case"dragend":cn=!1,dn(s,a,r);break;case"selectionchange":if(rn)break;case"keydown":case"keyup":dn(s,a,r)}var b;if(wa)e:{switch(e){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else La?Pa(e,a)&&(j="onCompositionEnd"):"keydown"===e&&229===a.keyCode&&(j="onCompositionStart");j&&(ka&&"ko"!==a.locale&&(La||"onCompositionStart"!==j?"onCompositionEnd"===j&&La&&(b=$t()):(Wt="value"in(Vt=r)?Vt.value:Vt.textContent,La=!0)),0<(y=nu(n,j)).length&&(j=new ua(j,e,null,a,r),s.push({event:j,listeners:y}),b?j.data=b:null!==(b=Ra(a))&&(j.data=b))),(b=Sa?function(e,t){switch(e){case"compositionend":return Ra(t);case"keypress":return 32!==t.which?null:(Ta=!0,Ea);case"textInput":return(e=t.data)===Ea&&Ta?null:e;default:return null}}(e,a):function(e,t){if(La)return"compositionend"===e||!wa&&Pa(e,t)?(e=$t(),Gt=Wt=Vt=null,La=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ka&&"ko"!==t.locale?null:t.data}}(e,a))&&(0<(j=nu(n,"onBeforeInput")).length&&(y=new ua("onBeforeInput","beforeinput",null,a,r),s.push({event:y,listeners:j}),y.data=b)),function(e,t,a,n,r){if("submit"===t&&a&&a.stateNode===r){var l=Hd((r[Be]||null).action),s=n.submitter;s&&null!==(t=(t=s[Be]||null)?Hd(t.formAction):s.getAttribute("formAction"))&&(l=t,s=null);var i=new aa("action","action",null,n,r);e.push({event:i,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(0!==zd){var e=s?Vd(r,s):new FormData(r);ei(a,{pending:!0,data:e,method:r.method,action:l},null,e)}}else"function"===typeof l&&(i.preventDefault(),e=s?Vd(r,s):new FormData(r),ei(a,{pending:!0,data:e,method:r.method,action:l},l,e))},currentTarget:r}]})}}(s,e,n,a,r)}Kd(s,t)})}function au(e,t,a){return{instance:e,listener:t,currentTarget:a}}function nu(e,t){for(var a=t+"Capture",n=[];null!==e;){var r=e,l=r.stateNode;if(5!==(r=r.tag)&&26!==r&&27!==r||null===l||(null!=(r=Mt(e,a))&&n.unshift(au(e,r,l)),null!=(r=Mt(e,t))&&n.push(au(e,r,l))),3===e.tag)return n;e=e.return}return[]}function ru(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function lu(e,t,a,n,r){for(var l=t._reactName,s=[];null!==a&&a!==n;){var i=a,o=i.alternate,c=i.stateNode;if(i=i.tag,null!==o&&o===n)break;5!==i&&26!==i&&27!==i||null===c||(o=c,r?null!=(c=Mt(a,l))&&s.unshift(au(a,c,o)):r||null!=(c=Mt(a,l))&&s.push(au(a,c,o))),a=a.return}0!==s.length&&e.push({event:t,listeners:s})}var su=/\r\n?/g,iu=/\u0000|\uFFFD/g;function ou(e){return("string"===typeof e?e:""+e).replace(su,"\n").replace(iu,"")}function cu(e,t){return t=ou(t),ou(e)===t}function du(e,t,a,n,r,l){switch(a){case"children":"string"===typeof n?"body"===t||"textarea"===t&&""===n||wt(e,n):("number"===typeof n||"bigint"===typeof n)&&"body"!==t&&wt(e,""+n);break;case"className":ct(e,"class",n);break;case"tabIndex":ct(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":ct(e,a,n);break;case"style":kt(e,n,l);break;case"data":if("object"!==t){ct(e,"data",n);break}case"src":case"href":if(""===n&&("a"!==t||"href"!==a)){e.removeAttribute(a);break}if(null==n||"function"===typeof n||"symbol"===typeof n||"boolean"===typeof n){e.removeAttribute(a);break}n=Rt(""+n),e.setAttribute(a,n);break;case"action":case"formAction":if("function"===typeof n){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof l&&("formAction"===a?("input"!==t&&du(e,t,"name",r.name,r,null),du(e,t,"formEncType",r.formEncType,r,null),du(e,t,"formMethod",r.formMethod,r,null),du(e,t,"formTarget",r.formTarget,r,null)):(du(e,t,"encType",r.encType,r,null),du(e,t,"method",r.method,r,null),du(e,t,"target",r.target,r,null))),null==n||"symbol"===typeof n||"boolean"===typeof n){e.removeAttribute(a);break}n=Rt(""+n),e.setAttribute(a,n);break;case"onClick":null!=n&&(e.onclick=Lt);break;case"onScroll":null!=n&&Jd("scroll",e);break;case"onScrollEnd":null!=n&&Jd("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=n){if("object"!==typeof n||!("__html"in n))throw Error(s(61));if(null!=(a=n.__html)){if(null!=r.children)throw Error(s(60));e.innerHTML=a}}break;case"multiple":e.multiple=n&&"function"!==typeof n&&"symbol"!==typeof n;break;case"muted":e.muted=n&&"function"!==typeof n&&"symbol"!==typeof n;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==n||"function"===typeof n||"boolean"===typeof n||"symbol"===typeof n){e.removeAttribute("xlink:href");break}a=Rt(""+n),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=n&&"function"!==typeof n&&"symbol"!==typeof n?e.setAttribute(a,""+n):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&"function"!==typeof n&&"symbol"!==typeof n?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":!0===n?e.setAttribute(a,""):!1!==n&&null!=n&&"function"!==typeof n&&"symbol"!==typeof n?e.setAttribute(a,n):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":null!=n&&"function"!==typeof n&&"symbol"!==typeof n&&!isNaN(n)&&1<=n?e.setAttribute(a,n):e.removeAttribute(a);break;case"rowSpan":case"start":null==n||"function"===typeof n||"symbol"===typeof n||isNaN(n)?e.removeAttribute(a):e.setAttribute(a,n);break;case"popover":Jd("beforetoggle",e),Jd("toggle",e),ot(e,"popover",n);break;case"xlinkActuate":dt(e,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":dt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":dt(e,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":dt(e,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":dt(e,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":dt(e,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":dt(e,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":dt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":dt(e,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":ot(e,"is",n);break;case"innerText":case"textContent":break;default:(!(2<a.length)||"o"!==a[0]&&"O"!==a[0]||"n"!==a[1]&&"N"!==a[1])&&ot(e,a=Tt.get(a)||a,n)}}function uu(e,t,a,n,r,l){switch(a){case"style":kt(e,n,l);break;case"dangerouslySetInnerHTML":if(null!=n){if("object"!==typeof n||!("__html"in n))throw Error(s(61));if(null!=(a=n.__html)){if(null!=r.children)throw Error(s(60));e.innerHTML=a}}break;case"children":"string"===typeof n?wt(e,n):("number"===typeof n||"bigint"===typeof n)&&wt(e,""+n);break;case"onScroll":null!=n&&Jd("scroll",e);break;case"onScrollEnd":null!=n&&Jd("scrollend",e);break;case"onClick":null!=n&&(e.onclick=Lt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:at.hasOwnProperty(a)||("o"!==a[0]||"n"!==a[1]||(r=a.endsWith("Capture"),t=a.slice(2,r?a.length-7:void 0),"function"===typeof(l=null!=(l=e[Be]||null)?l[a]:null)&&e.removeEventListener(t,l,r),"function"!==typeof n)?a in e?e[a]=n:!0===n?e.setAttribute(a,""):ot(e,a,n):("function"!==typeof l&&null!==l&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,n,r)))}}function pu(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Jd("error",e),Jd("load",e);var n,r=!1,l=!1;for(n in a)if(a.hasOwnProperty(n)){var i=a[n];if(null!=i)switch(n){case"src":r=!0;break;case"srcSet":l=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:du(e,t,n,i,a,null)}}return l&&du(e,t,"srcSet",a.srcSet,a,null),void(r&&du(e,t,"src",a.src,a,null));case"input":Jd("invalid",e);var o=n=i=l=null,c=null,d=null;for(r in a)if(a.hasOwnProperty(r)){var u=a[r];if(null!=u)switch(r){case"name":l=u;break;case"type":i=u;break;case"checked":c=u;break;case"defaultChecked":d=u;break;case"value":n=u;break;case"defaultValue":o=u;break;case"children":case"dangerouslySetInnerHTML":if(null!=u)throw Error(s(137,t));break;default:du(e,t,r,u,a,null)}}return void yt(e,n,o,c,d,i,l,!1);case"select":for(l in Jd("invalid",e),r=i=n=null,a)if(a.hasOwnProperty(l)&&null!=(o=a[l]))switch(l){case"value":n=o;break;case"defaultValue":i=o;break;case"multiple":r=o;default:du(e,t,l,o,a,null)}return t=n,a=i,e.multiple=!!r,void(null!=t?jt(e,!!r,t,!1):null!=a&&jt(e,!!r,a,!0));case"textarea":for(i in Jd("invalid",e),n=l=r=null,a)if(a.hasOwnProperty(i)&&null!=(o=a[i]))switch(i){case"value":r=o;break;case"defaultValue":l=o;break;case"children":n=o;break;case"dangerouslySetInnerHTML":if(null!=o)throw Error(s(91));break;default:du(e,t,i,o,a,null)}return void _t(e,r,l,n);case"option":for(c in a)if(a.hasOwnProperty(c)&&null!=(r=a[c]))if("selected"===c)e.selected=r&&"function"!==typeof r&&"symbol"!==typeof r;else du(e,t,c,r,a,null);return;case"dialog":Jd("beforetoggle",e),Jd("toggle",e),Jd("cancel",e),Jd("close",e);break;case"iframe":case"object":Jd("load",e);break;case"video":case"audio":for(r=0;r<$d.length;r++)Jd($d[r],e);break;case"image":Jd("error",e),Jd("load",e);break;case"details":Jd("toggle",e);break;case"embed":case"source":case"link":Jd("error",e),Jd("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(d in a)if(a.hasOwnProperty(d)&&null!=(r=a[d]))switch(d){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:du(e,t,d,r,a,null)}return;default:if(Et(t)){for(u in a)a.hasOwnProperty(u)&&(void 0!==(r=a[u])&&uu(e,t,u,r,a,void 0));return}}for(o in a)a.hasOwnProperty(o)&&(null!=(r=a[o])&&du(e,t,o,r,a,null))}function mu(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}var hu=null,fu=null;function gu(e){return 9===e.nodeType?e:e.ownerDocument}function vu(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function xu(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function yu(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var bu=null;var ju="function"===typeof setTimeout?setTimeout:void 0,Nu="function"===typeof clearTimeout?clearTimeout:void 0,_u="function"===typeof Promise?Promise:void 0,wu="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof _u?function(e){return _u.resolve(null).then(e).catch(Cu)}:ju;function Cu(e){setTimeout(function(){throw e})}function Su(e){return"head"===e}function ku(e,t){var a=t,n=0;do{var r=a.nextSibling;if(e.removeChild(a),r&&8===r.nodeType)if("/$"===(a=r.data)||"/&"===a){if(0===n)return e.removeChild(r),void Vp(t);n--}else if("$"===a||"$?"===a||"$~"===a||"$!"===a||"&"===a)n++;else if("html"===a)Fu(e.ownerDocument.documentElement);else if("head"===a){Fu(a=e.ownerDocument.head);for(var l=a.firstChild;l;){var s=l.nextSibling,i=l.nodeName;l[Qe]||"SCRIPT"===i||"STYLE"===i||"LINK"===i&&"stylesheet"===l.rel.toLowerCase()||a.removeChild(l),l=s}}else"body"===a&&Fu(e.ownerDocument.body);a=r}while(a);Vp(t)}function Eu(e,t){var a=e;e=0;do{var n=a.nextSibling;if(1===a.nodeType?t?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",""===a.getAttribute("style")&&a.removeAttribute("style")):3===a.nodeType&&(t?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),n&&8===n.nodeType)if("/$"===(a=n.data)){if(0===e)break;e--}else"$"!==a&&"$?"!==a&&"$~"!==a&&"$!"!==a||e++;a=n}while(a)}function Tu(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Tu(a),Ke(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===a.rel.toLowerCase())continue}e.removeChild(a)}}function Pu(e,t){for(;8!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!t)return null;if(null===(e=Au(e.nextSibling)))return null}return e}function Ru(e){return"$?"===e.data||"$~"===e.data}function Lu(e){return"$!"===e.data||"$?"===e.data&&"loading"!==e.ownerDocument.readyState}function Au(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"$~"===t||"&"===t||"F!"===t||"F"===t)break;if("/$"===t||"/&"===t)return null}}return e}var zu=null;function Ou(e){e=e.nextSibling;for(var t=0;e;){if(8===e.nodeType){var a=e.data;if("/$"===a||"/&"===a){if(0===t)return Au(e.nextSibling);t--}else"$"!==a&&"$!"!==a&&"$?"!==a&&"$~"!==a&&"&"!==a||t++}e=e.nextSibling}return null}function Du(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var a=e.data;if("$"===a||"$!"===a||"$?"===a||"$~"===a||"&"===a){if(0===t)return e;t--}else"/$"!==a&&"/&"!==a||t++}e=e.previousSibling}return null}function Iu(e,t,a){switch(t=gu(a),e){case"html":if(!(e=t.documentElement))throw Error(s(452));return e;case"head":if(!(e=t.head))throw Error(s(453));return e;case"body":if(!(e=t.body))throw Error(s(454));return e;default:throw Error(s(451))}}function Fu(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ke(e)}var qu=new Map,Mu=new Set;function Uu(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Bu=O.d;O.d={f:function(){var e=Bu.f(),t=Zc();return e||t},r:function(e){var t=Ye(e);null!==t&&5===t.tag&&"form"===t.type?ai(t):Bu.r(e)},D:function(e){Bu.D(e),Vu("dns-prefetch",e,null)},C:function(e,t){Bu.C(e,t),Vu("preconnect",e,t)},L:function(e,t,a){Bu.L(e,t,a);var n=Hu;if(n&&e&&t){var r='link[rel="preload"][as="'+vt(t)+'"]';"image"===t&&a&&a.imageSrcSet?(r+='[imagesrcset="'+vt(a.imageSrcSet)+'"]',"string"===typeof a.imageSizes&&(r+='[imagesizes="'+vt(a.imageSizes)+'"]')):r+='[href="'+vt(e)+'"]';var l=r;switch(t){case"style":l=Gu(e);break;case"script":l=Ku(e)}qu.has(l)||(e=m({rel:"preload",href:"image"===t&&a&&a.imageSrcSet?void 0:e,as:t},a),qu.set(l,e),null!==n.querySelector(r)||"style"===t&&n.querySelector($u(l))||"script"===t&&n.querySelector(Ju(l))||(pu(t=n.createElement("link"),"link",e),et(t),n.head.appendChild(t)))}},m:function(e,t){Bu.m(e,t);var a=Hu;if(a&&e){var n=t&&"string"===typeof t.as?t.as:"script",r='link[rel="modulepreload"][as="'+vt(n)+'"][href="'+vt(e)+'"]',l=r;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":l=Ku(e)}if(!qu.has(l)&&(e=m({rel:"modulepreload",href:e},t),qu.set(l,e),null===a.querySelector(r))){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Ju(l)))return}pu(n=a.createElement("link"),"link",e),et(n),a.head.appendChild(n)}}},X:function(e,t){Bu.X(e,t);var a=Hu;if(a&&e){var n=Ze(a).hoistableScripts,r=Ku(e),l=n.get(r);l||((l=a.querySelector(Ju(r)))||(e=m({src:e,async:!0},t),(t=qu.get(r))&&ep(e,t),et(l=a.createElement("script")),pu(l,"link",e),a.head.appendChild(l)),l={type:"script",instance:l,count:1,state:null},n.set(r,l))}},S:function(e,t,a){Bu.S(e,t,a);var n=Hu;if(n&&e){var r=Ze(n).hoistableStyles,l=Gu(e);t=t||"default";var s=r.get(l);if(!s){var i={loading:0,preload:null};if(s=n.querySelector($u(l)))i.loading=5;else{e=m({rel:"stylesheet",href:e,"data-precedence":t},a),(a=qu.get(l))&&Zu(e,a);var o=s=n.createElement("link");et(o),pu(o,"link",e),o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),o.addEventListener("load",function(){i.loading|=1}),o.addEventListener("error",function(){i.loading|=2}),i.loading|=4,Xu(s,t,n)}s={type:"stylesheet",instance:s,count:1,state:i},r.set(l,s)}}},M:function(e,t){Bu.M(e,t);var a=Hu;if(a&&e){var n=Ze(a).hoistableScripts,r=Ku(e),l=n.get(r);l||((l=a.querySelector(Ju(r)))||(e=m({src:e,async:!0,type:"module"},t),(t=qu.get(r))&&ep(e,t),et(l=a.createElement("script")),pu(l,"link",e),a.head.appendChild(l)),l={type:"script",instance:l,count:1,state:null},n.set(r,l))}}};var Hu="undefined"===typeof document?null:document;function Vu(e,t,a){var n=Hu;if(n&&"string"===typeof t&&t){var r=vt(t);r='link[rel="'+e+'"][href="'+r+'"]',"string"===typeof a&&(r+='[crossorigin="'+a+'"]'),Mu.has(r)||(Mu.add(r),e={rel:e,crossOrigin:a,href:t},null===n.querySelector(r)&&(pu(t=n.createElement("link"),"link",e),et(t),n.head.appendChild(t)))}}function Wu(e,t,a,n){var r,l,i,o,c=(c=G.current)?Uu(c):null;if(!c)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof a.precedence&&"string"===typeof a.href?(t=Gu(a.href),(n=(a=Ze(c).hoistableStyles).get(t))||(n={type:"style",instance:null,count:0,state:null},a.set(t,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===a.rel&&"string"===typeof a.href&&"string"===typeof a.precedence){e=Gu(a.href);var d=Ze(c).hoistableStyles,u=d.get(e);if(u||(c=c.ownerDocument||c,u={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,u),(d=c.querySelector($u(e)))&&!d._p&&(u.instance=d,u.state.loading=5),qu.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},qu.set(e,a),d||(r=c,l=e,i=a,o=u.state,r.querySelector('link[rel="preload"][as="style"]['+l+"]")?o.loading=1:(l=r.createElement("link"),o.preload=l,l.addEventListener("load",function(){return o.loading|=1}),l.addEventListener("error",function(){return o.loading|=2}),pu(l,"link",i),et(l),r.head.appendChild(l))))),t&&null===n)throw Error(s(528,""));return u}if(t&&null!==n)throw Error(s(529,""));return null;case"script":return t=a.async,"string"===typeof(a=a.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Ku(a),(n=(a=Ze(c).hoistableScripts).get(t))||(n={type:"script",instance:null,count:0,state:null},a.set(t,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Gu(e){return'href="'+vt(e)+'"'}function $u(e){return'link[rel="stylesheet"]['+e+"]"}function Qu(e){return m({},e,{"data-precedence":e.precedence,precedence:null})}function Ku(e){return'[src="'+vt(e)+'"]'}function Ju(e){return"script[async]"+e}function Yu(e,t,a){if(t.count++,null===t.instance)switch(t.type){case"style":var n=e.querySelector('style[data-href~="'+vt(a.href)+'"]');if(n)return t.instance=n,et(n),n;var r=m({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return et(n=(e.ownerDocument||e).createElement("style")),pu(n,"style",r),Xu(n,a.precedence,e),t.instance=n;case"stylesheet":r=Gu(a.href);var l=e.querySelector($u(r));if(l)return t.state.loading|=4,t.instance=l,et(l),l;n=Qu(a),(r=qu.get(r))&&Zu(n,r),et(l=(e.ownerDocument||e).createElement("link"));var i=l;return i._p=new Promise(function(e,t){i.onload=e,i.onerror=t}),pu(l,"link",n),t.state.loading|=4,Xu(l,a.precedence,e),t.instance=l;case"script":return l=Ku(a.src),(r=e.querySelector(Ju(l)))?(t.instance=r,et(r),r):(n=a,(r=qu.get(l))&&ep(n=m({},a),r),et(r=(e=e.ownerDocument||e).createElement("script")),pu(r,"link",n),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(s(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(n=t.instance,t.state.loading|=4,Xu(n,a.precedence,e));return t.instance}function Xu(e,t,a){for(var n=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=n.length?n[n.length-1]:null,l=r,s=0;s<n.length;s++){var i=n[s];if(i.dataset.precedence===t)l=i;else if(l!==r)break}l?l.parentNode.insertBefore(e,l.nextSibling):(t=9===a.nodeType?a.head:a).insertBefore(e,t.firstChild)}function Zu(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function ep(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var tp=null;function ap(e,t,a){if(null===tp){var n=new Map,r=tp=new Map;r.set(a,n)}else(n=(r=tp).get(a))||(n=new Map,r.set(a,n));if(n.has(e))return n;for(n.set(e,null),a=a.getElementsByTagName(e),r=0;r<a.length;r++){var l=a[r];if(!(l[Qe]||l[Ue]||"link"===e&&"stylesheet"===l.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==l.namespaceURI){var s=l.getAttribute(t)||"";s=e+s;var i=n.get(s);i?i.push(l):n.set(s,[l])}}return n}function np(e,t,a){(e=e.ownerDocument||e).head.insertBefore(a,"title"===t?e.querySelector("head > title"):null)}function rp(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var lp=0;function sp(){if(this.count--,0===this.count&&(0===this.imgCount||!this.waitingForImages))if(this.stylesheets)op(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var ip=null;function op(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,ip=new Map,t.forEach(cp,e),ip=null,sp.call(e))}function cp(e,t){if(!(4&t.state.loading)){var a=ip.get(e);if(a)var n=a.get(null);else{a=new Map,ip.set(e,a);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),l=0;l<r.length;l++){var s=r[l];"LINK"!==s.nodeName&&"not all"===s.getAttribute("media")||(a.set(s.dataset.precedence,s),n=s)}n&&a.set(null,n)}s=(r=t.instance).getAttribute("data-precedence"),(l=a.get(s)||n)===n&&a.set(null,r),a.set(s,r),this.count++,n=sp.bind(this),r.addEventListener("load",n),r.addEventListener("error",n),l?l.parentNode.insertBefore(r,l.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(r,e.firstChild),t.state.loading|=4}}var dp={$$typeof:j,Provider:null,Consumer:null,_currentValue:D,_currentValue2:D,_threadCount:0};function up(e,t,a,n,r,l,s,i,o){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Re(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Re(0),this.hiddenUpdates=Re(null),this.identifierPrefix=n,this.onUncaughtError=r,this.onCaughtError=l,this.onRecoverableError=s,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function pp(e,t,a,n,r,l,s,i,o,c,d,u){return e=new up(e,t,a,s,o,c,d,u,i),t=1,!0===l&&(t|=24),l=Fn(3,null,null,t),e.current=l,l.stateNode=e,(t=qr()).refCount++,e.pooledCache=t,t.refCount++,l.memoizedState={element:n,isDehydrated:a,cache:t},gl(l),e}function mp(e){return e?e=Dn:Dn}function hp(e,t,a,n,r,l){r=mp(r),null===n.context?n.context=r:n.pendingContext=r,(n=xl(t)).payload={element:a},null!==(l=void 0===l?null:l)&&(n.callback=l),null!==(a=yl(e,n,t))&&(Qc(a,0,t),bl(a,e,t))}function fp(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var a=e.retryLane;e.retryLane=0!==a&&a<t?a:t}}function gp(e,t){fp(e,t),(e=e.alternate)&&fp(e,t)}function vp(e){if(13===e.tag||31===e.tag){var t=An(e,67108864);null!==t&&Qc(t,0,67108864),gp(e,67108864)}}function xp(e){if(13===e.tag||31===e.tag){var t=Gc(),a=An(e,t=De(t));null!==a&&Qc(a,0,t),gp(e,t)}}var yp=!0;function bp(e,t,a,n){var r=z.T;z.T=null;var l=O.p;try{O.p=2,Np(e,t,a,n)}finally{O.p=l,z.T=r}}function jp(e,t,a,n){var r=z.T;z.T=null;var l=O.p;try{O.p=8,Np(e,t,a,n)}finally{O.p=l,z.T=r}}function Np(e,t,a,n){if(yp){var r=_p(n);if(null===r)tu(e,t,n,wp,a),Op(e,n);else if(function(e,t,a,n,r){switch(t){case"focusin":return Ep=Dp(Ep,e,t,a,n,r),!0;case"dragenter":return Tp=Dp(Tp,e,t,a,n,r),!0;case"mouseover":return Pp=Dp(Pp,e,t,a,n,r),!0;case"pointerover":var l=r.pointerId;return Rp.set(l,Dp(Rp.get(l)||null,e,t,a,n,r)),!0;case"gotpointercapture":return l=r.pointerId,Lp.set(l,Dp(Lp.get(l)||null,e,t,a,n,r)),!0}return!1}(r,e,t,a,n))n.stopPropagation();else if(Op(e,n),4&t&&-1<zp.indexOf(e)){for(;null!==r;){var l=Ye(r);if(null!==l)switch(l.tag){case 3:if((l=l.stateNode).current.memoizedState.isDehydrated){var s=Se(l.pendingLanes);if(0!==s){var i=l;for(i.pendingLanes|=2,i.entangledLanes|=2;s;){var o=1<<31-be(s);i.entanglements[1]|=o,s&=~o}Od(l),0===(6&mc)&&(zc=oe()+500,Dd(0,!1))}}break;case 31:case 13:null!==(i=An(l,2))&&Qc(i,0,2),Zc(),gp(l,2)}if(null===(l=_p(n))&&tu(e,t,n,wp,a),l===r)break;r=l}null!==r&&n.stopPropagation()}else tu(e,t,n,null,a)}}function _p(e){return Cp(e=zt(e))}var wp=null;function Cp(e){if(wp=null,null!==(e=Je(e))){var t=o(e);if(null===t)e=null;else{var a=t.tag;if(13===a){if(null!==(e=c(t)))return e;e=null}else if(31===a){if(null!==(e=d(t)))return e;e=null}else if(3===a){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return wp=e,null}function Sp(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ce()){case de:return 2;case ue:return 8;case pe:case me:return 32;case he:return 268435456;default:return 32}default:return 32}}var kp=!1,Ep=null,Tp=null,Pp=null,Rp=new Map,Lp=new Map,Ap=[],zp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Op(e,t){switch(e){case"focusin":case"focusout":Ep=null;break;case"dragenter":case"dragleave":Tp=null;break;case"mouseover":case"mouseout":Pp=null;break;case"pointerover":case"pointerout":Rp.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lp.delete(t.pointerId)}}function Dp(e,t,a,n,r,l){return null===e||e.nativeEvent!==l?(e={blockedOn:t,domEventName:a,eventSystemFlags:n,nativeEvent:l,targetContainers:[r]},null!==t&&(null!==(t=Ye(t))&&vp(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function Ip(e){var t=Je(e.target);if(null!==t){var a=o(t);if(null!==a)if(13===(t=a.tag)){if(null!==(t=c(a)))return e.blockedOn=t,void qe(e.priority,function(){xp(a)})}else if(31===t){if(null!==(t=d(a)))return e.blockedOn=t,void qe(e.priority,function(){xp(a)})}else if(3===t&&a.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===a.tag?a.stateNode.containerInfo:null)}e.blockedOn=null}function Fp(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var a=_p(e.nativeEvent);if(null!==a)return null!==(t=Ye(a))&&vp(t),e.blockedOn=a,!1;var n=new(a=e.nativeEvent).constructor(a.type,a);At=n,a.target.dispatchEvent(n),At=null,t.shift()}return!0}function qp(e,t,a){Fp(e)&&a.delete(t)}function Mp(){kp=!1,null!==Ep&&Fp(Ep)&&(Ep=null),null!==Tp&&Fp(Tp)&&(Tp=null),null!==Pp&&Fp(Pp)&&(Pp=null),Rp.forEach(qp),Lp.forEach(qp)}function Up(e,t){e.blockedOn===t&&(e.blockedOn=null,kp||(kp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Mp)))}var Bp=null;function Hp(e){Bp!==e&&(Bp=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Bp===e&&(Bp=null);for(var t=0;t<e.length;t+=3){var a=e[t],n=e[t+1],r=e[t+2];if("function"!==typeof n){if(null===Cp(n||a))continue;break}var l=Ye(a);null!==l&&(e.splice(t,3),t-=3,ei(l,{pending:!0,data:r,method:a.method,action:n},n,r))}}))}function Vp(e){function t(t){return Up(t,e)}null!==Ep&&Up(Ep,e),null!==Tp&&Up(Tp,e),null!==Pp&&Up(Pp,e),Rp.forEach(t),Lp.forEach(t);for(var a=0;a<Ap.length;a++){var n=Ap[a];n.blockedOn===e&&(n.blockedOn=null)}for(;0<Ap.length&&null===(a=Ap[0]).blockedOn;)Ip(a),null===a.blockedOn&&Ap.shift();if(null!=(a=(e.ownerDocument||e).$$reactFormReplay))for(n=0;n<a.length;n+=3){var r=a[n],l=a[n+1],s=r[Be]||null;if("function"===typeof l)s||Hp(a);else if(s){var i=null;if(l&&l.hasAttribute("formAction")){if(r=l,s=l[Be]||null)i=s.formAction;else if(null!==Cp(r))continue}else i=s.action;"function"===typeof i?a[n+1]=i:(a.splice(n,3),n-=3),Hp(a)}}}function Wp(){function e(e){e.canIntercept&&"react-transition"===e.info&&e.intercept({handler:function(){return new Promise(function(e){return r=e})},focusReset:"manual",scroll:"manual"})}function t(){null!==r&&(r(),r=null),n||setTimeout(a,20)}function a(){if(!n&&!navigation.transition){var e=navigation.currentEntry;e&&null!=e.url&&navigation.navigate(e.url,{state:e.getState(),info:"react-transition",history:"replace"})}}if("object"===typeof navigation){var n=!1,r=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(a,100),function(){n=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),null!==r&&(r(),r=null)}}}function Gp(e){this._internalRoot=e}function $p(e){this._internalRoot=e}$p.prototype.render=Gp.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));hp(t.current,Gc(),e,t,null,null)},$p.prototype.unmount=Gp.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hp(e.current,2,null,e,null,null),Zc(),t[He]=null}},$p.prototype.unstable_scheduleHydration=function(e){if(e){var t=Fe();e={blockedOn:null,target:e,priority:t};for(var a=0;a<Ap.length&&0!==t&&t<Ap[a].priority;a++);Ap.splice(a,0,e),0===a&&Ip(e)}};var Qp=r.version;if("19.2.0"!==Qp)throw Error(s(527,Qp,"19.2.0"));O.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=o(e)))throw Error(s(188));return t!==e?null:e}for(var a=e,n=t;;){var r=a.return;if(null===r)break;var l=r.alternate;if(null===l){if(null!==(n=r.return)){a=n;continue}break}if(r.child===l.child){for(l=r.child;l;){if(l===a)return u(r),e;if(l===n)return u(r),t;l=l.sibling}throw Error(s(188))}if(a.return!==n.return)a=r,n=l;else{for(var i=!1,c=r.child;c;){if(c===a){i=!0,a=r,n=l;break}if(c===n){i=!0,n=r,a=l;break}c=c.sibling}if(!i){for(c=l.child;c;){if(c===a){i=!0,a=l,n=r;break}if(c===n){i=!0,n=l,a=r;break}c=c.sibling}if(!i)throw Error(s(189))}}if(a.alternate!==n)throw Error(s(190))}if(3!==a.tag)throw Error(s(188));return a.stateNode.current===a?e:t}(t),e=null===(e=null!==e?p(e):null)?null:e.stateNode};var Kp={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.2.0"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Jp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jp.isDisabled&&Jp.supportsFiber)try{ve=Jp.inject(Kp),xe=Jp}catch(Xp){}}t.createRoot=function(e,t){if(!i(e))throw Error(s(299));var a=!1,n="",r=_i,l=wi,o=Ci;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(a=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onUncaughtError&&(r=t.onUncaughtError),void 0!==t.onCaughtError&&(l=t.onCaughtError),void 0!==t.onRecoverableError&&(o=t.onRecoverableError)),t=pp(e,1,!1,null,0,a,n,null,r,l,o,Wp),e[He]=t.current,Zd(e),new Gp(t)},t.hydrateRoot=function(e,t,a){if(!i(e))throw Error(s(299));var n=!1,r="",l=_i,o=wi,c=Ci,d=null;return null!==a&&void 0!==a&&(!0===a.unstable_strictMode&&(n=!0),void 0!==a.identifierPrefix&&(r=a.identifierPrefix),void 0!==a.onUncaughtError&&(l=a.onUncaughtError),void 0!==a.onCaughtError&&(o=a.onCaughtError),void 0!==a.onRecoverableError&&(c=a.onRecoverableError),void 0!==a.formState&&(d=a.formState)),(t=pp(e,1,!0,t,0,n,r,d,l,o,c,Wp)).context=mp(null),a=t.current,(r=xl(n=De(n=Gc()))).callback=null,yl(a,r,n),a=n,t.current.lanes=a,Le(t,a),Od(t),e[He]=t.current,Zd(e),new $p(t)},t.version="19.2.0"},43:(e,t,a)=>{e.exports=a(288)},288:(e,t)=>{var a=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),h=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,v={};function x(e,t,a){this.props=e,this.context=t,this.refs=v,this.updater=a||f}function y(){}function b(e,t,a){this.props=e,this.context=t,this.refs=v,this.updater=a||f}x.prototype.isReactComponent={},x.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},x.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=x.prototype;var j=b.prototype=new y;j.constructor=b,g(j,x.prototype),j.isPureReactComponent=!0;var N=Array.isArray;function _(){}var w={H:null,A:null,T:null,S:null},C=Object.prototype.hasOwnProperty;function S(e,t,n){var r=n.ref;return{$$typeof:a,type:e,key:t,ref:void 0!==r?r:null,props:n}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===a}var E=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function P(e,t,r,l,s){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var o,c,d=!1;if(null===e)d=!0;else switch(i){case"bigint":case"string":case"number":d=!0;break;case"object":switch(e.$$typeof){case a:case n:d=!0;break;case p:return P((d=e._init)(e._payload),t,r,l,s)}}if(d)return s=s(e),d=""===l?"."+T(e,0):l,N(s)?(r="",null!=d&&(r=d.replace(E,"$&/")+"/"),P(s,t,r,"",function(e){return e})):null!=s&&(k(s)&&(o=s,c=r+(null==s.key||e&&e.key===s.key?"":(""+s.key).replace(E,"$&/")+"/")+d,s=S(o.type,c,o.props)),t.push(s)),1;d=0;var u,m=""===l?".":l+":";if(N(e))for(var f=0;f<e.length;f++)d+=P(l=e[f],t,r,i=m+T(l,f),s);else if("function"===typeof(f=null===(u=e)||"object"!==typeof u?null:"function"===typeof(u=h&&u[h]||u["@@iterator"])?u:null))for(e=f.call(e),f=0;!(l=e.next()).done;)d+=P(l=l.value,t,r,i=m+T(l,f++),s);else if("object"===i){if("function"===typeof e.then)return P(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(_,_):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,r,l,s);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return d}function R(e,t,a){if(null==e)return e;var n=[],r=0;return P(e,n,"","",function(e){return t.call(a,e,r++)}),n}function L(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var A="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},z={map:R,forEach:function(e,t,a){R(e,function(){t.apply(this,arguments)},a)},count:function(e){var t=0;return R(e,function(){t++}),t},toArray:function(e){return R(e,function(e){return e})||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};t.Activity=m,t.Children=z,t.Component=x,t.Fragment=r,t.Profiler=s,t.PureComponent=b,t.StrictMode=l,t.Suspense=d,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=w,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return w.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cacheSignal=function(){return null},t.cloneElement=function(e,t,a){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var n=g({},e.props),r=e.key;if(null!=t)for(l in void 0!==t.key&&(r=""+t.key),t)!C.call(t,l)||"key"===l||"__self"===l||"__source"===l||"ref"===l&&void 0===t.ref||(n[l]=t[l]);var l=arguments.length-2;if(1===l)n.children=a;else if(1<l){for(var s=Array(l),i=0;i<l;i++)s[i]=arguments[i+2];n.children=s}return S(e.type,r,n)},t.createContext=function(e){return(e={$$typeof:o,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:i,_context:e},e},t.createElement=function(e,t,a){var n,r={},l=null;if(null!=t)for(n in void 0!==t.key&&(l=""+t.key),t)C.call(t,n)&&"key"!==n&&"__self"!==n&&"__source"!==n&&(r[n]=t[n]);var s=arguments.length-2;if(1===s)r.children=a;else if(1<s){for(var i=Array(s),o=0;o<s;o++)i[o]=arguments[o+2];r.children=i}if(e&&e.defaultProps)for(n in s=e.defaultProps)void 0===r[n]&&(r[n]=s[n]);return S(e,l,r)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:p,_payload:{_status:-1,_result:e},_init:L}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=w.T,a={};w.T=a;try{var n=e(),r=w.S;null!==r&&r(a,n),"object"===typeof n&&null!==n&&"function"===typeof n.then&&n.then(_,A)}catch(l){A(l)}finally{null!==t&&null!==a.types&&(t.types=a.types),w.T=t}},t.unstable_useCacheRefresh=function(){return w.H.useCacheRefresh()},t.use=function(e){return w.H.use(e)},t.useActionState=function(e,t,a){return w.H.useActionState(e,t,a)},t.useCallback=function(e,t){return w.H.useCallback(e,t)},t.useContext=function(e){return w.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return w.H.useDeferredValue(e,t)},t.useEffect=function(e,t){return w.H.useEffect(e,t)},t.useEffectEvent=function(e){return w.H.useEffectEvent(e)},t.useId=function(){return w.H.useId()},t.useImperativeHandle=function(e,t,a){return w.H.useImperativeHandle(e,t,a)},t.useInsertionEffect=function(e,t){return w.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return w.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return w.H.useMemo(e,t)},t.useOptimistic=function(e,t){return w.H.useOptimistic(e,t)},t.useReducer=function(e,t,a){return w.H.useReducer(e,t,a)},t.useRef=function(e){return w.H.useRef(e)},t.useState=function(e){return w.H.useState(e)},t.useSyncExternalStore=function(e,t,a){return w.H.useSyncExternalStore(e,t,a)},t.useTransition=function(){return w.H.useTransition()},t.version="19.2.0"},391:(e,t,a)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=a(4)},579:(e,t,a)=>{e.exports=a(799)},672:(e,t,a)=>{var n=a(43);function r(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(){}var s={d:{f:l,r:function(){throw Error(r(522))},D:l,C:l,L:l,m:l,X:l,S:l,M:l},p:0,findDOMNode:null},i=Symbol.for("react.portal");var o=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,t.createPortal=function(e,t){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(r(299));return function(e,t,a){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:i,key:null==n?null:""+n,children:e,containerInfo:t,implementation:a}}(e,t,null,a)},t.flushSync=function(e){var t=o.T,a=s.p;try{if(o.T=null,s.p=2,e)return e()}finally{o.T=t,s.p=a,s.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,s.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&s.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var a=t.as,n=c(a,t.crossOrigin),r="string"===typeof t.integrity?t.integrity:void 0,l="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===a?s.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:n,integrity:r,fetchPriority:l}):"script"===a&&s.d.X(e,{crossOrigin:n,integrity:r,fetchPriority:l,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var a=c(t.as,t.crossOrigin);s.d.M(e,{crossOrigin:a,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&s.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var a=t.as,n=c(a,t.crossOrigin);s.d.L(e,a,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var a=c(t.as,t.crossOrigin);s.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:a,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else s.d.m(e)},t.requestFormReset=function(e){s.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,a){return o.H.useFormState(e,t,a)},t.useFormStatus=function(){return o.H.useHostTransitionStatus()},t.version="19.2.0"},799:(e,t)=>{var a=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function r(e,t,n){var r=null;if(void 0!==n&&(r=""+n),void 0!==t.key&&(r=""+t.key),"key"in t)for(var l in n={},t)"key"!==l&&(n[l]=t[l]);else n=t;return t=n.ref,{$$typeof:a,type:e,key:r,ref:void 0!==t?t:null,props:n}}t.Fragment=n,t.jsx=r,t.jsxs=r},853:(e,t,a)=>{e.exports=a(896)},896:(e,t)=>{function a(e,t){var a=e.length;e.push(t);e:for(;0<a;){var n=a-1>>>1,r=e[n];if(!(0<l(r,t)))break e;e[n]=t,e[a]=r,a=n}}function n(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],a=e.pop();if(a!==t){e[0]=a;e:for(var n=0,r=e.length,s=r>>>1;n<s;){var i=2*(n+1)-1,o=e[i],c=i+1,d=e[c];if(0>l(o,a))c<r&&0>l(d,o)?(e[n]=d,e[c]=a,n=c):(e[n]=o,e[i]=a,n=i);else{if(!(c<r&&0>l(d,a)))break e;e[n]=d,e[c]=a,n=c}}}return t}function l(e,t){var a=e.sortIndex-t.sortIndex;return 0!==a?a:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var i=Date,o=i.now();t.unstable_now=function(){return i.now()-o}}var c=[],d=[],u=1,p=null,m=3,h=!1,f=!1,g=!1,v=!1,x="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function j(e){for(var t=n(d);null!==t;){if(null===t.callback)r(d);else{if(!(t.startTime<=e))break;r(d),t.sortIndex=t.expirationTime,a(c,t)}t=n(d)}}function N(e){if(g=!1,j(e),!f)if(null!==n(c))f=!0,w||(w=!0,_());else{var t=n(d);null!==t&&L(N,t.startTime-e)}}var _,w=!1,C=-1,S=5,k=-1;function E(){return!!v||!(t.unstable_now()-k<S)}function T(){if(v=!1,w){var e=t.unstable_now();k=e;var a=!0;try{e:{f=!1,g&&(g=!1,y(C),C=-1),h=!0;var l=m;try{t:{for(j(e),p=n(c);null!==p&&!(p.expirationTime>e&&E());){var s=p.callback;if("function"===typeof s){p.callback=null,m=p.priorityLevel;var i=s(p.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof i){p.callback=i,j(e),a=!0;break t}p===n(c)&&r(c),j(e)}else r(c);p=n(c)}if(null!==p)a=!0;else{var o=n(d);null!==o&&L(N,o.startTime-e),a=!1}}break e}finally{p=null,m=l,h=!1}a=void 0}}finally{a?_():w=!1}}}if("function"===typeof b)_=function(){b(T)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,R=P.port2;P.port1.onmessage=T,_=function(){R.postMessage(null)}}else _=function(){x(T,0)};function L(e,a){C=x(function(){e(t.unstable_now())},a)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(e){switch(m){case 1:case 2:case 3:var t=3;break;default:t=m}var a=m;m=t;try{return e()}finally{m=a}},t.unstable_requestPaint=function(){v=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var a=m;m=e;try{return t()}finally{m=a}},t.unstable_scheduleCallback=function(e,r,l){var s=t.unstable_now();switch("object"===typeof l&&null!==l?l="number"===typeof(l=l.delay)&&0<l?s+l:s:l=s,e){case 1:var i=-1;break;case 2:i=250;break;case 5:i=1073741823;break;case 4:i=1e4;break;default:i=5e3}return e={id:u++,callback:r,priorityLevel:e,startTime:l,expirationTime:i=l+i,sortIndex:-1},l>s?(e.sortIndex=l,a(d,e),null===n(c)&&e===n(d)&&(g?(y(C),C=-1):g=!0,L(N,l-s))):(e.sortIndex=i,a(c,e),f||h||(f=!0,w||(w=!0,_()))),e},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(e){var t=m;return function(){var a=m;m=t;try{return e.apply(this,arguments)}finally{m=a}}}},950:(e,t,a)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=a(672)}},t={};function a(n){var r=t[n];if(void 0!==r)return r.exports;var l=t[n]={exports:{}};return e[n](l,l.exports,a),l.exports}a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};a.r(n),a.d(n,{hasBrowserEnv:()=>Ta,hasStandardBrowserEnv:()=>Ra,hasStandardBrowserWebWorkerEnv:()=>La,navigator:()=>Pa,origin:()=>Aa});var r=a(43),l=a(391);function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;a[n]=e[n]}return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],-1===t.indexOf(a)&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}function c(e,t,a){return(t=o(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(Object(a),!0).forEach(function(t){c(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}const p=["sri"],m=["page"],h=["page","matches"],f=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],g=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],v=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"];var x="popstate";function y(){return S(function(e,t){let{pathname:a,search:n,hash:r}=e.location;return _("",{pathname:a,search:n,hash:r},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:w(t)},null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function b(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function j(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(a){}}}function N(e,t){return{usr:e.state,key:e.key,idx:t}}function _(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3?arguments[3]:void 0;return u(u({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?C(t):t),{},{state:a,key:t&&t.key||n||Math.random().toString(36).substring(2,10)})}function w(e){let{pathname:t="/",search:a="",hash:n=""}=e;return a&&"?"!==a&&(t+="?"===a.charAt(0)?a:"?"+a),n&&"#"!==n&&(t+="#"===n.charAt(0)?n:"#"+n),t}function C(e){let t={};if(e){let a=e.indexOf("#");a>=0&&(t.hash=e.substring(a),e=e.substring(0,a));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function S(e,t,a){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:r=document.defaultView,v5Compat:l=!1}=n,s=r.history,i="POP",o=null,c=d();function d(){return(s.state||{idx:null}).idx}function p(){i="POP";let e=d(),t=null==e?null:e-c;c=e,o&&o({action:i,location:h.location,delta:t})}function m(e){return k(e)}null==c&&(c=0,s.replaceState(u(u({},s.state),{},{idx:c}),""));let h={get action(){return i},get location(){return e(r,s)},listen(e){if(o)throw new Error("A history only accepts one active listener");return r.addEventListener(x,p),o=e,()=>{r.removeEventListener(x,p),o=null}},createHref:e=>t(r,e),createURL:m,encodeLocation(e){let t=m(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){i="PUSH";let n=_(h.location,e,t);a&&a(n,e),c=d()+1;let u=N(n,c),p=h.createHref(n);try{s.pushState(u,"",p)}catch(m){if(m instanceof DOMException&&"DataCloneError"===m.name)throw m;r.location.assign(p)}l&&o&&o({action:i,location:h.location,delta:1})},replace:function(e,t){i="REPLACE";let n=_(h.location,e,t);a&&a(n,e),c=d();let r=N(n,c),u=h.createHref(n);s.replaceState(r,"",u),l&&o&&o({action:i,location:h.location,delta:0})},go:e=>s.go(e)};return h}function k(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a="http://localhost";"undefined"!==typeof window&&(a="null"!==window.location.origin?window.location.origin:window.location.href),b(a,"No window.location.(origin|href) available to create URL");let n="string"===typeof e?e:w(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=a+n),new URL(n,a)}new WeakMap;function E(e,t){return T(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function T(e,t,a,n){let r=V(("string"===typeof t?C(t):t).pathname||"/",a);if(null==r)return null;let l=P(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let a=e.length===t.length&&e.slice(0,-1).every((e,a)=>e===t[a]);return a?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(l);let s=null;for(let i=0;null==s&&i<l.length;++i){let e=H(r);s=M(l[i],e,n)}return s}function P(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=function(e,l){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r,i=arguments.length>3?arguments[3]:void 0,o={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:l,route:e};if(o.relativePath.startsWith("/")){if(!o.relativePath.startsWith(n)&&s)return;b(o.relativePath.startsWith(n),'Absolute route path "'.concat(o.relativePath,'" nested under path "').concat(n,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),o.relativePath=o.relativePath.slice(n.length)}let c=K([n,o.relativePath]),d=a.concat(o);e.children&&e.children.length>0&&(b(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(c,'".')),P(e.children,t,d,c,s)),(null!=e.path||e.index)&&t.push({path:c,score:q(c,e.index),routesMeta:d})};return e.forEach((e,t)=>{var a;if(""!==e.path&&null!==(a=e.path)&&void 0!==a&&a.includes("?"))for(let n of R(e.path))l(e,t,!0,n);else l(e,t)}),t}function R(e){let t=e.split("/");if(0===t.length)return[];let[a,...n]=t,r=a.endsWith("?"),l=a.replace(/\?$/,"");if(0===n.length)return r?[l,""]:[l];let s=R(n.join("/")),i=[];return i.push(...s.map(e=>""===e?l:[l,e].join("/"))),r&&i.push(...s),i.map(t=>e.startsWith("/")&&""===t?"/":t)}var L=/^:[\w-]+$/,A=3,z=2,O=1,D=10,I=-2,F=e=>"*"===e;function q(e,t){let a=e.split("/"),n=a.length;return a.some(F)&&(n+=I),t&&(n+=z),a.filter(e=>!F(e)).reduce((e,t)=>e+(L.test(t)?A:""===t?O:D),n)}function M(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:n}=e,r={},l="/",s=[];for(let i=0;i<n.length;++i){let e=n[i],o=i===n.length-1,c="/"===l?t:t.slice(l.length)||"/",d=U({path:e.relativePath,caseSensitive:e.caseSensitive,end:o},c),u=e.route;if(!d&&o&&a&&!n[n.length-1].route.index&&(d=U({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(r,d.params),s.push({params:r,pathname:K([l,d.pathname]),pathnameBase:J(K([l,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(l=K([l,d.pathnameBase]))}return s}function U(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[a,n]=B(e.path,e.caseSensitive,e.end),r=t.match(a);if(!r)return null;let l=r[0],s=l.replace(/(.)\/+$/,"$1"),i=r.slice(1);return{params:n.reduce((e,t,a)=>{let{paramName:n,isOptional:r}=t;if("*"===n){let e=i[a]||"";s=l.slice(0,l.length-e.length).replace(/(.)\/+$/,"$1")}const o=i[a];return e[n]=r&&!o?void 0:(o||"").replace(/%2F/g,"/"),e},{}),pathname:l,pathnameBase:s,pattern:e}}function B(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];j("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let n=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,a)=>(n.push({paramName:t,isOptional:null!=a}),a?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),r+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?r+="\\/*$":""!==e&&"/"!==e&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),n]}function H(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return j(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(t,").")),e}}function V(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let a=t.endsWith("/")?t.length-1:t.length,n=e.charAt(a);return n&&"/"!==n?null:e.slice(a)||"/"}function W(e,t,a,n){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(n),"].  Please separate it out to the `to.").concat(a,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function G(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function $(e){let t=G(e);return t.map((e,a)=>a===t.length-1?e.pathname:e.pathnameBase)}function Q(e,t,a){let n,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?n=C(e):(n=u({},e),b(!n.pathname||!n.pathname.includes("?"),W("?","pathname","search",n)),b(!n.pathname||!n.pathname.includes("#"),W("#","pathname","hash",n)),b(!n.search||!n.search.includes("#"),W("#","search","hash",n)));let l,s=""===e||""===n.pathname,i=s?"/":n.pathname;if(null==i)l=a;else{let e=t.length-1;if(!r&&i.startsWith("..")){let t=i.split("/");for(;".."===t[0];)t.shift(),e-=1;n.pathname=t.join("/")}l=e>=0?t[e]:"/"}let o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:a,search:n="",hash:r=""}="string"===typeof e?C(e):e,l=a?a.startsWith("/")?a:function(e,t){let a=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?a.length>1&&a.pop():"."!==e&&a.push(e)}),a.length>1?a.join("/"):"/"}(a,t):t;return{pathname:l,search:Y(n),hash:X(r)}}(n,l),c=i&&"/"!==i&&i.endsWith("/"),d=(s||"."===i)&&a.endsWith("/");return o.pathname.endsWith("/")||!c&&!d||(o.pathname+="/"),o}var K=e=>e.join("/").replace(/\/\/+/g,"/"),J=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Y=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",X=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function Z(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var ee=["POST","PUT","PATCH","DELETE"],te=(new Set(ee),["GET",...ee]);new Set(te),Symbol("ResetLoaderData");var ae=r.createContext(null);ae.displayName="DataRouter";var ne=r.createContext(null);ne.displayName="DataRouterState";var re=r.createContext(!1);var le=r.createContext({isTransitioning:!1});le.displayName="ViewTransition";var se=r.createContext(new Map);se.displayName="Fetchers";var ie=r.createContext(null);ie.displayName="Await";var oe=r.createContext(null);oe.displayName="Navigation";var ce=r.createContext(null);ce.displayName="Location";var de=r.createContext({outlet:null,matches:[],isDataRoute:!1});de.displayName="Route";var ue=r.createContext(null);ue.displayName="RouteError";function pe(){return null!=r.useContext(ce)}function me(){return b(pe(),"useLocation() may be used only in the context of a <Router> component."),r.useContext(ce).location}var he="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function fe(e){r.useContext(oe).static||r.useLayoutEffect(e)}function ge(){let{isDataRoute:e}=r.useContext(de);return e?function(){let{router:e}=Ce("useNavigate"),t=ke("useNavigate"),a=r.useRef(!1);fe(()=>{a.current=!0});let n=r.useCallback(async function(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};j(a.current,he),a.current&&("number"===typeof n?e.navigate(n):await e.navigate(n,u({fromRouteId:t},r)))},[e,t]);return n}():function(){b(pe(),"useNavigate() may be used only in the context of a <Router> component.");let e=r.useContext(ae),{basename:t,navigator:a}=r.useContext(oe),{matches:n}=r.useContext(de),{pathname:l}=me(),s=JSON.stringify($(n)),i=r.useRef(!1);fe(()=>{i.current=!0});let o=r.useCallback(function(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(j(i.current,he),!i.current)return;if("number"===typeof n)return void a.go(n);let o=Q(n,JSON.parse(s),l,"path"===r.relative);null==e&&"/"!==t&&(o.pathname="/"===o.pathname?t:K([t,o.pathname])),(r.replace?a.replace:a.push)(o,r.state,r)},[t,a,s,l,e]);return o}()}r.createContext(null);function ve(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:a}=r.useContext(de),{pathname:n}=me(),l=JSON.stringify($(a));return r.useMemo(()=>Q(e,JSON.parse(l),n,"path"===t),[e,l,n,t])}function xe(e,t,a,n,l){b(pe(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=r.useContext(oe),{matches:i}=r.useContext(de),o=i[i.length-1],c=o?o.params:{},d=o?o.pathname:"/",p=o?o.pathnameBase:"/",m=o&&o.route;{let e=m&&m.path||"";Pe(d,!m||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(d,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let h,f=me();if(t){var g;let e="string"===typeof t?C(t):t;b("/"===p||(null===(g=e.pathname)||void 0===g?void 0:g.startsWith(p)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(p,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),h=e}else h=f;let v=h.pathname||"/",x=v;if("/"!==p){let e=p.replace(/^\//,"").split("/");x="/"+v.replace(/^\//,"").split("/").slice(e.length).join("/")}let y=E(e,{pathname:x});j(m||null!=y,'No routes matched location "'.concat(h.pathname).concat(h.search).concat(h.hash,'" ')),j(null==y||void 0!==y[y.length-1].route.element||void 0!==y[y.length-1].route.Component||void 0!==y[y.length-1].route.lazy,'Matched leaf route at location "'.concat(h.pathname).concat(h.search).concat(h.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let N=_e(y&&y.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:K([p,s.encodeLocation?s.encodeLocation(e.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?p:K([p,s.encodeLocation?s.encodeLocation(e.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathnameBase])})),i,a,n,l);return t&&N?r.createElement(ce.Provider,{value:{location:u({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:"POP"}},N):N}function ye(){let e=Ee(),t=Z(e)?"".concat(e.status," ").concat(e.statusText):e instanceof Error?e.message:JSON.stringify(e),a=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:n},s={padding:"2px 4px",backgroundColor:n},i=null;return console.error("Error handled by React Router default ErrorBoundary:",e),i=r.createElement(r.Fragment,null,r.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),r.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",r.createElement("code",{style:s},"ErrorBoundary")," or"," ",r.createElement("code",{style:s},"errorElement")," prop on your route.")),r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),a?r.createElement("pre",{style:l},a):null,i)}var be=r.createElement(ye,null),je=class extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return void 0!==this.state.error?r.createElement(de.Provider,{value:this.props.routeContext},r.createElement(ue.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Ne(e){let{routeContext:t,match:a,children:n}=e,l=r.useContext(ae);return l&&l.static&&l.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=a.route.id),r.createElement(de.Provider,{value:t},n)}function _e(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null==e){if(!a)return null;if(a.errors)e=a.matches;else{if(0!==t.length||a.initialized||!(a.matches.length>0))return null;e=a.matches}}let l=e,s=null===a||void 0===a?void 0:a.errors;if(null!=s){let e=l.findIndex(e=>e.route.id&&void 0!==(null===s||void 0===s?void 0:s[e.route.id]));b(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(s).join(","))),l=l.slice(0,Math.min(l.length,e+1))}let i=!1,o=-1;if(a)for(let r=0;r<l.length;r++){let e=l[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(o=r),e.route.id){let{loaderData:t,errors:n}=a,r=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!n||void 0===n[e.route.id]);if(e.route.lazy||r){i=!0,l=o>=0?l.slice(0,o+1):[l[0]];break}}}return l.reduceRight((e,c,d)=>{let u,p=!1,m=null,h=null;a&&(u=s&&c.route.id?s[c.route.id]:void 0,m=c.route.errorElement||be,i&&(o<0&&0===d?(Pe("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,h=null):o===d&&(p=!0,h=c.route.hydrateFallbackElement||null)));let f=t.concat(l.slice(0,d+1)),g=()=>{let t;return t=u?m:p?h:c.route.Component?r.createElement(c.route.Component,null):c.route.element?c.route.element:e,r.createElement(Ne,{match:c,routeContext:{outlet:e,matches:f,isDataRoute:null!=a},children:t})};return a&&(c.route.ErrorBoundary||c.route.errorElement||0===d)?r.createElement(je,{location:a.location,revalidation:a.revalidation,component:m,error:u,children:g(),routeContext:{outlet:null,matches:f,isDataRoute:!0},unstable_onError:n}):g()},null)}function we(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function Ce(e){let t=r.useContext(ae);return b(t,we(e)),t}function Se(e){let t=r.useContext(ne);return b(t,we(e)),t}function ke(e){let t=function(e){let t=r.useContext(de);return b(t,we(e)),t}(e),a=t.matches[t.matches.length-1];return b(a.route.id,"".concat(e,' can only be used on routes that contain a unique "id"')),a.route.id}function Ee(){var e;let t=r.useContext(ue),a=Se("useRouteError"),n=ke("useRouteError");return void 0!==t?t:null===(e=a.errors)||void 0===e?void 0:e[n]}var Te={};function Pe(e,t,a){t||Te[e]||(Te[e]=!0,j(!1,a))}var Re={};function Le(e,t){e||Re[t]||(Re[t]=!0,console.warn(t))}r.memo(function(e){let{routes:t,future:a,state:n,unstable_onError:r}=e;return xe(t,void 0,n,r,a)});function Ae(e){let{to:t,replace:a,state:n,relative:l}=e;b(pe(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=r.useContext(oe);j(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=r.useContext(de),{pathname:o}=me(),c=ge(),d=Q(t,$(i),o,"path"===l),u=JSON.stringify(d);return r.useEffect(()=>{c(JSON.parse(u),{replace:a,state:n,relative:l})},[c,u,l,a,n]),null}function ze(e){b(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Oe(e){let{basename:t="/",children:a=null,location:n,navigationType:l="POP",navigator:s,static:i=!1}=e;b(!pe(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),c=r.useMemo(()=>({basename:o,navigator:s,static:i,future:{}}),[o,s,i]);"string"===typeof n&&(n=C(n));let{pathname:d="/",search:u="",hash:p="",state:m=null,key:h="default"}=n,f=r.useMemo(()=>{let e=V(d,o);return null==e?null:{location:{pathname:e,search:u,hash:p,state:m,key:h},navigationType:l}},[o,d,u,p,m,h,l]);return j(null!=f,'<Router basename="'.concat(o,'"> is not able to match the URL "').concat(d).concat(u).concat(p,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==f?null:r.createElement(oe.Provider,{value:c},r.createElement(ce.Provider,{children:a,value:f}))}function De(e){let{children:t,location:a}=e;return xe(Ie(t),a)}r.Component;function Ie(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=[];return r.Children.forEach(e,(e,n)=>{if(!r.isValidElement(e))return;let l=[...t,n];if(e.type===r.Fragment)return void a.push.apply(a,Ie(e.props.children,l));b(e.type===ze,"[".concat("string"===typeof e.type?e.type:e.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),b(!e.props.index||!e.props.children,"An index route cannot have child routes.");let s={id:e.props.id||l.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,middleware:e.props.middleware,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(s.children=Ie(e.props.children,l)),a.push(s)}),a}var Fe="get",qe="application/x-www-form-urlencoded";function Me(e){return null!=e&&"string"===typeof e.tagName}var Ue=null;var Be=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function He(e){return null==e||Be.has(e)?e:(j(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(qe,'"')),null)}function Ve(e,t){let a,n,r,l,s;if(Me(i=e)&&"form"===i.tagName.toLowerCase()){let s=e.getAttribute("action");n=s?V(s,t):null,a=e.getAttribute("method")||Fe,r=He(e.getAttribute("enctype"))||qe,l=new FormData(e)}else if(function(e){return Me(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Me(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let s=e.form;if(null==s)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let i=e.getAttribute("formaction")||s.getAttribute("action");if(n=i?V(i,t):null,a=e.getAttribute("formmethod")||s.getAttribute("method")||Fe,r=He(e.getAttribute("formenctype"))||He(s.getAttribute("enctype"))||qe,l=new FormData(s,e),!function(){if(null===Ue)try{new FormData(document.createElement("form"),0),Ue=!1}catch(e){Ue=!0}return Ue}()){let{name:t,type:a,value:n}=e;if("image"===a){let e=t?"".concat(t,"."):"";l.append("".concat(e,"x"),"0"),l.append("".concat(e,"y"),"0")}else t&&l.append(t,n)}}else{if(Me(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');a=Fe,n=null,r=qe,s=e}var i;return l&&"text/plain"===r&&(s=l,l=void 0),{action:n,method:a.toLowerCase(),encType:r,formData:l,body:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;function We(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}Symbol("SingleFetchRedirect");function Ge(e,t,a){let n="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===n.pathname?n.pathname="_root.".concat(a):t&&"/"===V(n.pathname,t)?n.pathname="".concat(t.replace(/\/$/,""),"/_root.").concat(a):n.pathname="".concat(n.pathname.replace(/\/$/,""),".").concat(a),n}async function $e(e,t){if(e.id in t)return t[e.id];try{let a=await import(e.module);return t[e.id]=a,a}catch(a){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(a),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Qe(e){return null!=e&&"string"===typeof e.page}function Ke(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function Je(e,t,a,n,r,l){let s=(e,t)=>!a[t]||e.route.id!==a[t].route.id,i=(e,t)=>{var n;return a[t].pathname!==e.pathname||(null===(n=a[t].route.path)||void 0===n?void 0:n.endsWith("*"))&&a[t].params["*"]!==e.params["*"]};return"assets"===l?t.filter((e,t)=>s(e,t)||i(e,t)):"data"===l?t.filter((t,l)=>{let o=n.routes[t.route.id];if(!o||!o.hasLoader)return!1;if(s(t,l)||i(t,l))return!0;if(t.route.shouldRevalidate){var c;let n=t.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:(null===(c=a[0])||void 0===c?void 0:c.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof n)return n}return!0}):[]}function Ye(e,t){let{includeHydrateFallback:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n=e.map(e=>{let n=t.routes[e.route.id];if(!n)return[];let r=[n.module];return n.clientActionModule&&(r=r.concat(n.clientActionModule)),n.clientLoaderModule&&(r=r.concat(n.clientLoaderModule)),a&&n.hydrateFallbackModule&&(r=r.concat(n.hydrateFallbackModule)),n.imports&&(r=r.concat(n.imports)),r}).flat(1),[...new Set(n)];var n}function Xe(e,t){let a=new Set,n=new Set(t);return e.reduce((e,r)=>{if(t&&!Qe(r)&&"script"===r.as&&r.href&&n.has(r.href))return e;let l=JSON.stringify(function(e){let t={},a=Object.keys(e).sort();for(let n of a)t[n]=e[n];return t}(r));return a.has(l)||(a.add(l),e.push({key:l,link:r})),e},[])}function Ze(e,t){return"lazy"===e.mode&&!0===t}function et(){let e=r.useContext(ae);return We(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function tt(){let e=r.useContext(ne);return We(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var at=r.createContext(void 0);function nt(){let e=r.useContext(at);return We(e,"You must render this element inside a <HydratedRouter> element"),e}function rt(e,t){return a=>{e&&e(a),a.defaultPrevented||t(a)}}function lt(e,t,a){if(a&&!ct)return[e[0]];if(t){let a=e.findIndex(e=>void 0!==t[e.route.id]);return e.slice(0,a+1)}return e}at.displayName="FrameworkContext";function st(e){let{page:t}=e,a=s(e,m),{router:n}=et(),l=r.useMemo(()=>E(n.routes,t,n.basename),[n.routes,t,n.basename]);return l?r.createElement(ot,u({page:t,matches:l},a)):null}function it(e){let{manifest:t,routeModules:a}=nt(),[n,l]=r.useState([]);return r.useEffect(()=>{let n=!1;return async function(e,t,a){return Xe((await Promise.all(e.map(async e=>{let n=t.routes[e.route.id];if(n){let e=await $e(n,a);return e.links?e.links():[]}return[]}))).flat(1).filter(Ke).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?u(u({},e),{},{rel:"prefetch",as:"style"}):u(u({},e),{},{rel:"prefetch"})))}(e,t,a).then(e=>{n||l(e)}),()=>{n=!0}},[e,t,a]),n}function ot(e){let{page:t,matches:a}=e,n=s(e,h),l=me(),{manifest:i,routeModules:o}=nt(),{basename:c}=et(),{loaderData:d,matches:p}=tt(),m=r.useMemo(()=>Je(t,a,p,i,l,"data"),[t,a,p,i,l]),f=r.useMemo(()=>Je(t,a,p,i,l,"assets"),[t,a,p,i,l]),g=r.useMemo(()=>{if(t===l.pathname+l.search+l.hash)return[];let e=new Set,n=!1;if(a.forEach(t=>{var a;let r=i.routes[t.route.id];r&&r.hasLoader&&(!m.some(e=>e.route.id===t.route.id)&&t.route.id in d&&null!==(a=o[t.route.id])&&void 0!==a&&a.shouldRevalidate||r.hasClientLoader?n=!0:e.add(t.route.id))}),0===e.size)return[];let r=Ge(t,c,"data");return n&&e.size>0&&r.searchParams.set("_routes",a.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[r.pathname+r.search]},[c,d,l,i,m,a,t,o]),v=r.useMemo(()=>Ye(f,i),[f,i]),x=it(f);return r.createElement(r.Fragment,null,g.map(e=>r.createElement("link",u({key:e,rel:"prefetch",as:"fetch",href:e},n))),v.map(e=>r.createElement("link",u({key:e,rel:"modulepreload",href:e},n))),x.map(e=>{let{key:t,link:a}=e;return r.createElement("link",u({key:t,nonce:n.nonce},a))}))}var ct=!1;function dt(e){let{manifest:t,serverHandoffString:a,isSpaMode:n,renderMeta:l,routeDiscovery:i,ssr:o}=nt(),{router:c,static:d,staticContext:m}=et(),{matches:h}=tt(),f=r.useContext(re),g=Ze(i,o);l&&(l.didRenderScripts=!0);let v=lt(h,null,n);r.useEffect(()=>{ct=!0},[]);let x=r.useMemo(()=>{var n;if(f)return null;let l=m?"window.__reactRouterContext = ".concat(a,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",i=d?"".concat(null!==(n=t.hmr)&&void 0!==n&&n.runtime?"import ".concat(JSON.stringify(t.hmr.runtime),";"):"").concat(g?"":"import ".concat(JSON.stringify(t.url)),";\n").concat(v.map((e,a)=>{let n="route".concat(a),r=t.routes[e.route.id];We(r,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:l,clientLoaderModule:s,clientMiddlewareModule:i,hydrateFallbackModule:o,module:c}=r,d=[...l?[{module:l,varName:"".concat(n,"_clientAction")}]:[],...s?[{module:s,varName:"".concat(n,"_clientLoader")}]:[],...i?[{module:i,varName:"".concat(n,"_clientMiddleware")}]:[],...o?[{module:o,varName:"".concat(n,"_HydrateFallback")}]:[],{module:c,varName:"".concat(n,"_main")}];return 1===d.length?"import * as ".concat(n," from ").concat(JSON.stringify(c),";"):[d.map(e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";')).join("\n"),"const ".concat(n," = {").concat(d.map(e=>"...".concat(e.varName)).join(","),"};")].join("\n")}).join("\n"),"\n  ").concat(g?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let{sri:a}=e,n=s(e,p),r=new Set(t.state.matches.map(e=>e.route.id)),l=t.state.location.pathname.split("/").filter(Boolean),i=["/"];for(l.pop();l.length>0;)i.push("/".concat(l.join("/"))),l.pop();i.forEach(e=>{let a=E(t.routes,e,t.basename);a&&a.forEach(e=>r.add(e.route.id))});let o=[...r].reduce((e,t)=>Object.assign(e,{[t]:n.routes[t]}),{});return u(u({},n),{},{routes:o,sri:!!a||void 0})}(t,c),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(v.map((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t)).join(","),"};\n\nimport(").concat(JSON.stringify(t.entry.module),");"):" ";return r.createElement(r.Fragment,null,r.createElement("script",u(u({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:l},type:void 0})),r.createElement("script",u(u({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:i},type:"module",async:!0})))},[]),y=ct||f?[]:(b=t.entry.imports.concat(Ye(v,t,{includeHydrateFallback:!0})),[...new Set(b)]);var b;let j="object"===typeof t.sri?t.sri:{};return Le(!f,"The <Scripts /> element is a no-op when using RSC and can be safely removed."),ct||f?null:r.createElement(r.Fragment,null,"object"===typeof t.sri?r.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:j})}}):null,g?null:r.createElement("link",{rel:"modulepreload",href:t.url,crossOrigin:e.crossOrigin,integrity:j[t.url],suppressHydrationWarning:!0}),r.createElement("link",{rel:"modulepreload",href:t.entry.module,crossOrigin:e.crossOrigin,integrity:j[t.entry.module],suppressHydrationWarning:!0}),y.map(t=>r.createElement("link",{key:t,rel:"modulepreload",href:t,crossOrigin:e.crossOrigin,integrity:j[t],suppressHydrationWarning:!0})),x)}function ut(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return e=>{t.forEach(t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)})}}r.Component;function pt(e){let{error:t,isOutsideRemixApp:a}=e;console.error(t);let n,l=r.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(Z(t))return r.createElement(mt,{title:"Unhandled Thrown Response!"},r.createElement("h1",{style:{fontSize:"24px"}},t.status," ",t.statusText),l);if(t instanceof Error)n=t;else{let e=null==t?"Unknown Error":"object"===typeof t&&"toString"in t?t.toString():JSON.stringify(t);n=new Error(e)}return r.createElement(mt,{title:"Application Error!",isOutsideRemixApp:a},r.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),r.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},n.stack),l)}function mt(e){var t;let{title:a,renderScripts:n,isOutsideRemixApp:l,children:s}=e,{routeModules:i}=nt();return null!==(t=i.root)&&void 0!==t&&t.Layout&&!l?s:r.createElement("html",{lang:"en"},r.createElement("head",null,r.createElement("meta",{charSet:"utf-8"}),r.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),r.createElement("title",null,a)),r.createElement("body",null,r.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},s,n?r.createElement(dt,null):null)))}var ht="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{ht&&(window.__reactRouterVersion="7.9.4")}catch(Mr){}function ft(e){let{basename:t,children:a,window:n}=e,l=r.useRef();null==l.current&&(l.current=y({window:n,v5Compat:!0}));let s=l.current,[i,o]=r.useState({action:s.action,location:s.location}),c=r.useCallback(e=>{r.startTransition(()=>o(e))},[o]);return r.useLayoutEffect(()=>s.listen(c),[s,c]),r.createElement(Oe,{basename:t,children:a,location:i.location,navigationType:i.action,navigator:s})}var gt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vt=r.forwardRef(function(e,t){let a,{onClick:n,discover:l="render",prefetch:i="none",relative:o,reloadDocument:c,replace:d,state:p,target:m,to:h,preventScrollReset:g,viewTransition:v}=e,x=s(e,f),{basename:y}=r.useContext(oe),N="string"===typeof h&&gt.test(h),_=!1;if("string"===typeof h&&N&&(a=h,ht))try{let e=new URL(window.location.href),t=h.startsWith("//")?new URL(e.protocol+h):new URL(h),a=V(t.pathname,y);t.origin===e.origin&&null!=a?h=a+t.search+t.hash:_=!0}catch(Mr){j(!1,'<Link to="'.concat(h,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}let C=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};b(pe(),"useHref() may be used only in the context of a <Router> component.");let{basename:a,navigator:n}=r.useContext(oe),{hash:l,pathname:s,search:i}=ve(e,{relative:t}),o=s;return"/"!==a&&(o="/"===s?a:K([a,s])),n.createHref({pathname:o,search:i,hash:l})}(h,{relative:o}),[S,k,E]=function(e,t){let a=r.useContext(at),[n,l]=r.useState(!1),[s,i]=r.useState(!1),{onFocus:o,onBlur:c,onMouseEnter:d,onMouseLeave:u,onTouchStart:p}=t,m=r.useRef(null);r.useEffect(()=>{if("render"===e&&i(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{i(e.isIntersecting)})},{threshold:.5});return m.current&&e.observe(m.current),()=>{e.disconnect()}}},[e]),r.useEffect(()=>{if(n){let e=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(e)}}},[n]);let h=()=>{l(!0)},f=()=>{l(!1),i(!1)};return a?"intent"!==e?[s,m,{}]:[s,m,{onFocus:rt(o,h),onBlur:rt(c,f),onMouseEnter:rt(d,h),onMouseLeave:rt(u,f),onTouchStart:rt(p,h)}]:[!1,m,{}]}(i,x),T=function(e){let{target:t,replace:a,state:n,preventScrollReset:l,relative:s,viewTransition:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=ge(),c=me(),d=ve(e,{relative:s});return r.useCallback(r=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(r,t)){r.preventDefault();let t=void 0!==a?a:w(c)===w(d);o(e,{replace:t,state:n,preventScrollReset:l,relative:s,viewTransition:i})}},[c,o,d,a,n,t,e,l,s,i])}(h,{replace:d,state:p,target:m,preventScrollReset:g,relative:o,viewTransition:v});let P=r.createElement("a",u(u(u({},x),E),{},{href:a||C,onClick:_||c?n:function(e){n&&n(e),e.defaultPrevented||T(e)},ref:ut(t,k),target:m,"data-discover":N||"render"!==l?void 0:"true"}));return S&&!N?r.createElement(r.Fragment,null,P,r.createElement(st,{page:C})):P});vt.displayName="Link",r.forwardRef(function(e,t){let{"aria-current":a="page",caseSensitive:n=!1,className:l="",end:i=!1,style:o,to:c,viewTransition:d,children:p}=e,m=s(e,g),h=ve(c,{relative:m.relative}),f=me(),v=r.useContext(ne),{navigator:x,basename:y}=r.useContext(oe),j=null!=v&&function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.useContext(le);b(null!=a,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=bt("useViewTransitionState"),l=ve(e,{relative:t});if(!a.isTransitioning)return!1;let s=V(a.currentLocation.pathname,n)||a.currentLocation.pathname,i=V(a.nextLocation.pathname,n)||a.nextLocation.pathname;return null!=U(l.pathname,i)||null!=U(l.pathname,s)}(h)&&!0===d,N=x.encodeLocation?x.encodeLocation(h).pathname:h.pathname,_=f.pathname,w=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;n||(_=_.toLowerCase(),w=w?w.toLowerCase():null,N=N.toLowerCase()),w&&y&&(w=V(w,y)||w);const C="/"!==N&&N.endsWith("/")?N.length-1:N.length;let S,k=_===N||!i&&_.startsWith(N)&&"/"===_.charAt(C),E=null!=w&&(w===N||!i&&w.startsWith(N)&&"/"===w.charAt(N.length)),T={isActive:k,isPending:E,isTransitioning:j},P=k?a:void 0;S="function"===typeof l?l(T):[l,k?"active":null,E?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let R="function"===typeof o?o(T):o;return r.createElement(vt,u(u({},m),{},{"aria-current":P,className:S,ref:t,style:R,to:c,viewTransition:d}),"function"===typeof p?p(T):p)}).displayName="NavLink";var xt=r.forwardRef((e,t)=>{let{discover:a="render",fetcherKey:n,navigate:l,reloadDocument:i,replace:o,state:c,method:d=Fe,action:p,onSubmit:m,relative:h,preventScrollReset:f,viewTransition:g}=e,x=s(e,v),y=_t(),j=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:a}=r.useContext(oe),n=r.useContext(de);b(n,"useFormAction must be used inside a RouteContext");let[l]=n.matches.slice(-1),s=u({},ve(e||".",{relative:t})),i=me();if(null==e){s.search=i.search;let e=new URLSearchParams(s.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let a=e.toString();s.search=a?"?".concat(a):""}}e&&"."!==e||!l.route.index||(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index");"/"!==a&&(s.pathname="/"===s.pathname?a:K([a,s.pathname]));return w(s)}(p,{relative:h}),N="get"===d.toLowerCase()?"get":"post",_="string"===typeof p&&gt.test(p);return r.createElement("form",u(u({ref:t,method:N,action:j,onSubmit:i?m:e=>{if(m&&m(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,a=(null===t||void 0===t?void 0:t.getAttribute("formmethod"))||d;y(t||e.currentTarget,{fetcherKey:n,method:a,navigate:l,replace:o,state:c,relative:h,preventScrollReset:f,viewTransition:g})}},x),{},{"data-discover":_||"render"!==a?void 0:"true"}))});function yt(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function bt(e){let t=r.useContext(ae);return b(t,yt(e)),t}xt.displayName="Form";var jt=0,Nt=()=>"__".concat(String(++jt),"__");function _t(){let{router:e}=bt("useSubmit"),{basename:t}=r.useContext(oe),a=ke("useRouteId");return r.useCallback(async function(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:l,method:s,encType:i,formData:o,body:c}=Ve(n,t);if(!1===r.navigate){let t=r.fetcherKey||Nt();await e.fetch(t,a,r.action||l,{preventScrollReset:r.preventScrollReset,formData:o,body:c,formMethod:r.method||s,formEncType:r.encType||i,flushSync:r.flushSync})}else await e.navigate(r.action||l,{preventScrollReset:r.preventScrollReset,formData:o,body:c,formMethod:r.method||s,formEncType:r.encType||i,replace:r.replace,state:r.state,fromRouteId:a,flushSync:r.flushSync,viewTransition:r.viewTransition})},[e,t,a])}function wt(e,t){return function(){return e.apply(t,arguments)}}const{toString:Ct}=Object.prototype,{getPrototypeOf:St}=Object,{iterator:kt,toStringTag:Et}=Symbol,Tt=(Pt=Object.create(null),e=>{const t=Ct.call(e);return Pt[t]||(Pt[t]=t.slice(8,-1).toLowerCase())});var Pt;const Rt=e=>(e=e.toLowerCase(),t=>Tt(t)===e),Lt=e=>t=>typeof t===e,{isArray:At}=Array,zt=Lt("undefined");function Ot(e){return null!==e&&!zt(e)&&null!==e.constructor&&!zt(e.constructor)&&Ft(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Dt=Rt("ArrayBuffer");const It=Lt("string"),Ft=Lt("function"),qt=Lt("number"),Mt=e=>null!==e&&"object"===typeof e,Ut=e=>{if("object"!==Tt(e))return!1;const t=St(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Et in e)&&!(kt in e)},Bt=Rt("Date"),Ht=Rt("File"),Vt=Rt("Blob"),Wt=Rt("FileList"),Gt=Rt("URLSearchParams"),[$t,Qt,Kt,Jt]=["ReadableStream","Request","Response","Headers"].map(Rt);function Yt(e,t){let a,n,{allOwnKeys:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),At(e))for(a=0,n=e.length;a<n;a++)t.call(null,e[a],a,e);else{if(Ot(e))return;const n=r?Object.getOwnPropertyNames(e):Object.keys(e),l=n.length;let s;for(a=0;a<l;a++)s=n[a],t.call(null,e[s],s,e)}}function Xt(e,t){if(Ot(e))return null;t=t.toLowerCase();const a=Object.keys(e);let n,r=a.length;for(;r-- >0;)if(n=a[r],t===n.toLowerCase())return n;return null}const Zt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,ea=e=>!zt(e)&&e!==Zt;const ta=(aa="undefined"!==typeof Uint8Array&&St(Uint8Array),e=>aa&&e instanceof aa);var aa;const na=Rt("HTMLFormElement"),ra=(e=>{let{hasOwnProperty:t}=e;return(e,a)=>t.call(e,a)})(Object.prototype),la=Rt("RegExp"),sa=(e,t)=>{const a=Object.getOwnPropertyDescriptors(e),n={};Yt(a,(a,r)=>{let l;!1!==(l=t(a,r,e))&&(n[r]=l||a)}),Object.defineProperties(e,n)};const ia=Rt("AsyncFunction"),oa=((e,t)=>{return e?setImmediate:t?(a="axios@".concat(Math.random()),n=[],Zt.addEventListener("message",e=>{let{source:t,data:r}=e;t===Zt&&r===a&&n.length&&n.shift()()},!1),e=>{n.push(e),Zt.postMessage(a,"*")}):e=>setTimeout(e);var a,n})("function"===typeof setImmediate,Ft(Zt.postMessage)),ca="undefined"!==typeof queueMicrotask?queueMicrotask.bind(Zt):"undefined"!==typeof process&&process.nextTick||oa,da={isArray:At,isArrayBuffer:Dt,isBuffer:Ot,isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||Ft(e.append)&&("formdata"===(t=Tt(e))||"object"===t&&Ft(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Dt(e.buffer),t},isString:It,isNumber:qt,isBoolean:e=>!0===e||!1===e,isObject:Mt,isPlainObject:Ut,isEmptyObject:e=>{if(!Mt(e)||Ot(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(Mr){return!1}},isReadableStream:$t,isRequest:Qt,isResponse:Kt,isHeaders:Jt,isUndefined:zt,isDate:Bt,isFile:Ht,isBlob:Vt,isRegExp:la,isFunction:Ft,isStream:e=>Mt(e)&&Ft(e.pipe),isURLSearchParams:Gt,isTypedArray:ta,isFileList:Wt,forEach:Yt,merge:function e(){const{caseless:t,skipUndefined:a}=ea(this)&&this||{},n={},r=(r,l)=>{const s=t&&Xt(n,l)||l;Ut(n[s])&&Ut(r)?n[s]=e(n[s],r):Ut(r)?n[s]=e({},r):At(r)?n[s]=r.slice():a&&zt(r)||(n[s]=r)};for(let l=0,s=arguments.length;l<s;l++)arguments[l]&&Yt(arguments[l],r);return n},extend:function(e,t,a){let{allOwnKeys:n}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Yt(t,(t,n)=>{a&&Ft(t)?e[n]=wt(t,a):e[n]=t},{allOwnKeys:n}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,a,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),a&&Object.assign(e.prototype,a)},toFlatObject:(e,t,a,n)=>{let r,l,s;const i={};if(t=t||{},null==e)return t;do{for(r=Object.getOwnPropertyNames(e),l=r.length;l-- >0;)s=r[l],n&&!n(s,e,t)||i[s]||(t[s]=e[s],i[s]=!0);e=!1!==a&&St(e)}while(e&&(!a||a(e,t))&&e!==Object.prototype);return t},kindOf:Tt,kindOfTest:Rt,endsWith:(e,t,a)=>{e=String(e),(void 0===a||a>e.length)&&(a=e.length),a-=t.length;const n=e.indexOf(t,a);return-1!==n&&n===a},toArray:e=>{if(!e)return null;if(At(e))return e;let t=e.length;if(!qt(t))return null;const a=new Array(t);for(;t-- >0;)a[t]=e[t];return a},forEachEntry:(e,t)=>{const a=(e&&e[kt]).call(e);let n;for(;(n=a.next())&&!n.done;){const a=n.value;t.call(e,a[0],a[1])}},matchAll:(e,t)=>{let a;const n=[];for(;null!==(a=e.exec(t));)n.push(a);return n},isHTMLForm:na,hasOwnProperty:ra,hasOwnProp:ra,reduceDescriptors:sa,freezeMethods:e=>{sa(e,(t,a)=>{if(Ft(e)&&-1!==["arguments","caller","callee"].indexOf(a))return!1;const n=e[a];Ft(n)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")}))})},toObjectSet:(e,t)=>{const a={},n=e=>{e.forEach(e=>{a[e]=!0})};return At(e)?n(e):n(String(e).split(t)),a},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,a){return t.toUpperCase()+a}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:Xt,global:Zt,isContextDefined:ea,isSpecCompliantForm:function(e){return!!(e&&Ft(e.append)&&"FormData"===e[Et]&&e[kt])},toJSONObject:e=>{const t=new Array(10),a=(e,n)=>{if(Mt(e)){if(t.indexOf(e)>=0)return;if(Ot(e))return e;if(!("toJSON"in e)){t[n]=e;const r=At(e)?[]:{};return Yt(e,(e,t)=>{const l=a(e,n+1);!zt(l)&&(r[t]=l)}),t[n]=void 0,r}}return e};return a(e,0)},isAsyncFn:ia,isThenable:e=>e&&(Mt(e)||Ft(e))&&Ft(e.then)&&Ft(e.catch),setImmediate:oa,asap:ca,isIterable:e=>null!=e&&Ft(e[kt])};function ua(e,t,a,n,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),a&&(this.config=a),n&&(this.request=n),r&&(this.response=r,this.status=r.status?r.status:null)}da.inherits(ua,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:da.toJSONObject(this.config),code:this.code,status:this.status}}});const pa=ua.prototype,ma={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{ma[e]={value:e}}),Object.defineProperties(ua,ma),Object.defineProperty(pa,"isAxiosError",{value:!0}),ua.from=(e,t,a,n,r,l)=>{const s=Object.create(pa);da.toFlatObject(e,s,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e);const i=e&&e.message?e.message:"Error",o=null==t&&e?e.code:t;return ua.call(s,i,o,a,n,r),e&&null==s.cause&&Object.defineProperty(s,"cause",{value:e,configurable:!0}),s.name=e&&e.name||"Error",l&&Object.assign(s,l),s};const ha=ua;function fa(e){return da.isPlainObject(e)||da.isArray(e)}function ga(e){return da.endsWith(e,"[]")?e.slice(0,-2):e}function va(e,t,a){return e?e.concat(t).map(function(e,t){return e=ga(e),!a&&t?"["+e+"]":e}).join(a?".":""):t}const xa=da.toFlatObject(da,{},null,function(e){return/^is[A-Z]/.test(e)});const ya=function(e,t,a){if(!da.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const n=(a=da.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!da.isUndefined(t[e])})).metaTokens,r=a.visitor||c,l=a.dots,s=a.indexes,i=(a.Blob||"undefined"!==typeof Blob&&Blob)&&da.isSpecCompliantForm(t);if(!da.isFunction(r))throw new TypeError("visitor must be a function");function o(e){if(null===e)return"";if(da.isDate(e))return e.toISOString();if(da.isBoolean(e))return e.toString();if(!i&&da.isBlob(e))throw new ha("Blob is not supported. Use a Buffer instead.");return da.isArrayBuffer(e)||da.isTypedArray(e)?i&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,a,r){let i=e;if(e&&!r&&"object"===typeof e)if(da.endsWith(a,"{}"))a=n?a:a.slice(0,-2),e=JSON.stringify(e);else if(da.isArray(e)&&function(e){return da.isArray(e)&&!e.some(fa)}(e)||(da.isFileList(e)||da.endsWith(a,"[]"))&&(i=da.toArray(e)))return a=ga(a),i.forEach(function(e,n){!da.isUndefined(e)&&null!==e&&t.append(!0===s?va([a],n,l):null===s?a:a+"[]",o(e))}),!1;return!!fa(e)||(t.append(va(r,a,l),o(e)),!1)}const d=[],u=Object.assign(xa,{defaultVisitor:c,convertValue:o,isVisitable:fa});if(!da.isObject(e))throw new TypeError("data must be an object");return function e(a,n){if(!da.isUndefined(a)){if(-1!==d.indexOf(a))throw Error("Circular reference detected in "+n.join("."));d.push(a),da.forEach(a,function(a,l){!0===(!(da.isUndefined(a)||null===a)&&r.call(t,a,da.isString(l)?l.trim():l,n,u))&&e(a,n?n.concat(l):[l])}),d.pop()}}(e),t};function ba(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function ja(e,t){this._pairs=[],e&&ya(e,this,t)}const Na=ja.prototype;Na.append=function(e,t){this._pairs.push([e,t])},Na.toString=function(e){const t=e?function(t){return e.call(this,t,ba)}:ba;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};const _a=ja;function wa(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Ca(e,t,a){if(!t)return e;const n=a&&a.encode||wa;da.isFunction(a)&&(a={serialize:a});const r=a&&a.serialize;let l;if(l=r?r(t,a):da.isURLSearchParams(t)?t.toString():new _a(t,a).toString(n),l){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+l}return e}const Sa=class{constructor(){this.handlers=[]}use(e,t,a){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!a&&a.synchronous,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){da.forEach(this.handlers,function(t){null!==t&&e(t)})}},ka={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ea={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:_a,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Ta="undefined"!==typeof window&&"undefined"!==typeof document,Pa="object"===typeof navigator&&navigator||void 0,Ra=Ta&&(!Pa||["ReactNative","NativeScript","NS"].indexOf(Pa.product)<0),La="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,Aa=Ta&&window.location.href||"http://localhost",za=u(u({},n),Ea);const Oa=function(e){function t(e,a,n,r){let l=e[r++];if("__proto__"===l)return!0;const s=Number.isFinite(+l),i=r>=e.length;if(l=!l&&da.isArray(n)?n.length:l,i)return da.hasOwnProp(n,l)?n[l]=[n[l],a]:n[l]=a,!s;n[l]&&da.isObject(n[l])||(n[l]=[]);return t(e,a,n[l],r)&&da.isArray(n[l])&&(n[l]=function(e){const t={},a=Object.keys(e);let n;const r=a.length;let l;for(n=0;n<r;n++)l=a[n],t[l]=e[l];return t}(n[l])),!s}if(da.isFormData(e)&&da.isFunction(e.entries)){const a={};return da.forEachEntry(e,(e,n)=>{t(function(e){return da.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),n,a,0)}),a}return null};const Da={transitional:ka,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const a=t.getContentType()||"",n=a.indexOf("application/json")>-1,r=da.isObject(e);r&&da.isHTMLForm(e)&&(e=new FormData(e));if(da.isFormData(e))return n?JSON.stringify(Oa(e)):e;if(da.isArrayBuffer(e)||da.isBuffer(e)||da.isStream(e)||da.isFile(e)||da.isBlob(e)||da.isReadableStream(e))return e;if(da.isArrayBufferView(e))return e.buffer;if(da.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(r){if(a.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return ya(e,new za.classes.URLSearchParams,u({visitor:function(e,t,a,n){return za.isNode&&da.isBuffer(e)?(this.append(t,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((l=da.isFileList(e))||a.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return ya(l?{"files[]":e}:e,t&&new t,this.formSerializer)}}return r||n?(t.setContentType("application/json",!1),function(e,t,a){if(da.isString(e))try{return(t||JSON.parse)(e),da.trim(e)}catch(Mr){if("SyntaxError"!==Mr.name)throw Mr}return(a||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Da.transitional,a=t&&t.forcedJSONParsing,n="json"===this.responseType;if(da.isResponse(e)||da.isReadableStream(e))return e;if(e&&da.isString(e)&&(a&&!this.responseType||n)){const a=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e,this.parseReviver)}catch(Mr){if(a){if("SyntaxError"===Mr.name)throw ha.from(Mr,ha.ERR_BAD_RESPONSE,this,null,this.response);throw Mr}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:za.classes.FormData,Blob:za.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};da.forEach(["delete","get","head","post","put","patch"],e=>{Da.headers[e]={}});const Ia=Da,Fa=da.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),qa=Symbol("internals");function Ma(e){return e&&String(e).trim().toLowerCase()}function Ua(e){return!1===e||null==e?e:da.isArray(e)?e.map(Ua):String(e)}function Ba(e,t,a,n,r){return da.isFunction(n)?n.call(this,t,a):(r&&(t=a),da.isString(t)?da.isString(n)?-1!==t.indexOf(n):da.isRegExp(n)?n.test(t):void 0:void 0)}class Ha{constructor(e){e&&this.set(e)}set(e,t,a){const n=this;function r(e,t,a){const r=Ma(t);if(!r)throw new Error("header name must be a non-empty string");const l=da.findKey(n,r);(!l||void 0===n[l]||!0===a||void 0===a&&!1!==n[l])&&(n[l||t]=Ua(e))}const l=(e,t)=>da.forEach(e,(e,a)=>r(e,a,t));if(da.isPlainObject(e)||e instanceof this.constructor)l(e,t);else if(da.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))l((e=>{const t={};let a,n,r;return e&&e.split("\n").forEach(function(e){r=e.indexOf(":"),a=e.substring(0,r).trim().toLowerCase(),n=e.substring(r+1).trim(),!a||t[a]&&Fa[a]||("set-cookie"===a?t[a]?t[a].push(n):t[a]=[n]:t[a]=t[a]?t[a]+", "+n:n)}),t})(e),t);else if(da.isObject(e)&&da.isIterable(e)){let a,n,r={};for(const t of e){if(!da.isArray(t))throw TypeError("Object iterator must return a key-value pair");r[n=t[0]]=(a=r[n])?da.isArray(a)?[...a,t[1]]:[a,t[1]]:t[1]}l(r,t)}else null!=e&&r(t,e,a);return this}get(e,t){if(e=Ma(e)){const a=da.findKey(this,e);if(a){const e=this[a];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=a.exec(e);)t[n[1]]=n[2];return t}(e);if(da.isFunction(t))return t.call(this,e,a);if(da.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Ma(e)){const a=da.findKey(this,e);return!(!a||void 0===this[a]||t&&!Ba(0,this[a],a,t))}return!1}delete(e,t){const a=this;let n=!1;function r(e){if(e=Ma(e)){const r=da.findKey(a,e);!r||t&&!Ba(0,a[r],r,t)||(delete a[r],n=!0)}}return da.isArray(e)?e.forEach(r):r(e),n}clear(e){const t=Object.keys(this);let a=t.length,n=!1;for(;a--;){const r=t[a];e&&!Ba(0,this[r],r,e,!0)||(delete this[r],n=!0)}return n}normalize(e){const t=this,a={};return da.forEach(this,(n,r)=>{const l=da.findKey(a,r);if(l)return t[l]=Ua(n),void delete t[r];const s=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,a)=>t.toUpperCase()+a)}(r):String(r).trim();s!==r&&delete t[r],t[s]=Ua(n),a[s]=!0}),this}concat(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return da.forEach(this,(a,n)=>{null!=a&&!1!==a&&(t[n]=e&&da.isArray(a)?a.join(", "):a)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(e=>{let[t,a]=e;return t+": "+a}).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var a=arguments.length,n=new Array(a>1?a-1:0),r=1;r<a;r++)n[r-1]=arguments[r];return n.forEach(e=>t.set(e)),t}static accessor(e){const t=(this[qa]=this[qa]={accessors:{}}).accessors,a=this.prototype;function n(e){const n=Ma(e);t[n]||(!function(e,t){const a=da.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+a,{value:function(e,a,r){return this[n].call(this,t,e,a,r)},configurable:!0})})}(a,e),t[n]=!0)}return da.isArray(e)?e.forEach(n):n(e),this}}Ha.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),da.reduceDescriptors(Ha.prototype,(e,t)=>{let{value:a}=e,n=t[0].toUpperCase()+t.slice(1);return{get:()=>a,set(e){this[n]=e}}}),da.freezeMethods(Ha);const Va=Ha;function Wa(e,t){const a=this||Ia,n=t||a,r=Va.from(n.headers);let l=n.data;return da.forEach(e,function(e){l=e.call(a,l,r.normalize(),t?t.status:void 0)}),r.normalize(),l}function Ga(e){return!(!e||!e.__CANCEL__)}function $a(e,t,a){ha.call(this,null==e?"canceled":e,ha.ERR_CANCELED,t,a),this.name="CanceledError"}da.inherits($a,ha,{__CANCEL__:!0});const Qa=$a;function Ka(e,t,a){const n=a.config.validateStatus;a.status&&n&&!n(a.status)?t(new ha("Request failed with status code "+a.status,[ha.ERR_BAD_REQUEST,ha.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a)):e(a)}const Ja=function(e,t){e=e||10;const a=new Array(e),n=new Array(e);let r,l=0,s=0;return t=void 0!==t?t:1e3,function(i){const o=Date.now(),c=n[s];r||(r=o),a[l]=i,n[l]=o;let d=s,u=0;for(;d!==l;)u+=a[d++],d%=e;if(l=(l+1)%e,l===s&&(s=(s+1)%e),o-r<t)return;const p=c&&o-c;return p?Math.round(1e3*u/p):void 0}};const Ya=function(e,t){let a,n,r=0,l=1e3/t;const s=function(t){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();r=l,a=null,n&&(clearTimeout(n),n=null),e(...t)};return[function(){const e=Date.now(),t=e-r;for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];t>=l?s(o,e):(a=o,n||(n=setTimeout(()=>{n=null,s(a)},l-t)))},()=>a&&s(a)]},Xa=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,n=0;const r=Ja(50,250);return Ya(a=>{const l=a.loaded,s=a.lengthComputable?a.total:void 0,i=l-n,o=r(i);n=l;e({loaded:l,total:s,progress:s?l/s:void 0,bytes:i,rate:o||void 0,estimated:o&&s&&l<=s?(s-l)/o:void 0,event:a,lengthComputable:null!=s,[t?"download":"upload"]:!0})},a)},Za=(e,t)=>{const a=null!=e;return[n=>t[0]({lengthComputable:a,total:e,loaded:n}),t[1]]},en=e=>function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return da.asap(()=>e(...a))},tn=za.hasStandardBrowserEnv?((e,t)=>a=>(a=new URL(a,za.origin),e.protocol===a.protocol&&e.host===a.host&&(t||e.port===a.port)))(new URL(za.origin),za.navigator&&/(msie|trident)/i.test(za.navigator.userAgent)):()=>!0,an=za.hasStandardBrowserEnv?{write(e,t,a,n,r,l){const s=[e+"="+encodeURIComponent(t)];da.isNumber(a)&&s.push("expires="+new Date(a).toGMTString()),da.isString(n)&&s.push("path="+n),da.isString(r)&&s.push("domain="+r),!0===l&&s.push("secure"),document.cookie=s.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function nn(e,t,a){let n=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(n||0==a)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const rn=e=>e instanceof Va?u({},e):e;function ln(e,t){t=t||{};const a={};function n(e,t,a,n){return da.isPlainObject(e)&&da.isPlainObject(t)?da.merge.call({caseless:n},e,t):da.isPlainObject(t)?da.merge({},t):da.isArray(t)?t.slice():t}function r(e,t,a,r){return da.isUndefined(t)?da.isUndefined(e)?void 0:n(void 0,e,0,r):n(e,t,0,r)}function l(e,t){if(!da.isUndefined(t))return n(void 0,t)}function s(e,t){return da.isUndefined(t)?da.isUndefined(e)?void 0:n(void 0,e):n(void 0,t)}function i(a,r,l){return l in t?n(a,r):l in e?n(void 0,a):void 0}const o={url:l,method:l,data:l,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:i,headers:(e,t,a)=>r(rn(e),rn(t),0,!0)};return da.forEach(Object.keys(u(u({},e),t)),function(n){const l=o[n]||r,s=l(e[n],t[n],n);da.isUndefined(s)&&l!==i||(a[n]=s)}),a}const sn=e=>{const t=ln({},e);let{data:a,withXSRFToken:n,xsrfHeaderName:r,xsrfCookieName:l,headers:s,auth:i}=t;if(t.headers=s=Va.from(s),t.url=Ca(nn(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),i&&s.set("Authorization","Basic "+btoa((i.username||"")+":"+(i.password?unescape(encodeURIComponent(i.password)):""))),da.isFormData(a))if(za.hasStandardBrowserEnv||za.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if(da.isFunction(a.getHeaders)){const e=a.getHeaders(),t=["content-type","content-length"];Object.entries(e).forEach(e=>{let[a,n]=e;t.includes(a.toLowerCase())&&s.set(a,n)})}if(za.hasStandardBrowserEnv&&(n&&da.isFunction(n)&&(n=n(t)),n||!1!==n&&tn(t.url))){const e=r&&l&&an.read(l);e&&s.set(r,e)}return t},on="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise(function(t,a){const n=sn(e);let r=n.data;const l=Va.from(n.headers).normalize();let s,i,o,c,d,{responseType:u,onUploadProgress:p,onDownloadProgress:m}=n;function h(){c&&c(),d&&d(),n.cancelToken&&n.cancelToken.unsubscribe(s),n.signal&&n.signal.removeEventListener("abort",s)}let f=new XMLHttpRequest;function g(){if(!f)return;const n=Va.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders());Ka(function(e){t(e),h()},function(e){a(e),h()},{data:u&&"text"!==u&&"json"!==u?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:n,config:e,request:f}),f=null}f.open(n.method.toUpperCase(),n.url,!0),f.timeout=n.timeout,"onloadend"in f?f.onloadend=g:f.onreadystatechange=function(){f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))&&setTimeout(g)},f.onabort=function(){f&&(a(new ha("Request aborted",ha.ECONNABORTED,e,f)),f=null)},f.onerror=function(t){const n=t&&t.message?t.message:"Network Error",r=new ha(n,ha.ERR_NETWORK,e,f);r.event=t||null,a(r),f=null},f.ontimeout=function(){let t=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const r=n.transitional||ka;n.timeoutErrorMessage&&(t=n.timeoutErrorMessage),a(new ha(t,r.clarifyTimeoutError?ha.ETIMEDOUT:ha.ECONNABORTED,e,f)),f=null},void 0===r&&l.setContentType(null),"setRequestHeader"in f&&da.forEach(l.toJSON(),function(e,t){f.setRequestHeader(t,e)}),da.isUndefined(n.withCredentials)||(f.withCredentials=!!n.withCredentials),u&&"json"!==u&&(f.responseType=n.responseType),m&&([o,d]=Xa(m,!0),f.addEventListener("progress",o)),p&&f.upload&&([i,c]=Xa(p),f.upload.addEventListener("progress",i),f.upload.addEventListener("loadend",c)),(n.cancelToken||n.signal)&&(s=t=>{f&&(a(!t||t.type?new Qa(null,e,f):t),f.abort(),f=null)},n.cancelToken&&n.cancelToken.subscribe(s),n.signal&&(n.signal.aborted?s():n.signal.addEventListener("abort",s)));const v=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(n.url);v&&-1===za.protocols.indexOf(v)?a(new ha("Unsupported protocol "+v+":",ha.ERR_BAD_REQUEST,e)):f.send(r||null)})},cn=(e,t)=>{const{length:a}=e=e?e.filter(Boolean):[];if(t||a){let a,n=new AbortController;const r=function(e){if(!a){a=!0,s();const t=e instanceof Error?e:this.reason;n.abort(t instanceof ha?t:new Qa(t instanceof Error?t.message:t))}};let l=t&&setTimeout(()=>{l=null,r(new ha("timeout ".concat(t," of ms exceeded"),ha.ETIMEDOUT))},t);const s=()=>{e&&(l&&clearTimeout(l),l=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(r):e.removeEventListener("abort",r)}),e=null)};e.forEach(e=>e.addEventListener("abort",r));const{signal:i}=n;return i.unsubscribe=()=>da.asap(s),i}};function dn(e,t){this.v=e,this.k=t}function un(e){return function(){return new pn(e.apply(this,arguments))}}function pn(e){var t,a;function n(t,a){try{var l=e[t](a),s=l.value,i=s instanceof dn;Promise.resolve(i?s.v:s).then(function(a){if(i){var o="return"===t?"return":"next";if(!s.k||a.done)return n(o,a);a=e[o](a).value}r(l.done?"return":"normal",a)},function(e){n("throw",e)})}catch(e){r("throw",e)}}function r(e,r){switch(e){case"return":t.resolve({value:r,done:!0});break;case"throw":t.reject(r);break;default:t.resolve({value:r,done:!1})}(t=t.next)?n(t.key,t.arg):a=null}this._invoke=function(e,r){return new Promise(function(l,s){var i={key:e,arg:r,resolve:l,reject:s,next:null};a?a=a.next=i:(t=a=i,n(e,r))})},"function"!=typeof e.return&&(this.return=void 0)}function mn(e){return new dn(e,0)}function hn(e){var t={},a=!1;function n(t,n){return a=!0,n=new Promise(function(a){a(e[t](n))}),{done:!1,value:new dn(n,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return a?(a=!1,e):n("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(a)throw a=!1,e;return n("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return a?(a=!1,e):n("return",e)}),t}function fn(e){var t,a,n,r=2;for("undefined"!=typeof Symbol&&(a=Symbol.asyncIterator,n=Symbol.iterator);r--;){if(a&&null!=(t=e[a]))return t.call(e);if(n&&null!=(t=e[n]))return new gn(t.call(e));a="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function gn(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return gn=function(e){this.s=e,this.n=e.next},gn.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var a=this.s.return;return void 0===a?Promise.resolve({value:e,done:!0}):t(a.apply(this.s,arguments))},throw:function(e){var a=this.s.return;return void 0===a?Promise.reject(e):t(a.apply(this.s,arguments))}},new gn(e)}pn.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},pn.prototype.next=function(e){return this._invoke("next",e)},pn.prototype.throw=function(e){return this._invoke("throw",e)},pn.prototype.return=function(e){return this._invoke("return",e)};const vn=function*(e,t){let a=e.byteLength;if(!t||a<t)return void(yield e);let n,r=0;for(;r<a;)n=r+t,yield e.slice(r,n),r=n},xn=function(){var e=un(function*(e,t){var a,n=!1,r=!1;try{for(var l,s=fn(yn(e));n=!(l=yield mn(s.next())).done;n=!1){const e=l.value;yield*hn(fn(vn(e,t)))}}catch(i){r=!0,a=i}finally{try{n&&null!=s.return&&(yield mn(s.return()))}finally{if(r)throw a}}});return function(t,a){return e.apply(this,arguments)}}(),yn=function(){var e=un(function*(e){if(e[Symbol.asyncIterator])return void(yield*hn(fn(e)));const t=e.getReader();try{for(;;){const{done:e,value:a}=yield mn(t.read());if(e)break;yield a}}finally{yield mn(t.cancel())}});return function(t){return e.apply(this,arguments)}}(),bn=(e,t,a,n)=>{const r=xn(e,t);let l,s=0,i=e=>{l||(l=!0,n&&n(e))};return new ReadableStream({async pull(e){try{const{done:t,value:n}=await r.next();if(t)return i(),void e.close();let l=n.byteLength;if(a){let e=s+=l;a(e)}e.enqueue(new Uint8Array(n))}catch(t){throw i(t),t}},cancel:e=>(i(e),r.return())},{highWaterMark:2})},{isFunction:jn}=da,Nn=(e=>{let{Request:t,Response:a}=e;return{Request:t,Response:a}})(da.global),{ReadableStream:_n,TextEncoder:wn}=da.global,Cn=function(e){try{for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];return!!e(...a)}catch(Mr){return!1}},Sn=e=>{e=da.merge.call({skipUndefined:!0},Nn,e);const{fetch:t,Request:a,Response:n}=e,r=t?jn(t):"function"===typeof fetch,l=jn(a),s=jn(n);if(!r)return!1;const i=r&&jn(_n),o=r&&("function"===typeof wn?(c=new wn,e=>c.encode(e)):async e=>new Uint8Array(await new a(e).arrayBuffer()));var c;const d=l&&i&&Cn(()=>{let e=!1;const t=new a(za.origin,{body:new _n,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),p=s&&i&&Cn(()=>da.isReadableStream(new n("").body)),m={stream:p&&(e=>e.body)};r&&["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!m[e]&&(m[e]=(t,a)=>{let n=t&&t[e];if(n)return n.call(t);throw new ha("Response type '".concat(e,"' is not supported"),ha.ERR_NOT_SUPPORT,a)})});const h=async(e,t)=>{const n=da.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(da.isBlob(e))return e.size;if(da.isSpecCompliantForm(e)){const t=new a(za.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return da.isArrayBufferView(e)||da.isArrayBuffer(e)?e.byteLength:(da.isURLSearchParams(e)&&(e+=""),da.isString(e)?(await o(e)).byteLength:void 0)})(t):n};return async e=>{let{url:r,method:s,data:i,signal:o,cancelToken:c,timeout:f,onDownloadProgress:g,onUploadProgress:v,responseType:x,headers:y,withCredentials:b="same-origin",fetchOptions:j}=sn(e),N=t||fetch;x=x?(x+"").toLowerCase():"text";let _=cn([o,c&&c.toAbortSignal()],f),w=null;const C=_&&_.unsubscribe&&(()=>{_.unsubscribe()});let S;try{if(v&&d&&"get"!==s&&"head"!==s&&0!==(S=await h(y,i))){let e,t=new a(r,{method:"POST",body:i,duplex:"half"});if(da.isFormData(i)&&(e=t.headers.get("content-type"))&&y.setContentType(e),t.body){const[e,a]=Za(S,Xa(en(v)));i=bn(t.body,65536,e,a)}}da.isString(b)||(b=b?"include":"omit");const t=l&&"credentials"in a.prototype,o=u(u({},j),{},{signal:_,method:s.toUpperCase(),headers:y.normalize().toJSON(),body:i,duplex:"half",credentials:t?b:void 0});w=l&&new a(r,o);let c=await(l?N(w,j):N(r,o));const f=p&&("stream"===x||"response"===x);if(p&&(g||f&&C)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=c[t]});const t=da.toFiniteNumber(c.headers.get("content-length")),[a,r]=g&&Za(t,Xa(en(g),!0))||[];c=new n(bn(c.body,65536,a,()=>{r&&r(),C&&C()}),e)}x=x||"text";let k=await m[da.findKey(m,x)||"text"](c,e);return!f&&C&&C(),await new Promise((t,a)=>{Ka(t,a,{data:k,headers:Va.from(c.headers),status:c.status,statusText:c.statusText,config:e,request:w})})}catch(k){if(C&&C(),k&&"TypeError"===k.name&&/Load failed|fetch/i.test(k.message))throw Object.assign(new ha("Network Error",ha.ERR_NETWORK,e,w),{cause:k.cause||k});throw ha.from(k,k&&k.code,e,w)}}},kn=new Map,En=e=>{let t=e?e.env:{};const{fetch:a,Request:n,Response:r}=t,l=[n,r,a];let s,i,o=l.length,c=kn;for(;o--;)s=l[o],i=c.get(s),void 0===i&&c.set(s,i=o?new Map:Sn(t)),c=i;return i},Tn=(En(),{http:null,xhr:on,fetch:{get:En}});da.forEach(Tn,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(Mr){}Object.defineProperty(e,"adapterName",{value:t})}});const Pn=e=>"- ".concat(e),Rn=e=>da.isFunction(e)||null===e||!1===e,Ln=(e,t)=>{e=da.isArray(e)?e:[e];const{length:a}=e;let n,r;const l={};for(let s=0;s<a;s++){let a;if(n=e[s],r=n,!Rn(n)&&(r=Tn[(a=String(n)).toLowerCase()],void 0===r))throw new ha("Unknown adapter '".concat(a,"'"));if(r&&(da.isFunction(r)||(r=r.get(t))))break;l[a||"#"+s]=r}if(!r){const e=Object.entries(l).map(e=>{let[t,a]=e;return"adapter ".concat(t," ")+(!1===a?"is not supported by the environment":"is not available in the build")});let t=a?e.length>1?"since :\n"+e.map(Pn).join("\n"):" "+Pn(e[0]):"as no adapter specified";throw new ha("There is no suitable adapter to dispatch the request "+t,"ERR_NOT_SUPPORT")}return r};function An(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Qa(null,e)}function zn(e){An(e),e.headers=Va.from(e.headers),e.data=Wa.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Ln(e.adapter||Ia.adapter,e)(e).then(function(t){return An(e),t.data=Wa.call(e,e.transformResponse,t),t.headers=Va.from(t.headers),t},function(t){return Ga(t)||(An(e),t&&t.response&&(t.response.data=Wa.call(e,e.transformResponse,t.response),t.response.headers=Va.from(t.response.headers))),Promise.reject(t)})}const On="1.12.2",Dn={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Dn[e]=function(a){return typeof a===e||"a"+(t<1?"n ":" ")+e}});const In={};Dn.transitional=function(e,t,a){function n(e,t){return"[Axios v"+On+"] Transitional option '"+e+"'"+t+(a?". "+a:"")}return(a,r,l)=>{if(!1===e)throw new ha(n(r," has been removed"+(t?" in "+t:"")),ha.ERR_DEPRECATED);return t&&!In[r]&&(In[r]=!0,console.warn(n(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(a,r,l)}},Dn.spelling=function(e){return(t,a)=>(console.warn("".concat(a," is likely a misspelling of ").concat(e)),!0)};const Fn={assertOptions:function(e,t,a){if("object"!==typeof e)throw new ha("options must be an object",ha.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let r=n.length;for(;r-- >0;){const l=n[r],s=t[l];if(s){const t=e[l],a=void 0===t||s(t,l,e);if(!0!==a)throw new ha("option "+l+" must be "+a,ha.ERR_BAD_OPTION_VALUE);continue}if(!0!==a)throw new ha("Unknown option "+l,ha.ERR_BAD_OPTION)}},validators:Dn},qn=Fn.validators;class Mn{constructor(e){this.defaults=e||{},this.interceptors={request:new Sa,response:new Sa}}async request(e,t){try{return await this._request(e,t)}catch(a){if(a instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{a.stack?t&&!String(a.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(a.stack+="\n"+t):a.stack=t}catch(Mr){}}throw a}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=ln(this.defaults,t);const{transitional:a,paramsSerializer:n,headers:r}=t;void 0!==a&&Fn.assertOptions(a,{silentJSONParsing:qn.transitional(qn.boolean),forcedJSONParsing:qn.transitional(qn.boolean),clarifyTimeoutError:qn.transitional(qn.boolean)},!1),null!=n&&(da.isFunction(n)?t.paramsSerializer={serialize:n}:Fn.assertOptions(n,{encode:qn.function,serialize:qn.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Fn.assertOptions(t,{baseUrl:qn.spelling("baseURL"),withXsrfToken:qn.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let l=r&&da.merge(r.common,r[t.method]);r&&da.forEach(["delete","get","head","post","put","patch","common"],e=>{delete r[e]}),t.headers=Va.concat(l,r);const s=[];let i=!0;this.interceptors.request.forEach(function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(i=i&&e.synchronous,s.unshift(e.fulfilled,e.rejected))});const o=[];let c;this.interceptors.response.forEach(function(e){o.push(e.fulfilled,e.rejected)});let d,u=0;if(!i){const e=[zn.bind(this),void 0];for(e.unshift(...s),e.push(...o),d=e.length,c=Promise.resolve(t);u<d;)c=c.then(e[u++],e[u++]);return c}d=s.length;let p=t;for(;u<d;){const e=s[u++],t=s[u++];try{p=e(p)}catch(m){t.call(this,m);break}}try{c=zn.call(this,p)}catch(m){return Promise.reject(m)}for(u=0,d=o.length;u<d;)c=c.then(o[u++],o[u++]);return c}getUri(e){return Ca(nn((e=ln(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}da.forEach(["delete","get","head","options"],function(e){Mn.prototype[e]=function(t,a){return this.request(ln(a||{},{method:e,url:t,data:(a||{}).data}))}}),da.forEach(["post","put","patch"],function(e){function t(t){return function(a,n,r){return this.request(ln(r||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:a,data:n}))}}Mn.prototype[e]=t(),Mn.prototype[e+"Form"]=t(!0)});const Un=Mn;class Bn{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const a=this;this.promise.then(e=>{if(!a._listeners)return;let t=a._listeners.length;for(;t-- >0;)a._listeners[t](e);a._listeners=null}),this.promise.then=e=>{let t;const n=new Promise(e=>{a.subscribe(e),t=e}).then(e);return n.cancel=function(){a.unsubscribe(t)},n},e(function(e,n,r){a.reason||(a.reason=new Qa(e,n,r),t(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new Bn(function(t){e=t}),cancel:e}}}const Hn=Bn;const Vn={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Vn).forEach(e=>{let[t,a]=e;Vn[a]=t});const Wn=Vn;const Gn=function e(t){const a=new Un(t),n=wt(Un.prototype.request,a);return da.extend(n,Un.prototype,a,{allOwnKeys:!0}),da.extend(n,a,null,{allOwnKeys:!0}),n.create=function(a){return e(ln(t,a))},n}(Ia);Gn.Axios=Un,Gn.CanceledError=Qa,Gn.CancelToken=Hn,Gn.isCancel=Ga,Gn.VERSION=On,Gn.toFormData=ya,Gn.AxiosError=ha,Gn.Cancel=Gn.CanceledError,Gn.all=function(e){return Promise.all(e)},Gn.spread=function(e){return function(t){return e.apply(null,t)}},Gn.isAxiosError=function(e){return da.isObject(e)&&!0===e.isAxiosError},Gn.mergeConfig=ln,Gn.AxiosHeaders=Va,Gn.formToJSON=e=>Oa(da.isHTMLForm(e)?new FormData(e):e),Gn.getAdapter=Ln,Gn.HttpStatusCode=Wn,Gn.default=Gn;const $n=Gn.create({baseURL:"/api",headers:{"Content-Type":"application/json"},timeout:3e4});$n.interceptors.request.use(e=>{const t=localStorage.getItem("token");t?(console.log("\u2705 [API Interceptor] Token found, adding to request:",e.url),e.headers.Authorization="Bearer ".concat(t)):console.warn("\u26a0\ufe0f [API Interceptor] No token found in localStorage for request:",e.url);const a=localStorage.getItem("selectedCompanyId");return a&&(e.headers["X-Company-Id"]=a,console.log("\u2705 [API Interceptor] Company ID added:",a)),console.log("\ud83d\udce1 [API Interceptor] Request headers:",{Authorization:e.headers.Authorization?"Bearer ***":"MISSING","X-Company-Id":e.headers["X-Company-Id"]||"NOT SET","Content-Type":e.headers["Content-Type"]}),e}),$n.interceptors.response.use(e=>e,e=>{var t;if(e.response)console.error("API Error Response:",{status:e.response.status,statusText:e.response.statusText,data:e.response.data,url:null===(t=e.config)||void 0===t?void 0:t.url});else if(e.request){var a,n,r,l;console.error("API Network Error:",{message:e.message,code:e.code,url:null===(a=e.config)||void 0===a?void 0:a.url,method:null===(n=e.config)||void 0===n?void 0:n.method,headers:null===(r=e.config)||void 0===r?void 0:r.headers,timeout:null===(l=e.config)||void 0===l?void 0:l.timeout,fullError:e})}else console.error("API Request Setup Error:",e.message);return Promise.reject(e)});const Qn=$n;var Kn=a(579);const Jn=(0,r.createContext)(void 0),Yn=()=>{const e=(0,r.useContext)(Jn);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e},Xn=e=>{let{children:t}=e;const[a,n]=(0,r.useState)(null),[l,s]=(0,r.useState)(!0),i=!!a;(0,r.useEffect)(()=>{const e=localStorage.getItem("token"),t=localStorage.getItem("user");if(e&&t)try{const e=JSON.parse(t);n(e);const a=localStorage.getItem("selectedCompanyId");if("super_admin"===e.role)"ALL"!==a&&(localStorage.setItem("selectedCompanyId","ALL"),console.log("\u2705 Super admin: Forzando selectedCompanyId a ALL (corrigiendo sesi\xf3n antigua)"));else if(!a)if(e.companyRoles&&Object.keys(e.companyRoles).length>0){const t=Object.keys(e.companyRoles)[0];localStorage.setItem("selectedCompanyId",t),console.log("\u2705 Company ID establecido al cargar:",t)}else e.company_id&&(localStorage.setItem("selectedCompanyId",e.company_id),console.log("\u2705 Company ID (legacy) establecido al cargar:",e.company_id));s(!1)}catch(a){console.error("Error parsing user data:",a),localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("selectedCompanyId"),s(!1)}else s(!1)},[]);const o={user:a,isAuthenticated:i,login:async(e,t)=>{try{const a=await Qn.post("/auth/login",{email:e,password:t}),{token:r,user:l}=a.data;if(localStorage.setItem("token",r),localStorage.setItem("user",JSON.stringify(l)),l.companyRoles&&Object.keys(l.companyRoles).length>0){const e=Object.keys(l.companyRoles)[0];localStorage.setItem("selectedCompanyId",e),console.log("\u2705 Company ID guardado:",e)}else l.company_id?(localStorage.setItem("selectedCompanyId",l.company_id),console.log("\u2705 Company ID (legacy) guardado:",l.company_id)):"super_admin"===l.role?(localStorage.setItem("selectedCompanyId","ALL"),console.log("\u2705 Super admin: Todas las empresas seleccionadas (ALL)")):console.warn("\u26a0\ufe0f  Usuario sin company asociada");n(l)}catch(s){var a,r,l;throw console.error("Error de login:",{message:null===s||void 0===s?void 0:s.message,response:null===s||void 0===s||null===(a=s.response)||void 0===a?void 0:a.data,status:null===s||void 0===s||null===(r=s.response)||void 0===r?void 0:r.status,statusText:null===s||void 0===s||null===(l=s.response)||void 0===l?void 0:l.statusText,code:null===s||void 0===s?void 0:s.code,fullError:s}),s}},logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("selectedCompanyId"),n(null)},loading:l,hasRole:e=>(null===a||void 0===a?void 0:a.role)===e,isSuperAdmin:()=>"super_admin"===(null===a||void 0===a?void 0:a.role),isAdmin:()=>"admin"===(null===a||void 0===a?void 0:a.role),isLawyer:()=>"lawyer"===(null===a||void 0===a?void 0:a.role),isUser:()=>"requester"===(null===a||void 0===a?void 0:a.role),getUserCompany:()=>(null===a||void 0===a?void 0:a.company_id)||null};return(0,Kn.jsx)(Jn.Provider,{value:o,children:t})},Zn=()=>{const[e,t]=(0,r.useState)(""),[a,n]=(0,r.useState)(""),[l,s]=(0,r.useState)(""),[i,o]=(0,r.useState)(!1),{login:c}=Yn();return(0,Kn.jsx)("div",{className:"login-container",children:(0,Kn.jsxs)("div",{className:"login-card",children:[(0,Kn.jsx)("h1",{children:"Legal Bot"}),(0,Kn.jsx)("h2",{children:"Iniciar Sesi\xf3n"}),l&&(0,Kn.jsx)("div",{className:"error-message",children:l}),(0,Kn.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),s(""),o(!0);try{await c(e,a)}catch(n){let e="Error al iniciar sesi\xf3n";n.response?n.response.data?n.response.data.error?e=n.response.data.error:n.response.data.message?e=n.response.data.message:n.response.data.errors&&Array.isArray(n.response.data.errors)&&(e=n.response.data.errors.map(e=>e.msg||e.message).join(", ")):401===n.response.status?e="Credenciales inv\xe1lidas":500===n.response.status?e="Error del servidor. Por favor, intenta m\xe1s tarde":404===n.response.status&&(e="Servicio no encontrado. Verifica la configuraci\xf3n"):n.request?e="No se pudo conectar con el servidor. Verifica tu conexi\xf3n":n.message&&(e=n.message),s(e)}finally{o(!1)}},children:[(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{htmlFor:"email",children:"Email:"}),(0,Kn.jsx)("input",{type:"email",id:"email",value:e,onChange:e=>t(e.target.value),required:!0,disabled:i})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{htmlFor:"password",children:"Contrase\xf1a:"}),(0,Kn.jsx)("input",{type:"password",id:"password",value:a,onChange:e=>n(e.target.value),required:!0,disabled:i})]}),(0,Kn.jsx)("button",{type:"submit",disabled:i,className:"login-button",children:i?"Iniciando sesi\xf3n...":"Iniciar Sesi\xf3n"})]}),(0,Kn.jsxs)("div",{className:"demo-credentials",children:[(0,Kn.jsx)("h3",{children:"Credenciales de Demo:"}),(0,Kn.jsxs)("div",{className:"super-admin-section",children:[(0,Kn.jsx)("h4",{children:"\ud83d\udd27 Super Administrador"}),(0,Kn.jsx)("div",{className:"role-credentials",children:(0,Kn.jsxs)("div",{className:"role-card super-admin",children:[(0,Kn.jsx)("h5",{children:"\ud83d\udd27 Super Admin"}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Email:"})," superadmin@legalbot.com"]}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Contrase\xf1a:"})," 123456"]}),(0,Kn.jsx)("p",{children:(0,Kn.jsx)("em",{children:"Gesti\xf3n completa del sistema"})})]})})]}),(0,Kn.jsx)("h3",{children:"Credenciales de Sistema:"}),(0,Kn.jsxs)("div",{className:"company-section",children:[(0,Kn.jsx)("h4",{children:"\ud83c\udfe2 Sistema Legal Bot"}),(0,Kn.jsxs)("div",{className:"role-credentials",children:[(0,Kn.jsxs)("div",{className:"role-card admin",children:[(0,Kn.jsx)("h5",{children:"\ud83d\udc51 Administrador"}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Email:"})," admin@demo.com"]}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Contrase\xf1a:"})," 123456"]})]}),(0,Kn.jsxs)("div",{className:"role-card lawyer",children:[(0,Kn.jsx)("h5",{children:"\u2696\ufe0f Abogado"}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Email:"})," abogado@demo.com"]}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Contrase\xf1a:"})," 123456"]})]}),(0,Kn.jsxs)("div",{className:"role-card user",children:[(0,Kn.jsx)("h5",{children:"\ud83d\udc64 Usuario"}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Email:"})," solicitante@demo.com"]}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Contrase\xf1a:"})," 123456"]})]})]})]}),(0,Kn.jsxs)("div",{className:"company-section",children:[(0,Kn.jsx)("h4",{children:"\u2696\ufe0f LegalFirm & Asociados"}),(0,Kn.jsxs)("div",{className:"role-credentials",children:[(0,Kn.jsxs)("div",{className:"role-card admin",children:[(0,Kn.jsx)("h5",{children:"\ud83d\udc51 Admin"}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Email:"})," admin@legalfirm.com"]}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Contrase\xf1a:"})," 123456"]})]}),(0,Kn.jsxs)("div",{className:"role-card lawyer",children:[(0,Kn.jsx)("h5",{children:"\u2696\ufe0f Lawyer"}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Email:"})," lawyer@legalfirm.com"]}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Contrase\xf1a:"})," 123456"]})]}),(0,Kn.jsxs)("div",{className:"role-card user",children:[(0,Kn.jsx)("h5",{children:"\ud83d\udc64 User"}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Email:"})," user@legalfirm.com"]}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Contrase\xf1a:"})," 123456"]})]})]})]}),(0,Kn.jsxs)("div",{className:"company-section",children:[(0,Kn.jsx)("h4",{children:"\ud83c\udfe2 BusinessCorp Internacional"}),(0,Kn.jsxs)("div",{className:"role-credentials",children:[(0,Kn.jsxs)("div",{className:"role-card admin",children:[(0,Kn.jsx)("h5",{children:"\ud83d\udc51 Admin"}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Email:"})," admin@businesscorp.com"]}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Contrase\xf1a:"})," 123456"]})]}),(0,Kn.jsxs)("div",{className:"role-card lawyer",children:[(0,Kn.jsx)("h5",{children:"\u2696\ufe0f Lawyer"}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Email:"})," lawyer@businesscorp.com"]}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Contrase\xf1a:"})," 123456"]})]}),(0,Kn.jsxs)("div",{className:"role-card user",children:[(0,Kn.jsx)("h5",{children:"\ud83d\udc64 User"}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Email:"})," user@businesscorp.com"]}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Contrase\xf1a:"})," 123456"]})]})]})]})]})]})})},er=(0,r.createContext)(void 0),tr=()=>{const e=(0,r.useContext)(er);if(!e)throw new Error("useCompany must be used within a CompanyProvider");return e},ar=e=>{var t,a;let{children:n}=e;const{user:l}=Yn(),[s,i]=(0,r.useState)(null),[o,c]=(0,r.useState)([]),[d,u]=(0,r.useState)(!0);(0,r.useEffect)(()=>{(async()=>{if(l)try{var e;const t=await Qn.get("/companies/my-companies");console.log("Respuesta de /my-companies:",t.data);const a=t.data;let n=[];if(Array.isArray(a)?n=a:a&&"object"===typeof a?(console.warn("Respuesta no es array, intentando convertir:",a),n=[]):(console.warn("Respuesta inesperada de /my-companies:",a),n=[]),c(n),0===n.length)return console.warn("No hay empresas disponibles para el usuario. El usuario debe tener al menos una empresa asignada."),void u(!1);const r=new URLSearchParams(window.location.search).get("company"),l=localStorage.getItem("selectedCompanyId");let s=r||l||(null===(e=n[0])||void 0===e?void 0:e.companyId);const o=n.some(e=>e.roles.includes("super_admin"));if(!("ALL"===s?o:n.some(e=>e.companyId===s))&&n.length>0&&(s=n[0].companyId),s&&(i(s),localStorage.setItem("selectedCompanyId",s),console.log("\u2705 CompanyContext: Empresa seleccionada: ".concat("ALL"===s?"TODAS LAS EMPRESAS":s)),r!==s)){const e=new URL(window.location.href);e.searchParams.set("company",s),window.history.replaceState({},"",e.toString())}u(!1)}catch(t){console.error("Error al cargar empresas:",t),u(!1)}else u(!1)})()},[l]);const p="ALL"===s?["super_admin"]:(null===(t=o.find(e=>e.companyId===s))||void 0===t?void 0:t.roles)||[],m="ALL"===s?"Todas las empresas":(null===(a=o.find(e=>e.companyId===s))||void 0===a?void 0:a.companyName)||null,h={selectedCompanyId:s,selectedCompanyName:m,userCompanies:o,currentRoles:p,selectCompany:e=>{if("ALL"===e){if(!o.some(e=>e.roles.includes("super_admin")))return void console.error("Solo super_admin puede acceder a todas las empresas")}else{if(!o.some(t=>t.companyId===e))return void console.error("No tienes acceso a esta empresa")}i(e),localStorage.setItem("selectedCompanyId",e);const t=new URL(window.location.href);t.searchParams.set("company",e),window.history.pushState({},"",t.toString()),window.location.reload()},hasRole:e=>Array.isArray(e)?e.some(e=>p.includes(e)):p.includes(e),isLoading:d};return(0,Kn.jsx)(er.Provider,{value:h,children:n})},nr=e=>{let{children:t,allowedRoles:a,fallback:n=null}=e;const{user:r}=Yn(),{hasRole:l,currentRoles:s}=tr();if(!r)return(0,Kn.jsx)(Kn.Fragment,{children:n});if("super_admin"===r.role)return(0,Kn.jsx)(Kn.Fragment,{children:t});if(r.companyRoles&&s.length>0){if(l(a))return(0,Kn.jsx)(Kn.Fragment,{children:t})}else if(a.includes(r.role))return(0,Kn.jsx)(Kn.Fragment,{children:t});return(0,Kn.jsx)(Kn.Fragment,{children:n})},rr=()=>{const{user:e}=Yn(),t=ge(),[a,n]=(0,r.useState)({totalContracts:0,totalTemplates:0,totalCompanies:0,pendingRequests:0}),[l,s]=(0,r.useState)(!0);(0,r.useEffect)(()=>{i()},[]);const i=async()=>{try{const e=await Qn.get("/dashboard/stats");n({totalContracts:e.data.totalContracts||0,totalTemplates:e.data.totalTemplates||0,totalCompanies:e.data.totalCompanies||0,pendingRequests:e.data.pendingRequests||0})}catch(e){console.error("Error fetching dashboard data:",e),n({totalContracts:0,totalTemplates:0,totalCompanies:0,pendingRequests:0})}finally{s(!1)}};if(l)return(0,Kn.jsx)("div",{className:"loading",children:"Cargando dashboard..."});return(0,Kn.jsxs)("div",{className:"dashboard",children:[(0,Kn.jsx)("h1",{children:(()=>{switch(null===e||void 0===e?void 0:e.role){case"super_admin":return"\ud83d\udd27 Panel de Super Administraci\xf3n";case"admin":return"\ud83d\udc51 Panel de Administraci\xf3n";case"lawyer":return"\u2696\ufe0f Panel de Abogado";case"requester":return"\ud83d\udc64 Panel de Usuario";default:return"Dashboard"}})()}),(0,Kn.jsxs)("div",{className:"user-info",children:[(0,Kn.jsxs)("p",{children:["Bienvenido, ",(0,Kn.jsx)("strong",{children:(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.email)})]}),(0,Kn.jsx)("span",{className:"role-badge",children:null===e||void 0===e?void 0:e.role}),(null===e||void 0===e?void 0:e.company)&&(0,Kn.jsxs)("div",{className:"company-info",children:[(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Empresa:"})," ",e.company.name]}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"RUC:"})," ",e.company.tax_id]})]})]}),(0,Kn.jsxs)("div",{className:"stats-grid",children:[(0,Kn.jsxs)("div",{className:"stat-card",children:[(0,Kn.jsx)("h3",{children:"Contratos"}),(0,Kn.jsx)("div",{className:"stat-number",children:a.totalContracts})]}),(0,Kn.jsx)(nr,{allowedRoles:["super_admin","admin","lawyer"],children:(0,Kn.jsxs)("div",{className:"stat-card",children:[(0,Kn.jsx)("h3",{children:"Plantillas"}),(0,Kn.jsx)("div",{className:"stat-number",children:a.totalTemplates})]})}),(0,Kn.jsx)(nr,{allowedRoles:["super_admin","admin","lawyer"],children:(0,Kn.jsxs)("div",{className:"stat-card",children:[(0,Kn.jsx)("h3",{children:"Empresas"}),(0,Kn.jsx)("div",{className:"stat-number",children:a.totalCompanies})]})}),(0,Kn.jsx)(nr,{allowedRoles:["super_admin","admin","lawyer"],children:(0,Kn.jsxs)("div",{className:"stat-card",children:[(0,Kn.jsx)("h3",{children:"Solicitudes Pendientes"}),(0,Kn.jsx)("div",{className:"stat-number",children:a.pendingRequests})]})})]}),(0,Kn.jsxs)("div",{className:"quick-actions",children:[(0,Kn.jsx)("h2",{children:"Acciones R\xe1pidas"}),(0,Kn.jsxs)("div",{className:"action-buttons",children:[(0,Kn.jsx)("button",{className:"action-btn",onClick:()=>t("/contracts"),children:"Ver Contratos"}),(0,Kn.jsxs)(nr,{allowedRoles:["super_admin","admin","lawyer"],children:[(0,Kn.jsx)("button",{className:"action-btn",onClick:()=>t("/contract-generator"),children:"Crear Contrato"}),(0,Kn.jsx)("button",{className:"action-btn",onClick:()=>t("/templates"),children:"Nueva Plantilla"}),(0,Kn.jsx)("button",{className:"action-btn",onClick:()=>t("/companies"),children:"Agregar Empresa"})]}),(0,Kn.jsxs)(nr,{allowedRoles:["super_admin","admin"],children:[(0,Kn.jsx)("button",{className:"action-btn",onClick:()=>t("/users"),children:"Administrar Usuarios"}),(0,Kn.jsx)("button",{className:"action-btn",onClick:()=>t("/system-config"),children:"Configuraci\xf3n Sistema"})]}),(0,Kn.jsxs)(nr,{allowedRoles:["super_admin"],children:[(0,Kn.jsx)("button",{className:"action-btn",onClick:()=>t("/suppliers"),children:"Gesti\xf3n Completa"}),(0,Kn.jsx)("button",{className:"action-btn",onClick:()=>t("/super-admin"),children:"Super Administraci\xf3n"})]})]})]})]})},lr=()=>{const[e,t]=(0,r.useState)([]),[a,n]=(0,r.useState)(!0),[l,s]=(0,r.useState)(!1),[i,o]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!1),[p,m]=(0,r.useState)(null),[h,f]=(0,r.useState)({title:"",company:"",status:"borrador",description:"",template_id:""}),[g,v]=(0,r.useState)(""),[x,y]=(0,r.useState)([]),[b,j]=(0,r.useState)(""),[N,_]=(0,r.useState)(""),[w,C]=(0,r.useState)(""),[S,k]=(0,r.useState)(""),[E,T]=(0,r.useState)(""),[P,R]=(0,r.useState)(!1);(0,r.useEffect)(()=>{L()},[]);const L=async()=>{try{const e=await Qn.get("/contracts");t(e.data)}catch(e){console.error("Error fetching contracts:",e)}finally{n(!1)}},A=async e=>{try{const t=await Qn.get("/documents/download/word/".concat(e),{responseType:"blob"}),a=window.URL.createObjectURL(new Blob([t.data])),n=document.createElement("a");n.href=a,n.setAttribute("download","contrato_".concat(e,".docx")),document.body.appendChild(n),n.click(),n.remove(),window.URL.revokeObjectURL(a)}catch(t){console.error("Error downloading Word document:",t),alert("Error al descargar el documento Word")}},z=(()=>{let t=[...e];if(g.trim()){const e=g.toLowerCase();t=t.filter(t=>{var a,n;return(null===(a=t.title)||void 0===a?void 0:a.toLowerCase().includes(e))||(null===(n=t.contract_number)||void 0===n?void 0:n.toLowerCase().includes(e))})}if(x.length>0&&(t=t.filter(e=>x.includes(e.status))),w.trim()){const e=w.toLowerCase();t=t.filter(t=>{var a,n;return(null===(a=t.company_name)||void 0===a?void 0:a.toLowerCase().includes(e))||(null===(n=t.company)||void 0===n?void 0:n.toLowerCase().includes(e))})}if(S.trim()){const e=S.toLowerCase();t=t.filter(t=>{var a,n;return null===(a=t.template)||void 0===a||null===(n=a.name)||void 0===n?void 0:n.toLowerCase().includes(e)})}if(E.trim()){const e=E.toLowerCase();t=t.filter(t=>{var a,n;return(null===(a=t.content)||void 0===a?void 0:a.toLowerCase().includes(e))||(null===(n=t.title)||void 0===n?void 0:n.toLowerCase().includes(e))})}if(b){const e=new Date(b);t=t.filter(t=>new Date(t.createdAt)>=e)}if(N){const e=new Date(N);e.setHours(23,59,59,999),t=t.filter(t=>new Date(t.createdAt)<=e)}return t})(),O=[g.trim(),x.length>0,b,N,w.trim(),S.trim(),E.trim()].filter(Boolean).length;return a?(0,Kn.jsx)("div",{className:"loading",children:"Cargando contratos..."}):(0,Kn.jsxs)("div",{className:"contracts",children:[(0,Kn.jsxs)("div",{className:"page-header",children:[(0,Kn.jsx)("h1",{children:"Gesti\xf3n de Contratos"}),(0,Kn.jsx)("button",{className:"btn-primary",onClick:()=>s(!0),children:"Nuevo Contrato"})]}),(0,Kn.jsxs)("div",{className:"filters-container",children:[(0,Kn.jsxs)("div",{className:"filters-header",children:[(0,Kn.jsxs)("button",{className:"btn-toggle-filters",onClick:()=>R(!P),children:[P?"\u25bc":"\u25b6"," Filtros",O>0&&(0,Kn.jsx)("span",{className:"filter-badge",children:O})]}),O>0&&(0,Kn.jsx)("button",{className:"btn-clear-filters",onClick:()=>{v(""),y([]),j(""),_(""),C(""),k(""),T("")},children:"Limpiar Filtros"}),(0,Kn.jsxs)("div",{className:"results-count",children:["Mostrando ",z.length," de ",e.length," contratos"]})]}),P&&(0,Kn.jsxs)("div",{className:"filters-content",children:[(0,Kn.jsxs)("div",{className:"filter-group",children:[(0,Kn.jsx)("label",{children:"Buscar:"}),(0,Kn.jsx)("input",{type:"text",placeholder:"Buscar por t\xedtulo o n\xfamero de contrato...",value:g,onChange:e=>v(e.target.value),className:"filter-input"})]}),(0,Kn.jsxs)("div",{className:"filter-group",children:[(0,Kn.jsx)("label",{children:"Empresa:"}),(0,Kn.jsx)("input",{type:"text",placeholder:"Filtrar por empresa...",value:w,onChange:e=>C(e.target.value),className:"filter-input"})]}),(0,Kn.jsxs)("div",{className:"filter-group",children:[(0,Kn.jsx)("label",{children:"Plantilla:"}),(0,Kn.jsx)("input",{type:"text",placeholder:"Filtrar por nombre de plantilla...",value:S,onChange:e=>k(e.target.value),className:"filter-input"})]}),(0,Kn.jsxs)("div",{className:"filter-group",children:[(0,Kn.jsx)("label",{children:"Tercero:"}),(0,Kn.jsx)("input",{type:"text",placeholder:"Filtrar por nombre o identificaci\xf3n del tercero...",value:E,onChange:e=>T(e.target.value),className:"filter-input"})]}),(0,Kn.jsxs)("div",{className:"filter-group",children:[(0,Kn.jsx)("label",{children:"Estado:"}),(0,Kn.jsx)("div",{className:"status-checkboxes",children:["borrador","revision","aprobado","firmado","cancelado"].map(e=>(0,Kn.jsxs)("label",{className:"checkbox-label",children:[(0,Kn.jsx)("input",{type:"checkbox",checked:x.includes(e),onChange:()=>(e=>{y(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])})(e)}),(0,Kn.jsx)("span",{className:"status-label ".concat(e),children:e})]},e))})]}),(0,Kn.jsxs)("div",{className:"filter-group-row",children:[(0,Kn.jsxs)("div",{className:"filter-group",children:[(0,Kn.jsx)("label",{children:"Fecha desde:"}),(0,Kn.jsx)("input",{type:"date",value:b,onChange:e=>j(e.target.value),className:"filter-input"})]}),(0,Kn.jsxs)("div",{className:"filter-group",children:[(0,Kn.jsx)("label",{children:"Fecha hasta:"}),(0,Kn.jsx)("input",{type:"date",value:N,onChange:e=>_(e.target.value),className:"filter-input"})]})]})]})]}),(0,Kn.jsx)("div",{className:"contracts-list",children:0===e.length?(0,Kn.jsxs)("div",{className:"empty-state",children:[(0,Kn.jsx)("h3",{children:"No hay contratos"}),(0,Kn.jsx)("p",{children:"Crea tu primer contrato para comenzar"})]}):0===z.length?(0,Kn.jsxs)("div",{className:"empty-state",children:[(0,Kn.jsx)("h3",{children:"No se encontraron contratos"}),(0,Kn.jsx)("p",{children:"Intenta ajustar los filtros para ver m\xe1s resultados"})]}):(0,Kn.jsx)("div",{className:"contracts-table-wrapper",children:(0,Kn.jsxs)("table",{className:"contracts-table-compact",children:[(0,Kn.jsx)("thead",{children:(0,Kn.jsxs)("tr",{children:[(0,Kn.jsx)("th",{className:"th-contract-number",children:"Contrato"}),(0,Kn.jsx)("th",{className:"th-template",children:"Plantilla"}),(0,Kn.jsx)("th",{className:"th-third-party",children:"Tercero"}),(0,Kn.jsx)("th",{className:"th-status",children:"Estado"}),(0,Kn.jsx)("th",{className:"th-date",children:"Fecha"}),(0,Kn.jsx)("th",{className:"th-actions",children:"Acciones"})]})}),(0,Kn.jsx)("tbody",{children:z.map(e=>{var t,a;return(0,Kn.jsxs)("tr",{children:[(0,Kn.jsx)("td",{className:"contract-number-col",children:(0,Kn.jsxs)("div",{className:"contract-info",children:[(0,Kn.jsx)("strong",{title:e.contract_number||e.title||"N/A",children:e.contract_number||e.title||"N/A"}),e.title&&e.contract_number&&(0,Kn.jsx)("small",{title:e.title,children:e.title})]})}),(0,Kn.jsx)("td",{className:"template-col",children:(0,Kn.jsx)("span",{className:"template-badge",title:(null===(t=e.template)||void 0===t?void 0:t.name)||"Sin plantilla",children:(null===(a=e.template)||void 0===a?void 0:a.name)||"Sin plantilla"})}),(0,Kn.jsx)("td",{className:"third-party-col",children:(0,Kn.jsx)("span",{className:"third-party-name",title:e.company_name||e.company||"N/A",children:e.company_name||e.company||"N/A"})}),(0,Kn.jsx)("td",{className:"status-col",children:(0,Kn.jsx)("span",{className:"status-badge status-".concat(e.status),children:e.status})}),(0,Kn.jsx)("td",{className:"date-col",children:(0,Kn.jsx)("div",{className:"date-time-info",children:(0,Kn.jsx)("span",{className:"date-value",children:new Date(e.createdAt).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"})})})}),(0,Kn.jsx)("td",{className:"actions-col",children:(0,Kn.jsxs)("div",{className:"action-buttons",children:[e.file_path&&(0,Kn.jsx)("button",{className:"btn-action btn-download",onClick:()=>A(e._id||e.id||""),title:"Descargar ".concat(e.contract_number||"contrato"),children:(0,Kn.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"13",height:"13",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,Kn.jsx)("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),(0,Kn.jsx)("polyline",{points:"7 10 12 15 17 10"}),(0,Kn.jsx)("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]})}),(0,Kn.jsx)("button",{className:"btn-action btn-delete",onClick:()=>(async e=>{if(window.confirm("\xbfEst\xe1s seguro de que quieres eliminar este contrato?"))try{await Qn.delete("/contracts/".concat(e)),await L(),alert("Contrato eliminado exitosamente")}catch(t){console.error("Error deleting contract:",t),alert("Error al eliminar el contrato")}})(e._id||e.id||""),title:"Eliminar ".concat(e.contract_number||"contrato"),children:(0,Kn.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"13",height:"13",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,Kn.jsx)("polyline",{points:"3 6 5 6 21 6"}),(0,Kn.jsx)("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]})})]},e._id||e.id)})})]})})}),l&&(0,Kn.jsx)("div",{className:"modal-overlay",children:(0,Kn.jsxs)("div",{className:"modal",children:[(0,Kn.jsx)("h3",{children:"Crear Nuevo Contrato"}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"T\xedtulo del Contrato:"}),(0,Kn.jsx)("input",{type:"text",value:h.title,onChange:e=>f(u(u({},h),{},{title:e.target.value})),required:!0})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Empresa:"}),(0,Kn.jsx)("input",{type:"text",value:h.company,onChange:e=>f(u(u({},h),{},{company:e.target.value})),required:!0})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Estado:"}),(0,Kn.jsxs)("select",{value:h.status,onChange:e=>f(u(u({},h),{},{status:e.target.value})),required:!0,children:[(0,Kn.jsx)("option",{value:"borrador",children:"Borrador"}),(0,Kn.jsx)("option",{value:"revision",children:"En Revisi\xf3n"}),(0,Kn.jsx)("option",{value:"aprobado",children:"Aprobado"}),(0,Kn.jsx)("option",{value:"firmado",children:"Firmado"}),(0,Kn.jsx)("option",{value:"cancelado",children:"Cancelado"})]})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Descripci\xf3n:"}),(0,Kn.jsx)("textarea",{value:h.description,onChange:e=>f(u(u({},h),{},{description:e.target.value})),rows:4,placeholder:"Describe el contrato...",required:!0})]}),(0,Kn.jsxs)("div",{className:"modal-actions",children:[(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>s(!1),children:"Cancelar"}),(0,Kn.jsx)("button",{className:"btn-primary",onClick:async()=>{try{await Qn.post("/contracts",h),await L(),s(!1),f({title:"",company:"",status:"borrador",description:"",template_id:""})}catch(e){console.error("Error creating contract:",e)}},disabled:!h.title||!h.company,children:"Crear Contrato"})]})]})}),i&&p&&(0,Kn.jsx)("div",{className:"modal-overlay",children:(0,Kn.jsxs)("div",{className:"modal",children:[(0,Kn.jsx)("h3",{children:"Detalles del Contrato"}),(0,Kn.jsxs)("div",{className:"contract-details",children:[(0,Kn.jsxs)("div",{className:"detail-row",children:[(0,Kn.jsx)("strong",{children:"N\xfamero:"})," ",p.contract_number||"N/A"]}),(0,Kn.jsxs)("div",{className:"detail-row",children:[(0,Kn.jsx)("strong",{children:"T\xedtulo:"})," ",p.title||"Sin t\xedtulo"]}),(0,Kn.jsxs)("div",{className:"detail-row",children:[(0,Kn.jsx)("strong",{children:"Empresa:"})," ",p.company_name||p.company]}),(0,Kn.jsxs)("div",{className:"detail-row",children:[(0,Kn.jsx)("strong",{children:"Estado:"})," ",(0,Kn.jsx)("span",{className:"status ".concat(p.status),children:p.status})]}),(0,Kn.jsxs)("div",{className:"detail-row",children:[(0,Kn.jsx)("strong",{children:"Creado:"})," ",new Date(p.createdAt).toLocaleDateString()]}),(p.file_path||p.pdf_path)&&(0,Kn.jsxs)("div",{className:"detail-row",children:[(0,Kn.jsx)("strong",{children:"Documentos:"}),(0,Kn.jsx)("div",{className:"document-links",children:p.file_path&&(0,Kn.jsx)("button",{className:"btn-download-word",onClick:()=>A(p._id||p.id||""),children:"\ud83d\udcc4 Descargar Word"})})]})]}),(0,Kn.jsx)("div",{className:"modal-actions",children:(0,Kn.jsx)("button",{className:"btn-primary",onClick:()=>o(!1),children:"Cerrar"})})]})}),c&&p&&(0,Kn.jsx)("div",{className:"modal-overlay",children:(0,Kn.jsxs)("div",{className:"modal",children:[(0,Kn.jsx)("h3",{children:"Editar Contrato"}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"T\xedtulo del Contrato:"}),(0,Kn.jsx)("input",{type:"text",value:p.title,onChange:e=>m(u(u({},p),{},{title:e.target.value})),required:!0})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Empresa:"}),(0,Kn.jsx)("input",{type:"text",value:p.company_name||p.company,onChange:e=>m(u(u({},p),{},{company_name:e.target.value})),required:!0})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Estado:"}),(0,Kn.jsxs)("select",{value:p.status,onChange:e=>m(u(u({},p),{},{status:e.target.value})),required:!0,children:[(0,Kn.jsx)("option",{value:"borrador",children:"Borrador"}),(0,Kn.jsx)("option",{value:"revision",children:"En Revisi\xf3n"}),(0,Kn.jsx)("option",{value:"aprobado",children:"Aprobado"}),(0,Kn.jsx)("option",{value:"firmado",children:"Firmado"}),(0,Kn.jsx)("option",{value:"cancelado",children:"Cancelado"})]})]}),(0,Kn.jsxs)("div",{className:"modal-actions",children:[(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>d(!1),children:"Cancelar"}),(0,Kn.jsx)("button",{className:"btn-primary",onClick:async()=>{try{await Qn.put("/contracts/".concat(p._id||p.id),{title:p.title,company:p.company_name||p.company,status:p.status}),await L(),d(!1),alert("Contrato actualizado exitosamente")}catch(e){console.error("Error updating contract:",e),alert("Error al actualizar el contrato")}},disabled:!p.title||!(p.company_name||p.company),children:"Guardar Cambios"})]})]})})]})},sr=e=>{let{templateId:t,onProfileSelect:a,onChange:n}=e;const[l,s]=(0,r.useState)([]),[i,o]=(0,r.useState)(null),[c,d]=(0,r.useState)(null),[p,m]=(0,r.useState)(""),[h,f]=(0,r.useState)(null),[g,v]=(0,r.useState)(!1),[x,y]=(0,r.useState)(!1),[b,j]=(0,r.useState)(!1),[N,_]=(0,r.useState)("");(0,r.useEffect)(()=>{w()},[]),(0,r.useEffect)(()=>{t?C():(d(null),m(""),f(null))},[t]),(0,r.useEffect)(()=>{if(n&&n(h),h){const e={};h.field_mappings.forEach(t=>{const a=t.template_variable.replace(/[{}]/g,"");e[a]=t.value||""}),a(e)}else a({})},[h,n,a]);const w=async()=>{y(!0);try{const e=await Qn.get("/suppliers"),t=Array.isArray(e.data)?e.data:e.data.suppliers||[];s(t.filter(e=>e.active))}catch(N){console.error("Error fetching suppliers:",N),_("Error al cargar terceros")}finally{y(!1)}},C=async()=>{if(t){j(!0),_("");try{const e=await Qn.post("/third-party-profiles/analyze-template/".concat(t));e.data.success&&(d(e.data.analysis),1===e.data.analysis.roles_detected.length&&m(e.data.analysis.roles_detected[0]))}catch(N){console.error("Error analyzing template:",N),_("Error al analizar plantilla")}finally{j(!1)}}},S=async(e,a)=>{if(t&&e&&a){v(!0),_("");try{const n=await Qn.post("/third-party-profiles/auto-fill",{supplier_id:e,template_id:t,role_in_template:a});n.data.success&&f(n.data.profile)}catch(N){console.error("Error auto-filling profile:",N),_("Error al auto-llenar perfil")}finally{v(!1)}}};return(0,Kn.jsxs)("div",{className:"third-party-profile-selector",children:[(0,Kn.jsx)("h4",{children:"Seleccionar Tercero para esta Plantilla"}),b&&(0,Kn.jsx)("div",{className:"loading-message",children:"Analizando plantilla..."}),c&&c.roles_count>0&&(0,Kn.jsx)("div",{className:"template-analysis-info",children:(0,Kn.jsxs)("div",{className:"analysis-summary",children:[(0,Kn.jsxs)("span",{className:"analysis-badge",children:[c.roles_count," rol(es) detectado(s)"]}),(0,Kn.jsxs)("span",{className:"analysis-badge",children:[c.total_variables," variables"]}),(0,Kn.jsxs)("span",{className:"analysis-badge",children:[c.classification_rate,"% clasificadas"]})]})}),c&&c.roles_count>1&&(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsxs)("label",{className:"form-label",children:["Rol del Tercero en este Contrato",(0,Kn.jsx)("span",{className:"required",children:"*"})]}),(0,Kn.jsxs)("select",{value:p,onChange:e=>(async e=>{m(e),i&&t&&await S(i._id,e)})(e.target.value),className:"form-select",disabled:g,children:[(0,Kn.jsx)("option",{value:"",children:"-- Seleccionar rol --"}),c.role_groups.map(e=>(0,Kn.jsxs)("option",{value:e.role,children:[e.role_label," (",e.variables.length," campos)"]},e.role))]})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsxs)("label",{className:"form-label",children:["Tercero",(0,Kn.jsx)("span",{className:"required",children:"*"})]}),(0,Kn.jsxs)("select",{value:(null===i||void 0===i?void 0:i._id)||"",onChange:e=>(async e=>{if(!e)return o(null),void f(null);const a=l.find(t=>t._id===e);a&&(o(a),p&&t&&await S(e,p))})(e.target.value),className:"form-select",disabled:x||g,children:[(0,Kn.jsx)("option",{value:"",children:"-- Seleccionar tercero --"}),l.map(e=>{const t=e.legal_name||e.full_name||e.identification_number;return(0,Kn.jsxs)("option",{value:e._id,children:[t," (",e.identification_number,")"]},e._id)})]}),x&&(0,Kn.jsx)("span",{className:"loading-text",children:"Cargando terceros..."})]}),g&&(0,Kn.jsx)("div",{className:"loading-message",children:"Auto-llenando perfil desde datos del tercero..."}),N&&(0,Kn.jsx)("div",{className:"error-message",children:N}),h&&(0,Kn.jsxs)("div",{className:"profile-preview",children:[(0,Kn.jsxs)("div",{className:"profile-header",children:[(0,Kn.jsxs)("div",{className:"profile-title",children:[(0,Kn.jsxs)("h5",{children:["Perfil: ",h.role_label]}),(0,Kn.jsx)("span",{className:"profile-meta",children:(null===i||void 0===i?void 0:i.legal_name)||(null===i||void 0===i?void 0:i.full_name)})]}),(0,Kn.jsxs)("div",{className:"completeness-indicator",children:[(0,Kn.jsx)("div",{className:"completeness-bar-container",children:(0,Kn.jsx)("div",{className:"completeness-bar",style:{width:"".concat(h.completeness.percentage,"%"),backgroundColor:(k=h.completeness.percentage,k>=80?"#4caf50":k>=50?"#ff9800":"#f44336")}})}),(0,Kn.jsxs)("span",{className:"completeness-text",children:[h.completeness.percentage,"% completo"]})]})]}),(0,Kn.jsxs)("div",{className:"profile-stats",children:[(0,Kn.jsxs)("span",{className:"stat",children:[h.field_mappings.filter(e=>e.is_auto_filled).length," auto-llenados"]}),(0,Kn.jsxs)("span",{className:"stat",children:[h.completeness.filled_fields_count,"/",h.field_mappings.length," llenos"]}),h.usage_count>0&&(0,Kn.jsxs)("span",{className:"stat",children:["Usado ",h.usage_count," vez(es)"]})]}),h.completeness.percentage<100&&(0,Kn.jsxs)("div",{className:"missing-fields-section",children:[(0,Kn.jsx)("h6",{children:"Campos Faltantes"}),(0,Kn.jsx)("div",{className:"fields-grid",children:h.field_mappings.filter(e=>!e.value||""===e.value).slice(0,5).map((e,t)=>{const a=e.template_variable.replace(/[{}]/g,"");return(0,Kn.jsxs)("div",{className:"field-item",children:[(0,Kn.jsx)("label",{className:"field-label",children:a}),(0,Kn.jsx)("input",{type:"text",className:"field-input",placeholder:"Ingrese ".concat(a),value:e.value||"",onChange:t=>((e,t)=>{if(!h)return;const a=h.field_mappings.map(a=>a.template_variable===e?u(u({},a),{},{value:t,is_auto_filled:!1}):a),n=u(u({},h),{},{field_mappings:a});f(n)})(e.template_variable,t.target.value)})]},t)})}),h.completeness.missing_fields.length>5&&(0,Kn.jsxs)("p",{className:"more-fields-text",children:["Y ",h.completeness.missing_fields.length-5," campo(s) m\xe1s..."]})]}),100===h.completeness.percentage&&(0,Kn.jsx)("div",{className:"success-message",children:"Todos los campos est\xe1n completos. El perfil est\xe1 listo para generar el contrato."})]}),!i&&!h&&(0,Kn.jsxs)("div",{className:"help-text",children:["Selecciona un tercero para auto-llenar los campos del contrato con su informaci\xf3n.",c&&c.roles_count>0&&(0,Kn.jsx)("span",{children:" Los campos detectados para el rol seleccionado se llenar\xe1n autom\xe1ticamente."})]})]});var k},ir=()=>{const[e,t]=(0,r.useState)([]),[a,n]=(0,r.useState)(null),[l,s]=(0,r.useState)({}),[i,o]=(0,r.useState)(""),[c,d]=(0,r.useState)(""),[p,m]=(0,r.useState)(""),[h,f]=(0,r.useState)(""),[g,v]=(0,r.useState)(!1),[x,y]=(0,r.useState)(""),[b,j]=(0,r.useState)(!1),[N,_]=(0,r.useState)([]),[w,C]=(0,r.useState)(null),[S,k]=(0,r.useState)(!1),E=e=>{console.log("\ud83d\udd04 setAllFieldsFilled llamado con:",e),j(e)};console.log("\ud83d\udd04 ContractGenerator render - allFieldsFilled:",b),(0,r.useEffect)(()=>{(async()=>{try{const e=await Qn.get("/templates");t(e.data)}catch(e){console.error("Error fetching templates:",e),y("Error al cargar las plantillas")}})(),T()},[]);const T=async()=>{k(!0);try{console.log("\ud83d\udd0d [ContractGenerator] Fetching suppliers...");const e=await Qn.get("/suppliers");console.log("\u2705 [ContractGenerator] Suppliers fetched:",e.data),Array.isArray(e.data)?_(e.data):e.data&&Array.isArray(e.data.suppliers)?_(e.data.suppliers):(console.error("\u26a0\ufe0f [ContractGenerator] Unexpected response format:",e.data),_([]))}catch(x){var e;console.error("\u274c [ContractGenerator] Error fetching suppliers:",x),console.error("Error details:",null===(e=x.response)||void 0===e?void 0:e.data),_([])}finally{k(!1)}},P=e=>{return(t=e,t.normalize("NFD").replace(/[\u0300-\u036f]/g,"")).toLowerCase().replace(/[_\s\/\-]+/g,"").replace(/de/g,"").replace(/del/g,"").replace(/la/g,"").replace(/el/g,"");var t};(0,r.useEffect)(()=>{if(console.log("\ud83d\udd04 useEffect ejecutado - Validaci\xf3n"),console.log("  - selectedTemplate:",!!a),console.log("  - selectedTemplate name:",null===a||void 0===a?void 0:a.name),console.log("  - contractData keys:",Object.keys(l)),console.log("  - contractData values:",Object.values(l)),a){const e=new Map;a.fields.forEach(t=>{if(t.required){const a=P(t.field_name);e.has(a)||e.set(a,t)}});const t=Array.from(e.values());console.log("  - Required fields count (unique):",t.length),console.log("  - Required field names:",t.map(e=>e.field_name));const n=t.map(e=>{const t=l[e.field_name],a=t&&""!==t.trim();return console.log("    - ".concat(e.field_name,': "').concat(t,'" \u2192 ').concat(a?"LLENO":"VAC\xcdO")),a}).every(e=>e);console.log("  - Todos llenos:",n),console.log("  - Llamando setAllFieldsFilled con:",n),E(n)}else console.log("  - No hay plantilla seleccionada"),console.log("  - Llamando setAllFieldsFilled con: false"),E(!1)},[l,a]),(0,r.useEffect)(()=>{if(console.log("\ud83d\udd04 useEffect adicional - Forzar validaci\xf3n"),a&&Object.keys(l).length>0){const e=new Map;a.fields.forEach(t=>{if(t.required){const a=P(t.field_name);e.has(a)||e.set(a,t)}});const t=Array.from(e.values()).every(e=>{const t=l[e.field_name];return t&&""!==t.trim()});console.log("\ud83d\udd04 Validaci\xf3n forzada - Todos llenos:",t),b!==t&&(console.log("\ud83d\udd04 Estado cambi\xf3, actualizando..."),E(t))}});const R=(e,t)=>{const n=u({},l);if(n[e]=t,console.log("\ud83d\udcdd CAMPO ACTUALIZADO:",e,"\u2192",'"'.concat(t,'"')),a){const r=A(e);a.fields.filter(e=>A(e.field_name)===r).forEach(a=>{a.field_name!==e&&(n[a.field_name]=t,console.log("\ud83d\udd04 CAMPO SIMILAR ACTUALIZADO:",a.field_name,"\u2192",'"'.concat(t,'"')))});const l=a.fields.find(t=>t.field_name===e);if(l){a.fields.filter(e=>e.can_repeat&&e.repeat_source&&e.repeat_source===l.field_name).forEach(e=>{const a=e.field_name;n[a]=t,console.log("\ud83d\udd04 VARIABLE REPETIDA ACTUALIZADA:",a,"\u2192",'"'.concat(t,'"'))})}}s(n)},L=()=>b,A=e=>{return(t=e,t.normalize("NFD").replace(/[\u0300-\u036f]/g,"")).toLowerCase().replace(/[_\s\/\-]+/g,"").replace(/de/g,"").replace(/del/g,"").replace(/la/g,"").replace(/el/g,"");var t},z=()=>{if(!a)return[];const e=[],t=new Set;return a.fields.forEach(a=>{if(a.can_repeat&&a.repeat_source){const n=a.field_name;t.has(n)||(t.add(n),e.push(a))}}),e};return(0,Kn.jsxs)("div",{className:"contract-generator",children:[(0,Kn.jsxs)("div",{className:"generator-header",children:[(0,Kn.jsx)("h2",{children:"Generador de Contratos"}),(0,Kn.jsx)("p",{children:"Selecciona una plantilla y completa los datos para generar tu contrato"})]}),x&&(0,Kn.jsx)("div",{className:"error-message",children:x}),(0,Kn.jsxs)("div",{className:"template-selection",children:[(0,Kn.jsx)("h3",{children:"1. Seleccionar Plantilla"}),(0,Kn.jsx)("div",{className:"templates-grid",children:e.map(e=>(0,Kn.jsxs)("div",{className:"template-card ".concat((null===a||void 0===a?void 0:a._id)===e._id?"selected":""),onClick:()=>(e=>{n(e),s({}),o(""),d(""),m(""),f(""),y(""),C(null);const t={},a=new Set;e.fields.forEach(e=>{const n=e.field_name;a.has(n)||(a.add(n),t[n]="")}),console.log("\ud83d\udcdd Inicializando datos de plantilla:"),console.log("  - Total fields in template:",e.fields.length),console.log("  - Unique field names:",a.size),console.log("  - Field names:",Array.from(a)),s(t)})(e),children:[(0,Kn.jsx)("h4",{children:e.name}),(0,Kn.jsx)("p",{className:"template-category",children:e.category}),(0,Kn.jsx)("p",{className:"template-description",children:e.description}),(0,Kn.jsxs)("div",{className:"template-stats",children:[(0,Kn.jsxs)("span",{children:[e.fields.length," campos"]}),e.fields.filter(e=>e.can_repeat).length>0&&(0,Kn.jsxs)("span",{className:"repeat-info",children:[e.fields.filter(e=>e.can_repeat).length," variables reutilizables"]})]})]},e._id))})]}),a&&(0,Kn.jsxs)("div",{className:"contract-form",children:[(0,Kn.jsx)("h3",{children:"2. Completar Informaci\xf3n"}),(0,Kn.jsx)(sr,{templateId:a._id,onProfileSelect:e=>{console.log("\ud83d\udccb Profile data received:",e),s(t=>u(u({},t),e))},onChange:e=>{console.log("\ud83d\udd04 Profile changed:",e)}}),(0,Kn.jsxs)("div",{className:"form-section",children:[(0,Kn.jsx)("h4",{children:"Informaci\xf3n Principal"}),(0,Kn.jsx)("div",{className:"form-grid",children:(()=>{if(!a)return[];const e=[],t=new Set;return a.fields.forEach(a=>{const n=A(a.field_name);t.has(n)?console.log('\u26a0\ufe0f  Campo duplicado omitido: "'.concat(a.field_name,'" (normalizado: "').concat(n,'")')):(t.add(n),e.push(a),console.log('\u2705 Campo \xfanico: "'.concat(a.field_name,'" (normalizado: "').concat(n,'")')))}),console.log("\ud83d\udd0d getUniqueFields:"),console.log("  - Total fields in template:",a.fields.length),console.log("  - Unique fields returned:",e.length),e})().map((e,t)=>{var a;const n=e.field_name;return(0,Kn.jsxs)("div",{className:"form-field",children:[(0,Kn.jsxs)("label",{htmlFor:n,children:[e.field_label,e.required&&(0,Kn.jsx)("span",{className:"required",children:"*"})]}),"textarea"===e.field_type?(0,Kn.jsx)("textarea",{id:n,value:l[n]||"",onChange:e=>R(n,e.target.value),className:"form-input",rows:3,required:e.required}):"select"===e.field_type?(0,Kn.jsxs)("select",{id:n,value:l[n]||"",onChange:e=>R(n,e.target.value),className:"form-input",required:e.required,children:[(0,Kn.jsx)("option",{value:"",children:"Seleccionar..."}),null===(a=e.field_options)||void 0===a?void 0:a.map(e=>(0,Kn.jsx)("option",{value:e,children:e},e))]}):(0,Kn.jsx)("input",{type:"date"===e.field_type?"date":"email"===e.field_type?"email":"text",id:n,value:l[n]||"",onChange:e=>R(n,e.target.value),className:"form-input",required:e.required}),e.repeat_count>1&&(0,Kn.jsxs)("div",{className:"repeat-indicator",children:["\ud83d\udccb Se usar\xe1 en ",e.repeat_count," ubicaciones"]})]},"".concat(e.field_name,"-").concat(t))})})]}),z().length>0&&(0,Kn.jsxs)("div",{className:"form-section",children:[(0,Kn.jsx)("h4",{children:"Variables Reutilizadas"}),(0,Kn.jsx)("p",{className:"section-description",children:"Estas variables se llenan autom\xe1ticamente bas\xe1ndose en la informaci\xf3n principal"}),(0,Kn.jsx)("div",{className:"repeated-variables",children:z().map((e,t)=>{const n=e.field_name,r=a.fields.find(t=>t.field_name===String(e.repeat_source));return(0,Kn.jsxs)("div",{className:"repeated-variable",children:[(0,Kn.jsxs)("div",{className:"variable-info",children:[(0,Kn.jsx)("strong",{children:e.field_label}),(0,Kn.jsxs)("span",{className:"source-info",children:["\u2190 Copia de: ",null===r||void 0===r?void 0:r.field_label]})]}),(0,Kn.jsx)("div",{className:"variable-value",children:l[n]||"Se llenar\xe1 autom\xe1ticamente"})]},"".concat(e.field_name,"-").concat(t))})})]}),(0,Kn.jsxs)("div",{className:"form-actions",children:[(0,Kn.jsx)("button",{onClick:async()=>{if(a){if(!L()){const e=a.fields.filter(e=>e.required).filter(e=>{const t=l[e.field_name];return!t||""===t.trim()});return void y("Por favor completa todos los campos requeridos. Faltan: ".concat(e.map(e=>e.field_label).join(", ")))}v(!0),y("");try{const e={};a.fields.forEach(t=>{const a=t.field_name;e[a]=l[a]||""}),console.log("\ud83d\udce4 Enviando datos completos:",{templateId:a._id,dataFields:Object.keys(e).length,data:e}),console.log("\ud83d\udd0d DEBUG: Informaci\xf3n de la plantilla:"),console.log("  - Template ID:",a._id),console.log("  - Template Name:",a.name),console.log("  - Total fields:",a.fields.length);const t=a.fields.filter(e=>e.required);console.log("  - Required fields:",t.length),t.forEach((e,t)=>{console.log("    ".concat(t+1,". ").concat(e.field_label," (").concat(e.field_name,")"))}),console.log("\ud83d\udd0d DEBUG: Datos que se enviar\xe1n:"),Object.keys(e).forEach(t=>{const a=e[t],n=!a||""===a.trim();console.log("  - ".concat(t,': "').concat(a,'" ').concat(n?"(VAC\xcdO)":"(LLENO)"))});const n=t.filter(t=>!e[t.field_name]||""===e[t.field_name].trim());n.length>0?(console.log("\u274c CAMPOS FALTANTES:"),n.forEach(e=>{console.log("  - ".concat(e.field_label," (").concat(e.field_name,")"))})):console.log("\u2705 Todos los campos requeridos est\xe1n llenos");const r=await Qn.post("/contract-generator/generate",{templateId:a._id,data:e});o(r.data.contract),d(r.data.contractId),m(r.data.contract_number),f(r.data.word_file),console.log("\u2705 Contrato generado exitosamente:"),console.log("  - ID:",r.data.contractId),console.log("  - N\xfamero:",r.data.contract_number),console.log("  - Word file:",r.data.word_file)}catch(c){var e,t,n,r,s,i;console.error("\u274c Error generating contract:",c),console.error("\u274c Error response:",null===(e=c.response)||void 0===e?void 0:e.data),console.error("\u274c Error status:",null===(t=c.response)||void 0===t?void 0:t.status),null!==(n=c.response)&&void 0!==n&&null!==(r=n.data)&&void 0!==r&&r.missingFields&&console.error("\u274c Missing fields:",c.response.data.missingFields),y((null===(s=c.response)||void 0===s||null===(i=s.data)||void 0===i?void 0:i.message)||"Error al generar el contrato")}finally{v(!1)}}},disabled:g||!L(),className:"generate-button",children:g?"Generando...":"Generar Contrato"}),!L()&&(0,Kn.jsx)("p",{className:"validation-message",children:"\u26a0\ufe0f Completa todos los campos requeridos para generar el contrato"}),(0,Kn.jsxs)("div",{style:{fontSize:"12px",color:"#666",marginTop:"10px"},children:["DEBUG: allFieldsFilled = ",b.toString()]})]})]}),i&&(0,Kn.jsxs)("div",{className:"generated-contract",children:[(0,Kn.jsx)("h3",{children:"3. Contrato Generado"}),p&&(0,Kn.jsxs)("div",{className:"contract-info",children:[(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"N\xfamero de Contrato:"})," ",p]}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"ID:"})," ",c]})]}),(0,Kn.jsx)("div",{className:"contract-content",children:(0,Kn.jsx)("pre",{children:i})}),(0,Kn.jsxs)("div",{className:"contract-actions",children:[(0,Kn.jsx)("button",{onClick:()=>navigator.clipboard.writeText(i),className:"copy-button",children:"Copiar Contrato"}),h&&(0,Kn.jsx)("button",{onClick:()=>(async(e,t)=>{try{const a=await Qn.get("/contracts/download/".concat(encodeURIComponent(e)),{responseType:"blob"}),n=window.URL.createObjectURL(new Blob([a.data])),r=document.createElement("a");r.href=n,r.setAttribute("download",t),document.body.appendChild(r),r.click(),r.remove(),window.URL.revokeObjectURL(n)}catch(x){console.error("Error downloading file:",x),y("Error al descargar el archivo")}})(h,"contrato-".concat(p||(null===a||void 0===a?void 0:a.name)||"generado",".docx")),className:"download-button word-button",children:"\ud83d\udcc4 Descargar Word"}),(0,Kn.jsx)("button",{onClick:()=>{const e=new Blob([i],{type:"text/plain"}),t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download="contrato-".concat(p||(null===a||void 0===a?void 0:a.name)||"generado",".txt"),n.click()},className:"download-button",children:"\ud83d\udcdd Descargar TXT"})]})]})]})},or=e=>{let{onTemplateCreated:t}=e;const[a,n]=(0,r.useState)(null),[l,s]=(0,r.useState)(""),[i,o]=(0,r.useState)(""),[c,d]=(0,r.useState)(!1),[p,m]=(0,r.useState)([]),[h,f]=(0,r.useState)({}),[g,v]=(0,r.useState)(!1),[x,y]=(0,r.useState)(""),b=(0,r.useRef)(null);return(0,Kn.jsxs)("div",{className:"word-template-upload",children:[(0,Kn.jsxs)("div",{className:"upload-section",children:[(0,Kn.jsx)("h2",{children:"Crear Plantilla desde Word"}),(0,Kn.jsxs)("p",{className:"upload-description",children:["Sube un archivo Word con marcadores ","{{variable}}"," y se crear\xe1 autom\xe1ticamente una plantilla."]}),(0,Kn.jsxs)("div",{className:"file-upload-area",children:[(0,Kn.jsx)("input",{ref:b,type:"file",accept:".docx",onChange:async e=>{var t;const a=null===(t=e.target.files)||void 0===t?void 0:t[0];a&&(a.name.toLowerCase().endsWith(".docx")?(n(a),s(a.name.replace(".docx",""))):alert("Por favor selecciona un archivo Word (.docx)"))},className:"file-input",id:"word-file"}),(0,Kn.jsx)("label",{htmlFor:"word-file",className:"file-label",children:a?a.name:"Seleccionar archivo Word (.docx)"})]}),c&&(0,Kn.jsxs)("div",{className:"processing",children:[(0,Kn.jsx)("div",{className:"spinner"}),(0,Kn.jsx)("p",{children:"Procesando archivo Word y creando plantilla..."})]}),a&&!c&&(0,Kn.jsxs)("div",{className:"template-form",children:[(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{htmlFor:"template-name",children:"Nombre de la Plantilla:"}),(0,Kn.jsx)("input",{id:"template-name",type:"text",value:l,onChange:e=>s(e.target.value),placeholder:"Ej: Contrato de Servicios",required:!0})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{htmlFor:"template-description",children:"Descripci\xf3n:"}),(0,Kn.jsx)("textarea",{id:"template-description",value:i,onChange:e=>o(e.target.value),placeholder:"Descripci\xf3n de la plantilla...",rows:3})]}),(0,Kn.jsx)("div",{className:"submit-section",children:(0,Kn.jsx)("button",{onClick:()=>(async e=>{if(l.trim()){d(!0);try{const t=new FormData;t.append("wordFile",e),t.append("name",l),t.append("description",i),console.log("\ud83d\ude80 Enviando archivo para detectar variables..."),console.log("\ud83d\udcdd Datos enviados:"),console.log("  - Name:",l),console.log("  - Description:",i),console.log("  - File:",e.name);const a=await Qn.post("/templates/detect-variables",t,{headers:{"Content-Type":"multipart/form-data"}});if(console.log("\u2705 Respuesta recibida:",a.data),a.data.variables&&a.data.variables.length>0){console.log("\ud83c\udf89 VARIABLES DETECTADAS EXITOSAMENTE:"),console.log("  - Variables count:",a.data.variables.length),console.log("  - Message:",a.data.message),console.log("  - Variables:",a.data.variables),console.log("  - Requires field names:",a.data.requiresFieldNames),m(a.data.variables),y(a.data.previewHtml||""),v(!0);const e={};a.data.variables.forEach(t=>{e[t.field_name]=t.field_label}),f(e)}else console.log("\u26a0\ufe0f No se detectaron variables"),console.log("  - Response data:",a.data),alert("No se detectaron variables en el documento. Aseg\xfarate de usar marcadores {{variable}}")}catch(n){var t,a;console.error("Error processing Word file:",n),alert("Error al procesar el archivo Word: "+(null===(t=n.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||0)}finally{d(!1)}}else alert("Por favor ingresa el nombre de la plantilla")})(a),className:"btn-submit",disabled:c||!l.trim(),children:c?"Procesando...":"Crear Plantilla"})})]}),g&&(0,Kn.jsxs)("div",{className:"name-assignment-form",children:[(0,Kn.jsx)("h3",{children:"Asignar Nombres Descriptivos a las Variables"}),(0,Kn.jsx)("p",{className:"assignment-description",children:"Asigna nombres descriptivos a cada variable detectada. Estos nombres aparecer\xe1n en el formulario de generaci\xf3n de contratos."}),(0,Kn.jsx)("div",{className:"variables-list",children:p.map((e,t)=>(0,Kn.jsxs)("div",{className:"variable-item",children:[(0,Kn.jsxs)("div",{className:"variable-info",children:[(0,Kn.jsxs)("strong",{children:["Variable ",t+1,":"]}),(0,Kn.jsxs)("code",{children:["{","{",e.original_marker,"}","}"]}),(0,Kn.jsxs)("span",{className:"variable-label",children:["(aparece ",e.repeat_count," veces)"]})]}),(0,Kn.jsxs)("div",{className:"name-assignment",children:[(0,Kn.jsx)("label",{htmlFor:"descriptive-name-".concat(e.field_name,"-").concat(t),children:"Nombre Descriptivo:"}),(0,Kn.jsx)("input",{id:"descriptive-name-".concat(e.field_name,"-").concat(t),type:"text",value:h[e.field_name]||"",onChange:t=>f(a=>u(u({},a),{},{[e.field_name]:t.target.value})),placeholder:"Ej: ".concat(e.field_label),required:!0})]})]},"".concat(e.field_name,"-").concat(t)))}),(0,Kn.jsx)("div",{className:"submit-section",children:(0,Kn.jsx)("button",{onClick:async()=>{if(l.trim()){d(!0);try{const e=p.map(e=>u(u({},e),{},{descriptive_name:h[e.field_name]||e.field_label}));console.log("\ud83c\udfd7\ufe0f CREANDO PLANTILLA CON NOMBRES DESCRIPTIVOS:"),console.log("  - Name:",l),console.log("  - Variables:",e);const a=await Qn.post("/templates/create-template-with-names",{name:l,description:i,variables:e,html:x});console.log("\u2705 PLANTILLA CREADA EXITOSAMENTE:"),console.log("  - Template ID:",a.data.templateId),console.log("  - Template name:",a.data.template.name),console.log("  - Fields:",a.data.template.fields),alert("\u2705 Plantilla creada exitosamente!\n\nNombre: ".concat(a.data.template.name,"\nVariables detectadas: ").concat(a.data.template.fields,"\nID: ").concat(a.data.templateId)),n(null),s(""),o(""),m([]),f({}),v(!1),y(""),b.current&&(b.current.value=""),t&&t(a.data.templateId)}catch(r){var e,a;console.error("Error creating template:",r),alert("Error al crear la plantilla: "+(null===(e=r.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.error)||0)}finally{d(!1)}}else alert("Por favor ingresa el nombre de la plantilla")},className:"btn-submit",disabled:c,children:c?"Creando Plantilla...":"Crear Plantilla con Nombres Asignados"})})]})]}),(0,Kn.jsxs)("div",{className:"instructions",children:[(0,Kn.jsx)("h3",{children:"Instrucciones:"}),(0,Kn.jsxs)("ol",{children:[(0,Kn.jsxs)("li",{children:["Prepara tu documento Word con marcadores como: ",(0,Kn.jsx)("code",{children:"{{nombre_empresa}}"}),", ",(0,Kn.jsx)("code",{children:"{{fecha_contrato}}"}),", etc."]}),(0,Kn.jsx)("li",{children:"Selecciona el archivo Word (.docx)"}),(0,Kn.jsx)("li",{children:"Ingresa el nombre y descripci\xf3n de la plantilla"}),(0,Kn.jsx)("li",{children:'Haz clic en "Crear Plantilla"'}),(0,Kn.jsx)("li",{children:"El sistema detectar\xe1 autom\xe1ticamente las variables y crear\xe1 la plantilla"})]})]})]})},cr=e=>{let{onTemplateCreated:t}=e;const[a,n]=(0,r.useState)(null),[l,s]=(0,r.useState)(!1),[i,o]=(0,r.useState)([]),[c,d]=(0,r.useState)(""),[p,m]=(0,r.useState)(""),[h,f]=(0,r.useState)(""),[g,v]=(0,r.useState)(""),[x,y]=(0,r.useState)(!1),b=(e,t,a)=>{const n=[...i];n[e]=u(u({},n[e]),{},{[t]:a}),o(n)},j=(e,t,a)=>{const n=[...i];n[e]=u(u({},n[e]),{},{[t]:a}),o(n)};return(0,Kn.jsxs)("div",{className:"word-template-upload",children:[(0,Kn.jsx)("h3",{children:"\ud83d\udcc4 Cargar Plantilla desde Word (Con Formato Preservado)"}),(0,Kn.jsxs)("div",{className:"upload-section",children:[(0,Kn.jsx)("input",{type:"file",accept:".docx,.doc",onChange:e=>{var t;const a=null===(t=e.target.files)||void 0===t?void 0:t[0];a&&n(a)},disabled:l}),a&&(0,Kn.jsxs)("div",{className:"file-info",children:[(0,Kn.jsxs)("p",{children:["\ud83d\udcc1 Archivo seleccionado: ",a.name]}),(0,Kn.jsx)("button",{onClick:async()=>{if(a){s(!0);try{var e,t,n,r,l;const s=new FormData;s.append("file",a),console.log("\ud83d\udcc4 Procesando archivo Word con formato preservado...");const i=await Qn.post("/templates/process-word-with-format",s,{headers:{"Content-Type":"multipart/form-data"}});if(console.log("\u2705 Respuesta recibida:",i.data),console.log("\ud83d\udcc4 HTML completo recibido:",null===(e=i.data.formattedHtml)||void 0===e?void 0:e.length,"caracteres"),console.log("\ud83d\udcc4 Vista previa recibida:",null===(t=i.data.previewHtml)||void 0===t?void 0:t.length,"caracteres"),console.log("\ud83d\udcc4 Primeros 500 caracteres del HTML completo:",null===(n=i.data.formattedHtml)||void 0===n?void 0:n.substring(0,500)),console.log("\ud83d\udcc4 \xdaltimos 500 caracteres del HTML completo:",null===(r=i.data.formattedHtml)||void 0===r?void 0:r.substring(Math.max(0,((null===(l=i.data.formattedHtml)||void 0===l?void 0:l.length)||0)-500))),i.data.variables&&i.data.variables.length>0){o(i.data.variables),d(i.data.formattedHtml),m(i.data.previewHtml),y(!0);const e=i.data.variables.map((e,t)=>u(u({},e),{},{descriptive_name:e.original_marker||"Variable ".concat(t+1),type:"text",required:!0}));o(e)}else alert("No se detectaron variables en el documento")}catch(i){console.error("Error procesando archivo Word:",i),alert("Error al procesar el archivo Word")}finally{s(!1)}}},disabled:l,className:"btn btn-primary",children:l?"Procesando...":"Procesar con Formato Completo"})]})]}),x&&(0,Kn.jsxs)("div",{className:"variable-form",children:[(0,Kn.jsx)("h4",{children:"\ud83d\udcdd Configurar Variables de la Plantilla"}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Nombre de la Plantilla:"}),(0,Kn.jsx)("input",{type:"text",value:h,onChange:e=>f(e.target.value),placeholder:"Ej: Contrato de Servicios",className:"form-control"})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Descripci\xf3n (opcional):"}),(0,Kn.jsx)("textarea",{value:g,onChange:e=>v(e.target.value),placeholder:"Descripci\xf3n de la plantilla...",className:"form-control",rows:3})]}),(0,Kn.jsxs)("h5",{children:["\ud83d\udd27 Variables Detectadas (",i.length,"):"]}),i.map((e,t)=>(0,Kn.jsxs)("div",{className:"variable-item",children:[(0,Kn.jsxs)("div",{className:"variable-header",children:[(0,Kn.jsxs)("strong",{children:["Variable ",t+1,":"]})," ",e.original_marker]}),(0,Kn.jsxs)("div",{className:"form-row",children:[(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Tipo:"}),(0,Kn.jsxs)("select",{value:e.type,onChange:e=>b(t,"type",e.target.value),className:"form-control",children:[(0,Kn.jsx)("option",{value:"text",children:"Texto"}),(0,Kn.jsx)("option",{value:"number",children:"N\xfamero"}),(0,Kn.jsx)("option",{value:"date",children:"Fecha"}),(0,Kn.jsx)("option",{value:"email",children:"Email"}),(0,Kn.jsx)("option",{value:"textarea",children:"Texto Largo"})]})]}),(0,Kn.jsx)("div",{className:"form-group",children:(0,Kn.jsxs)("label",{children:[(0,Kn.jsx)("input",{type:"checkbox",checked:e.required||!1,onChange:e=>j(t,"required",e.target.checked)}),"Requerido"]})})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsxs)("label",{children:[(0,Kn.jsx)("input",{type:"checkbox",checked:e.is_repeated||!1,onChange:e=>j(t,"is_repeated",e.target.checked)}),"Variable repetida"]}),e.is_repeated&&(0,Kn.jsxs)("div",{className:"form-group",style:{marginTop:"10px"},children:[(0,Kn.jsx)("label",{children:"Copiar informaci\xf3n de la variable n\xfamero:"}),(0,Kn.jsxs)("select",{value:e.repeat_source||"",onChange:e=>b(t,"repeat_source",e.target.value),className:"form-control",children:[(0,Kn.jsx)("option",{value:"",children:"Seleccionar variable..."}),i.map((e,a)=>a!==t?(0,Kn.jsxs)("option",{value:a+1,children:["#",a+1," - ",e.original_marker||e.descriptive_name]},a):null)]})]})]})]},t)),(0,Kn.jsxs)("div",{className:"preview-section",children:[(0,Kn.jsx)("h5",{children:"\ud83d\udc41\ufe0f Vista Previa del Formato:"}),(0,Kn.jsx)("div",{className:"html-preview",dangerouslySetInnerHTML:{__html:c||p},style:{border:"1px solid #ddd",padding:"15px",borderRadius:"5px",backgroundColor:"#f9f9f9",maxHeight:"800px",overflow:"auto",minHeight:"400px"}})]}),(0,Kn.jsx)("div",{className:"form-actions",children:(0,Kn.jsx)("button",{onClick:async()=>{if(h.trim()){s(!0);try{console.log("\ud83c\udfd7\ufe0f Creando plantilla con formato preservado...");const e=i.map(e=>u(u({},e),{},{descriptive_name:e.original_marker||e.descriptive_name||"Variable ".concat(i.indexOf(e)+1)})),a=await Qn.post("/templates/create-template-with-names",{name:h,description:g,variables:e,html:p,formattedHtml:c});console.log("\u2705 Plantilla creada:",a.data),alert("Plantilla creada exitosamente con formato preservado"),t(a.data.template),n(null),o([]),d(""),m(""),f(""),v(""),y(!1)}catch(e){console.error("Error creando plantilla:",e),alert("Error al crear la plantilla")}finally{s(!1)}}else alert("Por favor ingresa un nombre para la plantilla")},disabled:l||!h.trim(),className:"btn btn-success",children:l?"Creando...":"Crear Plantilla con Formato Preservado"})})]})]})},dr=e=>{var t;let{onContractGenerated:a}=e;const[n,l]=(0,r.useState)([]),[s,i]=(0,r.useState)(null),[o,c]=(0,r.useState)({}),[d,p]=(0,r.useState)(!0),[m,h]=(0,r.useState)(!1),[f,g]=(0,r.useState)([]),[v,x]=(0,r.useState)(null),[y,b]=(0,r.useState)(!1);(0,r.useEffect)(()=>{j(),N()},[]);const j=async()=>{try{const e=await Qn.get("/templates");l(e.data)}catch(e){console.error("Error fetching templates:",e)}finally{p(!1)}},N=async()=>{b(!0);try{console.log("\ud83d\udd0d [WordContractGenerator] Fetching suppliers...");const e=await Qn.get("/suppliers");console.log("\u2705 [WordContractGenerator] Suppliers fetched:",e.data),Array.isArray(e.data)?g(e.data):e.data&&Array.isArray(e.data.suppliers)?g(e.data.suppliers):(console.error("\u26a0\ufe0f [WordContractGenerator] Unexpected response format:",e.data),g([]))}catch(t){var e;console.error("\u274c [WordContractGenerator] Error fetching suppliers:",t),console.error("Error details:",null===(e=t.response)||void 0===e?void 0:e.data),g([])}finally{b(!1)}},_=e=>e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]/g,""),w=e=>{if(console.log("\ud83d\udd0d [handleSupplierSelect] Called with supplierId:",e),!e)return console.log("\u26a0\ufe0f [handleSupplierSelect] No supplier ID provided, clearing selection"),void x(null);const t=f.find(t=>t._id===e);if(console.log("\ud83d\udd0d [handleSupplierSelect] Found supplier:",t?t.legal_name||t.full_name:"NOT FOUND"),console.log("\ud83d\udd0d [handleSupplierSelect] Selected template:",s?s.name:"NO TEMPLATE"),!t||!s)return void console.error("\u274c [handleSupplierSelect] Missing supplier or template");x(t),console.log("\u2705 [handleSupplierSelect] Supplier set:",t.legal_name||t.full_name);const a=u({},o);console.log("\ud83d\udd0d [handleSupplierSelect] Template fields count:",s.fields.length);let n=0;s.fields.forEach(e=>{const r=((e,t)=>{const a=_(e),n={email:["email","correo","correelectronico","mail"],telefono:["phone","telefono","celular","movil","tel"],phone:["phone","telefono","celular","movil","tel"],direccion:["address","direccion","domicilio"],address:["address","direccion","domicilio"],ciudad:["city","ciudad","municipio"],city:["city","ciudad","municipio"],pais:["country","pais","nacion"],country:["country","pais","nacion"],identificacion:["identification_number","identificacion","nit","cedula","documento","nrodocumento"],nit:["identification_number","identificacion","nit"],cedula:["identification_number","identificacion","cedula"],documento:["identification_number","identificacion","documento"],tipodocumento:["identification_type","tipodocumento","tipoidentificacion"],tipoidentificacion:["identification_type","tipodocumento","tipoidentificacion"],nombre:["full_name","legal_name","nombre","nombreCompleto","razonsocial"],razonsocial:["legal_name","razonsocial","nombre","nombreCompleto"],nombreempresa:["legal_name","legal_name_short","nombreempresa","empresa"],empresa:["legal_name","legal_name_short","nombreempresa","empresa"],representantelegal:["legal_representative_name","representantelegal","representante"],representante:["legal_representative_name","representantelegal","representante"],cedularepresentante:["legal_representative_id_number","cedularepresentante","documentorepresentante"],documentorepresentante:["legal_representative_id_number","cedularepresentante","documentorepresentante"],tipoiddrepresentante:["legal_representative_id_type","tipoiddrepresentante"],ciudadexpedicion:["id_issue_city","ciudadexpedicion","lugarexpedicion"],lugarexpedicion:["id_issue_city","ciudadexpedicion","lugarexpedicion"]};for(const[l,s]of Object.entries(n)){const e=_(l);if(a.includes(e)||e.includes(a))for(const a of s){const e=t[a];if(void 0!==e&&null!==e&&""!==e)return e}}const r=Object.keys(t);for(const l of r){const e=_(l);if(a===e||a.includes(e)||e.includes(a)){const e=t[l];if(void 0!==e&&null!==e&&""!==e)return e}}if(t.custom_fields)for(const[l,s]of Object.entries(t.custom_fields)){const e=_(l);if((a===e||a.includes(e)||e.includes(a))&&void 0!==s&&null!==s&&""!==s)return s}return null})(e.name,t);console.log('  \ud83d\udccb Field "'.concat(e.name,'" -> ').concat(null!==r?'"'.concat(r,'"'):"NO MATCH")),null!==r&&(a[e.name]=r,n++)}),console.log("\u2705 [handleSupplierSelect] Matched ".concat(n,"/").concat(s.fields.length," fields")),console.log("\ud83d\udd0d [handleSupplierSelect] New form data:",a),c(a),console.log("\u2705 [handleSupplierSelect] Form data updated")},C=(e,t)=>{c(a=>u(u({},a),{},{[e]:t}))},S=e=>{var t;const a=o[e.name]||"";switch(e.type){case"text":case"email":return(0,Kn.jsx)("input",{type:e.type,value:a,onChange:t=>C(e.name,t.target.value),placeholder:e.description||e.name,required:e.required,className:"form-input"});case"number":return(0,Kn.jsx)("input",{type:"number",value:a,onChange:t=>C(e.name,t.target.value),placeholder:e.description||e.name,required:e.required,className:"form-input"});case"date":return(0,Kn.jsx)("input",{type:"date",value:a,onChange:t=>C(e.name,t.target.value),required:e.required,className:"form-input"});case"select":return(0,Kn.jsxs)("select",{value:a,onChange:t=>C(e.name,t.target.value),required:e.required,className:"form-input",children:[(0,Kn.jsx)("option",{value:"",children:"Seleccionar..."}),null===(t=e.options)||void 0===t?void 0:t.map((e,t)=>(0,Kn.jsx)("option",{value:e,children:e},t))]});default:return(0,Kn.jsx)("input",{type:"text",value:a,onChange:t=>C(e.name,t.target.value),placeholder:e.description||e.name,required:e.required,className:"form-input"})}};return d?(0,Kn.jsx)("div",{className:"loading",children:"Cargando plantillas..."}):(0,Kn.jsxs)("div",{className:"word-contract-generator",children:[(0,Kn.jsxs)("div",{className:"generator-header",children:[(0,Kn.jsx)("h2",{children:"Generador de Contratos desde Word"}),(0,Kn.jsx)("p",{children:"Selecciona una plantilla y completa los campos para generar tu contrato"})]}),(0,Kn.jsxs)("div",{className:"generator-content",children:[(0,Kn.jsxs)("div",{className:"templates-section",children:[(0,Kn.jsx)("h3",{children:"Plantillas Disponibles"}),0===n.length?(0,Kn.jsx)("div",{className:"no-templates",children:(0,Kn.jsx)("p",{children:"No hay plantillas disponibles"})}):(0,Kn.jsx)("div",{className:"templates-grid",children:n.map(e=>{var t;return(0,Kn.jsxs)("div",{className:"template-card ".concat((null===s||void 0===s?void 0:s._id)===e._id?"selected":""),onClick:()=>(e=>{i(e),c({}),x(null)})(e),children:[(0,Kn.jsx)("h4",{children:e.name}),(0,Kn.jsx)("p",{children:e.description}),(0,Kn.jsxs)("div",{className:"template-info",children:[(0,Kn.jsxs)("span",{className:"field-count",children:[(null===(t=e.fields)||void 0===t?void 0:t.length)||0," campos"]}),(0,Kn.jsx)("span",{className:"template-type",children:"Word"})]})]},e._id)})})]}),s&&(0,Kn.jsxs)("div",{className:"form-section",children:[(0,Kn.jsxs)("div",{className:"form-header",children:[(0,Kn.jsx)("h3",{children:"Completar Informaci\xf3n"}),(0,Kn.jsxs)("p",{children:["Plantilla: ",s.name]})]}),(0,Kn.jsx)("div",{className:"supplier-selector-section",children:(0,Kn.jsxs)("div",{className:"field-group",children:[(0,Kn.jsxs)("label",{className:"field-label",children:["Seleccionar Tercero (Opcional)",(0,Kn.jsx)("span",{className:"field-hint",children:" - Prellena autom\xe1ticamente los campos del formulario"})]}),(0,Kn.jsxs)("select",{value:(null===v||void 0===v?void 0:v._id)||"",onChange:e=>w(e.target.value),className:"form-input supplier-select",disabled:y,children:[(0,Kn.jsx)("option",{value:"",children:"-- Seleccionar tercero existente --"}),f.map(e=>{const t=e.legal_name||e.full_name||e.identification_number,a=e.identification_number;return(0,Kn.jsxs)("option",{value:e._id,children:[t," (",a,")"]},e._id)})]}),y&&(0,Kn.jsx)("p",{className:"loading-text",children:"Cargando terceros..."}),v&&(0,Kn.jsxs)("div",{className:"selected-supplier-info",children:[(0,Kn.jsxs)("p",{className:"info-text",children:["Tercero seleccionado: ",(0,Kn.jsx)("strong",{children:v.legal_name||v.full_name})]}),(0,Kn.jsx)("p",{className:"info-subtext",children:"Los campos se han prellenado autom\xe1ticamente. Puedes modificarlos si es necesario."})]})]})}),(0,Kn.jsx)("div",{className:"form-fields",children:null===(t=s.fields)||void 0===t?void 0:t.map((e,t)=>(0,Kn.jsxs)("div",{className:"field-group",children:[(0,Kn.jsxs)("label",{className:"field-label",children:[e.name,e.required&&(0,Kn.jsx)("span",{className:"required",children:"*"})]}),e.description&&(0,Kn.jsx)("p",{className:"field-description",children:e.description}),S(e)]},t))}),(0,Kn.jsx)("div",{className:"form-actions",children:(0,Kn.jsx)("button",{onClick:async()=>{if(s){h(!0);try{const e=await Qn.post("/templates/generate-word-contract",{templateId:s._id,formData:o},{responseType:"blob"}),t=new Blob([e.data],{type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}),n=window.URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download="".concat(s.name,"_generado.docx"),document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(n);const l=await Qn.post("/contracts",{title:"".concat(s.name," - ").concat((new Date).toLocaleDateString()),company:"Empresa del Usuario",status:"borrador",description:"Contrato generado desde plantilla: ".concat(s.name),template_id:s._id});a&&a(l.data.id),alert("Contrato generado exitosamente")}catch(e){console.error("Error generating contract:",e),alert("Error al generar el contrato")}finally{h(!1)}}},disabled:m,className:"btn-generate",children:m?"Generando...":"Generar Contrato"})})]})]})]})},ur=e=>{var t,a;let{templateId:n,onClose:l}=e;const[s,i]=(0,r.useState)(null),[o,c]=(0,r.useState)([]),[d,p]=(0,r.useState)(!0),[m,h]=(0,r.useState)(!1),[f,g]=(0,r.useState)([]);(0,r.useEffect)(()=>{v()},[n]);const v=async()=>{try{p(!0);const e=await Qn.get("/templates/template-details/".concat(n));i(e.data.template),c(e.data.variables),g(e.data.variables)}catch(e){console.error("Error fetching template details:",e)}finally{p(!1)}},x=(e,t,a)=>{const n=[...f];n[e]=u(u({},n[e]),{},{[t]:a}),g(n)};return d?(0,Kn.jsx)("div",{className:"template-variables-overlay",children:(0,Kn.jsx)("div",{className:"template-variables-modal",children:(0,Kn.jsx)("div",{className:"loading",children:"Cargando detalles de la plantilla..."})})}):(0,Kn.jsx)("div",{className:"template-variables-overlay",children:(0,Kn.jsxs)("div",{className:"template-variables-modal",children:[(0,Kn.jsxs)("div",{className:"modal-header",children:[(0,Kn.jsxs)("h2",{children:["Variables de la Plantilla: ",null===s||void 0===s?void 0:s.name]}),(0,Kn.jsx)("button",{className:"close-button",onClick:l,children:"\xd7"})]}),(0,Kn.jsx)("div",{className:"template-info",children:(0,Kn.jsxs)("div",{className:"info-section",children:[(0,Kn.jsx)("h3",{children:"Informaci\xf3n de la Plantilla"}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Categor\xeda:"})," ",null===s||void 0===s?void 0:s.category]}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Descripci\xf3n:"})," ",(null===s||void 0===s?void 0:s.description)||"Sin descripci\xf3n"]}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Creado por:"})," ",null===s||void 0===s||null===(t=s.created_by)||void 0===t?void 0:t.name]}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Empresa:"})," ",(null===s||void 0===s||null===(a=s.company)||void 0===a?void 0:a.name)||"Sin empresa"]}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Total de variables:"})," ",o.length]})]})}),(0,Kn.jsxs)("div",{className:"variables-section",children:[(0,Kn.jsxs)("div",{className:"section-header",children:[(0,Kn.jsx)("h3",{children:"Variables Detectadas"}),(0,Kn.jsx)("div",{className:"section-actions",children:m?(0,Kn.jsxs)("div",{className:"edit-actions",children:[(0,Kn.jsx)("button",{className:"btn-save",onClick:async()=>{try{await Qn.put("/templates/template-variables/".concat(n),{variables:f}),c(f),h(!1),alert("Variables actualizadas correctamente")}catch(e){console.error("Error updating variables:",e),alert("Error al actualizar las variables")}},children:"Guardar Cambios"}),(0,Kn.jsx)("button",{className:"btn-cancel",onClick:()=>{g(o),h(!1)},children:"Cancelar"})]}):(0,Kn.jsx)("button",{className:"btn-edit",onClick:()=>h(!0),children:"Editar Variables"})})]}),(0,Kn.jsx)("div",{className:"variables-list",children:(m?f:o).map((e,t)=>{var a;return(0,Kn.jsxs)("div",{className:"variable-card",children:[(0,Kn.jsxs)("div",{className:"variable-header",children:[(0,Kn.jsxs)("span",{className:"variable-number",children:["#",e.number]}),(0,Kn.jsx)("span",{className:"variable-marker",children:e.original_marker}),e.repeat_count>1&&(0,Kn.jsxs)("span",{className:"repeat-count",children:["(aparece ",e.repeat_count," veces)"]}),f.some((a,n)=>n!==t&&a.repeat_source===e.number)&&(0,Kn.jsx)("span",{className:"source-indicator",children:"\ud83d\udccb Variable origen"})]}),(0,Kn.jsxs)("div",{className:"variable-details",children:[(0,Kn.jsxs)("div",{className:"detail-row",children:[(0,Kn.jsx)("label",{children:"Informaci\xf3n de Campo:"}),m?(0,Kn.jsx)("input",{type:"text",value:e.field_name,onChange:e=>x(t,"field_name",e.target.value),className:"field-input"}):(0,Kn.jsx)("span",{className:"field-value",children:e.field_name})]}),(0,Kn.jsxs)("div",{className:"detail-row",children:[(0,Kn.jsx)("label",{children:"Nombre de Variable:"}),m?(0,Kn.jsx)("input",{type:"text",value:e.field_label,onChange:e=>x(t,"field_label",e.target.value),className:"field-input"}):(0,Kn.jsx)("span",{className:"field-value",children:e.field_label})]}),(0,Kn.jsxs)("div",{className:"detail-row",children:[(0,Kn.jsx)("label",{children:"Tipo:"}),m?(0,Kn.jsxs)("select",{value:e.field_type,onChange:e=>x(t,"field_type",e.target.value),className:"field-select",children:[(0,Kn.jsx)("option",{value:"text",children:"Texto"}),(0,Kn.jsx)("option",{value:"number",children:"N\xfamero"}),(0,Kn.jsx)("option",{value:"date",children:"Fecha"}),(0,Kn.jsx)("option",{value:"email",children:"Email"}),(0,Kn.jsx)("option",{value:"textarea",children:"\xc1rea de texto"}),(0,Kn.jsx)("option",{value:"select",children:"Selecci\xf3n"})]}):(0,Kn.jsx)("span",{className:"field-value",children:e.field_type})]}),(0,Kn.jsxs)("div",{className:"detail-row",children:[(0,Kn.jsx)("label",{children:"Descripci\xf3n:"}),m?(0,Kn.jsx)("textarea",{value:e.description,onChange:e=>x(t,"description",e.target.value),className:"field-textarea",rows:2}):(0,Kn.jsx)("span",{className:"field-value",children:e.description})]}),(0,Kn.jsxs)("div",{className:"detail-row",children:[(0,Kn.jsx)("label",{children:"Requerido:"}),m?(0,Kn.jsx)("input",{type:"checkbox",checked:e.required,onChange:e=>x(t,"required",e.target.checked),className:"field-checkbox"}):(0,Kn.jsx)("span",{className:"field-value",children:e.required?"S\xed":"No"})]}),m&&(0,Kn.jsxs)("div",{className:"repeat-section",children:[(0,Kn.jsx)("div",{className:"detail-row",children:(0,Kn.jsxs)("label",{children:[(0,Kn.jsx)("input",{type:"checkbox",checked:e.can_repeat,onChange:()=>(e=>{const t=[...f];t[e]=u(u({},t[e]),{},{can_repeat:!t[e].can_repeat,repeat_source:t[e].can_repeat?t[e].repeat_source:null}),g(t)})(t),className:"field-checkbox"}),"Puede repetir informaci\xf3n"]})}),e.can_repeat&&(0,Kn.jsxs)("div",{className:"detail-row",children:[(0,Kn.jsx)("label",{children:"Repetir informaci\xf3n de la variable:"}),(0,Kn.jsxs)("select",{value:e.repeat_source||"",onChange:e=>((e,t)=>{const a=parseInt(t)-1,n=[...f];if(t&&a>=0&&a<f.length&&a!==e){const t=f[a];n[e]=u(u({},n[e]),{},{field_name:t.field_name,field_label:t.field_label,field_type:t.field_type,description:t.description,repeat_source:a+1})}else n[e]=u(u({},n[e]),{},""===t?{repeat_source:null}:{repeat_source:t?parseInt(t):null});g(n)})(t,e.target.value),className:"field-select",children:[(0,Kn.jsx)("option",{value:"",children:"Seleccionar variable origen..."}),f.map((e,a)=>a!==t&&(0,Kn.jsxs)("option",{value:a+1,children:["#",a+1," - ",e.field_label," (","{","{",e.original_marker,"}","}",")"]},a))]}),e.repeat_source&&(0,Kn.jsx)("div",{className:"repeat-info",children:(0,Kn.jsxs)("small",{children:["Esta variable copiar\xe1 la informaci\xf3n de: ",(0,Kn.jsxs)("strong",{children:["#",e.repeat_source," - ",null===(a=f[e.repeat_source-1])||void 0===a?void 0:a.field_label]})]})})]})]})]})]},t)})})]})]})})},pr=()=>{const[e,t]=(0,r.useState)([]),[a,n]=(0,r.useState)(!0),[l,s]=(0,r.useState)(!1),[i,o]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!1),[p,m]=(0,r.useState)(!1),[h,f]=(0,r.useState)({name:"",type:"",description:"",content:""}),[g,v]=(0,r.useState)(!1),[x,y]=(0,r.useState)(!1),[b,j]=(0,r.useState)(!1),[N,_]=(0,r.useState)(!1),[w,C]=(0,r.useState)(null),[S,k]=(0,r.useState)({name:"",type:"",description:"",content:""});(0,r.useEffect)(()=>{E()},[]);const E=async()=>{try{const e=await Qn.get("/templates");t(e.data)}catch(e){console.error("Error fetching templates:",e)}finally{n(!1)}};return a?(0,Kn.jsx)("div",{className:"loading",children:"Cargando plantillas..."}):(0,Kn.jsxs)("div",{className:"templates",children:[(0,Kn.jsxs)("div",{className:"page-header",children:[(0,Kn.jsx)("h1",{children:"Plantillas de Contratos"}),(0,Kn.jsxs)("div",{className:"header-actions",children:[(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>o(!0),children:"Subir desde Word"}),(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>d(!0),children:"Subir Word (Con Formato)"}),(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>m(!0),children:"Generar Contrato"}),(0,Kn.jsx)("button",{className:"btn-primary",onClick:()=>s(!0),children:"Nueva Plantilla"})]})]}),(0,Kn.jsx)("div",{className:"templates-list",children:0===e.length?(0,Kn.jsxs)("div",{className:"empty-state",children:[(0,Kn.jsx)("h3",{children:"No hay plantillas"}),(0,Kn.jsx)("p",{children:"Crea tu primera plantilla para comenzar"})]}):e.map(e=>(0,Kn.jsxs)("div",{className:"template-card",children:[(0,Kn.jsx)("h3",{children:e.name}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Tipo:"})," ",e.type]}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Descripci\xf3n:"})," ",e.description]}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Creado:"})," ",new Date(e.createdAt).toLocaleDateString()]}),(0,Kn.jsxs)("div",{className:"template-actions",children:[(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>(e=>{C(e),v(!0)})(e),children:"Ver"}),(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>(e=>{C(e),k({name:e.name,type:e.type,description:e.description,content:e.content||""}),y(!0)})(e),children:"Editar"}),(0,Kn.jsx)("button",{className:"btn-info",onClick:()=>(e=>{C(e),_(!0)})(e),children:"Variables"}),(0,Kn.jsx)("button",{className:"btn-primary",onClick:()=>(e=>{C(e),j(!0)})(e),children:"Usar"}),(0,Kn.jsx)("button",{className:"btn-danger",onClick:()=>(async e=>{if(window.confirm("\xbfEst\xe1s seguro de que quieres eliminar esta plantilla?"))try{await Qn.delete("/templates/".concat(e)),await E()}catch(t){console.error("Error deleting template:",t)}})(e._id||e.id),children:"Eliminar"})]})]},e._id||e.id))}),l&&(0,Kn.jsx)("div",{className:"modal-overlay",children:(0,Kn.jsxs)("div",{className:"modal",children:[(0,Kn.jsx)("h3",{children:"Crear Nueva Plantilla"}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Nombre de la Plantilla:"}),(0,Kn.jsx)("input",{type:"text",value:h.name,onChange:e=>f(u(u({},h),{},{name:e.target.value})),required:!0})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Tipo:"}),(0,Kn.jsxs)("select",{value:h.type,onChange:e=>f(u(u({},h),{},{type:e.target.value})),required:!0,children:[(0,Kn.jsx)("option",{value:"",children:"Seleccionar tipo"}),(0,Kn.jsx)("option",{value:"contrato",children:"Contrato"}),(0,Kn.jsx)("option",{value:"acuerdo",children:"Acuerdo"}),(0,Kn.jsx)("option",{value:"convenio",children:"Convenio"}),(0,Kn.jsx)("option",{value:"otro",children:"Otro"})]})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Descripci\xf3n:"}),(0,Kn.jsx)("textarea",{value:h.description,onChange:e=>f(u(u({},h),{},{description:e.target.value})),rows:3,required:!0})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Contenido de la Plantilla:"}),(0,Kn.jsx)("textarea",{value:h.content,onChange:e=>f(u(u({},h),{},{content:e.target.value})),rows:10,placeholder:"Escribe el contenido de la plantilla aqu\xed...",required:!0})]}),(0,Kn.jsxs)("div",{className:"modal-actions",children:[(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>s(!1),children:"Cancelar"}),(0,Kn.jsx)("button",{className:"btn-primary",onClick:async()=>{try{await Qn.post("/templates",h),await E(),s(!1),f({name:"",type:"",description:"",content:""})}catch(e){console.error("Error creating template:",e)}},disabled:!h.name||!h.type||!h.content,children:"Crear Plantilla"})]})]})}),g&&w&&(0,Kn.jsx)("div",{className:"modal-overlay",children:(0,Kn.jsxs)("div",{className:"modal",children:[(0,Kn.jsxs)("h3",{children:["Ver Plantilla: ",w.name]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Nombre:"}),(0,Kn.jsx)("p",{children:w.name})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Tipo:"}),(0,Kn.jsx)("p",{children:w.type})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Descripci\xf3n:"}),(0,Kn.jsx)("p",{children:w.description})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Contenido:"}),(0,Kn.jsx)("div",{className:"template-content-preview",style:{border:"1px solid #ddd",padding:"1rem",borderRadius:"4px",backgroundColor:"#f9f9f9",maxHeight:"400px",overflowY:"auto",fontFamily:"Times New Roman, serif",lineHeight:"1.6",color:"#333"},dangerouslySetInnerHTML:{__html:(e=>{if(!e)return"<p>Sin contenido</p>";return e.replace(/\{\{([^}]+)\}\}/g,'<span class="variable">{{$1}}</span>')})(w.content||"")}})]}),(0,Kn.jsx)("div",{className:"modal-actions",children:(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>v(!1),children:"Cerrar"})})]})}),x&&w&&(0,Kn.jsx)("div",{className:"modal-overlay",children:(0,Kn.jsxs)("div",{className:"modal",children:[(0,Kn.jsxs)("h3",{children:["Editar Plantilla: ",w.name]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Nombre de la Plantilla:"}),(0,Kn.jsx)("input",{type:"text",value:S.name,onChange:e=>k(u(u({},S),{},{name:e.target.value})),required:!0})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Tipo:"}),(0,Kn.jsxs)("select",{value:S.type,onChange:e=>k(u(u({},S),{},{type:e.target.value})),required:!0,children:[(0,Kn.jsx)("option",{value:"",children:"Seleccionar tipo"}),(0,Kn.jsx)("option",{value:"contrato",children:"Contrato"}),(0,Kn.jsx)("option",{value:"acuerdo",children:"Acuerdo"}),(0,Kn.jsx)("option",{value:"convenio",children:"Convenio"}),(0,Kn.jsx)("option",{value:"otro",children:"Otro"})]})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Descripci\xf3n:"}),(0,Kn.jsx)("textarea",{value:S.description,onChange:e=>k(u(u({},S),{},{description:e.target.value})),rows:3,required:!0})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Contenido de la Plantilla:"}),(0,Kn.jsx)("textarea",{value:S.content,onChange:e=>k(u(u({},S),{},{content:e.target.value})),rows:10,placeholder:"Escribe el contenido de la plantilla aqu\xed...",required:!0})]}),(0,Kn.jsxs)("div",{className:"modal-actions",children:[(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>y(!1),children:"Cancelar"}),(0,Kn.jsx)("button",{className:"btn-primary",onClick:async()=>{if(w)try{await Qn.put("/templates/".concat(w.id),S),await E(),y(!1),C(null)}catch(e){console.error("Error updating template:",e)}},disabled:!S.name||!S.type||!S.content,children:"Actualizar Plantilla"})]})]})}),b&&w&&(0,Kn.jsx)("div",{className:"modal-overlay",children:(0,Kn.jsxs)("div",{className:"modal",children:[(0,Kn.jsxs)("h3",{children:["Usar Plantilla: ",w.name]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Plantilla seleccionada:"}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:w.name})," - ",w.type]}),(0,Kn.jsx)("p",{children:w.description})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"\xbfQu\xe9 quieres hacer con esta plantilla?"}),(0,Kn.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[(0,Kn.jsx)("button",{className:"btn-primary",onClick:()=>{alert("Funcionalidad de crear contrato desde plantilla - En desarrollo"),j(!1)},children:"Crear Contrato"}),(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>{const e=new Blob([w.content||""],{type:"text/plain"}),t=URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.download="".concat(w.name,".txt"),a.click(),URL.revokeObjectURL(t),j(!1)},children:"Descargar Plantilla"})]})]}),(0,Kn.jsx)("div",{className:"modal-actions",children:(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>j(!1),children:"Cancelar"})})]})}),i&&(0,Kn.jsx)("div",{className:"modal-overlay",children:(0,Kn.jsxs)("div",{className:"modal large-modal",children:[(0,Kn.jsxs)("div",{className:"modal-header",children:[(0,Kn.jsx)("h3",{children:"Subir Plantilla desde Word"}),(0,Kn.jsx)("button",{className:"btn-close",onClick:()=>o(!1),children:"\xd7"})]}),(0,Kn.jsx)("div",{className:"modal-content",children:(0,Kn.jsx)(or,{onTemplateCreated:e=>{o(!1),E()}})})]})}),c&&(0,Kn.jsx)("div",{className:"modal-overlay",children:(0,Kn.jsxs)("div",{className:"modal large-modal",children:[(0,Kn.jsxs)("div",{className:"modal-header",children:[(0,Kn.jsx)("h3",{children:"Subir Plantilla desde Word (Con Formato Preservado)"}),(0,Kn.jsx)("button",{className:"btn-close",onClick:()=>d(!1),children:"\xd7"})]}),(0,Kn.jsx)("div",{className:"modal-content",children:(0,Kn.jsx)(cr,{onTemplateCreated:e=>{d(!1),E()}})})]})}),p&&(0,Kn.jsx)("div",{className:"modal-overlay",children:(0,Kn.jsxs)("div",{className:"modal large-modal",children:[(0,Kn.jsxs)("div",{className:"modal-header",children:[(0,Kn.jsx)("h3",{children:"Generar Contrato desde Word"}),(0,Kn.jsx)("button",{className:"btn-close",onClick:()=>m(!1),children:"\xd7"})]}),(0,Kn.jsx)("div",{className:"modal-content",children:(0,Kn.jsx)(dr,{onContractGenerated:e=>{m(!1),alert("Contrato generado exitosamente")}})})]})}),N&&w&&(0,Kn.jsx)(ur,{templateId:w._id||w.id,onClose:()=>{_(!1),C(null)}})]})},mr=e=>{let{isOpen:t,onClose:a,detectedVariables:n,thirdPartyTypeCode:l,onConfigApplied:s}=e;const[i,o]=(0,r.useState)([]),[c,d]=(0,r.useState)([]),[u,p]=(0,r.useState)(""),[m,h]=(0,r.useState)(!1),[f,g]=(0,r.useState)(!1),[v,x]=(0,r.useState)({}),[y,b]=(0,r.useState)(!1),[j,N]=(0,r.useState)(""),[_,w]=(0,r.useState)(""),[C,S]=(0,r.useState)(""),[k,E]=(0,r.useState)("\ud83d\udcc4"),[T,P]=(0,r.useState)("NIT"),R={identification:"\ud83c\udd94 Identificaci\xf3n",personal:"\ud83d\udc64 Informaci\xf3n Personal",business:"\ud83c\udfe2 Informaci\xf3n Empresarial",legal:"\u2696\ufe0f Representaci\xf3n Legal",contact:"\ud83d\udcde Contacto",address:"\ud83d\udccd Direcci\xf3n",employment:"\ud83d\udcbc Informaci\xf3n Laboral",financial:"\ud83d\udcb0 Informaci\xf3n Financiera",dates:"\ud83d\udcc5 Fechas",other:"\ud83d\udccb Otros"};(0,r.useEffect)(()=>{t&&(L(),A())},[t,n,l]);const L=async()=>{try{const e=await Qn.get("/third-party-types");d(e.data);const t=e.data.find(e=>e.code===l);t&&p(t._id)}catch(e){console.error("Error al cargar tipos de terceros:",e)}},A=async()=>{if(n&&0!==n.length){g(!0);try{const e=n.map(e=>({field_name:e.field_name||e.marker,original_marker:e.marker}));console.log("\ud83d\udd0d Analizando variables:",e);const t=await Qn.post("/third-party-types/suggest-from-template",{fields:e,third_party_type:l});console.log("\u2705 Sugerencias recibidas:",t.data),o(t.data.suggested),x(t.data.categories||{})}catch(e){console.error("Error al analizar variables:",e),alert("Error al analizar las variables de la plantilla")}finally{g(!1)}}};if(!t)return null;const z=i.filter(e=>!e.excluded).length,O=i.filter(e=>e.required&&!e.excluded).length,D=i.filter(e=>e.excluded).length;return(0,Kn.jsx)("div",{className:"modal-overlay",onClick:a,children:(0,Kn.jsxs)("div",{className:"modal-content third-party-config-modal",onClick:e=>e.stopPropagation(),children:[(0,Kn.jsxs)("div",{className:"modal-header",children:[(0,Kn.jsx)("h2",{children:"\ud83d\udd27 Configurar Tipo de Tercero"}),(0,Kn.jsx)("button",{className:"modal-close",onClick:a,children:"\xd7"})]}),(0,Kn.jsx)("div",{className:"modal-body",children:f?(0,Kn.jsxs)("div",{className:"analyzing-section",children:[(0,Kn.jsx)("div",{className:"spinner"}),(0,Kn.jsx)("p",{children:"Analizando variables de la plantilla..."})]}):(0,Kn.jsxs)(Kn.Fragment,{children:[(0,Kn.jsxs)("div",{className:"config-header",children:[(0,Kn.jsxs)("p",{className:"config-description",children:["Se detectaron ",(0,Kn.jsxs)("strong",{children:[n.length," variables"]})," en tu plantilla. Configura qu\xe9 campos ser\xe1n obligatorios o excluidos para el tipo de tercero seleccionado."]}),(0,Kn.jsxs)("div",{className:"config-stats",children:[(0,Kn.jsxs)("div",{className:"stat",children:[(0,Kn.jsx)("span",{className:"stat-label",children:"Incluidos:"}),(0,Kn.jsx)("span",{className:"stat-value",children:z})]}),(0,Kn.jsxs)("div",{className:"stat",children:[(0,Kn.jsx)("span",{className:"stat-label",children:"Requeridos:"}),(0,Kn.jsx)("span",{className:"stat-value required",children:O})]}),(0,Kn.jsxs)("div",{className:"stat",children:[(0,Kn.jsx)("span",{className:"stat-label",children:"Excluidos:"}),(0,Kn.jsx)("span",{className:"stat-value excluded",children:D})]})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Tipo de Tercero:"}),(0,Kn.jsxs)("div",{style:{display:"flex",gap:"10px",marginBottom:"12px"},children:[(0,Kn.jsx)("button",{type:"button",onClick:()=>b(!1),style:{flex:1,padding:"8px 12px",backgroundColor:y?"#e5e7eb":"#3b82f6",color:y?"#6b7280":"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"600",transition:"all 0.2s"},children:"Usar Existente"}),(0,Kn.jsx)("button",{type:"button",onClick:()=>b(!0),style:{flex:1,padding:"8px 12px",backgroundColor:y?"#10b981":"#e5e7eb",color:y?"white":"#6b7280",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"600",transition:"all 0.2s"},children:"+ Crear Nuevo"})]}),y?(0,Kn.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[(0,Kn.jsxs)("div",{children:[(0,Kn.jsxs)("label",{style:{fontSize:"13px",color:"#6b7280",marginBottom:"4px",display:"block"},children:["Nombre del Tipo ",(0,Kn.jsx)("span",{style:{color:"#dc2626"},children:"*"})]}),(0,Kn.jsx)("input",{type:"text",value:j,onChange:e=>{N(e.target.value),w(e.target.value.toLowerCase().replace(/[^a-z0-9]/g,"_"))},placeholder:"Ej: Proveedor de Servicios",className:"form-select",style:{padding:"10px 12px"}})]}),(0,Kn.jsxs)("div",{children:[(0,Kn.jsxs)("label",{style:{fontSize:"13px",color:"#6b7280",marginBottom:"4px",display:"block"},children:["C\xf3digo ",(0,Kn.jsx)("span",{style:{color:"#dc2626"},children:"*"})]}),(0,Kn.jsx)("input",{type:"text",value:_,onChange:e=>w(e.target.value.toLowerCase().replace(/[^a-z0-9_]/g,"")),placeholder:"Ej: proveedor_servicios",className:"form-select",style:{padding:"10px 12px",fontFamily:"monospace"}})]}),(0,Kn.jsxs)("div",{children:[(0,Kn.jsx)("label",{style:{fontSize:"13px",color:"#6b7280",marginBottom:"4px",display:"block"},children:"Descripci\xf3n"}),(0,Kn.jsx)("input",{type:"text",value:C,onChange:e=>S(e.target.value),placeholder:"Descripci\xf3n del tipo de tercero",className:"form-select",style:{padding:"10px 12px"}})]}),(0,Kn.jsxs)("div",{children:[(0,Kn.jsx)("label",{style:{fontSize:"13px",color:"#6b7280",marginBottom:"4px",display:"block"},children:"Icono (Emoji)"}),(0,Kn.jsx)("input",{type:"text",value:k,onChange:e=>E(e.target.value),placeholder:"\ud83d\udcc4",className:"form-select",style:{padding:"10px 12px",fontSize:"20px"},maxLength:2})]}),(0,Kn.jsxs)("div",{children:[(0,Kn.jsxs)("label",{style:{fontSize:"13px",color:"#6b7280",marginBottom:"4px",display:"block"},children:["Tipo de Identificaci\xf3n por Defecto ",(0,Kn.jsx)("span",{style:{color:"#dc2626"},children:"*"})]}),(0,Kn.jsxs)("select",{value:T,onChange:e=>P(e.target.value),className:"form-select",style:{padding:"10px 12px"},children:[(0,Kn.jsx)("option",{value:"NIT",children:"NIT (Empresa)"}),(0,Kn.jsx)("option",{value:"NIT (PH)",children:"NIT (Propiedad Horizontal)"}),(0,Kn.jsx)("option",{value:"CC",children:"C\xe9dula de Ciudadan\xeda"}),(0,Kn.jsx)("option",{value:"CE",children:"C\xe9dula de Extranjer\xeda"}),(0,Kn.jsx)("option",{value:"Pasaporte",children:"Pasaporte"}),(0,Kn.jsx)("option",{value:"RUT",children:"RUT"}),(0,Kn.jsx)("option",{value:"Otro",children:"Otro"})]}),(0,Kn.jsx)("p",{style:{fontSize:"11px",color:"#6b7280",marginTop:"4px"},children:"Este tipo de identificaci\xf3n se usar\xe1 por defecto al crear terceros de este tipo"})]})]}):(0,Kn.jsxs)("select",{value:u,onChange:e=>p(e.target.value),className:"form-select",children:[(0,Kn.jsx)("option",{value:"",children:"Selecciona un tipo..."}),c.map(e=>(0,Kn.jsxs)("option",{value:e._id,children:[e.icon," ",e.label]},e._id))]})]})]}),(0,Kn.jsx)("div",{className:"fields-by-category",children:Object.entries(v).map(e=>{let[t,a]=e;return(0,Kn.jsxs)("div",{className:"category-section",children:[(0,Kn.jsx)("h3",{className:"category-title",children:R[t]||t}),(0,Kn.jsx)("div",{className:"fields-list",children:a.map((e,t)=>{const a=i.findIndex(t=>t.name===e.name),n=i[a];return(0,Kn.jsxs)("div",{className:"field-item ".concat(n.excluded?"excluded":""," ").concat("required"===n.recommended?"recommended-required":""," ").concat("excluded"===n.recommended?"recommended-excluded":""),children:[(0,Kn.jsxs)("div",{className:"field-info",children:[(0,Kn.jsxs)("div",{className:"field-header",children:[(0,Kn.jsx)("span",{className:"field-label",children:e.label}),(0,Kn.jsx)("span",{className:"field-type-badge",children:e.field_type})]}),(0,Kn.jsxs)("div",{className:"field-details",children:[(0,Kn.jsx)("span",{className:"field-marker",children:"{{"+e.original_marker+"}}"}),n.recommended&&(0,Kn.jsx)("span",{className:"recommendation-badge ".concat(n.recommended),children:"required"===n.recommended?"\u2b50 Recomendado como obligatorio":"\ud83d\udeab Recomendado excluir"})]})]}),(0,Kn.jsxs)("div",{className:"field-actions",children:[(0,Kn.jsxs)("label",{className:"checkbox-label",children:[(0,Kn.jsx)("input",{type:"checkbox",checked:n.required,onChange:()=>(e=>{const t=[...i];t[e].required=!t[e].required,o(t)})(a),disabled:n.excluded}),(0,Kn.jsx)("span",{children:"Requerido"})]}),(0,Kn.jsxs)("label",{className:"checkbox-label",children:[(0,Kn.jsx)("input",{type:"checkbox",checked:n.excluded,onChange:()=>(e=>{const t=[...i];t[e].excluded=!t[e].excluded,t[e].excluded&&(t[e].required=!1),o(t)})(a)}),(0,Kn.jsx)("span",{children:"Excluir"})]})]})]},e.name)})})]},t)})})]})}),(0,Kn.jsxs)("div",{className:"modal-footer",children:[(0,Kn.jsx)("button",{className:"btn-cancel",onClick:a,disabled:m,children:"Cancelar"}),(0,Kn.jsx)("button",{className:"btn-apply",onClick:async()=>{h(!0);try{let e=u;if(y){if(!j.trim()||!_.trim())return alert("Por favor ingresa el nombre y c\xf3digo del nuevo tipo de tercero"),void h(!1);console.log("\ud83c\udd95 Creando nuevo tipo de tercero...");e=(await Qn.post("/third-party-types",{code:_.toLowerCase().trim(),label:j.trim(),description:C.trim()||"Tipo de tercero: ".concat(j),icon:k||"\ud83d\udcc4",default_identification_types:[T],fields:[]})).data.type._id,console.log("\u2705 Nuevo tipo creado:",e)}if(!e)return alert("Por favor selecciona o crea un tipo de tercero"),void h(!1);const t=await Qn.put("/third-party-types/".concat(e,"/apply-suggested-fields"),{fields:i});console.log("\u2705 Configuraci\xf3n aplicada:",t.data),alert("Configuraci\xf3n ".concat(y?"creada":"actualizada"," exitosamente!\n\n")+"Campos agregados: ".concat(t.data.fieldsAdded,"\n")+"Campos excluidos: ".concat(t.data.fieldsExcluded)),s&&s(e),a()}catch(n){var e,t;console.error("Error al aplicar configuraci\xf3n:",n),alert("Error al aplicar la configuraci\xf3n: "+((null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.error)||"Error desconocido"))}finally{h(!1)}},disabled:m||f||!y&&!u,children:m?y?"Creando...":"Aplicando...":"Aplicar Configuraci\xf3n"})]})]})})},hr=e=>{let{onTemplateCreated:t,onContractGenerated:a}=e;const[n,l]=(0,r.useState)(null),[s,i]=(0,r.useState)(""),[o,c]=(0,r.useState)(""),[d,u]=(0,r.useState)("otro"),[p,m]=(0,r.useState)([]),[h,f]=(0,r.useState)([]),[g,v]=(0,r.useState)(!1),[x,y]=(0,r.useState)("upload"),[b,j]=(0,r.useState)(""),[N,_]=(0,r.useState)(!1),w=(0,r.useRef)(null),[C,S]=(0,r.useState)(""),[k,E]=(0,r.useState)(""),[T,P]=(0,r.useState)([]),[R,L]=(0,r.useState)(!1),[A,z]=(0,r.useState)([]),[O,D]=(0,r.useState)("");(0,r.useEffect)(()=>{const e=localStorage.getItem("user"),t=localStorage.getItem("selectedCompanyId")||"";if(e){const a=JSON.parse(e);S(a.role),E(t),"admin"===a.role||"super_admin"===a.role?I():"lawyer"===a.role&&z([t])}},[]);const I=async()=>{try{const e=await Qn.get("/companies");P(e.data),console.log("\ud83d\udccb Empresas disponibles:",e.data.length)}catch(e){console.error("Error cargando empresas:",e)}};(0,r.useEffect)(()=>{(async()=>{try{const e="?t=".concat(Date.now()),t=(await Qn.get("/third-party-types".concat(e))).data||[];console.log("\ud83d\udd0d [DEBUG] Tipos de terceros recibidos (UnifiedWordTemplateUpload):",t.length),console.log("\ud83d\udccb [DEBUG] C\xf3digos:",t.map(e=>e.value||e.code).join(", ")),console.log("\u2705 [DEBUG] Tiene Propiedad Horizontal (ph):",t.some(e=>"ph"===(e.value||e.code))),console.log("\u2705 [DEBUG] Tiene Contador PH (contador_ph):",t.some(e=>"contador_ph"===(e.value||e.code))),m(t)}catch(e){console.error("Error cargando tipos de terceros:",e)}})()},[]);const F=async e=>{if(s.trim()){v(!0),y("variables");try{const t=new FormData;t.append("wordFile",e),t.append("name",s),t.append("description",o),t.append("thirdPartyType",d),console.log("\ud83d\ude80 Enviando archivo para detectar variables..."),console.log("\ud83c\udff7\ufe0f  Tipo de tercero:",d);const a=await Qn.post("/templates/process-word-with-format",t,{headers:{"Content-Type":"multipart/form-data"}});console.log("\u2705 Variables detectadas:",a.data.variables),console.log("\ud83d\udccb Detalle de variables:"),a.data.variables.forEach((e,t)=>{console.log("  ".concat(t+1,'. marker="').concat(e.marker,'", field_name="').concat(e.field_name,'", field_label="').concat(e.field_label,'"'))}),f(a.data.variables),j(a.data.previewHtml)}catch(n){var t,a;console.error("Error procesando archivo:",n),alert("Error al procesar el archivo: "+(null===(t=n.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||0)}finally{v(!1)}}else alert("Por favor ingresa el nombre de la plantilla")},q=()=>{l(null),i(""),c(""),u("otro"),f([]),y("upload"),L(!1),z([]),w.current&&(w.current.value="")},M=()=>{_(!1),alert("Plantilla creada exitosamente. Ahora puedes generar contratos desde esta plantilla."),q()};return(0,Kn.jsxs)("div",{className:"unified-word-template-upload",children:[(0,Kn.jsx)("div",{className:"compact-header",children:(0,Kn.jsxs)("div",{className:"header-content",children:[(0,Kn.jsx)("h2",{children:"\ud83d\udcdd Crear Plantilla"}),(0,Kn.jsxs)("div",{className:"step-badges",children:[(0,Kn.jsx)("span",{className:"badge ".concat("upload"===x?"active":""),children:"1. Datos"}),(0,Kn.jsx)("span",{className:"badge ".concat("variables"===x?"active":""),children:"2. Variables"})]})]})}),"upload"===x&&(0,Kn.jsxs)("div",{className:"two-column-layout",children:[(0,Kn.jsxs)("div",{className:"left-column",children:[(0,Kn.jsxs)("div",{className:"section-card",children:[(0,Kn.jsx)("h3",{className:"card-title",children:"Informaci\xf3n B\xe1sica"}),(0,Kn.jsxs)("div",{className:"compact-field",children:[(0,Kn.jsx)("label",{children:"Nombre"}),(0,Kn.jsx)("input",{type:"text",value:s,onChange:e=>i(e.target.value),placeholder:"Ej: NDA, Contrato de Servicios",className:"compact-input"})]}),(0,Kn.jsxs)("div",{className:"compact-field",children:[(0,Kn.jsx)("label",{children:"Descripci\xf3n"}),(0,Kn.jsx)("textarea",{value:o,onChange:e=>c(e.target.value),placeholder:"Breve descripci\xf3n...",className:"compact-textarea",rows:2})]}),(0,Kn.jsxs)("div",{className:"compact-field",children:[(0,Kn.jsx)("label",{children:"Tipo de Tercero"}),(0,Kn.jsx)("select",{value:d,onChange:e=>u(e.target.value),className:"compact-select",children:p.map(e=>(0,Kn.jsxs)("option",{value:e.value,children:[e.icon," ",e.label]},e.value))})]}),(0,Kn.jsxs)("div",{className:"file-upload-compact",children:[(0,Kn.jsx)("input",{ref:w,type:"file",accept:".docx",onChange:async e=>{var t;const a=null===(t=e.target.files)||void 0===t?void 0:t[0];a&&(a.name.endsWith(".docx")?(l(a),s.trim()||i(a.name.replace(".docx","")),await F(a)):alert("Por favor selecciona un archivo Word (.docx)"))},className:"file-input",id:"word-file"}),(0,Kn.jsxs)("label",{htmlFor:"word-file",className:"file-label-compact",children:[(0,Kn.jsx)("span",{className:"file-icon",children:"\ud83d\udcc4"}),(0,Kn.jsx)("span",{className:"file-text",children:n?n.name:"Seleccionar .docx"})]})]})]}),"lawyer"===C&&(0,Kn.jsxs)("div",{className:"info-box",children:[(0,Kn.jsx)("span",{className:"info-icon",children:"\ud83d\udc54"}),(0,Kn.jsx)("span",{children:"Plantilla solo para tu empresa"})]})]}),(0,Kn.jsx)("div",{className:"right-column",children:("admin"===C||"super_admin"===C)&&(0,Kn.jsxs)("div",{className:"section-card",children:[(0,Kn.jsx)("h3",{className:"card-title",children:"\ud83c\udfe2 Compartir Plantilla"}),"super_admin"===C&&(0,Kn.jsx)("div",{className:"global-checkbox-wrapper",children:(0,Kn.jsxs)("label",{className:"global-checkbox-label",children:[(0,Kn.jsx)("input",{type:"checkbox",id:"shareWithAll",checked:R,onChange:e=>{return t=e.target.checked,L(t),void(t&&z([]));var t}}),(0,Kn.jsxs)("span",{className:"checkbox-text",children:[(0,Kn.jsx)("strong",{children:"\ud83c\udf10 Plantilla Global"}),(0,Kn.jsx)("small",{children:"Disponible para todas las empresas"})]})]})}),!R&&(0,Kn.jsxs)(Kn.Fragment,{children:[T.length>0&&(0,Kn.jsxs)("div",{className:"search-box-compact",children:[(0,Kn.jsx)("input",{type:"text",placeholder:"\ud83d\udd0d Buscar empresa o NIT...",value:O,onChange:e=>D(e.target.value),className:"search-input-compact"}),O&&(0,Kn.jsx)("button",{onClick:()=>D(""),className:"clear-btn",children:"\u2715"})]}),(0,Kn.jsx)("div",{className:"companies-list-compact",children:0===T.length?(0,Kn.jsx)("div",{className:"loading-compact",children:"Cargando..."}):(()=>{const e=T.filter(e=>{var t;return e.name.toLowerCase().includes(O.toLowerCase())||(null===(t=e.tax_id)||void 0===t?void 0:t.toLowerCase().includes(O.toLowerCase()))});return 0===e.length&&O?(0,Kn.jsx)("div",{className:"no-results-compact",children:"No se encontraron empresas"}):(0,Kn.jsx)("div",{className:"companies-grid",children:e.map(e=>(0,Kn.jsxs)("label",{className:"company-checkbox-item ".concat(A.includes(e._id)?"checked":""),children:[(0,Kn.jsx)("input",{type:"checkbox",checked:A.includes(e._id),onChange:()=>{return t=e._id,void(A.includes(t)?z(A.filter(e=>e!==t)):z([...A,t]));var t}}),(0,Kn.jsxs)("div",{className:"company-details",children:[(0,Kn.jsx)("div",{className:"company-name-compact",children:e.name}),(0,Kn.jsx)("div",{className:"company-nit-compact",children:e.tax_id||"Sin NIT"})]}),(0,Kn.jsx)("div",{className:"check-icon",children:A.includes(e._id)?"\u2713":""})]},e._id))})})()})]}),!R&&A.length>0&&(0,Kn.jsxs)("div",{className:"selection-summary",children:[(0,Kn.jsx)("strong",{children:A.length})," ",1===A.length?"empresa seleccionada":"empresas seleccionadas"]})]})})]}),"variables"===x&&(0,Kn.jsxs)("div",{className:"two-column-layout",children:[(0,Kn.jsx)("div",{className:"left-column",children:(0,Kn.jsxs)("div",{className:"section-card",children:[(0,Kn.jsxs)("h3",{className:"card-title",children:["Variables Detectadas (",h.length,")"]}),(0,Kn.jsx)("div",{className:"variables-list-compact",children:h.map((e,t)=>(0,Kn.jsxs)("div",{className:"variable-compact",children:[(0,Kn.jsxs)("div",{className:"var-header",children:[(0,Kn.jsx)("code",{children:"{{".concat(e.marker,"}}")}),e.required&&(0,Kn.jsx)("span",{className:"badge-required",children:"*"})]}),(0,Kn.jsx)("div",{className:"var-label",children:e.field_label}),(0,Kn.jsx)("div",{className:"var-type",children:e.field_type})]},t))}),(0,Kn.jsx)("button",{onClick:async()=>{if(n&&s.trim()){v(!0);try{const e=new FormData;e.append("wordFile",n),console.log("\ud83d\udce4 Subiendo archivo Word...");const a=await Qn.post("/templates/upload-word",e,{headers:{"Content-Type":"multipart/form-data"}}),{filePath:r,content:l,gridfsFileId:i,gridfsFileName:c,cloudinaryUrl:u,cloudinaryPublicId:p}=a.data,m={name:s,description:o,third_party_type:d,content:l||"",fields:h,wordFilePath:r,wordFileOriginalName:n.name,gridfsFileId:i||null,gridfsFileName:c||null,cloudinaryUrl:u||null,cloudinaryPublicId:p||null};"super_admin"===C?R?(m.is_shared=!0,console.log("\ud83c\udf10 Plantilla compartida con todas las empresas")):A.length>0&&(m.is_shared=!1,m.shared_with_companies=A,console.log("\ud83c\udfe2 Plantilla compartida con",A.length,"empresas")):"admin"===C?A.length>0?(m.shared_with_companies=A,console.log("\ud83c\udfe2 Admin compartiendo con",A.length,"empresas")):m.company=k:"lawyer"===C&&(m.company=k,console.log("\ud83d\udc54 Plantilla solo para empresa actual:",k)),console.log("\ud83d\udcdd Creando plantilla...");const f=await Qn.post("/templates",m);console.log("\u2705 Plantilla creada exitosamente"),h.length>0?(console.log("\ud83d\udd27 Mostrando modal de configuraci\xf3n de campos..."),_(!0)):(alert("Plantilla creada exitosamente. Ahora puedes generar contratos desde esta plantilla."),q()),t&&t(f.data.id)}catch(r){var e,a;console.error("Error al crear plantilla:",r),alert("Error al crear la plantilla: "+((null===(e=r.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.error)||"Error desconocido"))}finally{v(!1)}}else alert("Por favor ingresa un nombre para la plantilla")},className:"btn-create-template",disabled:g,children:g?"Creando...":"\u2713 Crear Plantilla"})]})}),(0,Kn.jsx)("div",{className:"right-column",children:(0,Kn.jsxs)("div",{className:"section-card",children:[(0,Kn.jsx)("h3",{className:"card-title",children:"Vista Previa"}),(0,Kn.jsx)("div",{className:"preview-content-compact",dangerouslySetInnerHTML:{__html:b}})]})})]}),g&&(0,Kn.jsxs)("div",{className:"processing",children:[(0,Kn.jsx)("div",{className:"spinner"}),(0,Kn.jsx)("p",{children:"Procesando archivo Word..."})]}),(0,Kn.jsx)(mr,{isOpen:N,onClose:M,detectedVariables:h,thirdPartyTypeCode:d,onConfigApplied:M})]})},fr=()=>{const e=me(),t=ge(),a=()=>{const t=new URLSearchParams(e.search).get("tab");return"templates"===t||"contracts"===t||"create"===t?t:"create"},[n,l]=(0,r.useState)(a()),[s,i]=(0,r.useState)([]),[o,c]=(0,r.useState)([]),[d,p]=(0,r.useState)(!1),[m,h]=(0,r.useState)(!1),[f,g]=(0,r.useState)(null),[v,x]=(0,r.useState)(!1),[y,b]=(0,r.useState)(null),[j,N]=(0,r.useState)({}),[_,w]=(0,r.useState)([]),[C,S]=(0,r.useState)(""),[k,E]=(0,r.useState)(!1),[T,P]=(0,r.useState)(!1),[R,L]=(0,r.useState)(!1),[A,z]=(0,r.useState)([]),[O,D]=(0,r.useState)(!1),[I,F]=(0,r.useState)([]),[q,M]=(0,r.useState)([]),[U,B]=(0,r.useState)(""),[H,V]=(0,r.useState)([]),[W,G]=(0,r.useState)({}),[$,Q]=(0,r.useState)(""),[K,J]=(0,r.useState)(!1),[Y,X]=(0,r.useState)({code:"",label:"",description:"",icon:"\ud83d\udcc4"}),[Z,ee]=(0,r.useState)({identification_type:"NIT",identification_number:"",legal_name:"",legal_name_short:"",full_name:"",legal_representative_name:"",legal_representative_id_type:"CC",legal_representative_id_number:"",email:"",phone:"",address:"",city:"",country:"Colombia"}),[te,ae]=(0,r.useState)(""),[ne,re]=(0,r.useState)(""),[le,se]=(0,r.useState)(""),[ie,oe]=(0,r.useState)([]),[ce,de]=(0,r.useState)(""),[ue,pe]=(0,r.useState)(""),[he,fe]=(0,r.useState)(!1),[ve,xe]=(0,r.useState)(""),[ye,be]=(0,r.useState)([]),[je,Ne]=(0,r.useState)(""),[_e,we]=(0,r.useState)(""),[Ce,Se]=(0,r.useState)(!1),[ke,Ee]=(0,r.useState)(!1),[Te,Pe]=(0,r.useState)(null),[Re,Le]=(0,r.useState)({name:"",description:"",category:""}),Ae=async()=>{p(!0);try{const e=await Qn.get("/templates");i(e.data)}catch(e){console.error("Error fetching templates:",e)}finally{p(!1)}},ze=async()=>{h(!0);try{const e=await Qn.get("/contracts");c(e.data)}catch(e){console.error("Error fetching contracts:",e)}finally{h(!1)}},Oe=async e=>{try{const t=await Qn.get("/templates/".concat(e._id,"/download-word"),{responseType:"blob"}),a=window.URL.createObjectURL(new Blob([t.data])),n=document.createElement("a");n.href=a,n.setAttribute("download","".concat(e.name,".docx")),document.body.appendChild(n),n.click(),n.remove(),window.URL.revokeObjectURL(a)}catch(t){console.error("Error downloading template Word:",t),alert("Error al descargar el archivo Word de la plantilla")}},De=async(e,t)=>{const a=prompt("Nombre para la copia de la plantilla:","Copia de ".concat(t));if(a&&""!==a.trim()){p(!0);try{const t=await Qn.post("/templates/".concat(e,"/copy"),{newName:a.trim()});alert("Plantilla copiada exitosamente: ".concat(t.data.template.name)),Ae()}catch(l){var n,r;console.error("Error copying template:",l),alert("Error al copiar la plantilla: "+((null===(n=l.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.error)||"Error desconocido"))}finally{p(!1)}}},Ie=()=>{Ee(!1),Pe(null),Le({name:"",description:"",category:""})},Fe=async e=>{var t;const a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(a&&f)if(a.name.toLowerCase().endsWith(".docx"))if(window.confirm('\xbfEst\xe1s seguro de que quieres reemplazar el archivo Word de la plantilla "'.concat(f.name,'"? Las variables existentes se mantendr\xe1n.'))){p(!0);try{const e=new FormData;e.append("wordFile",a),await Qn.post("/templates/".concat(f._id,"/replace-word"),e,{headers:{"Content-Type":"multipart/form-data"}}),alert("Archivo Word reemplazado exitosamente"),Ae()}catch(l){var n,r;console.error("Error replacing Word file:",l),alert("Error al reemplazar el archivo Word: "+((null===(n=l.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.error)||"Error desconocido"))}finally{p(!1),g(null)}}else g(null);else alert("Por favor selecciona un archivo Word (.docx)")},qe=e=>e.normalize("NFD").replace(/[\u0300-\u036f]/g,""),Me=e=>{if(!e)return"";let t=qe(e).toLowerCase().trim().replace(/[_\s\/\-\.,:;()[\]{}]+/g,"").replace(/\bde\b/g,"").replace(/\bdel\b/g,"").replace(/\bla\b/g,"").replace(/\bel\b/g,"").replace(/\blos\b/g,"").replace(/\blas\b/g,"");const a=[{keywords:["nombre","razon","social"],normalized:"razonsocial"},{keywords:["representante","legal"],normalized:"representantelegal"},{keywords:["numero","nit"],normalized:"numeronit"},{keywords:["cedula","representante"],normalized:"cedularepresentante"},{keywords:["correo","electronico"],normalized:"correoelectronico"},{keywords:["propiedad","horizontal"],normalized:"propiedadhorizontal"}];for(const n of a){if(n.keywords.every(e=>t.includes(e)))return n.normalized}return!(t.includes("nombre")||t.includes("razonsocial")||t.includes("razon"))||t.includes("representante")||t.includes("licenciatario")?t:"razonsocial"},Ue=e=>{if(!e||0===e.length)return[];const t=new Set,a=new Set,n=[];return console.log("\ud83d\udd0d getUniqueVariables - Procesando campos (Sistema Robusto v2):"),e.forEach((e,r)=>{const l=e.field_name||"",s=l.trim(),i=Me(l);if(console.log("  ".concat(r+1,'. "').concat(l,'"')),console.log('      Normalizado: "'.concat(i,'"')),t.has(i))return void console.log("      \u274c DUPLICADO por normalizaci\xf3n (ignorado)");const o=s.toLowerCase();if(a.has(o))console.log("      \u274c DUPLICADO por nombre exacto (ignorado)");else{for(const e of n){if((e.field_name||"").toLowerCase().trim()===o)return void console.log("      \u274c DUPLICADO por similitud exacta (ignorado)")}t.add(i),a.add(o),n.push(e),console.log("      \u2705 AGREGADO como campo \xfanico")}}),console.log("\n\ud83d\udcca Resumen: ".concat(e.length," campos totales \u2192 ").concat(n.length," campos \xfanicos\n")),n},Be=()=>_.filter(e=>{if(!1===e.active)return!1;if($){return("object"===typeof e.third_party_type&&e.third_party_type?e.third_party_type._id:e.third_party_type)===$}return!1}),He=async()=>{try{const e="?t=".concat(Date.now()),t=await Qn.get("/third-party-types".concat(e));console.log("\ud83d\udccb Tipos de terceros cargados:",t.data.length),console.log("\ud83d\udccb [DEBUG] C\xf3digos:",t.data.map(e=>e.code).join(", ")),console.log("\u2705 [DEBUG] Tiene Propiedad Horizontal (ph):",t.data.some(e=>"ph"===e.code)),console.log("\u2705 [DEBUG] Tiene Contador PH (contador_ph):",t.data.some(e=>"contador_ph"===e.code)),M(t.data)}catch(e){console.error("Error cargando tipos de terceros:",e)}},Ve=async e=>{if("__CREATE_NEW__"===e)return J(!0),B(""),void V([]);if(B(e),G({}),e)try{var t;const a=await Qn.get("/third-party-types/".concat(e));console.log("\ud83d\udcdd Campos del tipo de tercero:",a.data.fields),V(a.data.fields||[]);const n={};null===(t=a.data.fields)||void 0===t||t.forEach(e=>{n[e.name]=""}),G(n)}catch(a){console.error("Error cargando campos del tipo de tercero:",a),alert("Error al cargar la configuraci\xf3n del tipo de tercero")}else V([])},We=e=>{var t;if(S(e),!e||!y)return;const a=_.find(t=>t._id===e);if(!a)return;const n={razon_social:a.legal_name,razonsocial:a.legal_name,"raz\xf3n social":a.legal_name,legal_name:a.legal_name,nombre:a.legal_name,"nombre / raz\xf3n social":a.legal_name,"nombre / razon social":a.legal_name,"nombre/raz\xf3n social":a.legal_name,"nombre/razon social":a.legal_name,nombre_razon_social:a.legal_name,nombrerazonsocial:a.legal_name,nombre_de_la_propiedad_horizontal:a.legal_name,"nombre de la propiedad horizontal":a.legal_name,nombredelapropiedadhorizontal:a.legal_name,propiedad_horizontal:a.legal_name,propiedadhorizontal:a.legal_name,razon_social_abreviada:a.legal_name_short,"razon social abreviada":a.legal_name_short,razonsocialabreviada:a.legal_name_short,legal_name_short:a.legal_name_short,nit:a.identification_number,numero_del_nit:a.identification_number,"numero del nit":a.identification_number,numerodelnit:a.identification_number,numero_nit:a.identification_number,numeronit:a.identification_number,identification_number:a.identification_number,nombre_representante_legal:a.legal_representative_name,"nombre representante legal":a.legal_representative_name,nombrerepresentantelegal:a.legal_representative_name,nombrederepresentantelegal:a.legal_representative_name,nombre_del_representante_legal:a.legal_representative_name,representante_legal:a.legal_representative_name,representantelegal:a.legal_representative_name,legal_representative_name:a.legal_representative_name,cedula:a.legal_representative_id_number,cedula_representante:a.legal_representative_id_number,cedularepresentante:a.legal_representative_id_number,cedula_rep_legal:a.legal_representative_id_number,cedulareplegal:a.legal_representative_id_number,cedula_representante_legal:a.legal_representative_id_number,cedularepresentantelegal:a.legal_representative_id_number,legal_representative_id_number:a.legal_representative_id_number,ciudad_expedicion:a.id_issue_city||"",ciudad_de_expedicion:a.id_issue_city||"",ciudaddeexpedicion:a.id_issue_city||"",ciudad_expedicion_cedula:a.id_issue_city||"",ciudad_de_expedicion_cedula:a.id_issue_city||"",ciudad_de_expedicion_cedula_rep_legal:a.id_issue_city||"",ciudaddeexpedicioncedulareplegal:a.id_issue_city||"",lugar_expedicion:a.id_issue_city||"",lugarexpedicion:a.id_issue_city||"",id_issue_city:a.id_issue_city||"",correo_electronico:a.email||"","correo electronico":a.email||"",correoelectronico:a.email||"",correo:a.email||"",email:a.email||"","e-mail":a.email||"",e_mail:a.email||"",email_licenciatario:a.email||"","e-mail_licenciatario":a.email||"",emaillicenciatario:a.email||"",e_mail_licenciatario:a.email||"",correo_licenciatario:a.email||"",correolicenciatario:a.email||"",telefono:a.phone||"",phone:a.phone||"",direccion:a.address||"",address:a.address||"",ciudad:a.city||"",city:a.city||"",ciudad_de_domicilio:a.city||"",nombre_licenciatario:a.licensee_name||a.full_name||"",nombrelicenciatario:a.licensee_name||a.full_name||"",nombre_del_licenciatario:a.licensee_name||a.full_name||"",nombredellicenciatario:a.licensee_name||a.full_name||"",licenciatario:a.licensee_name||a.full_name||"",licensee_name:a.licensee_name||"",full_name:a.full_name||"",fecha:(new Date).toLocaleDateString("es-ES"),dia_mes_y_ano:(new Date).toLocaleDateString("es-ES"),"d\xeda_mes_y_a\xf1o":(new Date).toLocaleDateString("es-ES"),"diamesy ano":(new Date).toLocaleDateString("es-ES"),"dia,_mes_y_ano":(new Date).toLocaleDateString("es-ES"),"d\xeda,_mes_y_a\xf1o":(new Date).toLocaleDateString("es-ES")},r=a;r.custom_fields&&"object"===typeof r.custom_fields&&(console.log("\ud83d\udd0d Campos personalizados del tercero:",r.custom_fields),Object.entries(r.custom_fields).forEach(e=>{let[t,a]=e;const r=qe(t);[t,r,t.toLowerCase(),r.toLowerCase(),t.replace(/_/g," "),r.replace(/_/g," "),t.replace(/ /g,"_"),r.replace(/ /g,"_"),Me(t),t.replace(/-/g,"_"),r.replace(/-/g,"_"),t.replace(/_/g,""),r.replace(/_/g,""),t.replace(/ /g,""),r.replace(/ /g,""),t.toLowerCase().replace(/[^a-z0-9]/g,""),r.toLowerCase().replace(/[^a-z0-9]/g,"")].forEach(e=>{n[e]=a}),console.log('   \ud83d\udccc Custom field mapeado: "'.concat(t,'" -> "').concat(a,'" (incluye sin acentos: "').concat(r,'")'))})),console.log("\ud83d\udccb Mapping completo:",n);const l={};null===(t=y.fields)||void 0===t||t.forEach(e=>{const t=e.field_name,a=qe(t),r=[t,a,t.toLowerCase(),a.toLowerCase(),t.replace(/_/g," "),a.replace(/_/g," "),t.replace(/ /g,"_"),a.replace(/ /g,"_"),Me(t),t.replace(/-/g,"_"),a.replace(/-/g,"_"),t.replace(/_/g,""),a.replace(/_/g,""),t.replace(/ /g,""),a.replace(/ /g,""),t.toLowerCase().replace(/[^a-z0-9]/g,""),a.toLowerCase().replace(/[^a-z0-9]/g,"")];let s=null;for(const l of r)if(void 0!==n[l]&&null!==n[l]&&""!==n[l]){s=n[l],console.log('\u2705 Campo "'.concat(t,'" coincide con variaci\xf3n "').concat(l,'" -> "').concat(s,'"'));break}if(!s){const e=Me(t),a=Object.keys(n).find(t=>Me(t)===e);a&&n[a]&&(s=n[a],console.log('\u2705 Campo "'.concat(t,'" llenado con: "').concat(s,'"')))}s?l[t]=s:(l[t]="",console.log('\u26a0\ufe0f  Campo "'.concat(t,'" no encontrado en mapping')))}),console.log("\ud83d\udcdd Datos del contrato actualizados:",l),N(l)},Ge=()=>{D(!1)},$e=(()=>{let e=[...o];if(te.trim()){const t=te.toLowerCase();e=e.filter(e=>{var a;return null===(a=e.contract_number)||void 0===a?void 0:a.toLowerCase().includes(t)})}if(ne.trim()){const t=ne.toLowerCase();e=e.filter(e=>{var a,n;return null===(a=e.template)||void 0===a||null===(n=a.name)||void 0===n?void 0:n.toLowerCase().includes(t)})}if(le.trim()){const t=le.toLowerCase();e=e.filter(e=>{var a,n,r,l,s;return(null===(a=e.content)||void 0===a?void 0:a.toLowerCase().includes(t))||(null===(n=e.title)||void 0===n?void 0:n.toLowerCase().includes(t))||(null===(r=e.description)||void 0===r?void 0:r.toLowerCase().includes(t))||(null===(l=e.company_name)||void 0===l?void 0:l.toLowerCase().includes(t))||(null===(s=e.contract_number)||void 0===s?void 0:s.toLowerCase().includes(t))})}if(ie.length>0&&(e=e.filter(e=>ie.includes(e.status))),ce){const t=new Date(ce);e=e.filter(e=>new Date(e.createdAt)>=t)}if(ue){const t=new Date(ue);t.setHours(23,59,59,999),e=e.filter(e=>new Date(e.createdAt)<=t)}return e})(),Qe=[te.trim(),ne.trim(),le.trim(),ie.length>0,ce,ue].filter(Boolean).length,Ke=()=>{xe(""),be([]),Ne(""),we("")},Je=(()=>{let e=[...s];if(ve.trim()){const t=ve.toLowerCase();e=e.filter(e=>{var a,n;return(null===(a=e.name)||void 0===a?void 0:a.toLowerCase().includes(t))||(null===(n=e.description)||void 0===n?void 0:n.toLowerCase().includes(t))})}if(ye.length>0&&(e=e.filter(e=>ye.includes(e.category))),je){const t=new Date(je);e=e.filter(e=>new Date(e.createdAt)>=t)}if(_e){const t=new Date(_e);t.setHours(23,59,59,999),e=e.filter(e=>new Date(e.createdAt)<=t)}return e})(),Ye=[ve.trim(),ye.length>0,je,_e].filter(Boolean).length,Xe=e=>{l(e),t("?tab=".concat(e),{replace:!0})};return(0,r.useEffect)(()=>{const e=a();e!==n&&l(e)},[e.search]),(0,r.useEffect)(()=>{"templates"===n&&0===s.length?Ae():"contracts"===n&&0===o.length&&ze()},[n]),(0,Kn.jsxs)("div",{className:"unified-templates",children:[(0,Kn.jsxs)("div",{className:"page-header",children:[(0,Kn.jsx)("h1",{children:"\ud83d\ude80 Gesti\xf3n de Contratos"}),(0,Kn.jsx)("p",{children:"Crea plantillas, genera contratos y administra todo desde un solo lugar"})]}),(0,Kn.jsxs)("div",{className:"tabs-navigation",children:[(0,Kn.jsx)("button",{className:"tab-button ".concat("create"===n?"active":""),onClick:()=>Xe("create"),children:"\u2728 Crear Contrato"}),(0,Kn.jsx)("button",{className:"tab-button ".concat("templates"===n?"active":""),onClick:()=>Xe("templates"),children:"\ud83d\udccb Plantillas"}),(0,Kn.jsx)("button",{className:"tab-button ".concat("contracts"===n?"active":""),onClick:()=>Xe("contracts"),children:"\ud83d\udcc4 Contratos Generados"})]}),(0,Kn.jsxs)("div",{className:"tab-content",children:["create"===n&&(0,Kn.jsx)("div",{className:"create-tab",children:(0,Kn.jsx)(hr,{onTemplateCreated:e=>{console.log("Plantilla creada:",e),Ae()},onContractGenerated:e=>{console.log("Contrato generado:",e),Ae(),ze()}})}),"templates"===n&&(0,Kn.jsxs)("div",{className:"templates-tab",children:[(0,Kn.jsxs)("div",{className:"tab-header",children:[(0,Kn.jsx)("h2",{children:"Plantillas Creadas"}),(0,Kn.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,Kn.jsx)("button",{className:"btn-primary",onClick:()=>Xe("create"),style:{padding:"10px 20px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"600",fontSize:"14px",display:"flex",alignItems:"center",gap:"8px"},children:"\u2728 Nueva Plantilla"}),(0,Kn.jsxs)("button",{className:"btn-refresh",onClick:e=>{e.preventDefault(),Ae()},disabled:d,title:"Recargar lista de plantillas sin cambiar de p\xe1gina",children:[(0,Kn.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,Kn.jsx)("polyline",{points:"23 4 23 10 17 10"}),(0,Kn.jsx)("polyline",{points:"1 20 1 14 7 14"}),(0,Kn.jsx)("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"})]}),"Actualizar Plantillas"]})]})]}),(0,Kn.jsxs)("div",{className:"filters-container",children:[(0,Kn.jsxs)("div",{className:"filters-header",children:[(0,Kn.jsxs)("button",{className:"btn-toggle-filters",onClick:()=>Se(!Ce),children:[Ce?"\u25bc":"\u25b6"," Filtros",Ye>0&&(0,Kn.jsx)("span",{className:"filter-badge",children:Ye})]}),Ye>0&&(0,Kn.jsx)("button",{className:"btn-clear-filters",onClick:Ke,children:"Limpiar Filtros"}),(0,Kn.jsxs)("div",{className:"results-count",children:["Mostrando ",Je.length," de ",s.length," plantillas"]})]}),Ce&&(0,Kn.jsxs)("div",{className:"filters-content",children:[(0,Kn.jsxs)("div",{className:"filter-group",children:[(0,Kn.jsx)("label",{children:"Buscar:"}),(0,Kn.jsx)("input",{type:"text",placeholder:"Buscar por nombre o descripci\xf3n...",value:ve,onChange:e=>xe(e.target.value),className:"filter-input"})]}),(0,Kn.jsxs)("div",{className:"filter-group",children:[(0,Kn.jsx)("label",{children:"Categor\xeda:"}),(0,Kn.jsx)("div",{className:"status-checkboxes",children:Array.from(new Set(s.map(e=>e.category||"General"))).map(e=>(0,Kn.jsxs)("label",{className:"checkbox-label",children:[(0,Kn.jsx)("input",{type:"checkbox",checked:ye.includes(e),onChange:()=>(e=>{be(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])})(e)}),(0,Kn.jsx)("span",{className:"status-label status-".concat(e.toLowerCase().replace(/\s+/g,"-")),children:e})]},e))})]}),(0,Kn.jsxs)("div",{className:"filter-group",children:[(0,Kn.jsx)("label",{children:"Fecha de creaci\xf3n:"}),(0,Kn.jsxs)("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[(0,Kn.jsx)("input",{type:"date",value:je,onChange:e=>Ne(e.target.value),className:"filter-input",placeholder:"Desde"}),(0,Kn.jsx)("span",{children:"hasta"}),(0,Kn.jsx)("input",{type:"date",value:_e,onChange:e=>we(e.target.value),className:"filter-input",placeholder:"Hasta"})]})]})]})]}),d?(0,Kn.jsx)("div",{className:"loading",children:"Cargando plantillas..."}):0===s.length?(0,Kn.jsxs)("div",{className:"empty-state",children:[(0,Kn.jsx)("h3",{children:"No hay plantillas"}),(0,Kn.jsx)("p",{children:'Ve al tab "Crear Contrato" para crear tu primera plantilla'})]}):0===Je.length?(0,Kn.jsxs)("div",{className:"empty-state",children:[(0,Kn.jsx)("h3",{children:"No se encontraron plantillas"}),(0,Kn.jsx)("p",{children:"No hay plantillas que coincidan con los filtros aplicados"}),(0,Kn.jsx)("button",{className:"btn-clear-filters",onClick:Ke,children:"Limpiar Filtros"})]}):(0,Kn.jsx)("div",{className:"templates-view",children:(0,Kn.jsx)("div",{className:"templates-table-container",children:(0,Kn.jsxs)("table",{className:"templates-table",children:[(0,Kn.jsx)("thead",{children:(0,Kn.jsxs)("tr",{children:[(0,Kn.jsx)("th",{children:"Nombre"}),(0,Kn.jsx)("th",{className:"hide-mobile",children:"Descripci\xf3n"}),(0,Kn.jsx)("th",{children:"Categor\xeda"}),(0,Kn.jsx)("th",{className:"hide-tablet",children:"Variables"}),(0,Kn.jsx)("th",{className:"hide-tablet",children:"Fecha"}),(0,Kn.jsx)("th",{className:"hide-mobile-tablet",children:"Hora"}),(0,Kn.jsx)("th",{children:"Acciones"})]})}),(0,Kn.jsx)("tbody",{children:Je.map(e=>{var t,a;const n=new Date(e.createdAt);return(0,Kn.jsxs)("tr",{children:[(0,Kn.jsx)("td",{className:"template-name",children:(0,Kn.jsxs)("div",{className:"name-wrapper",children:[(0,Kn.jsx)("span",{className:"name-text",children:e.name}),(0,Kn.jsxs)("span",{className:"mobile-meta",children:[(0,Kn.jsxs)("span",{className:"meta-item",children:[(null===(t=e.fields)||void 0===t?void 0:t.length)||0," vars"]}),(0,Kn.jsx)("span",{className:"meta-item",children:n.toLocaleDateString("es-ES")})]})]})}),(0,Kn.jsx)("td",{className:"template-description hide-mobile",children:e.description||"Sin descripci\xf3n"}),(0,Kn.jsx)("td",{children:(0,Kn.jsx)("span",{className:"item-badge",children:e.category||"General"})}),(0,Kn.jsx)("td",{className:"template-variables hide-tablet",children:(null===(a=e.fields)||void 0===a?void 0:a.length)||0}),(0,Kn.jsx)("td",{className:"template-date hide-tablet",children:n.toLocaleDateString("es-ES")}),(0,Kn.jsx)("td",{className:"template-time hide-mobile-tablet",children:n.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})}),(0,Kn.jsx)("td",{className:"template-actions",children:(0,Kn.jsxs)("div",{className:"actions-buttons",children:[(0,Kn.jsx)("button",{className:"btn-action btn-generate",onClick:()=>(async e=>{var t;b(e),x(!0),Q(""),S("");const a={};null===(t=e.fields)||void 0===t||t.forEach(e=>{a[e.field_name]=""}),N(a);try{const e=await Qn.get("/suppliers");w(e.data.suppliers||[]),await He()}catch(n){console.error("Error fetching suppliers:",n)}})(e),title:"Generar Contrato",children:"\ud83d\ude80"}),(0,Kn.jsx)("button",{className:"btn-action btn-edit",onClick:()=>(e=>{Pe(e),Le({name:e.name,description:e.description||"",category:e.category||""}),Ee(!0)})(e),title:"Editar",children:"\u270f\ufe0f"}),(0,Kn.jsx)("button",{className:"btn-action btn-copy hide-mobile",onClick:()=>De(e._id,e.name),title:"Copiar",children:"\ud83d\udccb"}),(0,Kn.jsx)("button",{className:"btn-action btn-replace hide-mobile",onClick:()=>{var t;g(e),null===(t=document.getElementById("replace-word-".concat(e._id)))||void 0===t||t.click()},title:"Reemplazar",children:"\ud83d\udd04"}),(0,Kn.jsx)("input",{id:"replace-word-".concat(e._id),type:"file",accept:".docx",style:{display:"none"},onChange:Fe}),(0,Kn.jsx)("button",{className:"btn-action btn-download hide-mobile",onClick:()=>Oe(e),title:"Descargar",children:"\ud83d\udce5"}),(0,Kn.jsx)("button",{className:"btn-action btn-delete",onClick:()=>(async e=>{if(window.confirm("\xbfEst\xe1s seguro de que quieres eliminar esta plantilla?"))try{await Qn.delete("/templates/".concat(e)),Ae(),alert("Plantilla eliminada exitosamente")}catch(t){console.error("Error deleting template:",t),alert("Error al eliminar la plantilla")}})(e._id),title:"Eliminar",children:"\ud83d\uddd1\ufe0f"}),(0,Kn.jsxs)("div",{className:"mobile-menu-wrapper show-mobile-only",children:[(0,Kn.jsx)("button",{className:"btn-action btn-menu",onClick:e=>{e.stopPropagation();const t=e.currentTarget.nextElementSibling;null===t||void 0===t||t.classList.toggle("show")},title:"M\xe1s acciones",children:"\u22ee"}),(0,Kn.jsxs)("div",{className:"mobile-actions-menu",children:[(0,Kn.jsx)("button",{onClick:()=>De(e._id,e.name),children:"\ud83d\udccb Copiar"}),(0,Kn.jsx)("button",{onClick:()=>{var t;g(e),null===(t=document.getElementById("replace-word-".concat(e._id)))||void 0===t||t.click()},children:"\ud83d\udd04 Reemplazar"}),(0,Kn.jsx)("button",{onClick:()=>Oe(e),children:"\ud83d\udce5 Descargar"})]})]})]})})]},e._id)})})]})})})]}),"contracts"===n&&(0,Kn.jsxs)("div",{className:"contracts-tab",children:[(0,Kn.jsxs)("div",{className:"tab-header",children:[(0,Kn.jsx)("h2",{children:"Contratos Generados"}),(0,Kn.jsxs)("button",{className:"btn-refresh",onClick:e=>{e.preventDefault(),ze()},disabled:m,title:"Recargar lista de contratos sin cambiar de p\xe1gina",children:[(0,Kn.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,Kn.jsx)("polyline",{points:"23 4 23 10 17 10"}),(0,Kn.jsx)("polyline",{points:"1 20 1 14 7 14"}),(0,Kn.jsx)("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"})]}),"Actualizar Contratos"]})]}),(0,Kn.jsxs)("div",{className:"filters-container",children:[(0,Kn.jsxs)("div",{className:"filters-header",children:[(0,Kn.jsxs)("button",{className:"btn-toggle-filters",onClick:()=>fe(!he),children:[he?"\u25bc":"\u25b6"," Filtros",Qe>0&&(0,Kn.jsx)("span",{className:"filter-badge",children:Qe})]}),Qe>0&&(0,Kn.jsx)("button",{className:"btn-clear-filters",onClick:()=>{ae(""),re(""),se(""),oe([]),de(""),pe("")},children:"Limpiar Filtros"}),(0,Kn.jsxs)("div",{className:"results-count",children:["Mostrando ",$e.length," de ",o.length," contratos"]})]}),he&&(0,Kn.jsxs)("div",{className:"filters-content",children:[(0,Kn.jsxs)("div",{className:"filter-group",children:[(0,Kn.jsx)("label",{children:"Buscar:"}),(0,Kn.jsx)("input",{type:"text",placeholder:"Buscar por n\xfamero de contrato...",value:te,onChange:e=>ae(e.target.value),className:"filter-input"})]}),(0,Kn.jsxs)("div",{className:"filter-group",children:[(0,Kn.jsx)("label",{children:"Plantilla:"}),(0,Kn.jsx)("input",{type:"text",placeholder:"Filtrar por nombre de plantilla...",value:ne,onChange:e=>re(e.target.value),className:"filter-input"})]}),(0,Kn.jsxs)("div",{className:"filter-group",children:[(0,Kn.jsx)("label",{children:"Tercero:"}),(0,Kn.jsx)("input",{type:"text",placeholder:"Filtrar por nombre o identificaci\xf3n del tercero...",value:le,onChange:e=>se(e.target.value),className:"filter-input"})]}),(0,Kn.jsxs)("div",{className:"filter-group",children:[(0,Kn.jsx)("label",{children:"Estado:"}),(0,Kn.jsx)("div",{className:"status-checkboxes",children:["borrador","revision","aprobado","firmado","cancelado"].map(e=>(0,Kn.jsxs)("label",{className:"checkbox-label",children:[(0,Kn.jsx)("input",{type:"checkbox",checked:ie.includes(e),onChange:()=>(e=>{oe(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])})(e)}),(0,Kn.jsx)("span",{className:"status-label ".concat(e),children:e})]},e))})]}),(0,Kn.jsxs)("div",{className:"filter-group-row",children:[(0,Kn.jsxs)("div",{className:"filter-group",children:[(0,Kn.jsx)("label",{children:"Fecha desde:"}),(0,Kn.jsx)("input",{type:"date",value:ce,onChange:e=>de(e.target.value),className:"filter-input"})]}),(0,Kn.jsxs)("div",{className:"filter-group",children:[(0,Kn.jsx)("label",{children:"Fecha hasta:"}),(0,Kn.jsx)("input",{type:"date",value:ue,onChange:e=>pe(e.target.value),className:"filter-input"})]})]})]})]}),m?(0,Kn.jsx)("div",{className:"loading",children:"Cargando contratos..."}):0===o.length?(0,Kn.jsxs)("div",{className:"empty-state",children:[(0,Kn.jsx)("h3",{children:"No hay contratos generados"}),(0,Kn.jsx)("p",{children:'Ve al tab "Crear Contrato" para generar tu primer contrato'})]}):0===$e.length?(0,Kn.jsxs)("div",{className:"empty-state",children:[(0,Kn.jsx)("h3",{children:"No se encontraron contratos"}),(0,Kn.jsx)("p",{children:"Intenta ajustar los filtros para ver m\xe1s resultados"})]}):(0,Kn.jsx)("div",{className:"contracts-view",children:(0,Kn.jsx)("div",{className:"contracts-table-container",children:(0,Kn.jsxs)("table",{className:"contracts-table",children:[(0,Kn.jsx)("thead",{children:(0,Kn.jsxs)("tr",{children:[(0,Kn.jsx)("th",{className:"contract-number-col",children:"N\xb0 Contrato"}),(0,Kn.jsx)("th",{className:"contract-title-col",children:"T\xedtulo"}),(0,Kn.jsx)("th",{className:"contract-template-col hide-mobile",children:"Plantilla"}),(0,Kn.jsx)("th",{className:"contract-tercero-col",children:"Tercero"}),(0,Kn.jsx)("th",{className:"contract-status-col",children:"Estado"}),(0,Kn.jsx)("th",{className:"contract-generator-col hide-tablet",children:"Generado por"}),(0,Kn.jsx)("th",{className:"contract-date-col hide-tablet",children:"Fecha"}),(0,Kn.jsx)("th",{className:"contract-time-col hide-mobile-tablet",children:"Hora"}),(0,Kn.jsx)("th",{className:"contract-actions-col",children:"Acciones"})]})}),(0,Kn.jsx)("tbody",{children:$e.map(e=>{var t,a,n;const r=new Date(e.createdAt),l=e.company_name||(e.content?(e=>{if(!e)return"N/A";const t=e.replace(/<[^>]*>/g," ").replace(/\s+/g," "),a=["raz\xf3n social","razon social","nombre_tercero","nombre tercero","empresa_tercero","empresa tercero","nombre_empresa","nombre empresa","proveedor","cliente","contratista","tercero"],n=[/raz\xf3n\s*social[:\s]+([^<\n,;]+)/i,/razon\s*social[:\s]+([^<\n,;]+)/i,/nombre\s+(?:del\s+)?(?:tercero|proveedor|cliente)[:\s]+([^<\n,;]+)/i,/tercero[:\s]+([^<\n,;]+)/i,/proveedor[:\s]+([^<\n,;]+)/i,/cliente[:\s]+([^<\n,;]+)/i,/legal_name[:\s]+([^<\n,;]+)/i,/nombre_empresa[:\s]+([^<\n,;]+)/i,/empresa[:\s]+([^<\n,;]+)/i];for(const r of n){const e=t.match(r);if(e&&e[1]){const t=e[1].trim();if(t.length>3&&t.length<100&&!t.match(/^\d+$/))return t}}for(const r of a){const e=new RegExp("".concat(r,"[:s]+([^<\n,;]{5,80})"),"i"),a=t.match(e);if(a&&a[1]){const e=a[1].trim();if(e.length>3&&e.length<100)return e}}return"N/A"})(e.content):"N/A");return(0,Kn.jsxs)("tr",{children:[(0,Kn.jsx)("td",{className:"contract-number",children:(0,Kn.jsxs)("div",{className:"name-wrapper",children:[(0,Kn.jsx)("span",{className:"name-text",children:e.contract_number}),(0,Kn.jsxs)("span",{className:"mobile-meta",children:[(0,Kn.jsx)("span",{className:"meta-item",children:(null===(t=e.template)||void 0===t?void 0:t.name)||"Sin plantilla"}),(0,Kn.jsx)("span",{className:"meta-item",children:r.toLocaleDateString("es-ES")})]})]})}),(0,Kn.jsx)("td",{className:"contract-title",children:(0,Kn.jsxs)("div",{children:[(0,Kn.jsx)("strong",{children:e.title||e.contract_number}),e.description&&(0,Kn.jsx)("div",{style:{fontSize:"0.85rem",color:"#6c757d",marginTop:"0.25rem"},children:e.description.length>50?e.description.substring(0,50)+"...":e.description})]})}),(0,Kn.jsx)("td",{className:"contract-template hide-mobile",children:(0,Kn.jsx)("span",{className:"item-badge",children:(null===(a=e.template)||void 0===a?void 0:a.name)||"Sin plantilla"})}),(0,Kn.jsx)("td",{className:"contract-tercero",children:(0,Kn.jsxs)("div",{children:[(0,Kn.jsx)("div",{style:{fontWeight:"600",color:"#495057",marginBottom:"0.25rem"},children:"N/A"!==l?l:(0,Kn.jsx)("span",{style:{color:"#94a3b8",fontStyle:"italic",fontSize:"0.9rem"},children:"No disponible"})}),e.description&&(0,Kn.jsx)("div",{style:{fontSize:"0.8rem",color:"#94a3b8",marginTop:"0.25rem"},children:e.description.length>30?e.description.substring(0,30)+"...":e.description})]})}),(0,Kn.jsx)("td",{className:"contract-status",children:(0,Kn.jsx)("span",{className:"item-badge status-".concat(e.status),children:e.status})}),(0,Kn.jsx)("td",{className:"contract-generator hide-tablet",children:(null===(n=e.generated_by)||void 0===n?void 0:n.name)||"Usuario"}),(0,Kn.jsx)("td",{className:"contract-date hide-tablet",children:r.toLocaleDateString("es-ES")}),(0,Kn.jsx)("td",{className:"contract-time hide-mobile-tablet",children:r.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})}),(0,Kn.jsx)("td",{className:"contract-actions",children:(0,Kn.jsxs)("div",{className:"actions-buttons",children:[e.file_path&&(0,Kn.jsx)("button",{className:"btn-action btn-download",onClick:()=>(async(e,t)=>{try{const a=await Qn.get("/documents/download/word/".concat(e),{responseType:"blob"}),n=window.URL.createObjectURL(new Blob([a.data])),r=document.createElement("a");r.href=n,r.setAttribute("download","".concat(t,".docx")),document.body.appendChild(r),r.click(),r.remove(),window.URL.revokeObjectURL(n)}catch(a){console.error("Error downloading contract:",a),alert("Error al descargar el contrato")}})(e._id,e.contract_number),title:"Descargar Word",children:"\ud83d\udce5"}),(0,Kn.jsx)("button",{className:"btn-action btn-delete",onClick:()=>{window.confirm("\xbfEst\xe1s seguro de eliminar este contrato?")&&(async e=>{try{await Qn.delete("/contracts/".concat(e)),ze(),alert("Contrato eliminado exitosamente")}catch(t){console.error("Error deleting contract:",t),alert("Error al eliminar el contrato")}})(e._id)},title:"Eliminar",children:"\ud83d\uddd1\ufe0f"})]})})]},e._id)})})]})})})]})]}),v&&y&&(0,Kn.jsx)("div",{className:"modal-overlay",onClick:()=>{x(!1),L(!1),z([]),D(!1),F([])},children:(0,Kn.jsxs)("div",{className:"modal-content-generate",onClick:e=>e.stopPropagation(),children:[(0,Kn.jsxs)("div",{className:"modal-header-generate",children:[(0,Kn.jsx)("h2",{children:"\ud83d\ude80 Generar Contrato"}),(0,Kn.jsxs)("p",{children:["Plantilla: ",(0,Kn.jsx)("strong",{children:y.name})]}),(0,Kn.jsx)("button",{className:"modal-close",onClick:()=>{x(!1),L(!1),z([]),D(!1),F([])},children:"\u2715"})]}),(0,Kn.jsxs)("div",{className:"modal-body-generate",children:[(0,Kn.jsxs)("div",{className:"supplier-selector",style:{marginBottom:"20px"},children:[(0,Kn.jsxs)("h3",{children:["1. Seleccionar Tipo de Tercero ",(0,Kn.jsx)("span",{className:"required",children:"*"})]}),(0,Kn.jsx)("p",{children:"Primero selecciona el tipo de tercero para filtrar la lista"}),(0,Kn.jsxs)("select",{value:$,onChange:e=>{return t=e.target.value,Q(t),S(""),void N(e=>u({},e));var t},className:"form-input",style:{padding:"12px",fontSize:"15px",borderRadius:"6px",border:$?"2px solid #4CAF50":"2px solid #e0e0e0"},children:[(0,Kn.jsx)("option",{value:"",children:"-- Seleccionar tipo de tercero --"}),q.map(e=>(0,Kn.jsxs)("option",{value:e._id,children:[e.icon||"\ud83d\udcc4"," ",e.label]},e._id))]})]}),(0,Kn.jsxs)("div",{className:"supplier-selector",children:[(0,Kn.jsxs)("h3",{children:["2. Seleccionar Tercero ",(0,Kn.jsx)("span",{className:"required",children:"*"})]}),(0,Kn.jsx)("p",{children:$?"Terceros disponibles del tipo seleccionado: ".concat(Be().length):"Primero selecciona un tipo de tercero arriba"}),(0,Kn.jsxs)("div",{style:{display:"flex",gap:"10px",alignItems:"flex-start"},children:[(0,Kn.jsxs)("div",{style:{flex:1},children:[(0,Kn.jsxs)("select",{value:C,onChange:e=>We(e.target.value),className:"form-input",required:!0,disabled:!$,style:{opacity:$?1:.6,cursor:$?"pointer":"not-allowed"},children:[(0,Kn.jsx)("option",{value:"",children:$?"-- Seleccionar tercero --":"-- Primero selecciona un tipo de tercero --"}),Be().map(e=>(0,Kn.jsxs)("option",{value:e._id,children:[e.legal_name," - ",e.identification_number]},e._id))]}),$&&0===Be().length&&(0,Kn.jsx)("p",{style:{color:"#f57c00",fontSize:"13px",marginTop:"8px",display:"flex",alignItems:"center",gap:"6px"},children:"\u26a0\ufe0f No hay terceros de este tipo. Crea uno nuevo."})]}),(0,Kn.jsx)("button",{type:"button",className:"btn-create-supplier",onClick:async()=>{P(!0),await He()},style:{padding:"10px 20px",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",whiteSpace:"nowrap",fontWeight:"600"},children:"+ Crear Tercero"})]}),(0,Kn.jsx)("button",{type:"button",onClick:async()=>{if(y){L(!0);try{var e,t;const a=(null===(e=y.fields)||void 0===e?void 0:e.map(e=>({field_name:e.field_name,original_marker:e.marker||e.field_name})))||[],n=await Qn.post("/third-party-types/suggest-from-template",{fields:a,third_party_type:y.category||"otro"});z(n.data.suggested||[]);const r=(null===(t=y.fields)||void 0===t?void 0:t.map(e=>({marker:e.marker||e.field_name,field_name:e.field_name,field_label:e.field_label||e.field_name,field_type:e.field_type||"text"})))||[];F(r)}catch(a){console.error("Error al obtener sugerencias:",a),alert("Error al analizar los campos de la plantilla")}}},style:{marginTop:"10px",padding:"8px 16px",backgroundColor:"#2196F3",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"500",display:"flex",alignItems:"center",gap:"6px",width:"fit-content"},children:"\ud83d\udca1 Ver campos sugeridos para esta plantilla"}),R&&A.length>0&&(0,Kn.jsxs)("div",{style:{marginTop:"15px",padding:"15px",backgroundColor:"#E3F2FD",border:"2px solid #2196F3",borderRadius:"6px"},children:[(0,Kn.jsx)("h4",{style:{margin:"0 0 10px 0",color:"#1976D2"},children:"\ud83d\udccb Campos necesarios para el tercero:"}),(0,Kn.jsx)("p",{style:{fontSize:"13px",color:"#555",marginBottom:"10px"},children:"Bas\xe1ndonos en las variables de esta plantilla, el tercero deber\xeda tener los siguientes datos:"}),(0,Kn.jsx)("ul",{style:{margin:"0",paddingLeft:"20px",fontSize:"14px"},children:A.filter(e=>!e.excluded).slice(0,10).map((e,t)=>(0,Kn.jsxs)("li",{style:{marginBottom:"5px"},children:[(0,Kn.jsx)("strong",{children:e.label}),e.required&&(0,Kn.jsx)("span",{style:{color:"#D32F2F",marginLeft:"5px"},children:"*"}),(0,Kn.jsx)("span",{style:{marginLeft:"8px",fontSize:"12px",color:"#666",backgroundColor:"#fff",padding:"2px 6px",borderRadius:"3px"},children:e.field_type})]},t))}),A.filter(e=>!e.excluded).length>10&&(0,Kn.jsxs)("p",{style:{fontSize:"12px",color:"#666",marginTop:"10px",marginBottom:"0"},children:["... y ",A.filter(e=>!e.excluded).length-10," campos m\xe1s"]}),(0,Kn.jsxs)("div",{style:{display:"flex",gap:"10px",marginTop:"10px"},children:[(0,Kn.jsx)("button",{onClick:()=>{D(!0)},style:{padding:"8px 16px",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"600"},children:"\ud83d\udd27 Configurar Tipo de Tercero"}),(0,Kn.jsx)("button",{onClick:()=>L(!1),style:{padding:"5px 12px",backgroundColor:"#fff",color:"#2196F3",border:"1px solid #2196F3",borderRadius:"4px",cursor:"pointer",fontSize:"13px"},children:"Ocultar sugerencias"})]})]})]}),(0,Kn.jsxs)("div",{className:"contract-fields-modal",children:[(0,Kn.jsx)("h3",{children:"Datos del Contrato"}),Ue(y.fields||[]).map((e,t)=>(0,Kn.jsxs)("div",{className:"field-group",children:[(0,Kn.jsxs)("label",{children:[e.field_label||e.field_name,e.required&&(0,Kn.jsx)("span",{className:"required",children:"*"})]}),(0,Kn.jsx)("input",{type:"text",value:j[e.field_name]||"",onChange:t=>((e,t)=>{var a;const n=Me(e),r=(null===y||void 0===y||null===(a=y.fields)||void 0===a?void 0:a.filter(e=>Me(e.field_name)===n).map(e=>e.field_name))||[],l={};r.forEach(e=>{l[e]=t}),N(e=>u(u({},e),l))})(e.field_name,t.target.value),placeholder:"Ingresa ".concat((e.field_label||e.field_name).toLowerCase()),className:"form-input",required:e.required})]},t))]})]}),(0,Kn.jsxs)("div",{className:"modal-footer-generate",children:[(0,Kn.jsx)("button",{className:"btn-cancel",onClick:()=>{x(!1),L(!1),z([]),D(!1),F([])},children:"Cancelar"}),(0,Kn.jsx)("button",{className:"btn-generate-final",onClick:async()=>{if(!y)return;if(!C)return void alert("Por favor selecciona un tercero para generar el contrato");const e=Ue(y.fields||[]).filter(e=>e.required).filter(e=>{var t;return!(null!==(t=j[e.field_name])&&void 0!==t&&t.trim())});if(e.length>0)alert("Por favor completa los siguientes campos requeridos: ".concat(e.map(e=>e.field_label||e.field_name).join(", ")));else{E(!0);try{const e=await Qn.post("/templates/".concat(y._id,"/generate-contract"),{contractData:j});alert("\xa1Contrato generado exitosamente!\n\nN\xfamero: ".concat(e.data.contract.contract_number)),x(!1),b(null),N({}),S(""),L(!1),z([]),D(!1),F([]),ze()}catch(n){var t,a;console.error("Error generating contract:",n),alert("Error al generar el contrato: "+((null===(t=n.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||"Error desconocido"))}finally{E(!1)}}},disabled:k,children:k?"Generando...":"\ud83d\ude80 Generar Contrato"})]})]})}),T&&(0,Kn.jsx)("div",{className:"modal-overlay",onClick:()=>P(!1),children:(0,Kn.jsxs)("div",{className:"modal-content-generate",onClick:e=>e.stopPropagation(),style:{maxWidth:"600px"},children:[(0,Kn.jsxs)("div",{className:"modal-header-generate",children:[(0,Kn.jsx)("h2",{children:"Crear Nuevo Tercero"}),(0,Kn.jsx)("button",{className:"modal-close",onClick:()=>P(!1),children:"\u2715"})]}),(0,Kn.jsx)("div",{className:"modal-body-generate",style:{maxHeight:"60vh",overflowY:"auto"},children:(0,Kn.jsxs)("div",{className:"contract-fields-modal",children:[(0,Kn.jsxs)("div",{className:"field-group",style:{backgroundColor:"#f0f9ff",padding:"15px",borderRadius:"8px",border:"2px solid #3b82f6",marginBottom:"20px"},children:[(0,Kn.jsxs)("label",{style:{fontSize:"16px",fontWeight:"600",color:"#1e40af"},children:["1. Tipo de Tercero ",(0,Kn.jsx)("span",{className:"required",children:"*"})]}),(0,Kn.jsx)("p",{style:{fontSize:"13px",color:"#64748b",marginBottom:"10px"},children:"Selecciona el tipo de tercero para cargar los campos correspondientes"}),(0,Kn.jsxs)("select",{value:U,onChange:e=>Ve(e.target.value),className:"form-input",style:{fontSize:"14px",padding:"12px"},children:[(0,Kn.jsx)("option",{value:"",children:"-- Selecciona un tipo --"}),q.map(e=>(0,Kn.jsxs)("option",{value:e._id,children:[e.icon," ",e.label]},e._id)),(0,Kn.jsx)("option",{value:"__CREATE_NEW__",style:{backgroundColor:"#f0fdf4",color:"#16a34a",fontWeight:"600"},children:"+ Crear Nuevo Tipo de Tercero"})]})]}),U&&"__CREATE_NEW__"!==U&&0===H.length&&(0,Kn.jsxs)("div",{style:{backgroundColor:"#fef3c7",border:"2px solid #f59e0b",borderRadius:"8px",padding:"20px",marginBottom:"20px",textAlign:"center"},children:[(0,Kn.jsx)("p",{style:{fontSize:"16px",fontWeight:"600",color:"#92400e",marginBottom:"10px"},children:"\u26a0\ufe0f Este tipo de tercero no tiene campos configurados"}),(0,Kn.jsx)("p",{style:{fontSize:"14px",color:"#78350f",marginBottom:"15px"},children:"Para poder crear terceros de este tipo, primero debes configurar los campos desde el m\xf3dulo de Gesti\xf3n de Tipos de Terceros o desde una plantilla Word."}),(0,Kn.jsx)("p",{style:{fontSize:"13px",color:"#78350f",fontStyle:"italic"},children:"\ud83d\udca1 Sugerencia: Sube una plantilla Word con variables y el sistema te ayudar\xe1 a configurar los campos autom\xe1ticamente."})]}),U&&H.length>0&&(0,Kn.jsxs)("div",{children:[(0,Kn.jsx)("h3",{style:{marginBottom:"15px",color:"#1e293b"},children:"2. Informaci\xf3n del Tercero"}),H.filter(e=>"legal_name_short"!==e.name).map((e,t)=>(0,Kn.jsxs)("div",{className:"field-group",children:[(0,Kn.jsxs)("label",{children:[e.label,e.required&&(0,Kn.jsx)("span",{className:"required",children:" *"})]}),"text"===e.field_type&&(0,Kn.jsx)("input",{type:"text",value:W[e.name]||"",onChange:t=>{const a=u(u({},W),{},{[e.name]:t.target.value});"legal_name"===e.name&&(a.legal_name_short=t.target.value),G(a)},placeholder:"Ingrese ".concat(e.label.toLowerCase()),className:"form-input",required:e.required}),"email"===e.field_type&&(0,Kn.jsx)("input",{type:"email",value:W[e.name]||"",onChange:t=>G(u(u({},W),{},{[e.name]:t.target.value})),placeholder:"Ingrese ".concat(e.label.toLowerCase()),className:"form-input",required:e.required}),"phone"===e.field_type&&(0,Kn.jsx)("input",{type:"tel",value:W[e.name]||"",onChange:t=>G(u(u({},W),{},{[e.name]:t.target.value})),placeholder:"Ingrese ".concat(e.label.toLowerCase()),className:"form-input",required:e.required}),"number"===e.field_type&&(0,Kn.jsx)("input",{type:"number",value:W[e.name]||"",onChange:t=>G(u(u({},W),{},{[e.name]:t.target.value})),placeholder:"Ingrese ".concat(e.label.toLowerCase()),className:"form-input",required:e.required}),"date"===e.field_type&&(0,Kn.jsx)("input",{type:"date",value:W[e.name]||"",onChange:t=>G(u(u({},W),{},{[e.name]:t.target.value})),className:"form-input",required:e.required}),"textarea"===e.field_type&&(0,Kn.jsx)("textarea",{value:W[e.name]||"",onChange:t=>G(u(u({},W),{},{[e.name]:t.target.value})),placeholder:"Ingrese ".concat(e.label.toLowerCase()),className:"form-input",rows:3,required:e.required}),"select"===e.field_type&&e.options&&(0,Kn.jsxs)("select",{value:W[e.name]||"",onChange:t=>G(u(u({},W),{},{[e.name]:t.target.value})),className:"form-input",required:e.required,children:[(0,Kn.jsx)("option",{value:"",children:"-- Seleccione --"}),e.options.map((e,t)=>(0,Kn.jsx)("option",{value:e,children:e},t))]}),"checkbox"===e.field_type&&(0,Kn.jsx)("div",{style:{marginTop:"5px"},children:(0,Kn.jsxs)("label",{style:{display:"flex",alignItems:"center",fontWeight:"normal"},children:[(0,Kn.jsx)("input",{type:"checkbox",checked:W[e.name]||!1,onChange:t=>G(u(u({},W),{},{[e.name]:t.target.checked})),style:{marginRight:"8px",width:"18px",height:"18px"}}),e.label]})})]},e.name||t))]}),!U&&(0,Kn.jsxs)("div",{style:{padding:"30px",textAlign:"center",color:"#64748b",backgroundColor:"#f8fafc",borderRadius:"8px",border:"2px dashed #cbd5e1"},children:[(0,Kn.jsx)("div",{style:{fontSize:"48px",marginBottom:"10px"},children:"\ud83d\udccb"}),(0,Kn.jsx)("p",{style:{margin:"0",fontSize:"14px"},children:"Selecciona un tipo de tercero para ver los campos disponibles"})]})]})}),(0,Kn.jsxs)("div",{className:"modal-footer-generate",children:[(0,Kn.jsx)("button",{className:"btn-cancel",onClick:()=>P(!1),children:"Cancelar"}),(0,Kn.jsx)("button",{className:"btn-generate-final",onClick:async()=>{if(!U)return void alert("Por favor selecciona un tipo de tercero");const e=[];if(H.forEach(t=>{if(t.required){const a=W[t.name];a&&("string"!==typeof a||a.trim())||e.push(t.label)}}),e.length>0)alert("Por favor completa los siguientes campos requeridos:\n\n".concat(e.join("\n")));else try{const e=Object.keys(W).some(e=>["numero_del_nit","nit","numero_de_identificacion"].includes(e.toLowerCase().trim())),t={numero_del_nit:"identification_number",nit:"identification_number",numero_de_identificacion:"identification_number",numero_identificacion:"identification_number",numero_de_cedula:"identification_number",numero_cedula:"identification_number",cedula_numero:"identification_number",numero_documento:"identification_number",documento:"identification_number",cc:"identification_number",tipo_de_identificacion:"identification_type",tipo_identificacion:"identification_type",nombre_de_la_propiedad_horizontal:"legal_name",nombre_propiedad_horizontal:"legal_name",razon_social:"legal_name",nombre_empresa:"legal_name",empresa:"legal_name",nombre_completo:"full_name",nombre:"full_name",nombre_del_trabajador:"full_name",nombre_del_empleado:"full_name",nombre_trabajador:"full_name",trabajador:"full_name",empleado:"full_name",nombre_persona:"full_name",razon_social_abreviada:"legal_name_short",nombre_abreviado:"legal_name_short",nombre_corto:"legal_name_short",nombre_del_representante_legal:"legal_representative_name",representante_legal:"legal_representative_name",nombre_representante:"legal_representative_name",representante:"legal_representative_name",cedula_representante:"legal_representative_id_number",cedula_del_representante:"legal_representative_id_number",identificacion_representante:"legal_representative_id_number",tipo_id_representante:"legal_representative_id_type",correo:"email",email:"email",correo_electronico:"email",telefono:"phone",celular:"phone",tel:"phone",direccion:"address",dir:"address",ciudad:"city",ciudad_de_domicilio:"city",municipio:"city",pais:"country",country:"country",licenciatario:"licensee_name",nombre_licenciatario:"licensee_name"};e?(t.cedula="legal_representative_id_number",console.log('\ud83d\udccb Campo "cedula" mapeado a representante legal (se detect\xf3 NIT)')):(t.cedula="identification_number",console.log('\ud83d\udccb Campo "cedula" mapeado a identificaci\xf3n del tercero (no se detect\xf3 NIT)'));const a=["identification_type","identification_number","legal_name","legal_name_short","legal_representative_name","legal_representative_id_type","legal_representative_id_number"],n={},r={};Object.entries(W).forEach(e=>{let[l,s]=e;const i=l.toLowerCase().trim(),o=t[i]||l;a.includes(o)||["email","phone","address","city","country","licensee_name","full_name"].includes(o)?n[o]=s:r[l]=s});const l=q.find(e=>e._id===U),s=l&&l.default_identification_types&&l.default_identification_types.length>0?l.default_identification_types[0]:"NIT";console.log("\ud83c\udfe2 Usando tipo de identificaci\xf3n para",(null===l||void 0===l?void 0:l.label)||"tipo desconocido",":",s);const i={identification_type:n.identification_type||s,identification_number:n.identification_number||"",legal_name:n.legal_name||"",legal_name_short:n.legal_name_short||n.legal_name||"",full_name:n.full_name||n.legal_name||"",legal_representative_name:n.legal_representative_name||"",legal_representative_id_type:n.legal_representative_id_type||"CC",legal_representative_id_number:n.legal_representative_id_number||"",email:n.email||"",phone:n.phone||"",address:n.address||"",city:n.city||"",country:n.country||"Colombia",licensee_name:n.licensee_name||"",third_party_type_id:U,custom_fields:r};console.log("\ud83d\udce4 Creando tercero con datos mapeados:",i),console.log("\ud83d\udd04 Mapeo aplicado:",{camposDinamicos:Object.keys(W),camposMapeados:Object.keys(n),camposPersonalizados:Object.keys(r)});const o=await Qn.post("/suppliers",i);alert("Tercero creado exitosamente");const c=await Qn.get("/suppliers");w(c.data.suppliers||[]);const d=o.data.supplier._id;S(d),We(d),P(!1),B(""),V([]),G({})}catch(s){var t,a,n;if(console.error("Error creating supplier:",s),console.error("Error details:",null===(t=s.response)||void 0===t?void 0:t.data),null!==(a=s.response)&&void 0!==a&&null!==(n=a.data)&&void 0!==n&&n.errors&&Array.isArray(s.response.data.errors)){const e=s.response.data.errors.map(e=>"\u2022 ".concat(e.msg," (campo: ").concat(e.path,")")).join("\n");alert("Errores de validaci\xf3n:\n\n"+e)}else{var r,l;alert("Error al crear el tercero: "+((null===(r=s.response)||void 0===r||null===(l=r.data)||void 0===l?void 0:l.error)||s.message||"Error desconocido"))}}},disabled:!U||0===H.length,style:{backgroundColor:U&&H.length>0?"#4CAF50":"#94a3b8",cursor:U&&H.length>0?"pointer":"not-allowed"},children:"Guardar Tercero"})]})]})}),K&&(0,Kn.jsx)("div",{className:"modal-overlay",onClick:()=>J(!1),children:(0,Kn.jsxs)("div",{className:"modal-content-generate",onClick:e=>e.stopPropagation(),style:{maxWidth:"700px"},children:[(0,Kn.jsxs)("div",{className:"modal-header-generate",children:[(0,Kn.jsx)("h2",{children:"Crear Nuevo Tipo de Tercero"}),(0,Kn.jsx)("button",{className:"modal-close",onClick:()=>J(!1),children:"\u2715"})]}),(0,Kn.jsx)("div",{className:"modal-body-generate",style:{maxHeight:"70vh",overflowY:"auto"},children:(0,Kn.jsxs)("div",{className:"contract-fields-modal",children:[(0,Kn.jsxs)("div",{style:{backgroundColor:"#f8fafc",padding:"20px",borderRadius:"8px",marginBottom:"20px"},children:[(0,Kn.jsx)("h3",{style:{margin:"0 0 15px 0",color:"#334155"},children:"Informaci\xf3n General"}),(0,Kn.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[(0,Kn.jsxs)("div",{className:"field-group",children:[(0,Kn.jsxs)("label",{children:["C\xf3digo ",(0,Kn.jsx)("span",{className:"required",children:"*"})]}),(0,Kn.jsx)("input",{type:"text",value:Y.code,onChange:e=>X(u(u({},Y),{},{code:e.target.value.toLowerCase().replace(/[^a-z0-9_]/g,"")})),placeholder:"ej: proveedor",className:"form-input",style:{fontFamily:"monospace"}}),(0,Kn.jsx)("small",{style:{fontSize:"12px",color:"#64748b",display:"block",marginTop:"4px"},children:"Solo letras min\xfasculas, n\xfameros y gui\xf3n bajo"})]}),(0,Kn.jsxs)("div",{className:"field-group",children:[(0,Kn.jsx)("label",{children:"\xcdcono"}),(0,Kn.jsx)("input",{type:"text",value:Y.icon,onChange:e=>X(u(u({},Y),{},{icon:e.target.value})),placeholder:"\ud83d\udcc4",className:"form-input",style:{fontSize:"24px",textAlign:"center"},maxLength:2}),(0,Kn.jsx)("small",{style:{fontSize:"12px",color:"#64748b",display:"block",marginTop:"4px"},children:"Emoji que representa el tipo"})]})]}),(0,Kn.jsxs)("div",{className:"field-group",style:{marginTop:"20px"},children:[(0,Kn.jsxs)("label",{children:["Nombre ",(0,Kn.jsx)("span",{className:"required",children:"*"})]}),(0,Kn.jsx)("input",{type:"text",value:Y.label,onChange:e=>{X(u(u({},Y),{},{label:e.target.value,code:Y.code||e.target.value.toLowerCase().replace(/[^a-z0-9]/g,"_")}))},placeholder:"Proveedor",className:"form-input"}),(0,Kn.jsx)("small",{style:{fontSize:"12px",color:"#64748b",display:"block",marginTop:"4px"},children:"Nombre descriptivo del tipo de tercero"})]}),(0,Kn.jsxs)("div",{className:"field-group",style:{marginTop:"20px"},children:[(0,Kn.jsx)("label",{children:"Descripci\xf3n"}),(0,Kn.jsx)("textarea",{value:Y.description,onChange:e=>X(u(u({},Y),{},{description:e.target.value})),placeholder:"Descripci\xf3n del tipo de tercero",className:"form-input",rows:3,style:{resize:"vertical"}})]})]}),(0,Kn.jsxs)("div",{style:{backgroundColor:"#fffbeb",border:"1px solid #fbbf24",borderRadius:"8px",padding:"12px",display:"flex",gap:"10px",alignItems:"flex-start"},children:[(0,Kn.jsx)("span",{style:{fontSize:"20px"},children:"\u2139\ufe0f"}),(0,Kn.jsxs)("div",{style:{fontSize:"13px",color:"#92400e"},children:[(0,Kn.jsx)("strong",{children:"Nota:"})," El tipo se crear\xe1 sin campos inicialmente. Despu\xe9s podr\xe1s configurar los campos desde el modal de configuraci\xf3n de tipos."]})]})]})}),(0,Kn.jsxs)("div",{className:"modal-footer-generate",children:[(0,Kn.jsx)("button",{className:"btn-cancel",onClick:()=>{J(!1),X({code:"",label:"",description:"",icon:"\ud83d\udcc4"})},children:"Cancelar"}),(0,Kn.jsx)("button",{className:"btn-generate-final",onClick:async()=>{if(Y.code.trim()&&Y.label.trim())try{console.log("\ud83c\udd95 Creando nuevo tipo de tercero...");const e=(await Qn.post("/third-party-types",{code:Y.code.toLowerCase().trim(),label:Y.label.trim(),description:Y.description.trim()||"Tipo de tercero: ".concat(Y.label),icon:Y.icon||"\ud83d\udcc4",fields:[]})).data.type;console.log("\u2705 Nuevo tipo creado:",e),await He(),B(e._id),await Ve(e._id),J(!1),X({code:"",label:"",description:"",icon:"\ud83d\udcc4"}),alert("Tipo de tercero creado exitosamente")}catch(a){var e,t;console.error("Error al crear tipo de tercero:",a),alert("Error al crear el tipo de tercero: "+((null===(e=a.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.error)||"Error desconocido"))}else alert("El c\xf3digo y el nombre son requeridos")},disabled:!Y.code.trim()||!Y.label.trim(),style:{backgroundColor:Y.code.trim()&&Y.label.trim()?"#10b981":"#94a3b8",cursor:Y.code.trim()&&Y.label.trim()?"pointer":"not-allowed"},children:"Crear Tipo"})]})]})}),O&&y&&(0,Kn.jsx)(mr,{isOpen:O,onClose:Ge,detectedVariables:I,thirdPartyTypeCode:y.category||"otro",onConfigApplied:async e=>{console.log("\ud83c\udfaf Tipo de tercero configurado, abriendo modal de creaci\xf3n con tipo:",e),Ge(),await He(),P(!0),await Ve(e),console.log("\u2705 Modal de creaci\xf3n de tercero abierto con tipo pre-seleccionado")}}),ke&&Te&&(0,Kn.jsx)("div",{className:"modal-overlay",onClick:Ie,children:(0,Kn.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,Kn.jsxs)("div",{className:"modal-header",children:[(0,Kn.jsx)("h2",{children:"Editar Plantilla"}),(0,Kn.jsx)("button",{className:"modal-close",onClick:Ie,children:"\xd7"})]}),(0,Kn.jsxs)("div",{className:"modal-body",children:[(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Nombre de la Plantilla *"}),(0,Kn.jsx)("input",{type:"text",value:Re.name,onChange:e=>Le(u(u({},Re),{},{name:e.target.value})),placeholder:"Nombre de la plantilla",className:"form-input"})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Descripci\xf3n"}),(0,Kn.jsx)("textarea",{value:Re.description,onChange:e=>Le(u(u({},Re),{},{description:e.target.value})),placeholder:"Descripci\xf3n de la plantilla",className:"form-input",rows:3})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Categor\xeda"}),(0,Kn.jsx)("input",{type:"text",value:Re.category,onChange:e=>Le(u(u({},Re),{},{category:e.target.value})),placeholder:"Categor\xeda de la plantilla",className:"form-input"})]})]}),(0,Kn.jsxs)("div",{className:"modal-footer",children:[(0,Kn.jsx)("button",{className:"btn-secondary",onClick:Ie,children:"Cancelar"}),(0,Kn.jsx)("button",{className:"btn-primary",onClick:async()=>{if(Te)if(Re.name.trim())try{await Qn.put("/templates/".concat(Te._id),{name:Re.name.trim(),description:Re.description.trim(),category:Re.category.trim()}),alert("Plantilla actualizada exitosamente"),Ie(),Ae()}catch(a){var e,t;console.error("Error updating template:",a),alert("Error al actualizar la plantilla: "+((null===(e=a.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.error)||"Error desconocido"))}else alert("El nombre de la plantilla es requerido")},children:"Guardar Cambios"})]})]})})]})},gr=()=>{const[e,t]=(0,r.useState)([]),[a,n]=(0,r.useState)([]),[l,s]=(0,r.useState)(""),[i,o]=(0,r.useState)(!0),[c,d]=(0,r.useState)(!1),[p,m]=(0,r.useState)(!1),[h,f]=(0,r.useState)(!1),[g,v]=(0,r.useState)(null),[x,y]=(0,r.useState)({name:"",tax_id:"",email:"",phone:"",address:""}),[b,j]=(0,r.useState)({name:"",tax_id:"",email:"",phone:"",address:""});(0,r.useEffect)(()=>{N()},[]),(0,r.useEffect)(()=>{if(""===l.trim())n(e);else{const t=e.filter(e=>e.name.toLowerCase().includes(l.toLowerCase())||e.tax_id&&e.tax_id.toLowerCase().includes(l.toLowerCase()));n(t)}},[l,e]);const N=async()=>{try{const e=await Qn.get("/companies");t(e.data),n(e.data)}catch(e){console.error("Error fetching companies:",e)}finally{o(!1)}};return i?(0,Kn.jsx)("div",{className:"loading",children:"Cargando empresas..."}):(0,Kn.jsxs)("div",{className:"companies",children:[(0,Kn.jsxs)("div",{className:"page-header",children:[(0,Kn.jsx)("h1",{children:"Gesti\xf3n de Empresas"}),(0,Kn.jsx)("button",{className:"btn-primary",onClick:()=>d(!0),children:"Nueva Empresa"})]}),(0,Kn.jsxs)("div",{className:"filter-section",children:[(0,Kn.jsx)("input",{type:"text",className:"search-input",placeholder:"Buscar por nombre o NIT...",value:l,onChange:e=>s(e.target.value)}),(0,Kn.jsxs)("span",{className:"results-count",children:[a.length," ",1===a.length?"empresa":"empresas"]})]}),0===a.length?(0,Kn.jsxs)("div",{className:"empty-state",children:[(0,Kn.jsx)("h3",{children:0===e.length?"No hay empresas":"No se encontraron empresas"}),(0,Kn.jsx)("p",{children:0===e.length?"Agrega tu primera empresa para comenzar":"Intenta con otro t\xe9rmino de b\xfasqueda"})]}):(0,Kn.jsx)("div",{className:"companies-table-container",children:(0,Kn.jsxs)("table",{className:"companies-table",children:[(0,Kn.jsx)("thead",{children:(0,Kn.jsxs)("tr",{children:[(0,Kn.jsx)("th",{children:"Nombre"}),(0,Kn.jsx)("th",{children:"NIT"}),(0,Kn.jsx)("th",{children:"Email"}),(0,Kn.jsx)("th",{children:"Tel\xe9fono"}),(0,Kn.jsx)("th",{children:"Direcci\xf3n"}),(0,Kn.jsx)("th",{children:"Fecha Registro"}),(0,Kn.jsx)("th",{children:"Acciones"})]})}),(0,Kn.jsx)("tbody",{children:a.map(e=>(0,Kn.jsxs)("tr",{children:[(0,Kn.jsx)("td",{className:"company-name",children:e.name}),(0,Kn.jsx)("td",{children:e.tax_id||"N/A"}),(0,Kn.jsx)("td",{children:e.email}),(0,Kn.jsx)("td",{children:e.phone}),(0,Kn.jsx)("td",{className:"company-address",children:e.address}),(0,Kn.jsx)("td",{children:new Date(e.createdAt).toLocaleDateString()}),(0,Kn.jsxs)("td",{className:"actions-cell",children:[(0,Kn.jsx)("button",{className:"btn-icon btn-view",onClick:()=>(e=>{v(e),m(!0)})(e),title:"Ver detalles",children:"\ud83d\udc41\ufe0f"}),(0,Kn.jsx)("button",{className:"btn-icon btn-edit",onClick:()=>(e=>{y({name:e.name,tax_id:e.tax_id||"",email:e.email,phone:e.phone,address:e.address}),v(e),f(!0)})(e),title:"Editar",children:"\u270f\ufe0f"}),(0,Kn.jsx)("button",{className:"btn-icon btn-delete",onClick:()=>(async e=>{if(window.confirm("\xbfEst\xe1 seguro de que desea eliminar esta empresa?"))try{await Qn.delete("/companies/".concat(e)),await N()}catch(t){console.error("Error deleting company:",t),alert("Error al eliminar la empresa. Puede que tenga contratos o plantillas asociadas.")}})(e._id),title:"Eliminar",children:"\ud83d\uddd1\ufe0f"})]})]},e._id))})]})}),c&&(0,Kn.jsx)("div",{className:"modal-overlay",children:(0,Kn.jsxs)("div",{className:"modal",children:[(0,Kn.jsx)("h3",{children:"Crear Nueva Empresa"}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Nombre de la Empresa:"}),(0,Kn.jsx)("input",{type:"text",value:b.name,onChange:e=>j(u(u({},b),{},{name:e.target.value})),required:!0})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"NIT:"}),(0,Kn.jsx)("input",{type:"text",value:b.tax_id,onChange:e=>j(u(u({},b),{},{tax_id:e.target.value})),required:!0})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Email:"}),(0,Kn.jsx)("input",{type:"email",value:b.email,onChange:e=>j(u(u({},b),{},{email:e.target.value})),required:!0})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Tel\xe9fono:"}),(0,Kn.jsx)("input",{type:"text",value:b.phone,onChange:e=>j(u(u({},b),{},{phone:e.target.value})),required:!0})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Direcci\xf3n:"}),(0,Kn.jsx)("input",{type:"text",value:b.address,onChange:e=>j(u(u({},b),{},{address:e.target.value})),required:!0})]}),(0,Kn.jsxs)("div",{className:"modal-actions",children:[(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>d(!1),children:"Cancelar"}),(0,Kn.jsx)("button",{className:"btn-primary",onClick:async()=>{try{await Qn.post("/companies",b),await N(),d(!1),j({name:"",tax_id:"",email:"",phone:"",address:""})}catch(e){console.error("Error creating company:",e)}},disabled:!b.name||!b.tax_id||!b.email,children:"Crear Empresa"})]})]})}),p&&g&&(0,Kn.jsx)("div",{className:"modal-overlay",children:(0,Kn.jsxs)("div",{className:"modal",children:[(0,Kn.jsx)("h3",{children:"Detalles de la Empresa"}),(0,Kn.jsxs)("div",{className:"view-details",children:[(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Nombre:"})," ",g.name]}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"NIT:"})," ",g.tax_id||"N/A"]}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Email:"})," ",g.email]}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Tel\xe9fono:"})," ",g.phone]}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Direcci\xf3n:"})," ",g.address]}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Fecha de Registro:"})," ",new Date(g.createdAt).toLocaleDateString()]})]}),(0,Kn.jsx)("div",{className:"modal-actions",children:(0,Kn.jsx)("button",{className:"btn-primary",onClick:()=>m(!1),children:"Cerrar"})})]})}),h&&g&&(0,Kn.jsx)("div",{className:"modal-overlay",children:(0,Kn.jsxs)("div",{className:"modal",children:[(0,Kn.jsx)("h3",{children:"Editar Empresa"}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Nombre de la Empresa:"}),(0,Kn.jsx)("input",{type:"text",value:x.name,onChange:e=>y(u(u({},x),{},{name:e.target.value})),required:!0})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"NIT:"}),(0,Kn.jsx)("input",{type:"text",value:x.tax_id,onChange:e=>y(u(u({},x),{},{tax_id:e.target.value})),required:!0})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Email:"}),(0,Kn.jsx)("input",{type:"email",value:x.email,onChange:e=>y(u(u({},x),{},{email:e.target.value})),required:!0})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Tel\xe9fono:"}),(0,Kn.jsx)("input",{type:"text",value:x.phone,onChange:e=>y(u(u({},x),{},{phone:e.target.value})),required:!0})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Direcci\xf3n:"}),(0,Kn.jsx)("input",{type:"text",value:x.address,onChange:e=>y(u(u({},x),{},{address:e.target.value})),required:!0})]}),(0,Kn.jsxs)("div",{className:"modal-actions",children:[(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>{f(!1),v(null)},children:"Cancelar"}),(0,Kn.jsx)("button",{className:"btn-primary",onClick:async()=>{if(g)try{await Qn.put("/companies/".concat(g._id),x),await N(),f(!1),v(null)}catch(e){console.error("Error editing company:",e)}},disabled:!x.name||!x.tax_id||!x.email,children:"Guardar Cambios"})]})]})})]})},vr=()=>{var e;const[t,a]=(0,r.useState)([]),[n,l]=(0,r.useState)([]),[s,i]=(0,r.useState)(!0),[o,c]=(0,r.useState)(null),[d,p]=(0,r.useState)(""),[m,h]=(0,r.useState)("requester"),[f,g]=(0,r.useState)({canView:!0,canEdit:!1,canDelete:!1,canManageUsers:!1}),[v,x]=(0,r.useState)(""),[y,b]=(0,r.useState)(!1),[j,N]=(0,r.useState)(!1),[_,w]=(0,r.useState)(!1),[C,S]=(0,r.useState)(!1),[k,E]=(0,r.useState)(!1),[T,P]=(0,r.useState)(null),[R,L]=(0,r.useState)(new Set),[A,z]=(0,r.useState)({id:"",name:"",email:"",role:"requester"}),[O,D]=(0,r.useState)(""),[I,F]=(0,r.useState)("all"),[q,M]=(0,r.useState)("all"),[U,B]=(0,r.useState)("name"),[H,V]=(0,r.useState)("asc"),[W,G]=(0,r.useState)({email:"",name:"",password:"",role:"requester",companyId:""});(0,r.useEffect)(()=>{$()},[]);const $=async()=>{try{const[e,t]=await Promise.all([Qn.get("/multi-companies/users"),Qn.get("/multi-companies/companies")]);a(e.data),l(t.data)}catch(e){console.error("Error fetching data:",e)}finally{i(!1)}},Q=e=>e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase(),K=n.filter(e=>Q(e.name).includes(Q(v))||Q(e.tax_id).includes(Q(v))),J=t.filter(e=>{var t;const a=!O||Q(e.email).includes(Q(O))||Q(e.name).includes(Q(O)),n="all"===I||e.role===I,r=(null===(t=e.companies)||void 0===t?void 0:t.length)||0;let l=!0;return"none"===q?l=0===r:"one"===q?l=1===r:"multiple"===q&&(l=r>1),a&&n&&l}).sort((e,t)=>{var a,n;let r=0;switch(U){case"name":r=e.name.localeCompare(t.name);break;case"email":r=e.email.localeCompare(t.email);break;case"role":r=e.role.localeCompare(t.role);break;case"companies":r=((null===(a=e.companies)||void 0===a?void 0:a.length)||0)-((null===(n=t.companies)||void 0===n?void 0:n.length)||0);break;default:r=0}return"asc"===H?r:-r});return s?(0,Kn.jsx)("div",{className:"loading",children:"Cargando gesti\xf3n de usuarios..."}):(0,Kn.jsxs)("div",{className:"user-management",children:[(0,Kn.jsxs)("div",{className:"page-header",children:[(0,Kn.jsx)("h1",{children:"Gesti\xf3n de Usuarios y Empresas"}),(0,Kn.jsx)("button",{className:"btn-primary",onClick:()=>N(!0),children:"Crear Usuario"})]}),(0,Kn.jsxs)("div",{className:"filters-section",children:[(0,Kn.jsxs)("div",{className:"filters-row",children:[(0,Kn.jsxs)("div",{className:"filter-group",children:[(0,Kn.jsx)("label",{children:"Buscar:"}),(0,Kn.jsx)("input",{type:"text",placeholder:"Email o nombre...",value:O,onChange:e=>D(e.target.value),className:"filter-input"})]}),(0,Kn.jsxs)("div",{className:"filter-group",children:[(0,Kn.jsx)("label",{children:"Rol:"}),(0,Kn.jsxs)("select",{value:I,onChange:e=>F(e.target.value),className:"filter-select",children:[(0,Kn.jsx)("option",{value:"all",children:"Todos"}),(0,Kn.jsx)("option",{value:"super_admin",children:"Super Admin"}),(0,Kn.jsx)("option",{value:"admin",children:"Admin"}),(0,Kn.jsx)("option",{value:"lawyer",children:"Lawyer"}),(0,Kn.jsx)("option",{value:"requester",children:"Requester"})]})]}),(0,Kn.jsxs)("div",{className:"filter-group",children:[(0,Kn.jsx)("label",{children:"Empresas:"}),(0,Kn.jsxs)("select",{value:q,onChange:e=>M(e.target.value),className:"filter-select",children:[(0,Kn.jsx)("option",{value:"all",children:"Todas"}),(0,Kn.jsx)("option",{value:"none",children:"Sin empresas"}),(0,Kn.jsx)("option",{value:"one",children:"1 empresa"}),(0,Kn.jsx)("option",{value:"multiple",children:"M\xfaltiples"})]})]}),(0,Kn.jsxs)("div",{className:"filter-group",children:[(0,Kn.jsx)("label",{children:"Ordenar por:"}),(0,Kn.jsxs)("select",{value:U,onChange:e=>B(e.target.value),className:"filter-select",children:[(0,Kn.jsx)("option",{value:"name",children:"Nombre"}),(0,Kn.jsx)("option",{value:"email",children:"Email"}),(0,Kn.jsx)("option",{value:"role",children:"Rol"}),(0,Kn.jsx)("option",{value:"companies",children:"N\xb0 Empresas"})]})]}),(0,Kn.jsx)("div",{className:"filter-group",children:(0,Kn.jsx)("button",{onClick:()=>V("asc"===H?"desc":"asc"),className:"btn-sort",title:"asc"===H?"Orden ascendente":"Orden descendente",children:"asc"===H?"\u2191":"\u2193"})}),(0,Kn.jsx)("div",{className:"filter-group",children:(0,Kn.jsx)("button",{onClick:()=>{D(""),F("all"),M("all"),B("name"),V("asc")},className:"btn-clear-filters",children:"Limpiar"})})]}),(0,Kn.jsxs)("div",{className:"results-count",children:["Mostrando ",J.length," de ",t.length," usuarios"]})]}),(0,Kn.jsx)("div",{className:"users-list",children:J.map(e=>{var t;return(0,Kn.jsxs)("div",{className:"user-row",children:[(0,Kn.jsxs)("div",{className:"user-main-info",children:[(0,Kn.jsxs)("div",{className:"user-email-section",children:[(0,Kn.jsx)("span",{className:"user-email",children:e.email}),(0,Kn.jsx)("span",{className:"user-name-visible",children:e.name})]}),(0,Kn.jsx)("span",{className:"role-badge ".concat(e.role),children:e.role}),(0,Kn.jsx)("span",{className:"status-badge ".concat(e.active?"active":"inactive"),children:e.active?"Activo":"Inactivo"}),(0,Kn.jsxs)("div",{className:"user-actions",children:[(0,Kn.jsx)("button",{className:"btn-view-info",onClick:()=>(e=>{c(e),S(!0)})(e),title:"Ver informaci\xf3n del usuario",children:"\ud83d\udc41\ufe0f"}),(0,Kn.jsx)("button",{className:"btn-edit",onClick:()=>(e=>{z({id:e._id,name:e.name,email:e.email,role:e.role}),E(!0)})(e),title:"Editar usuario",children:"\u270e"}),(0,Kn.jsx)("button",{className:"btn-toggle-status ".concat(e.active?"deactivate":"activate"),onClick:()=>(async(e,t,a)=>{const n=a?"desactivar":"activar";if(window.confirm("\xbfEst\xe1 seguro de ".concat(n," al usuario ").concat(t,"?")))try{await Qn.patch("/multi-companies/toggle-user-status/".concat(e)),await $(),alert("Usuario ".concat("desactivar"===n?"desactivado":"activado"," exitosamente"))}catch(s){var r,l;alert((null===(r=s.response)||void 0===r||null===(l=r.data)||void 0===l?void 0:l.error)||"Error al ".concat(n," usuario"))}})(e._id,e.name,e.active),title:e.active?"Desactivar usuario":"Activar usuario",children:e.active?"\ud83d\udd12":"\ud83d\udd13"}),(0,Kn.jsx)("button",{className:"btn-delete",onClick:()=>(async(e,t)=>{if(window.confirm("\xbfEst\xe1 seguro de eliminar al usuario ".concat(t,"?\n\nEsta acci\xf3n desactivar\xe1 el usuario y todas sus asignaciones a empresas.")))try{await Qn.delete("/multi-companies/delete-user/".concat(e)),await $(),alert("Usuario eliminado exitosamente")}catch(r){var a,n;alert((null===(a=r.response)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.error)||"Error al eliminar usuario")}})(e._id,e.name),title:"Eliminar usuario",children:"\ud83d\uddd1\ufe0f"}),(0,Kn.jsxs)("button",{className:"btn-view-companies",onClick:()=>{return t=e._id,void L(e=>{const a=new Set(e);return a.has(t)?a.delete(t):a.add(t),a});var t},title:R.has(e._id)?"Ocultar empresas":"Ver empresas",children:[(0,Kn.jsx)("span",{className:"toggle-arrow ".concat(R.has(e._id)?"expanded":""),children:"\u25b6"}),"Empresas (",(null===(t=e.companies)||void 0===t?void 0:t.length)||0,")"]}),(0,Kn.jsx)("button",{className:"btn-small btn-primary",onClick:()=>(e=>{c(e),p(""),h("requester"),g({canView:!0,canEdit:!1,canDelete:!1,canManageUsers:!1}),x(""),b(!0)})(e),children:"Asignar"})]})]}),R.has(e._id)&&(0,Kn.jsx)("div",{className:"user-companies-expanded",children:e.companies&&0!==e.companies.length?e.companies.map(t=>(0,Kn.jsxs)("div",{className:"company-row",children:[(0,Kn.jsxs)("div",{className:"company-name",children:[(0,Kn.jsx)("strong",{children:t.company.name}),(0,Kn.jsxs)("span",{className:"tax-id",children:["(",t.company.tax_id,")"]})]}),(0,Kn.jsx)("span",{className:"role-badge-mini ".concat(t.role),children:t.role}),(0,Kn.jsxs)("div",{className:"perms",children:[(0,Kn.jsx)("span",{className:t.permissions.canView?"on":"off",title:"Ver",children:"V"}),(0,Kn.jsx)("span",{className:t.permissions.canEdit?"on":"off",title:"Editar",children:"E"}),(0,Kn.jsx)("span",{className:t.permissions.canDelete?"on":"off",title:"Eliminar",children:"D"}),(0,Kn.jsx)("span",{className:t.permissions.canManageUsers?"on":"off",title:"Gestionar",children:"G"})]}),(0,Kn.jsxs)("div",{className:"actions-mini",children:[(0,Kn.jsx)("button",{onClick:()=>((e,t)=>{c(e),P(t),h(t.role),g(t.permissions),w(!0)})(e,t),title:"Editar",children:"\u270e"}),(0,Kn.jsx)("button",{onClick:()=>(async(e,t)=>{if(window.confirm("\xbfEst\xe1 seguro de remover este usuario de la empresa?"))try{await Qn.post("/multi-companies/remove-user-company",{userId:e,companyId:t}),await $()}catch(r){var a,n;console.error("Error removing user:",r),alert((null===(a=r.response)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.error)||"Error al remover usuario de empresa")}})(e._id,t.company._id),title:"Eliminar",children:"\u2715"})]})]},t._id)):(0,Kn.jsx)("p",{className:"no-companies",children:"Sin empresas asignadas"})})]},e._id)})}),y&&o&&(0,Kn.jsx)("div",{className:"modal-overlay",children:(0,Kn.jsxs)("div",{className:"modal modal-large",children:[(0,Kn.jsx)("h3",{children:"Asignar Usuario a Empresa"}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Usuario:"})," ",o.name," (",o.email,")"]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Buscar Empresa:"}),(0,Kn.jsx)("input",{type:"text",placeholder:"Buscar por nombre o NIT/RUC...",value:v,onChange:e=>x(e.target.value),className:"search-input"})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Seleccionar Empresa:"}),(0,Kn.jsx)("div",{className:"company-list",children:0===K.length?(0,Kn.jsx)("p",{className:"no-results",children:"No se encontraron empresas"}):(0,Kn.jsxs)("select",{value:d,onChange:e=>p(e.target.value),size:Math.min(K.length,8),children:[(0,Kn.jsx)("option",{value:"",children:"Seleccionar empresa..."}),K.map(e=>(0,Kn.jsxs)("option",{value:e._id,children:[e.name," - ",e.tax_id]},e._id))]})})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Rol en la Empresa:"}),(0,Kn.jsxs)("select",{value:m,onChange:e=>h(e.target.value),children:[(0,Kn.jsx)("option",{value:"requester",children:"Usuario"}),(0,Kn.jsx)("option",{value:"lawyer",children:"Abogado"}),(0,Kn.jsx)("option",{value:"admin",children:"Administrador"}),(0,Kn.jsx)("option",{value:"super_admin",children:"Super Admin"}),(0,Kn.jsx)("option",{value:"talento_humano",children:"Talento Humano"}),(0,Kn.jsx)("option",{value:"colaboradores",children:"Colaboradores"})]})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Permisos:"}),(0,Kn.jsxs)("div",{className:"permissions-grid",children:[(0,Kn.jsxs)("label",{children:[(0,Kn.jsx)("input",{type:"checkbox",checked:f.canView,onChange:e=>g(u(u({},f),{},{canView:e.target.checked}))}),"Ver"]}),(0,Kn.jsxs)("label",{children:[(0,Kn.jsx)("input",{type:"checkbox",checked:f.canEdit,onChange:e=>g(u(u({},f),{},{canEdit:e.target.checked}))}),"Editar"]}),(0,Kn.jsxs)("label",{children:[(0,Kn.jsx)("input",{type:"checkbox",checked:f.canDelete,onChange:e=>g(u(u({},f),{},{canDelete:e.target.checked}))}),"Eliminar"]}),(0,Kn.jsxs)("label",{children:[(0,Kn.jsx)("input",{type:"checkbox",checked:f.canManageUsers,onChange:e=>g(u(u({},f),{},{canManageUsers:e.target.checked}))}),"Gestionar Usuarios"]})]})]}),(0,Kn.jsxs)("div",{className:"modal-actions",children:[(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>{b(!1),c(null),x("")},children:"Cancelar"}),(0,Kn.jsx)("button",{className:"btn-primary",onClick:async()=>{if(o&&d)try{await Qn.post("/multi-companies/assign-user-company",{userId:o._id,companyId:d,role:m,permissions:f}),await $(),b(!1),c(null),p(""),h("requester"),g({canView:!0,canEdit:!1,canDelete:!1,canManageUsers:!1}),x("")}catch(a){var e,t;console.error("Error assigning user:",a),alert((null===(e=a.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.error)||"Error al asignar usuario a empresa")}},disabled:!d,children:"Asignar"})]})]})}),_&&T&&o&&(0,Kn.jsx)("div",{className:"modal-overlay",children:(0,Kn.jsxs)("div",{className:"modal",children:[(0,Kn.jsx)("h3",{children:"Editar Permisos"}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Usuario:"})," ",o.name]}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Empresa:"})," ",T.company.name]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Rol en la Empresa:"}),(0,Kn.jsxs)("select",{value:m,onChange:e=>h(e.target.value),children:[(0,Kn.jsx)("option",{value:"requester",children:"Usuario"}),(0,Kn.jsx)("option",{value:"lawyer",children:"Abogado"}),(0,Kn.jsx)("option",{value:"admin",children:"Administrador"}),(0,Kn.jsx)("option",{value:"super_admin",children:"Super Admin"}),(0,Kn.jsx)("option",{value:"talento_humano",children:"Talento Humano"}),(0,Kn.jsx)("option",{value:"colaboradores",children:"Colaboradores"})]})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Permisos:"}),(0,Kn.jsxs)("div",{className:"permissions-grid",children:[(0,Kn.jsxs)("label",{children:[(0,Kn.jsx)("input",{type:"checkbox",checked:f.canView,onChange:e=>g(u(u({},f),{},{canView:e.target.checked}))}),"Ver"]}),(0,Kn.jsxs)("label",{children:[(0,Kn.jsx)("input",{type:"checkbox",checked:f.canEdit,onChange:e=>g(u(u({},f),{},{canEdit:e.target.checked}))}),"Editar"]}),(0,Kn.jsxs)("label",{children:[(0,Kn.jsx)("input",{type:"checkbox",checked:f.canDelete,onChange:e=>g(u(u({},f),{},{canDelete:e.target.checked}))}),"Eliminar"]}),(0,Kn.jsxs)("label",{children:[(0,Kn.jsx)("input",{type:"checkbox",checked:f.canManageUsers,onChange:e=>g(u(u({},f),{},{canManageUsers:e.target.checked}))}),"Gestionar Usuarios"]})]})]}),(0,Kn.jsxs)("div",{className:"modal-actions",children:[(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>{w(!1),P(null),c(null)},children:"Cancelar"}),(0,Kn.jsx)("button",{className:"btn-primary",onClick:async()=>{if(T&&o)try{await Qn.put("/multi-companies/update-user-company-permissions",{userId:o._id,companyId:T.company._id,role:m,permissions:f}),await $(),w(!1),P(null)}catch(a){var e,t;console.error("Error updating permissions:",a),alert((null===(e=a.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.error)||"Error al actualizar permisos")}},children:"Actualizar"})]})]})}),j&&(0,Kn.jsx)("div",{className:"modal-overlay",children:(0,Kn.jsxs)("div",{className:"modal",children:[(0,Kn.jsx)("h3",{children:"Crear Nuevo Usuario"}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Nombre:"}),(0,Kn.jsx)("input",{type:"text",value:W.name,onChange:e=>G(u(u({},W),{},{name:e.target.value})),required:!0})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Email:"}),(0,Kn.jsx)("input",{type:"email",value:W.email,onChange:e=>G(u(u({},W),{},{email:e.target.value})),required:!0})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Contrase\xf1a:"}),(0,Kn.jsx)("input",{type:"password",value:W.password,onChange:e=>G(u(u({},W),{},{password:e.target.value})),required:!0})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Rol:"}),(0,Kn.jsxs)("select",{value:W.role,onChange:e=>G(u(u({},W),{},{role:e.target.value})),children:[(0,Kn.jsx)("option",{value:"requester",children:"Usuario"}),(0,Kn.jsx)("option",{value:"lawyer",children:"Abogado"}),(0,Kn.jsx)("option",{value:"admin",children:"Administrador"}),(0,Kn.jsx)("option",{value:"super_admin",children:"Super Admin"}),(0,Kn.jsx)("option",{value:"talento_humano",children:"Talento Humano"}),(0,Kn.jsx)("option",{value:"colaboradores",children:"Colaboradores"})]})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Empresa (opcional):"}),(0,Kn.jsxs)("select",{value:W.companyId,onChange:e=>G(u(u({},W),{},{companyId:e.target.value})),children:[(0,Kn.jsx)("option",{value:"",children:"Sin empresa"}),n.map(e=>(0,Kn.jsxs)("option",{value:e._id,children:[e.name," - ",e.tax_id]},e._id))]})]}),(0,Kn.jsxs)("div",{className:"modal-actions",children:[(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>N(!1),children:"Cancelar"}),(0,Kn.jsx)("button",{className:"btn-primary",onClick:async()=>{try{await Qn.post("/super-admin/create-user",W),await $(),N(!1),G({email:"",name:"",password:"",role:"requester",companyId:""})}catch(a){var e,t;console.error("Error creating user:",a),alert((null===(e=a.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.error)||"Error al crear usuario")}},disabled:!W.name||!W.email||!W.password,children:"Crear Usuario"})]})]})}),C&&o&&(0,Kn.jsx)("div",{className:"modal-overlay",children:(0,Kn.jsxs)("div",{className:"modal",children:[(0,Kn.jsx)("h3",{children:"Informaci\xf3n del Usuario"}),(0,Kn.jsxs)("div",{className:"user-info-details",children:[(0,Kn.jsxs)("div",{className:"info-row",children:[(0,Kn.jsx)("span",{className:"info-label",children:"Nombre Completo:"}),(0,Kn.jsx)("span",{className:"info-value",children:o.name})]}),(0,Kn.jsxs)("div",{className:"info-row",children:[(0,Kn.jsx)("span",{className:"info-label",children:"Email:"}),(0,Kn.jsx)("span",{className:"info-value",children:o.email})]}),(0,Kn.jsxs)("div",{className:"info-row",children:[(0,Kn.jsx)("span",{className:"info-label",children:"Rol del Sistema:"}),(0,Kn.jsx)("span",{className:"role-badge ".concat(o.role),children:o.role})]}),(0,Kn.jsxs)("div",{className:"info-row",children:[(0,Kn.jsx)("span",{className:"info-label",children:"Estado:"}),(0,Kn.jsx)("span",{className:"status-badge ".concat(o.active?"active":"inactive"),children:o.active?"Activo":"Inactivo"})]}),(0,Kn.jsxs)("div",{className:"info-row",children:[(0,Kn.jsx)("span",{className:"info-label",children:"Empresas Asignadas:"}),(0,Kn.jsx)("span",{className:"info-value",children:(null===(e=o.companies)||void 0===e?void 0:e.length)||0})]}),o.companies&&o.companies.length>0&&(0,Kn.jsxs)("div",{className:"info-section",children:[(0,Kn.jsx)("h4",{children:"Empresas y Roles:"}),(0,Kn.jsx)("div",{className:"companies-info-list",children:o.companies.map(e=>(0,Kn.jsxs)("div",{className:"company-info-item",children:[(0,Kn.jsxs)("div",{className:"company-info-header",children:[(0,Kn.jsx)("strong",{children:e.company.name}),(0,Kn.jsx)("span",{className:"role-badge-mini ".concat(e.role),children:e.role})]}),(0,Kn.jsxs)("div",{className:"company-info-details",children:[(0,Kn.jsxs)("span",{className:"tax-id",children:["NIT/RUC: ",e.company.tax_id]}),(0,Kn.jsxs)("div",{className:"perms",children:[(0,Kn.jsx)("span",{className:e.permissions.canView?"on":"off",title:"Ver",children:"V"}),(0,Kn.jsx)("span",{className:e.permissions.canEdit?"on":"off",title:"Editar",children:"E"}),(0,Kn.jsx)("span",{className:e.permissions.canDelete?"on":"off",title:"Eliminar",children:"D"}),(0,Kn.jsx)("span",{className:e.permissions.canManageUsers?"on":"off",title:"Gestionar",children:"G"})]})]})]},e._id))})]})]}),(0,Kn.jsx)("div",{className:"modal-actions",children:(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>{S(!1),c(null)},children:"Cerrar"})})]})}),k&&(0,Kn.jsx)("div",{className:"modal-overlay",onClick:()=>E(!1),children:(0,Kn.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,Kn.jsx)("h2",{children:"Editar Usuario"}),(0,Kn.jsxs)("div",{className:"modal-body",children:[(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Nombre:"}),(0,Kn.jsx)("input",{type:"text",value:A.name,onChange:e=>z(u(u({},A),{},{name:e.target.value})),placeholder:"Nombre completo del usuario"})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Email:"}),(0,Kn.jsx)("input",{type:"email",value:A.email,onChange:e=>z(u(u({},A),{},{email:e.target.value})),placeholder:"correo@ejemplo.com"})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Rol:"}),(0,Kn.jsxs)("select",{value:A.role,onChange:e=>z(u(u({},A),{},{role:e.target.value})),children:[(0,Kn.jsx)("option",{value:"requester",children:"Usuario"}),(0,Kn.jsx)("option",{value:"lawyer",children:"Abogado"}),(0,Kn.jsx)("option",{value:"admin",children:"Administrador"}),(0,Kn.jsx)("option",{value:"super_admin",children:"Super Admin"}),(0,Kn.jsx)("option",{value:"talento_humano",children:"Talento Humano"}),(0,Kn.jsx)("option",{value:"colaboradores",children:"Colaboradores"})]})]})]}),(0,Kn.jsxs)("div",{className:"modal-actions",children:[(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>E(!1),children:"Cancelar"}),(0,Kn.jsx)("button",{className:"btn-primary",onClick:async()=>{try{await Qn.put("/multi-companies/edit-user/".concat(A.id),{name:A.name,email:A.email,role:A.role}),await $(),E(!1),alert("Usuario actualizado exitosamente")}catch(a){var e,t;alert((null===(e=a.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.error)||"Error al editar usuario")}},children:"Guardar Cambios"})]})]})})]})},xr=()=>{const[e,t]=(0,r.useState)([]),[a,n]=(0,r.useState)([]),[l,s]=(0,r.useState)([]),[i,o]=(0,r.useState)(!0),[c,d]=(0,r.useState)(!1),[p,m]=(0,r.useState)(!1),[h,f]=(0,r.useState)(null),[g,v]=(0,r.useState)({companyId:"",userId:"",role:"requester",permissions:{canView:!0,canEdit:!1,canDelete:!1,canManageUsers:!1,canManageContracts:!1,canManageTemplates:!1}});(0,r.useEffect)(()=>{x()},[]);const x=async()=>{try{const[e,a,r]=await Promise.all([Qn.get("/company-users/companies"),Qn.get("/company-users/users"),Qn.get("/company-users/relations")]);t(e.data),n(a.data),s(r.data)}catch(e){console.error("Error fetching data:",e)}finally{o(!1)}};return i?(0,Kn.jsx)("div",{className:"loading",children:"Cargando relaciones empresa-usuario..."}):(0,Kn.jsxs)("div",{className:"company-user-management",children:[(0,Kn.jsxs)("div",{className:"page-header",children:[(0,Kn.jsx)("h1",{children:"Gesti\xf3n de Relaciones Empresa-Usuario"}),(0,Kn.jsx)("button",{className:"btn-primary",onClick:()=>d(!0),children:"Asignar Usuario a Empresa"})]}),(0,Kn.jsx)("div",{className:"relations-list",children:0===l.length?(0,Kn.jsxs)("div",{className:"empty-state",children:[(0,Kn.jsx)("h3",{children:"No hay relaciones"}),(0,Kn.jsx)("p",{children:"Asigna usuarios a empresas para comenzar"})]}):l.map(e=>(0,Kn.jsxs)("div",{className:"relation-card",children:[(0,Kn.jsxs)("div",{className:"relation-info",children:[(0,Kn.jsx)("h3",{children:e.user.name}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Email:"})," ",e.user.email]}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Empresa:"})," ",e.company.name]}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Rol:"})," ",(0,Kn.jsx)("span",{className:"role-badge role-".concat(e.role),children:e.role})]}),(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Asignado:"})," ",new Date(e.assignedAt).toLocaleDateString()]})]}),(0,Kn.jsxs)("div",{className:"permissions-info",children:[(0,Kn.jsx)("h4",{children:"Permisos:"}),(0,Kn.jsx)("div",{className:"permissions-grid",children:Object.entries(e.permissions).map(e=>{let[t,a]=e;return(0,Kn.jsx)("span",{className:"permission ".concat(a?"granted":"denied"),children:t.replace("can","").replace(/([A-Z])/g," $1").trim()},t)})})]}),(0,Kn.jsxs)("div",{className:"relation-actions",children:[(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>(e=>{f(e),m(!0)})(e),children:"Editar"}),(0,Kn.jsx)("button",{className:"btn-danger",onClick:()=>(async e=>{if(window.confirm("\xbfEst\xe1s seguro de que quieres remover esta relaci\xf3n?"))try{await Qn.delete("/company-users/remove/".concat(e)),await x()}catch(t){console.error("Error removing relation:",t)}})(e._id),children:"Remover"})]})]},e._id))}),c&&(0,Kn.jsx)("div",{className:"modal-overlay",children:(0,Kn.jsxs)("div",{className:"modal",children:[(0,Kn.jsx)("h3",{children:"Asignar Usuario a Empresa"}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Empresa:"}),(0,Kn.jsxs)("select",{value:g.companyId,onChange:e=>v(u(u({},g),{},{companyId:e.target.value})),required:!0,children:[(0,Kn.jsx)("option",{value:"",children:"Seleccionar empresa"}),e.map(e=>(0,Kn.jsxs)("option",{value:e._id,children:[e.name," - ",e.tax_id]},e._id))]})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Usuario:"}),(0,Kn.jsxs)("select",{value:g.userId,onChange:e=>v(u(u({},g),{},{userId:e.target.value})),required:!0,children:[(0,Kn.jsx)("option",{value:"",children:"Seleccionar usuario"}),a.map(e=>(0,Kn.jsxs)("option",{value:e._id,children:[e.name," - ",e.email]},e._id))]})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Rol:"}),(0,Kn.jsxs)("select",{value:g.role,onChange:e=>v(u(u({},g),{},{role:e.target.value})),required:!0,children:[(0,Kn.jsx)("option",{value:"requester",children:"Solicitante"}),(0,Kn.jsx)("option",{value:"lawyer",children:"Abogado"}),(0,Kn.jsx)("option",{value:"admin",children:"Administrador"}),(0,Kn.jsx)("option",{value:"super_admin",children:"Super Admin"}),(0,Kn.jsx)("option",{value:"talento_humano",children:"Talento Humano"}),(0,Kn.jsx)("option",{value:"colaboradores",children:"Colaboradores"})]})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Permisos:"}),(0,Kn.jsx)("div",{className:"permissions-grid",children:Object.entries(g.permissions).map(e=>{let[t,a]=e;return(0,Kn.jsxs)("label",{className:"permission-checkbox",children:[(0,Kn.jsx)("input",{type:"checkbox",checked:a,onChange:e=>v(u(u({},g),{},{permissions:u(u({},g.permissions),{},{[t]:e.target.checked})}))}),t.replace("can","").replace(/([A-Z])/g," $1").trim()]},t)})})]}),(0,Kn.jsxs)("div",{className:"modal-actions",children:[(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>d(!1),children:"Cancelar"}),(0,Kn.jsx)("button",{className:"btn-primary",onClick:async()=>{try{await Qn.post("/company-users/assign",g),await x(),d(!1),v({companyId:"",userId:"",role:"requester",permissions:{canView:!0,canEdit:!1,canDelete:!1,canManageUsers:!1,canManageContracts:!1,canManageTemplates:!1}})}catch(e){console.error("Error assigning user:",e)}},disabled:!g.companyId||!g.userId,children:"Asignar"})]})]})}),p&&h&&(0,Kn.jsx)("div",{className:"modal-overlay",children:(0,Kn.jsxs)("div",{className:"modal",children:[(0,Kn.jsx)("h3",{children:"Editar Relaci\xf3n"}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Usuario:"}),(0,Kn.jsxs)("p",{children:[h.user.name," - ",h.user.email]})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Empresa:"}),(0,Kn.jsx)("p",{children:h.company.name})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Rol:"}),(0,Kn.jsxs)("select",{value:h.role,onChange:e=>f(u(u({},h),{},{role:e.target.value})),required:!0,children:[(0,Kn.jsx)("option",{value:"requester",children:"Solicitante"}),(0,Kn.jsx)("option",{value:"lawyer",children:"Abogado"}),(0,Kn.jsx)("option",{value:"admin",children:"Administrador"}),(0,Kn.jsx)("option",{value:"super_admin",children:"Super Admin"}),(0,Kn.jsx)("option",{value:"talento_humano",children:"Talento Humano"}),(0,Kn.jsx)("option",{value:"colaboradores",children:"Colaboradores"})]})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Permisos:"}),(0,Kn.jsx)("div",{className:"permissions-grid",children:Object.entries(h.permissions).map(e=>{let[t,a]=e;return(0,Kn.jsxs)("label",{className:"permission-checkbox",children:[(0,Kn.jsx)("input",{type:"checkbox",checked:a,onChange:e=>((e,t)=>{h&&f(u(u({},h),{},{permissions:u(u({},h.permissions),{},{[e]:t})}))})(t,e.target.checked)}),t.replace("can","").replace(/([A-Z])/g," $1").trim()]},t)})})]}),(0,Kn.jsxs)("div",{className:"modal-actions",children:[(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>m(!1),children:"Cancelar"}),(0,Kn.jsx)("button",{className:"btn-primary",onClick:async()=>{if(h)try{await Qn.put("/company-users/update-permissions/".concat(h._id),{role:h.role,permissions:h.permissions}),await x(),m(!1),f(null)}catch(e){console.error("Error updating relation:",e)}},children:"Actualizar"})]})]})})]})},yr=[{value:"text",label:"Texto"},{value:"number",label:"N\xfamero"},{value:"date",label:"Fecha"},{value:"email",label:"Email"},{value:"textarea",label:"Texto largo"},{value:"select",label:"Selecci\xf3n"}],br=e=>{let{supplierId:t,onFieldsAdded:a,userRole:n}=e;const[l,s]=(0,r.useState)(null),[i,o]=(0,r.useState)(!0),[c,d]=(0,r.useState)(null),[p,m]=(0,r.useState)(!1),[h,f]=(0,r.useState)({}),[g,v]=(0,r.useState)(!1),[x,y]=(0,r.useState)(null),[b,j]=(0,r.useState)(!1),[N,_]=(0,r.useState)(!1),[w,C]=(0,r.useState)(null),[S,k]=(0,r.useState)(-1),[E,T]=(0,r.useState)("text"),[P,R]=(0,r.useState)(""),[L,A]=(0,r.useState)(!1),[z,O]=(0,r.useState)(!1),[D,I]=(0,r.useState)(""),F=()=>{const e=(()=>{if(n)return n;try{return JSON.parse(localStorage.getItem("user")||"{}").role||""}catch(e){return""}})();return"super_admin"===e||"admin"===e};(0,r.useEffect)(()=>{t&&q()},[t]);const q=async()=>{try{o(!0),d(null),console.log("\ud83d\udd0d Fetching analysis for supplier:",t);const e=await Qn.get("/field-management/supplier/".concat(t,"/analysis"));console.log("\u2705 Analysis response:",e.data),s(e.data.analysis)}catch(r){var e,a,n;const t=(null===(e=r.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.error)||r.message||"Error al obtener an\xe1lisis de campos";console.error("\u274c Error fetching analysis:",r),console.error("Error details:",null===(n=r.response)||void 0===n?void 0:n.data),d(t)}finally{o(!1)}},M=e=>e>=80?"success":e>=50?"warning":"error",U=e=>{const t=e.toLowerCase();return t.includes("fecha")||t.includes("date")||t.includes("nacimiento")||t.includes("inicio")||t.includes("fin")||t.includes("vencimiento")||t.includes("expedicion")||t.includes("ingreso")?"date":t.includes("email")||t.includes("correo")||t.includes("mail")?"email":t.includes("telefono")||t.includes("celular")||t.includes("phone")||t.includes("salario")||t.includes("monto")||t.includes("valor")?"number":t.includes("descripcion")||t.includes("observacion")||t.includes("direccion")?"textarea":"text"};return i?(0,Kn.jsx)("div",{className:"field-suggestions-panel",children:(0,Kn.jsxs)("div",{className:"loading-container",children:[(0,Kn.jsx)("div",{className:"spinner"}),(0,Kn.jsx)("p",{children:"Cargando an\xe1lisis de campos..."})]})}):c?(0,Kn.jsx)("div",{className:"field-suggestions-panel",children:(0,Kn.jsxs)("div",{className:"alert alert-error",children:[(0,Kn.jsx)("strong",{children:"Error:"})," ",c,(0,Kn.jsx)("button",{className:"btn-link",onClick:q,children:"Reintentar"})]})}):l&&l.hasType?(0,Kn.jsxs)("div",{className:"field-suggestions-panel",children:[(0,Kn.jsxs)("div",{className:"completion-card",children:[(0,Kn.jsxs)("div",{className:"completion-header",children:[(0,Kn.jsx)("h5",{children:"Completitud de Datos"}),(0,Kn.jsx)("button",{className:"btn-refresh",onClick:q,title:"Recargar an\xe1lisis",children:"\u21bb"})]}),(0,Kn.jsxs)("div",{className:"completion-percentage",children:[(0,Kn.jsxs)("div",{className:"percentage-value percentage-".concat(M(l.completionPercentage)),children:[l.completionPercentage,"%"]}),(0,Kn.jsxs)("div",{className:"completion-badge badge-".concat(M(l.completionPercentage)),children:[(B=l.completionPercentage,B>=80?"Buen estado":B>=50?"Completar campos faltantes":"Requiere atenci\xf3n"),l.totalMissing>0&&" (".concat(l.totalMissing," faltantes)")]})]}),(0,Kn.jsx)("div",{className:"progress-bar",children:(0,Kn.jsx)("div",{className:"progress-fill progress-".concat(M(l.completionPercentage)),style:{width:"".concat(l.completionPercentage,"%")}})}),(0,Kn.jsxs)("div",{className:"stats-grid",children:[(0,Kn.jsxs)("div",{className:"stat-item",children:[(0,Kn.jsx)("div",{className:"stat-value stat-primary",children:l.totalRequired}),(0,Kn.jsx)("div",{className:"stat-label",children:"Campos requeridos"})]}),(0,Kn.jsxs)("div",{className:"stat-item",children:[(0,Kn.jsx)("div",{className:"stat-value stat-success",children:l.totalMatched}),(0,Kn.jsx)("div",{className:"stat-label",children:"Completos"})]}),(0,Kn.jsxs)("div",{className:"stat-item",children:[(0,Kn.jsx)("div",{className:"stat-value stat-error",children:l.totalMissing}),(0,Kn.jsx)("div",{className:"stat-label",children:"Faltantes"})]})]})]}),l.missingFields&&l.missingFields.length>0&&(0,Kn.jsxs)("div",{className:"missing-fields-card",children:[(0,Kn.jsxs)("h5",{children:["Campos Faltantes (",l.missingFields.length,")"]}),(0,Kn.jsxs)("div",{className:"alert alert-warning",children:[(0,Kn.jsx)("strong",{children:"\u26a0\ufe0f Completa estos campos para generar contratos"}),(0,Kn.jsx)("p",{style:{marginTop:"0.5rem",marginBottom:0},children:"Los campos marcados como requeridos son necesarios para usar las plantillas asociadas."})]}),(0,Kn.jsx)("div",{className:"fields-list",children:l.missingFields.map((e,t)=>{const a=U(e.name),n=e.type!==a&&"text"!==a;return(0,Kn.jsxs)("div",{className:"field-item",children:[(0,Kn.jsxs)("div",{className:"field-info",children:[(0,Kn.jsxs)("div",{className:"field-header",children:[(0,Kn.jsx)("span",{className:"field-icon ".concat(e.required?"required":"optional"),children:e.required?"\u26a0\ufe0f":"\u2139\ufe0f"}),(0,Kn.jsx)("strong",{className:"field-label",children:e.label}),e.required&&(0,Kn.jsx)("span",{className:"badge badge-error",children:"Requerido"})]}),(0,Kn.jsx)("div",{className:"field-details",children:(0,Kn.jsxs)("small",{children:["Campo: ",(0,Kn.jsx)("code",{children:e.name})," | Tipo: ",(0,Kn.jsx)("strong",{children:e.type}),n&&(0,Kn.jsxs)("span",{className:"type-suggestion",title:"Tipo detectado autom\xe1ticamente",children:[" \u2192 ",(0,Kn.jsxs)("em",{style:{color:"#2563eb"},children:["Sugerido: ",a]})]})]})}),(0,Kn.jsxs)("div",{className:"field-templates",children:[(0,Kn.jsxs)("small",{children:["Usado en ",e.usedInTemplates.length," plantilla(s):"]}),(0,Kn.jsxs)("div",{className:"templates-chips",children:[e.usedInTemplates.slice(0,3).map((e,t)=>(0,Kn.jsxs)("span",{className:"template-chip",children:["\ud83d\udcc4 ",e]},t)),e.usedInTemplates.length>3&&(0,Kn.jsxs)("span",{className:"template-chip",children:["+",e.usedInTemplates.length-3," m\xe1s"]})]})]})]}),(0,Kn.jsxs)("div",{className:"field-actions",children:[F()&&(0,Kn.jsx)("button",{className:"btn-edit",onClick:()=>(async e=>{if(!F())return void alert("No tienes permisos para editar campos");const t=e.templateIds[0];if(t)try{const a=(await Qn.get("/field-management/template/".concat(t,"/fields"))).data.fields||[],n=a.findIndex(t=>t.field_name===e.name||t.field_label===e.label);if(-1===n)return void alert("No se encontr\xf3 el campo en la plantilla");const r=a[n];C(e),I(t),k(n),T(r.field_type||"text"),R(r.field_label||e.label),A(r.required||!1),_(!0)}catch(a){console.error("Error al obtener campos de plantilla:",a),alert("Error al obtener informaci\xf3n del campo")}else alert("No se encontr\xf3 plantilla asociada a este campo")})(e),title:"Editar propiedades del campo",children:"\u270f\ufe0f Editar"}),(0,Kn.jsx)("button",{className:"btn-add",onClick:()=>(e=>{y(e),f(u(u({},h),{},{[e.name]:""})),v(!0)})(e),children:"+ Agregar"})]})]},e.name)})})]}),l.currentFieldsDetail&&l.currentFieldsDetail.length>0&&(0,Kn.jsxs)("div",{className:"current-fields-card",children:[(0,Kn.jsxs)("div",{className:"collapsible-header",onClick:()=>j(!b),children:[(0,Kn.jsxs)("h5",{children:["Campos Actuales (",l.currentFieldsDetail.length,")"]}),(0,Kn.jsx)("span",{className:"collapse-icon",children:b?"\u25bc":"\u25b6"})]}),b&&(0,Kn.jsx)("div",{className:"fields-list",children:l.currentFieldsDetail.map((e,t)=>(0,Kn.jsxs)("div",{className:"field-item current-field",children:[(0,Kn.jsx)("span",{className:"field-icon success",children:"\u2713"}),(0,Kn.jsxs)("div",{className:"field-info",children:[(0,Kn.jsx)("strong",{children:e.name}),(0,Kn.jsxs)("div",{className:"field-details",children:[(0,Kn.jsxs)("small",{children:[(0,Kn.jsx)("strong",{children:"Valor:"})," ",e.value]}),(0,Kn.jsx)("br",{}),(0,Kn.jsxs)("small",{children:["Fuente: ","standard"===e.source?"Campo est\xe1ndar":"Campo personalizado",e.originalField&&" (".concat(e.originalField,")")]})]})]})]},t))})]}),100===l.completionPercentage&&(0,Kn.jsxs)("div",{className:"alert alert-success",children:[(0,Kn.jsx)("strong",{children:"\u2705 Tercero Completo"}),(0,Kn.jsx)("p",{style:{marginTop:"0.5rem",marginBottom:0},children:"Este tercero tiene todos los campos necesarios para generar contratos con las plantillas disponibles."})]}),g&&x&&(0,Kn.jsx)("div",{className:"dialog-overlay",onClick:()=>v(!1),children:(0,Kn.jsxs)("div",{className:"dialog",onClick:e=>e.stopPropagation(),children:[(0,Kn.jsxs)("div",{className:"dialog-header",children:[(0,Kn.jsxs)("h4",{children:["Agregar Campo: ",x.label]}),(0,Kn.jsx)("button",{className:"dialog-close",onClick:()=>v(!1),children:"\xd7"})]}),(0,Kn.jsxs)("div",{className:"dialog-content",children:[(0,Kn.jsxs)("div",{className:"alert alert-info",children:[(0,Kn.jsx)("strong",{children:"Usado en plantillas:"}),(0,Kn.jsx)("ul",{style:{marginTop:"0.5rem",paddingLeft:"1.5rem"},children:x.usedInTemplates.map((e,t)=>(0,Kn.jsx)("li",{children:(0,Kn.jsx)("small",{children:e})},t))})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsxs)("label",{children:[x.label," ",x.required&&(0,Kn.jsx)("span",{className:"required-mark",children:"*"})]}),"date"===x.type?(0,Kn.jsx)("input",{type:"date",value:h[x.name]||"",onChange:e=>f(u(u({},h),{},{[x.name]:e.target.value})),required:x.required,autoFocus:!0}):"textarea"===x.type?(0,Kn.jsx)("textarea",{value:h[x.name]||"",onChange:e=>f(u(u({},h),{},{[x.name]:e.target.value})),required:x.required,placeholder:"Ingrese ".concat(x.label.toLowerCase()),rows:3,autoFocus:!0}):(0,Kn.jsx)("input",{type:"email"===x.type?"email":"number"===x.type?"number":"text",value:h[x.name]||"",onChange:e=>f(u(u({},h),{},{[x.name]:e.target.value})),required:x.required,placeholder:"Ingrese ".concat(x.label.toLowerCase()),autoFocus:!0}),(0,Kn.jsxs)("small",{children:["Campo: ",x.name," | Tipo: ",x.type]})]})]}),(0,Kn.jsxs)("div",{className:"dialog-actions",children:[(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>v(!1),disabled:p,children:"Cancelar"}),(0,Kn.jsx)("button",{className:"btn-primary",onClick:async()=>{if(x&&h[x.name])try{m(!0),console.log("\ud83d\udcbe Saving field:",x.name,"=",h[x.name]);const e=localStorage.getItem("token");if(!e)return console.error("\u274c No hay token en localStorage - Usuario no autenticado"),alert("Sesi\xf3n expirada. Por favor inicia sesi\xf3n nuevamente."),void(window.location.href="/login");console.log("\u2705 Token encontrado:",e.substring(0,20)+"..."),await Qn.post("/field-management/supplier/".concat(t,"/fields"),{fields:[{name:x.name,value:h[x.name],label:x.label}]}),console.log("\u2705 Field saved successfully");const n=u({},h);delete n[x.name],f(n),v(!1),y(null),await q(),a&&a(),alert("Campo agregado exitosamente")}catch(_){var e,n,r,l,s,i,o,c,d,p,g,b,j,N;const a=(null===(e=_.response)||void 0===e||null===(n=e.data)||void 0===n?void 0:n.error)||_.message||"Error al agregar campo";console.group("\u274c ERROR AL GUARDAR CAMPO - DEBUG COMPLETO"),console.error("\ud83d\udccb Datos del Campo:"),console.error("  Nombre:",x.name),console.error("  Valor:",h[x.name]),console.error("  Label:",x.label),console.error("  Supplier ID:",t),console.error("\n\ud83d\udce1 Respuesta del Servidor:"),console.error("  Status:",null===(r=_.response)||void 0===r?void 0:r.status),console.error("  Status Text:",null===(l=_.response)||void 0===l?void 0:l.statusText),console.error("  Error Message:",a),null!==(s=_.response)&&void 0!==s&&s.data&&(console.error("\n\ud83d\udce6 Data Completa del Error:"),console.error("  Error Type:",_.response.data.errorType),console.error("  Error:",_.response.data.error),console.error("  Validation Errors:",_.response.data.validationErrors),_.response.data.details&&(console.error("\n\ud83d\udd0d Stack Trace del Servidor:"),console.error(_.response.data.details)),console.error("\n\ud83d\udcc4 JSON Completo:"),console.error(JSON.stringify(_.response.data,null,2))),console.error("\n\ud83c\udf10 Detalles de la Request:"),console.error("  URL:",null===(i=_.config)||void 0===i?void 0:i.url),console.error("  Method:",null===(o=_.config)||void 0===o?void 0:o.method),console.error("  Headers:",null===(c=_.config)||void 0===c?void 0:c.headers),console.error("  Data enviada:",null===(d=_.config)||void 0===d?void 0:d.data),console.error("\n\ud83d\udcac Error del Cliente:"),console.error("  Message:",_.message),console.error("  Name:",_.name),console.error("  Code:",_.code),_.stack&&(console.error("\n\ud83d\udcda Stack Trace del Cliente:"),console.error(_.stack)),console.error("\n\ud83d\udd27 Error Object Completo:"),console.error(_),console.groupEnd();let u='\u274c Error al guardar campo "'.concat(x.label,'"\n\n');u+="Mensaje: ".concat(a,"\n"),null!==(p=_.response)&&void 0!==p&&p.status&&(u+="HTTP Status: ".concat(_.response.status,"\n")),null!==(g=_.response)&&void 0!==g&&null!==(b=g.data)&&void 0!==b&&b.errorType&&(u+="Tipo: ".concat(_.response.data.errorType,"\n")),null!==(j=_.response)&&void 0!==j&&null!==(N=j.data)&&void 0!==N&&N.validationErrors&&(u+="\nErrores de validaci\xf3n:\n",_.response.data.validationErrors.forEach(e=>{u+="  - ".concat(e,"\n")})),u+="\n\ud83d\udca1 Revisa la consola del navegador (F12) para m\xe1s detalles t\xe9cnicos.",alert(u)}finally{m(!1)}else alert("Por favor ingresa un valor para el campo")},disabled:p||!h[x.name],children:p?"Guardando...":"Guardar"})]})]})}),N&&w&&(0,Kn.jsx)("div",{className:"dialog-overlay",onClick:()=>_(!1),children:(0,Kn.jsxs)("div",{className:"dialog dialog-edit",onClick:e=>e.stopPropagation(),children:[(0,Kn.jsxs)("div",{className:"dialog-header",children:[(0,Kn.jsxs)("h4",{children:["Editar Campo: ",w.label]}),(0,Kn.jsx)("button",{className:"dialog-close",onClick:()=>_(!1),children:"\xd7"})]}),(0,Kn.jsxs)("div",{className:"dialog-content",children:[(0,Kn.jsxs)("div",{className:"alert alert-info",style:{marginBottom:"1rem"},children:[(0,Kn.jsx)("strong",{children:"\u2699\ufe0f Modificar propiedades del campo"}),(0,Kn.jsx)("p",{style:{margin:"0.5rem 0 0 0",fontSize:"0.85rem"},children:"Los cambios afectar\xe1n c\xf3mo se muestra e ingresa este campo en los contratos."})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Nombre del campo (solo lectura)"}),(0,Kn.jsx)("input",{type:"text",value:w.name,disabled:!0,style:{backgroundColor:"#f3f4f6"}})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Etiqueta (Label)"}),(0,Kn.jsx)("input",{type:"text",value:P,onChange:e=>R(e.target.value),placeholder:"Etiqueta visible para el usuario"})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Tipo de Campo"}),(0,Kn.jsxs)("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[(0,Kn.jsx)("select",{value:E,onChange:e=>T(e.target.value),style:{flex:1},children:yr.map(e=>(0,Kn.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,Kn.jsx)("button",{type:"button",className:"btn-detect",onClick:()=>{if(w){const e=U(w.name);T(e)}},title:"Detectar tipo autom\xe1ticamente basado en el nombre",children:"\ud83d\udd0d Auto"})]}),"text"!==U(w.name)&&(0,Kn.jsxs)("small",{style:{color:"#2563eb",marginTop:"0.25rem",display:"block"},children:["\ud83d\udca1 Tipo sugerido: ",(0,Kn.jsx)("strong",{children:U(w.name)})," ",'(basado en el nombre "',w.name,'")']})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[(0,Kn.jsx)("input",{type:"checkbox",checked:L,onChange:e=>A(e.target.checked)}),(0,Kn.jsx)("span",{children:"Campo requerido"})]}),(0,Kn.jsx)("small",{children:"Si est\xe1 marcado, el campo ser\xe1 obligatorio al generar contratos"})]}),(0,Kn.jsxs)("div",{className:"alert",style:{backgroundColor:"#fef3c7",border:"1px solid #f59e0b",color:"#92400e"},children:[(0,Kn.jsx)("strong",{children:"\ud83d\udccb Plantillas afectadas:"}),(0,Kn.jsx)("ul",{style:{marginTop:"0.5rem",paddingLeft:"1.5rem",marginBottom:0},children:w.usedInTemplates.map((e,t)=>(0,Kn.jsx)("li",{children:(0,Kn.jsx)("small",{children:e})},t))})]})]}),(0,Kn.jsxs)("div",{className:"dialog-actions",children:[(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>_(!1),disabled:z,children:"Cancelar"}),(0,Kn.jsx)("button",{className:"btn-primary",onClick:async()=>{if(w&&D&&!(S<0))try{O(!0),await Qn.put("/field-management/template/".concat(D,"/field/").concat(S),{field_type:E,field_label:P,required:L}),_(!1),C(null),await q(),alert("Campo actualizado exitosamente")}catch(a){var e,t;console.error("Error al actualizar campo:",a),alert((null===(e=a.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.error)||"Error al actualizar campo")}finally{O(!1)}},disabled:z||!P.trim(),children:z?"Guardando...":"\ud83d\udcbe Guardar Cambios"})]})]})})]}):(0,Kn.jsx)("div",{className:"field-suggestions-panel",children:(0,Kn.jsxs)("div",{className:"alert alert-info",children:[(0,Kn.jsx)("strong",{children:"Sin tipo de tercero:"})," Asigna un tipo a este tercero para ver sugerencias de campos."]})});var B},jr=e=>{let{supplierId:t,customFields:a,thirdPartyTypeId:n,onMergeComplete:l}=e;const[s,i]=(0,r.useState)([]),[o,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)(!1),[p,m]=(0,r.useState)(!1),[h,f]=(0,r.useState)(!1);(0,r.useEffect)(()=>{g()},[a]);const g=()=>{if(!a||0===Object.keys(a).length)return void i([]);const e={};Object.entries(a).forEach(t=>{let[a,n]=t;const r=v(a);e[r]||(e[r]=[]),e[r].push({name:a,value:n,normalizedName:r,suggestion:x(r)})});const t=Object.entries(e).filter(e=>{let[t,a]=e;return a.length>1}).map(e=>{let[t,a]=e;const n=a.find(e=>e.value&&""!==e.value)||a[0];return{normalizedName:t,suggestedName:a[0].suggestion||t,fields:a,selectedValue:n.value,selectedField:n.name}});i(t)},v=e=>e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,""),x=e=>({cedula_rep_legal:"cedula_representante_legal",cedula_representante:"cedula_representante_legal",tel:"telefono",phone:"telefono",mail:"email",correo:"email",dir:"direccion",address:"direccion",razon_social:"legal_name",nombre_empresa:"legal_name"}[e]||e),y=(e,t,a)=>{const n=[...s];n[e].selectedField=t,n[e].selectedValue=a,i(n)};return 0===s.length?null:(0,Kn.jsxs)(Kn.Fragment,{children:[(0,Kn.jsx)("div",{className:"field-merger-summary",children:(0,Kn.jsxs)("div",{className:"merger-header",children:[(0,Kn.jsxs)("div",{className:"merger-info",children:[(0,Kn.jsx)("span",{className:"merger-icon",children:"\ud83d\udd04"}),(0,Kn.jsxs)("span",{className:"merger-text",children:[s.length," grupo(s) de campos duplicados detectados"]})]}),(0,Kn.jsx)("button",{className:"btn-show-merger",onClick:()=>f(!0),children:"Ver y Fusionar"})]})}),h&&(0,Kn.jsx)("div",{className:"merger-dialog-overlay",onClick:()=>f(!1),children:(0,Kn.jsxs)("div",{className:"merger-dialog",onClick:e=>e.stopPropagation(),children:[(0,Kn.jsxs)("div",{className:"merger-dialog-header",children:[(0,Kn.jsx)("h3",{children:"Fusionar Campos Duplicados"}),(0,Kn.jsx)("button",{className:"merger-dialog-close",onClick:()=>f(!1),children:"\xd7"})]}),(0,Kn.jsxs)("div",{className:"merger-dialog-content",children:[(0,Kn.jsxs)("div",{className:"merger-alert",children:[(0,Kn.jsx)("strong",{children:"\u26a0\ufe0f Campos duplicados detectados"}),(0,Kn.jsx)("p",{children:"Se encontraron campos con nombres similares o duplicados. Puedes fusionarlos para mantener tu informaci\xf3n organizada."})]}),s.map((e,a)=>(0,Kn.jsxs)("div",{className:"merge-group-card",children:[(0,Kn.jsxs)("div",{className:"merge-group-header",children:[(0,Kn.jsxs)("h4",{children:["Grupo: ",e.normalizedName]}),(0,Kn.jsxs)("span",{className:"merge-group-count",children:[e.fields.length," campos"]})]}),(0,Kn.jsxs)("div",{className:"merge-suggestion",children:[(0,Kn.jsx)("strong",{children:"Nombre sugerido:"})," ",(0,Kn.jsx)("code",{children:e.suggestedName})]}),(0,Kn.jsx)("div",{className:"merge-fields-list",children:e.fields.map((t,n)=>(0,Kn.jsxs)("div",{className:"merge-field-item ".concat(e.selectedField===t.name?"selected":""),onClick:()=>y(a,t.name,t.value),children:[(0,Kn.jsx)("div",{className:"merge-field-radio",children:(0,Kn.jsx)("input",{type:"radio",name:"group-".concat(a),checked:e.selectedField===t.name,onChange:()=>y(a,t.name,t.value)})}),(0,Kn.jsxs)("div",{className:"merge-field-info",children:[(0,Kn.jsxs)("div",{className:"merge-field-name",children:[(0,Kn.jsx)("code",{children:t.name}),t.value&&""!==t.value?null:(0,Kn.jsx)("span",{className:"merge-field-badge empty",children:"Vac\xedo"})]}),(0,Kn.jsxs)("div",{className:"merge-field-value",children:[(0,Kn.jsx)("strong",{children:"Valor:"})," ",t.value||(0,Kn.jsx)("em",{className:"empty-value",children:"(vac\xedo)"})]})]})]},n))}),(0,Kn.jsxs)("div",{className:"merge-group-actions",children:[(0,Kn.jsx)("button",{className:"btn-merge",onClick:()=>(async e=>{const a=s[e];try{u(!0),console.log("\ud83d\udd04 Merging fields:",{group:a.normalizedName,fields:a.fields.map(e=>e.name),selectedField:a.selectedField,selectedValue:a.selectedValue,suggestedName:a.suggestedName}),await Qn.post("/field-management/supplier/".concat(t,"/merge-fields"),{fieldsToMerge:a.fields.map(e=>e.name),targetFieldName:a.suggestedName,targetValue:a.selectedValue,removeOriginals:!0}),console.log("\u2705 Fields merged successfully");const n=s.filter((t,a)=>a!==e);i(n),l&&l(),alert("Campos fusionados exitosamente en: ".concat(a.suggestedName))}catch(o){var n,r;const e=(null===(n=o.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.error)||o.message||"Error al fusionar campos";console.error("\u274c Error merging fields:",o),alert("Error: ".concat(e))}finally{u(!1)}})(a),disabled:d||p,children:d?"Fusionando...":"Fusionar Este Tercero"}),n&&(0,Kn.jsx)("button",{className:"btn-merge-bulk",onClick:()=>(async e=>{const t=s[e];if(!n)return void alert("No se puede determinar el tipo de tercero para la fusi\xf3n masiva");const a="\xbfAplicar esta fusi\xf3n a TODOS los terceros del mismo tipo?\n\nCampos: ".concat(t.fields.map(e=>e.name).join(", "),"\nFusionar en: ").concat(t.suggestedName,"\n\nEsto afectar\xe1 a todos los terceros de este tipo en la empresa.");if(window.confirm(a))try{m(!0),console.log("\ud83d\ude80 Iniciando fusi\xf3n masiva:",{thirdPartyTypeId:n,fieldsToMerge:t.fields.map(e=>e.name),targetFieldName:t.suggestedName});const a=await Qn.post("/field-management/merge-fields-bulk",{thirdPartyTypeId:n,fieldsToMerge:t.fields.map(e=>e.name),targetFieldName:t.suggestedName});console.log("\u2705 Fusi\xf3n masiva completada:",a.data);const r=a.data.results,o="\u2705 Fusi\xf3n masiva completada exitosamente\n\n\ud83d\udcca Resultados:\n"+"\u2022 Total de terceros: ".concat(r.total,"\n")+"\u2022 Terceros actualizados: ".concat(r.merged,"\n")+"\u2022 Terceros sin cambios: ".concat(r.skipped,"\n\n")+"Los campos duplicados han sido fusionados en: ".concat(t.suggestedName);alert(o);const c=s.filter((t,a)=>a!==e);i(c),l&&l()}catch(c){var r,o;console.error("\u274c Error en fusi\xf3n masiva:",c);const e=(null===(r=c.response)||void 0===r||null===(o=r.data)||void 0===o?void 0:o.error)||c.message||"Error al realizar fusi\xf3n masiva";alert("Error: ".concat(e))}finally{m(!1)}})(a),disabled:d||p,title:"Aplicar esta fusi\xf3n a todos los terceros del mismo tipo",children:p?"Aplicando a todos...":"\u26a1 Fusionar Todos del Mismo Tipo"})]})]},a)),s.length>1&&(0,Kn.jsx)("div",{className:"merger-bulk-actions",children:(0,Kn.jsx)("button",{className:"btn-merge-all",onClick:async()=>{if(0!==s.length&&window.confirm("\xbfFusionar ".concat(s.length," grupo(s) de campos duplicados?")))try{u(!0);for(let e=0;e<s.length;e++){const a=s[e];await Qn.post("/field-management/supplier/".concat(t,"/merge-fields"),{fieldsToMerge:a.fields.map(e=>e.name),targetFieldName:a.suggestedName,targetValue:a.selectedValue,removeOriginals:!0})}i([]),l&&l(),alert("Todos los campos han sido fusionados exitosamente")}catch(n){var e,a;const t=(null===(e=n.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.error)||n.message||"Error al fusionar campos";console.error("\u274c Error merging all fields:",n),alert("Error: ".concat(t))}finally{u(!1)}},disabled:d,children:d?"Fusionando...":"Fusionar Todos (".concat(s.length," grupos)")})})]}),(0,Kn.jsx)("div",{className:"merger-dialog-footer",children:(0,Kn.jsxs)("p",{children:[(0,Kn.jsx)("strong",{children:"Nota:"})," La fusi\xf3n eliminar\xe1 los campos originales y crear\xe1 un nuevo campo con el nombre sugerido y el valor seleccionado."]})})]})})]})},Nr=e=>{let{onSuccess:t,onCancel:a,preSelectedTemplateId:n}=e;const[l,s]=(0,r.useState)("template"),[i,o]=(0,r.useState)([]),[c,d]=(0,r.useState)(null),[p,m]=(0,r.useState)(null),[h,f]=(0,r.useState)(""),[g,v]=(0,r.useState)(null),[x,y]=(0,r.useState)({identification_type:"CC",identification_number:""}),[b,j]=(0,r.useState)(!1),[N,_]=(0,r.useState)(!0),[w,C]=(0,r.useState)(null),[S,k]=(0,r.useState)(null);(0,r.useEffect)(()=>{E()},[]),(0,r.useEffect)(()=>{if(n&&i.length>0){const e=i.find(e=>e._id===n);e&&T(e)}},[n,i]);const E=async()=>{try{_(!0);const e=await Qn.get("/templates");o(e.data.templates||e.data||[])}catch(e){console.error("Error loading templates:",e),C("Error al cargar plantillas")}finally{_(!1)}},T=async e=>{try{j(!0),C(null),d(e);const t=await(async e=>(await $n.get("/third-party-profiles/template-fields/".concat(e))).data)(e._id);m(t);const a=Object.keys(t.roles);1===a.length?(f(a[0]),v(t.roles[a[0]]),s("fields")):a.length>1?s("role"):C("La plantilla no tiene variables de terceros definidas")}catch(t){console.error("Error loading template fields:",t),C("Error al cargar campos de la plantilla")}finally{j(!1)}},P=(e,t)=>{y(a=>u(u({},a),{},{[e]:t}))},R=async e=>{if(e.preventDefault(),C(null),k(null),x.identification_type&&x.identification_number)if(c&&h)try{j(!0);const e=["identification_type","identification_number","legal_name","legal_name_short","full_name","legal_representative_name","legal_representative_id_type","legal_representative_id_number","email","phone","address","city","country"],a={};Object.keys(x).forEach(t=>{!e.includes(t)&&x[t]&&(a[t]=x[t])});const n={template_id:c._id,role_in_template:h,identification_type:x.identification_type,identification_number:x.identification_number,legal_name:x.legal_name||x["".concat(h,"_nombre")]||x["".concat(h,"_razon_social")],legal_name_short:x.legal_name_short||x["".concat(h,"_razon_social_corta")],full_name:x.full_name||x["".concat(h,"_nombre_completo")],legal_representative_name:x.legal_representative_name||x["".concat(h,"_representante")]||x["".concat(h,"_representante_legal")],email:x.email||x["".concat(h,"_email")]||x["".concat(h,"_correo")],phone:x.phone||x["".concat(h,"_telefono")]||x["".concat(h,"_celular")],address:x.address||x["".concat(h,"_direccion")],city:x.city||x["".concat(h,"_ciudad")],country:x.country,template_fields:a},r=await(async e=>(await $n.post("/third-party-profiles/create-with-supplier",e)).data)(n);k(r.message||"Tercero creado exitosamente"),t&&t(r.supplier,r.profile)}catch(r){var a,n;console.error("Error creating supplier:",r),C((null===(a=r.response)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.error)||"Error al crear tercero")}finally{j(!1)}else C("Debe seleccionar una plantilla y un rol");else C("Tipo y n\xfamero de identificaci\xf3n son requeridos")},L=e=>{const t=x[e.field_name]||"";return"select"===e.field_type&&e.options?(0,Kn.jsxs)("select",{className:"form-input",value:t,onChange:t=>P(e.field_name,t.target.value),required:e.required,children:[(0,Kn.jsx)("option",{value:"",children:"Seleccione..."}),e.options.map(e=>(0,Kn.jsx)("option",{value:e,children:e},e))]}):"textarea"===e.field_type?(0,Kn.jsx)("textarea",{className:"form-input",value:t,onChange:t=>P(e.field_name,t.target.value),required:e.required,rows:3}):"date"===e.field_type?(0,Kn.jsx)("input",{type:"date",className:"form-input",value:t,onChange:t=>P(e.field_name,t.target.value),required:e.required}):"number"===e.field_type?(0,Kn.jsx)("input",{type:"number",className:"form-input",value:t,onChange:t=>P(e.field_name,t.target.value),required:e.required}):"email"===e.field_type?(0,Kn.jsx)("input",{type:"email",className:"form-input",value:t,onChange:t=>P(e.field_name,t.target.value),required:e.required}):(0,Kn.jsx)("input",{type:"text",className:"form-input",value:t,onChange:t=>P(e.field_name,t.target.value),required:e.required})};return(0,Kn.jsxs)("div",{className:"template-based-supplier-form",children:[(0,Kn.jsxs)("div",{className:"form-header",children:[(0,Kn.jsx)("h2",{children:"Crear Tercero para Plantilla"}),(0,Kn.jsx)("p",{children:"Complete los datos del tercero seg\xfan los campos requeridos por la plantilla seleccionada"})]}),(0,Kn.jsxs)("div",{className:"steps-progress",children:[(0,Kn.jsxs)("div",{className:"step-indicator ".concat("template"===l?"active":c?"completed":""),children:[(0,Kn.jsx)("span",{className:"step-number",children:"1"}),(0,Kn.jsx)("span",{className:"step-label",children:"Plantilla"})]}),(0,Kn.jsx)("div",{className:"step-connector"}),(0,Kn.jsxs)("div",{className:"step-indicator ".concat("role"===l?"active":h?"completed":""),children:[(0,Kn.jsx)("span",{className:"step-number",children:"2"}),(0,Kn.jsx)("span",{className:"step-label",children:"Rol"})]}),(0,Kn.jsx)("div",{className:"step-connector"}),(0,Kn.jsxs)("div",{className:"step-indicator ".concat("fields"===l?"active":""),children:[(0,Kn.jsx)("span",{className:"step-number",children:"3"}),(0,Kn.jsx)("span",{className:"step-label",children:"Datos"})]})]}),w&&(0,Kn.jsx)("div",{className:"alert alert-error",children:w}),S&&(0,Kn.jsx)("div",{className:"alert alert-success",children:S}),b&&"template"!==l&&(0,Kn.jsxs)("div",{className:"loading-overlay",children:[(0,Kn.jsx)("div",{className:"spinner"}),(0,Kn.jsx)("p",{children:"Procesando..."})]}),"template"===l&&(0,Kn.jsxs)("div",{className:"step-content",children:[(0,Kn.jsxs)("div",{className:"step-header",children:[(0,Kn.jsx)("h3",{children:"Paso 1: Seleccionar Plantilla"}),(0,Kn.jsx)("p",{children:"Seleccione la plantilla para la cual desea crear el tercero"})]}),N?(0,Kn.jsx)("div",{className:"loading",children:"Cargando plantillas..."}):(0,Kn.jsx)("div",{className:"templates-grid",children:i.map(e=>(0,Kn.jsxs)("div",{className:"template-card ".concat((null===c||void 0===c?void 0:c._id)===e._id?"selected":""),onClick:()=>T(e),children:[(0,Kn.jsx)("div",{className:"template-icon",children:"\ud83d\udcc4"}),(0,Kn.jsxs)("div",{className:"template-info",children:[(0,Kn.jsx)("h4",{children:e.name}),(0,Kn.jsx)("span",{className:"template-category",children:e.category})]})]},e._id))}),0===i.length&&!N&&(0,Kn.jsx)("div",{className:"empty-state",children:(0,Kn.jsx)("p",{children:"No hay plantillas disponibles. Primero debe crear una plantilla."})})]}),"role"===l&&(0,Kn.jsxs)("div",{className:"step-content",children:[(0,Kn.jsxs)("div",{className:"step-header",children:[(0,Kn.jsx)("h3",{children:"Paso 2: Seleccionar Rol"}),(0,Kn.jsxs)("p",{children:['La plantilla "',null===c||void 0===c?void 0:c.name,'" tiene varios roles. Seleccione el rol del tercero:']})]}),(0,Kn.jsx)("div",{className:"roles-grid",children:p&&Object.entries(p.roles).map(e=>{let[t,a]=e;return(0,Kn.jsxs)("div",{className:"role-card ".concat(h===t?"selected":""),onClick:()=>(e=>{p&&(f(e),v(p.roles[e]),s("fields"))})(t),children:[(0,Kn.jsx)("div",{className:"role-icon",children:"\ud83d\udc64"}),(0,Kn.jsxs)("div",{className:"role-info",children:[(0,Kn.jsx)("h4",{children:a.role_label}),(0,Kn.jsxs)("span",{className:"role-fields",children:[a.total_fields," campos"]})]})]},t)})}),(0,Kn.jsx)("div",{className:"step-actions",children:(0,Kn.jsx)("button",{type:"button",className:"btn-secondary",onClick:()=>s("template"),children:"Volver"})})]}),"fields"===l&&(()=>{if(!g||!p)return null;const e=[...p.base_fields,...g.fields].filter(e=>"identification"===e.category),t=g.fields.filter(e=>e.supplier_field),a=g.fields.filter(e=>e.is_custom_field);return(0,Kn.jsxs)("div",{className:"step-content",children:[(0,Kn.jsxs)("div",{className:"step-header",children:[(0,Kn.jsx)("h3",{children:"Paso 3: Completar Datos"}),(0,Kn.jsxs)("p",{children:["Plantilla: ",(0,Kn.jsx)("strong",{children:null===c||void 0===c?void 0:c.name})," | Rol: ",(0,Kn.jsx)("strong",{children:g.role_label})]})]}),(0,Kn.jsxs)("form",{onSubmit:R,className:"fields-form",children:[(0,Kn.jsxs)("div",{className:"field-section",children:[(0,Kn.jsx)("h4",{children:"Identificaci\xf3n"}),(0,Kn.jsx)("div",{className:"fields-grid",children:e.map(e=>(0,Kn.jsxs)("div",{className:"field-group",children:[(0,Kn.jsxs)("label",{className:"field-label",children:[e.field_label,e.required&&(0,Kn.jsx)("span",{className:"required",children:"*"})]}),L(e)]},e.field_name))})]}),t.length>0&&(0,Kn.jsxs)("div",{className:"field-section",children:[(0,Kn.jsx)("h4",{children:"Datos del Tercero"}),(0,Kn.jsx)("div",{className:"fields-grid",children:t.map(e=>(0,Kn.jsxs)("div",{className:"field-group",children:[(0,Kn.jsxs)("label",{className:"field-label",children:[e.field_label,e.required&&(0,Kn.jsx)("span",{className:"required",children:"*"})]}),e.description&&(0,Kn.jsx)("small",{className:"field-description",children:e.description}),L(e)]},e.field_name))})]}),a.length>0&&(0,Kn.jsxs)("div",{className:"field-section",children:[(0,Kn.jsx)("h4",{children:"Campos Espec\xedficos de la Plantilla"}),(0,Kn.jsx)("div",{className:"fields-grid",children:a.map(e=>(0,Kn.jsxs)("div",{className:"field-group",children:[(0,Kn.jsxs)("label",{className:"field-label",children:[e.field_label,e.required&&(0,Kn.jsx)("span",{className:"required",children:"*"})]}),e.description&&(0,Kn.jsx)("small",{className:"field-description",children:e.description}),L(e),(0,Kn.jsx)("small",{className:"field-marker",children:e.original_marker})]},e.field_name))})]}),(0,Kn.jsxs)("div",{className:"form-actions",children:[(0,Kn.jsx)("button",{type:"button",className:"btn-secondary",onClick:()=>Object.keys(p.roles).length>1?s("role"):s("template"),children:"Volver"}),(0,Kn.jsx)("button",{type:"submit",className:"btn-primary",disabled:b,children:b?"Guardando...":"Crear Tercero"})]})]})]})})(),a&&(0,Kn.jsx)("div",{className:"cancel-action",children:(0,Kn.jsx)("button",{type:"button",className:"btn-link",onClick:a,children:"Cancelar"})})]})},_r={Colombia:["Bogot\xe1","Medell\xedn","Cali","Barranquilla","Cartagena","C\xfacuta","Bucaramanga","Pereira","Santa Marta","Ibagu\xe9","Pasto","Manizales","Neiva","Villavicencio","Armenia","Valledupar","Monter\xeda","Popay\xe1n","Sincelejo","Tunja"],"Estados Unidos":["Nueva York","Los \xc1ngeles","Chicago","Houston","Phoenix","Filadelfia","San Antonio","San Diego","Dallas","San Jos\xe9","Austin","Jacksonville","Fort Worth","Columbus","Charlotte"],"M\xe9xico":["Ciudad de M\xe9xico","Guadalajara","Monterrey","Puebla","Tijuana","Le\xf3n","Ju\xe1rez","Zapopan","M\xe9rida","San Luis Potos\xed","Aguascalientes","Hermosillo","Saltillo","Mexicali","Culiac\xe1n"],"Espa\xf1a":["Madrid","Barcelona","Valencia","Sevilla","Zaragoza","M\xe1laga","Murcia","Palma","Las Palmas","Bilbao","Alicante","C\xf3rdoba","Valladolid","Vigo","Gij\xf3n"],Argentina:["Buenos Aires","C\xf3rdoba","Rosario","Mendoza","La Plata","San Miguel de Tucum\xe1n","Mar del Plata","Salta","Santa Fe","San Juan","Resistencia","Santiago del Estero","Corrientes","Posadas","Bah\xeda Blanca"],Chile:["Santiago","Valpara\xedso","Concepci\xf3n","La Serena","Antofagasta","Temuco","Rancagua","Talca","Arica","Chill\xe1n","Iquique","Los \xc1ngeles","Puerto Montt","Coquimbo","Osorno"],"Per\xfa":["Lima","Arequipa","Trujillo","Chiclayo","Piura","Iquitos","Cusco","Huancayo","Chimbote","Tacna","Juliaca","Ica","Sullana","Ayacucho","Cajamarca"],Ecuador:["Quito","Guayaquil","Cuenca","Santo Domingo","Machala","Dur\xe1n","Manta","Portoviejo","Loja","Ambato","Esmeraldas","Quevedo","Riobamba","Milagro","Ibarra"],Brasil:["S\xe3o Paulo","R\xedo de Janeiro","Brasilia","Salvador","Fortaleza","Belo Horizonte","Manaos","Curitiba","Recife","Porto Alegre","Bel\xe9m","Goi\xe2nia","Guarulhos","Campinas","S\xe3o Lu\xeds"],Venezuela:["Caracas","Maracaibo","Valencia","Barquisimeto","Maracay","Ciudad Guayana","Barcelona","Matur\xedn","Puerto La Cruz","Petare","Turmero","Ciudad Bol\xedvar","M\xe9rida","Santa Teresa","Valera"],"Panam\xe1":["Ciudad de Panam\xe1","San Miguelito","Tocumen","David","Arraij\xe1n","Col\xf3n","Las Cumbres","La Chorrera","Pacora","Santiago","Chitr\xe9","Penonom\xe9","Changuinola","Aguadulce","Bocas del Toro"],"Costa Rica":["San Jos\xe9","Lim\xf3n","San Francisco","Alajuela","Heredia","Cartago","Puntarenas","Liberia","Para\xedso","Curridabat","San Vicente","San Isidro","Desamparados","Purral","San Felipe"]},wr=()=>{var e,t,a;const[n,l]=(0,r.useState)([]),[s,i]=(0,r.useState)([]),[o,c]=(0,r.useState)(""),[d,p]=(0,r.useState)("all"),[m,h]=(0,r.useState)(!0),[f,g]=(0,r.useState)(!1),[v,x]=(0,r.useState)(!1),[y,b]=(0,r.useState)(!1),[j,N]=(0,r.useState)(null),[_,w]=(0,r.useState)([]),[C,S]=(0,r.useState)({identification_type:"",identification_number:"",id_issue_city:"",legal_name:"",legal_name_short:"",full_name:"",legal_representative_name:"",legal_representative_id_type:"CC",legal_representative_id_number:"",licensee_name:"",email:"",phone:"",address:"",city:"",country:"Colombia",third_party_type:"",custom_fields:{}});(0,r.useEffect)(()=>{console.log("\ud83d\udd35 Suppliers component loaded - VERSION 2025-11-11-00:25 with supplier extraction fix"),E(),k()},[]),(0,r.useEffect)(()=>{let e=n;if("all"!==d&&(e=e.filter(e=>{var t;return(null===(t=e.third_party_type)||void 0===t?void 0:t.code)===d})),""!==o.trim()){const t=o.toLowerCase();e=e.filter(e=>e.legal_name.toLowerCase().includes(t)||e.identification_number.toLowerCase().includes(t)||e.email&&e.email.toLowerCase().includes(t))}i(e)},[o,d,n]);const k=async()=>{try{const e="?t=".concat(Date.now()),t=(await Qn.get("/suppliers/types".concat(e))).data.types||[];console.log("\ud83d\udd0d [DEBUG] Tipos de terceros recibidos:",t.length),console.log("\ud83d\udccb [DEBUG] C\xf3digos:",t.map(e=>e.code).join(", ")),console.log("\u2705 [DEBUG] Tiene Propiedad Horizontal (ph):",t.some(e=>"ph"===e.code)),console.log("\u2705 [DEBUG] Tiene Contador PH (contador_ph):",t.some(e=>"contador_ph"===e.code)),w(t)}catch(e){console.error("Error fetching third party types:",e)}},E=async()=>{try{const e=(await Qn.get("/suppliers")).data.suppliers||[],t=await Promise.all(e.map(async e=>{try{const t=await Qn.get("/suppliers/".concat(e._id,"/check-references")),{references:a}=t.data;return u(u({},e),{},{canDelete:a.canDelete,hasReferences:a.hasReferences,referenceDetails:a.details})}catch(t){return console.error("Error checking references for supplier ".concat(e._id,":"),t),u(u({},e),{},{canDelete:!1,hasReferences:!1})}}));l(t)}catch(e){console.error("Error fetching suppliers:",e)}finally{h(!1)}},T=async()=>{if(null!==j&&void 0!==j&&j._id)try{var e;console.log("\ud83d\udd04 Recargando supplier actual:",j._id);const t=await Qn.get("/suppliers/".concat(j._id)),a=t.data.supplier||t.data;console.log("\ud83d\udce6 Response completo:",t.data),console.log("\ud83d\udce6 Supplier extra\xeddo:",a),console.log("\ud83d\udce6 Custom fields del backend:",a.custom_fields),console.log("\ud83d\udce6 identification_type:",a.identification_type),console.log("\ud83d\udce6 identification_number:",a.identification_number),console.log("\ud83d\udce6 legal_name:",a.legal_name),console.log("\ud83d\udce6 third_party_type:",a.third_party_type),N(a);const n=a.country||"Colombia",r={identification_type:a.identification_type,identification_number:a.identification_number,id_issue_city:a.id_issue_city||"",legal_name:a.legal_name,legal_name_short:a.legal_name_short,full_name:a.legal_name,legal_representative_name:a.legal_representative_name,legal_representative_id_type:a.legal_representative_id_type,legal_representative_id_number:a.legal_representative_id_number,licensee_name:a.licensee_name||"",email:a.email||"",phone:a.phone||"",address:a.address||"",city:a.city||"",country:n,third_party_type:(null===(e=a.third_party_type)||void 0===e?void 0:e._id)||"",custom_fields:a.custom_fields||{}};console.log("\ud83d\udcdd Nuevo formData completo:",r),console.log("\ud83d\udcdd Nuevo formData.custom_fields:",r.custom_fields),console.log("\ud83d\udcdd Nuevo formData.third_party_type:",r.third_party_type),S(r),console.log("\u2705 Supplier recargado exitosamente - formData actualizado")}catch(t){console.error("\u274c Error recargando supplier:",t)}},P=e=>{const t=_r[e]||[];S(u(u({},C),{},{country:e,city:t.length>0?t[0]:""}))},R=()=>{S({identification_type:"NIT",identification_number:"",id_issue_city:"",legal_name:"",legal_name_short:"",full_name:"",legal_representative_name:"",legal_representative_id_type:"CC",legal_representative_id_number:"",licensee_name:"",email:"",phone:"",address:"",city:"",country:"Colombia",third_party_type:"",custom_fields:{}})},L=()=>{const e="NIT"===C.identification_type;if(console.log("=== VALIDACI\xd3N DE FORMULARIO ==="),console.log("Tipo de tercero:",C.third_party_type),console.log("Tipos disponibles:",_.length),console.log("Tipo de identificaci\xf3n:",C.identification_type),console.log("N\xfamero de identificaci\xf3n:",C.identification_number),console.log("Es empresa:",e),console.log("Nombre completo:",C.full_name),console.log("Raz\xf3n social:",C.legal_name),_.length>0&&!C.third_party_type)return console.log("\u274c Falta tipo de tercero"),!1;if(!C.identification_type||!C.identification_number)return console.log("\u274c Falta tipo o n\xfamero de identificaci\xf3n"),!1;if(e){const e=!!(C.legal_name&&C.legal_name_short&&C.legal_representative_name&&C.legal_representative_id_type&&C.legal_representative_id_number);return console.log("Validaci\xf3n empresa:",e),e}{const e=!(!C.full_name||!C.full_name.trim());return console.log("Validaci\xf3n persona natural:",e),e}},A=()=>{const e="NIT"===C.identification_type,t=[];return _.length>0&&!C.third_party_type&&t.push("Tipo de Tercero"),C.identification_type||t.push("Tipo de Identificaci\xf3n"),C.identification_number||t.push("N\xfamero de Identificaci\xf3n"),e?(C.legal_name||t.push("Raz\xf3n Social"),C.legal_name_short||t.push("Nombre Corto"),C.legal_representative_name||t.push("Nombre del Representante Legal"),C.legal_representative_id_type||t.push("Tipo de ID del Representante"),C.legal_representative_id_number||t.push("N\xfamero de ID del Representante")):C.full_name&&C.full_name.trim()||t.push("Nombre Completo"),t};return m?(0,Kn.jsx)("div",{className:"loading",children:"Cargando terceros..."}):(0,Kn.jsxs)("div",{className:"suppliers",children:[(0,Kn.jsx)("div",{className:"gradient-header",children:(0,Kn.jsxs)("div",{className:"header-content",children:[(0,Kn.jsxs)("div",{className:"header-text",children:[(0,Kn.jsx)("h1",{children:"Gesti\xf3n de Terceros"}),(0,Kn.jsx)("p",{children:"Administra proveedores, clientes y contactos de tu organizaci\xf3n"})]}),(0,Kn.jsxs)("div",{className:"header-buttons",children:[(0,Kn.jsx)("button",{className:"btn-create-supplier btn-template-based",onClick:()=>b(!0),title:"Crear tercero seleccionando primero la plantilla para conocer los campos requeridos",children:"+ Tercero para Plantilla"}),(0,Kn.jsx)("button",{className:"btn-create-supplier",onClick:()=>g(!0),title:"Crear tercero con campos gen\xe9ricos",children:"+ Tercero Gen\xe9rico"})]})]})}),(0,Kn.jsx)("div",{className:"filters-container",children:(0,Kn.jsxs)("div",{className:"filters-row",children:[(0,Kn.jsxs)("select",{className:"filter-select",value:d,onChange:e=>p(e.target.value),children:[(0,Kn.jsx)("option",{value:"all",children:"Todos los tipos"}),_.map(e=>(0,Kn.jsxs)("option",{value:e.code,children:[e.icon," ",e.label]},e._id))]}),(0,Kn.jsx)("input",{type:"text",className:"search-input",placeholder:"Buscar por raz\xf3n social, n\xfamero ID o email...",value:o,onChange:e=>c(e.target.value)}),(0,Kn.jsxs)("div",{className:"results-badge",children:[s.length," ",1===s.length?"tercero":"terceros"]})]})}),(0,Kn.jsx)("div",{className:"suppliers-list",children:0===s.length?(0,Kn.jsxs)("div",{className:"empty-state",children:[(0,Kn.jsx)("h3",{children:0===n.length?"No hay terceros":"No se encontraron terceros"}),(0,Kn.jsx)("p",{children:0===n.length?"Agrega tu primer tercero para comenzar":"Intenta con otro t\xe9rmino de b\xfasqueda"})]}):(0,Kn.jsx)("div",{className:"table-wrapper",children:(0,Kn.jsxs)("table",{className:"suppliers-table-compact",children:[(0,Kn.jsx)("thead",{children:(0,Kn.jsxs)("tr",{children:[(0,Kn.jsx)("th",{children:"Estado"}),(0,Kn.jsx)("th",{children:"Tipo"}),(0,Kn.jsx)("th",{children:"Informaci\xf3n del Tercero"}),(0,Kn.jsx)("th",{children:"Identificaci\xf3n"}),(0,Kn.jsx)("th",{children:"Contacto"}),(0,Kn.jsx)("th",{children:"Acciones"})]})}),(0,Kn.jsx)("tbody",{children:s.map(e=>{var t,a;return(0,Kn.jsxs)("tr",{className:e.active?"":"inactive-row",children:[(0,Kn.jsx)("td",{children:(0,Kn.jsx)("span",{className:"status-badge ".concat("approved"===e.approval_status?"approved":"pending"===e.approval_status?"pending":"rejected"),children:"approved"===e.approval_status?"\u2713 Aprobado":"pending"===e.approval_status?"\u23f3 Pendiente":"\u2717 Rechazado"})}),(0,Kn.jsx)("td",{className:"type-col",children:e.third_party_type?(0,Kn.jsxs)("span",{className:"type-badge",title:e.third_party_type.description,children:[e.third_party_type.icon," ",e.third_party_type.label]}):(0,Kn.jsx)("span",{className:"no-type",children:"-"})}),(0,Kn.jsxs)("td",{className:"supplier-info-col",children:[(0,Kn.jsxs)("div",{className:"supplier-name",children:[(0,Kn.jsx)("strong",{children:e.legal_name}),e.legal_name_short&&e.legal_name_short!==e.legal_name&&(0,Kn.jsx)("small",{children:e.legal_name_short})]}),e.legal_representative_name&&(0,Kn.jsxs)("div",{className:"representative-compact",children:[(0,Kn.jsx)("span",{className:"rep-label",children:"Rep. Legal:"})," ",e.legal_representative_name]})]}),(0,Kn.jsx)("td",{className:"id-col",children:(0,Kn.jsxs)("div",{className:"id-info",children:[(0,Kn.jsx)("span",{className:"id-type",children:e.identification_type}),(0,Kn.jsx)("span",{className:"id-number",children:e.identification_number})]})}),(0,Kn.jsx)("td",{className:"contact-col",children:(0,Kn.jsxs)("div",{className:"contact-info",children:[e.email&&(0,Kn.jsx)("div",{className:"contact-email",children:e.email}),e.phone&&(0,Kn.jsx)("div",{className:"contact-phone",children:e.phone}),!e.email&&!e.phone&&(0,Kn.jsx)("span",{className:"no-contact",children:"Sin contacto"})]})}),(0,Kn.jsx)("td",{className:"actions-col",children:(0,Kn.jsxs)("div",{className:"supplier-actions",children:[(0,Kn.jsx)("button",{className:"btn-action btn-edit",onClick:()=>(e=>{var t;N(e);const a=e.country||"Colombia";S({identification_type:e.identification_type,identification_number:e.identification_number,id_issue_city:e.id_issue_city||"",legal_name:e.legal_name,legal_name_short:e.legal_name_short,full_name:e.legal_name,legal_representative_name:e.legal_representative_name,legal_representative_id_type:e.legal_representative_id_type,legal_representative_id_number:e.legal_representative_id_number,licensee_name:e.licensee_name||"",email:e.email||"",phone:e.phone||"",address:e.address||"",city:e.city||"",country:a,third_party_type:(null===(t=e.third_party_type)||void 0===t?void 0:t._id)||"",custom_fields:e.custom_fields||{}}),x(!0)})(e),title:"Editar informaci\xf3n de ".concat(e.legal_name),children:(0,Kn.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,Kn.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,Kn.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})}),(0,Kn.jsx)("button",{className:"btn-action ".concat(e.active?"btn-toggle-off":"btn-toggle-on"),onClick:()=>(async e=>{try{await Qn.patch("/suppliers/".concat(e._id,"/toggle-status")),await E()}catch(n){var t,a;console.error("Error toggling supplier status:",n),alert((null===(t=n.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||"Error al cambiar estado del proveedor")}})(e),title:e.hasReferences?"\u26a0\ufe0f Este tercero tiene ".concat((null===(t=e.referenceDetails)||void 0===t?void 0:t.contracts)||0," contrato(s) y ").concat((null===(a=e.referenceDetails)||void 0===a?void 0:a.templates)||0," plantilla(s) asociados. Solo puede ser desactivado, no eliminado."):e.active?"Desactivar a ".concat(e.legal_name," (ya no aparecer\xe1 en listados activos)"):"Activar a ".concat(e.legal_name," (volver\xe1 a aparecer en listados)"),children:e.active?(0,Kn.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,Kn.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,Kn.jsx)("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),(0,Kn.jsx)("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]}):(0,Kn.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,Kn.jsx)("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),(0,Kn.jsx)("polyline",{points:"22 4 12 14.01 9 11.01"})]})}),e.canDelete&&(0,Kn.jsx)("button",{className:"btn-action btn-delete",onClick:()=>(async e=>{try{const t=await Qn.get("/suppliers/".concat(e._id,"/check-references")),{references:a}=t.data;if(!a.canDelete){const e="No se puede eliminar este tercero porque tiene:\n"+"- ".concat(a.details.contracts," contrato(s) asociado(s)\n")+"- ".concat(a.details.templates," plantilla(s) del mismo tipo\n\n")+"Desact\xedvalo en lugar de eliminarlo para mantener la integridad de los datos.";return void alert(e)}if(!window.confirm('\xbfEst\xe1 seguro de eliminar el tercero "'.concat(e.legal_name,'"?\n\nEsta acci\xf3n no se puede deshacer.')))return;await Qn.delete("/suppliers/".concat(e._id)),await E()}catch(l){var t,a,n,r;console.error("Error deleting supplier:",l),null!==(t=l.response)&&void 0!==t&&null!==(a=t.data)&&void 0!==a&&a.suggestion?alert("".concat(l.response.data.error,"\n\n").concat(l.response.data.suggestion)):alert((null===(n=l.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.error)||"Error al eliminar tercero")}})(e),title:"\ud83d\uddd1\ufe0f Eliminar permanentemente a ".concat(e.legal_name,". Esta acci\xf3n no se puede deshacer."),children:(0,Kn.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,Kn.jsx)("polyline",{points:"3 6 5 6 21 6"}),(0,Kn.jsx)("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),(0,Kn.jsx)("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),(0,Kn.jsx)("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]})})]})})]},e._id)})})]})})}),f&&(0,Kn.jsx)("div",{className:"modal-overlay",children:(0,Kn.jsxs)("div",{className:"modal modal-large",children:[(0,Kn.jsx)("h3",{children:"Crear Nuevo Tercero"}),(0,Kn.jsxs)("div",{className:"modal-content",children:[(0,Kn.jsxs)("div",{className:"form-section",children:[(0,Kn.jsx)("h4",{children:"Informaci\xf3n del Tercero"}),_.length>0&&(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Tipo de Tercero:"}),(0,Kn.jsxs)("select",{value:C.third_party_type,onChange:e=>{const t=e.target.value;if(!t)return void S(u(u({},C),{},{third_party_type:""}));const a=_.find(e=>e._id===t),n=null===a||void 0===a?void 0:a.default_identification_types;let r="CC";n&&Array.isArray(n)&&n.length>0&&(r=n[0]);const l="NIT"===r||"NIT"===r;console.log("=== CAMBIO DE TIPO DE TERCERO ==="),console.log("Tipo seleccionado:",null===a||void 0===a?void 0:a.label),console.log("allowedIdTypes:",n),console.log("newIdType asignado:",r),console.log("Es empresa:",l),S(u(u({},C),{},{third_party_type:t,identification_type:r,legal_name:l?C.legal_name:"",legal_name_short:l?C.legal_name_short:"",legal_representative_name:l?C.legal_representative_name:"",legal_representative_id_type:l?C.legal_representative_id_type:"CC",legal_representative_id_number:l?C.legal_representative_id_number:"",licensee_name:l?C.licensee_name:"",full_name:l?"":C.full_name}))},children:[(0,Kn.jsx)("option",{value:"",children:"Seleccione un tipo (opcional)"}),_.map(e=>(0,Kn.jsxs)("option",{value:e._id,children:[e.icon," ",e.label]},e._id))]}),C.third_party_type&&(0,Kn.jsx)("small",{style:{display:"block",marginTop:"0.5rem",color:"#7f8c8d"},children:null===(e=_.find(e=>e._id===C.third_party_type))||void 0===e?void 0:e.description})]}),(0,Kn.jsxs)("div",{className:"form-row",children:[(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Tipo de Identificaci\xf3n: *"}),(0,Kn.jsx)("select",{value:C.identification_type,onChange:e=>S(u(u({},C),{},{identification_type:e.target.value,legal_name:"",legal_name_short:"",full_name:"",legal_representative_name:"",legal_representative_id_type:"CC",legal_representative_id_number:"",licensee_name:""})),required:!0,children:(()=>{const e=_.find(e=>e._id===C.third_party_type),t=null===e||void 0===e?void 0:e.default_identification_types;return t&&t.length>0?t.map(e=>(0,Kn.jsx)("option",{value:e,children:e},e)):(0,Kn.jsxs)(Kn.Fragment,{children:[!C.identification_type&&(0,Kn.jsx)("option",{value:"",children:"Seleccione tipo de identificaci\xf3n"}),(0,Kn.jsx)("option",{value:"NIT",children:"NIT (Empresa)"}),(0,Kn.jsx)("option",{value:"CC",children:"C\xe9dula de Ciudadan\xeda"}),(0,Kn.jsx)("option",{value:"CE",children:"C\xe9dula de Extranjer\xeda"}),(0,Kn.jsx)("option",{value:"Pasaporte",children:"Pasaporte"})]})})()}),C.third_party_type&&(()=>{const e=_.find(e=>e._id===C.third_party_type),t=null===e||void 0===e?void 0:e.default_identification_types;return t&&t.length>0?(0,Kn.jsxs)("small",{style:{display:"block",marginTop:"0.25rem",color:"#2563eb",fontSize:"0.85rem"},children:["Tipos permitidos para este tipo de tercero: ",t.join(", ")]}):null})()]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"N\xfamero de Identificaci\xf3n: *"}),(0,Kn.jsx)("input",{type:"text",value:C.identification_number,onChange:e=>S(u(u({},C),{},{identification_number:e.target.value})),required:!0})]})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Ciudad de Expedici\xf3n:"}),(0,Kn.jsx)("input",{type:"text",value:C.id_issue_city,onChange:e=>S(u(u({},C),{},{id_issue_city:e.target.value})),placeholder:"Ej: Bogot\xe1, Medell\xedn, etc."})]}),"NIT"===C.identification_type&&(0,Kn.jsx)(Kn.Fragment,{children:"NIT"===C.identification_type?(0,Kn.jsxs)(Kn.Fragment,{children:[(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Nombre de la Propiedad Horizontal: *"}),(0,Kn.jsx)("input",{type:"text",value:C.legal_name,onChange:e=>S(u(u({},C),{},{legal_name:e.target.value,legal_name_short:e.target.value})),required:!0})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Nombre del Licenciatario:"}),(0,Kn.jsx)("input",{type:"text",value:C.licensee_name,onChange:e=>S(u(u({},C),{},{licensee_name:e.target.value}))})]})]}):(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Raz\xf3n Social / Nombre: *"}),(0,Kn.jsx)("input",{type:"text",value:C.legal_name,onChange:e=>S(u(u({},C),{},{legal_name:e.target.value,legal_name_short:e.target.value})),required:!0,placeholder:"Ej: Constructora ABC S.A.S."})]})}),"NIT"!==C.identification_type&&(0,Kn.jsx)("div",{className:"form-row",children:(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Nombre Completo: *"}),(0,Kn.jsx)("input",{type:"text",value:C.full_name,onChange:e=>S(u(u({},C),{},{full_name:e.target.value})),required:!0,placeholder:"Ej: Juan P\xe9rez Garc\xeda"})]})})]}),"NIT"===C.identification_type&&(0,Kn.jsxs)("div",{className:"form-section",children:[(0,Kn.jsx)("h4",{children:"Representante Legal"}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Nombre del Representante Legal: *"}),(0,Kn.jsx)("input",{type:"text",value:C.legal_representative_name,onChange:e=>S(u(u({},C),{},{legal_representative_name:e.target.value})),required:!0})]}),(0,Kn.jsxs)("div",{className:"form-row",children:[(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Tipo de Identificaci\xf3n: *"}),(0,Kn.jsxs)("select",{value:C.legal_representative_id_type,onChange:e=>S(u(u({},C),{},{legal_representative_id_type:e.target.value})),required:!0,children:[(0,Kn.jsx)("option",{value:"CC",children:"C\xe9dula de Ciudadan\xeda"}),(0,Kn.jsx)("option",{value:"CE",children:"C\xe9dula de Extranjer\xeda"}),(0,Kn.jsx)("option",{value:"Pasaporte",children:"Pasaporte"})]})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"N\xfamero de Identificaci\xf3n: *"}),(0,Kn.jsx)("input",{type:"text",value:C.legal_representative_id_number,onChange:e=>S(u(u({},C),{},{legal_representative_id_number:e.target.value})),required:!0})]})]})]}),(0,Kn.jsxs)("div",{className:"form-section",children:[(0,Kn.jsx)("h4",{children:"Informaci\xf3n de Contacto (Opcional)"}),(0,Kn.jsxs)("div",{className:"form-row",children:[(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Email:"}),(0,Kn.jsx)("input",{type:"email",value:C.email,onChange:e=>S(u(u({},C),{},{email:e.target.value}))})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Tel\xe9fono:"}),(0,Kn.jsx)("input",{type:"text",value:C.phone,onChange:e=>S(u(u({},C),{},{phone:e.target.value}))})]})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Direcci\xf3n:"}),(0,Kn.jsx)("input",{type:"text",value:C.address,onChange:e=>S(u(u({},C),{},{address:e.target.value}))})]}),(0,Kn.jsxs)("div",{className:"form-row",children:[(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Pa\xeds:"}),(0,Kn.jsx)("select",{value:C.country,onChange:e=>P(e.target.value),children:Object.keys(_r).map(e=>(0,Kn.jsx)("option",{value:e,children:e},e))})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Ciudad:"}),(0,Kn.jsxs)("select",{value:C.city,onChange:e=>S(u(u({},C),{},{city:e.target.value})),children:[(0,Kn.jsx)("option",{value:"",children:"Seleccione una ciudad"}),(_r[C.country||"Colombia"]||[]).map(e=>(0,Kn.jsx)("option",{value:e,children:e},e))]})]})]})]})]}),(0,Kn.jsxs)("div",{className:"modal-actions",children:[(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>{g(!1),R()},children:"Cancelar"}),(0,Kn.jsx)("button",{className:"btn-primary",onClick:async()=>{const e="NIT"===C.identification_type;if(e){if(!C.legal_name.trim())return void alert("La raz\xf3n social es requerida");if(!C.legal_representative_name.trim())return void alert("El nombre del representante legal es requerido")}else if(!C.full_name.trim())return void alert("El nombre completo es requerido");try{const t=u(u({},C),{},e?{full_name:void 0}:{legal_name:C.full_name,legal_name_short:C.full_name,legal_representative_name:void 0,legal_representative_id_type:void 0,legal_representative_id_number:void 0});await Qn.post("/suppliers",t),await E(),g(!1),R()}catch(n){var t,a;console.error("Error creating supplier:",n),alert((null===(t=n.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||"Error al crear proveedor")}},disabled:!L(),title:L()?"":"Campos faltantes: ".concat(A().join(", ")),children:"Crear Tercero"})]}),!L()&&(0,Kn.jsxs)("div",{style:{marginTop:"1rem",padding:"1rem",background:"#fff3cd",border:"1px solid #ffc107",borderRadius:"8px",color:"#856404"},children:[(0,Kn.jsx)("strong",{children:"\u26a0\ufe0f Campos obligatorios faltantes:"}),(0,Kn.jsxs)("div",{style:{fontSize:"0.85rem",marginTop:"0.5rem",color:"#666"},children:["Tipo de ID actual: ",(0,Kn.jsx)("strong",{children:C.identification_type||"(vac\xedo)"})]}),(0,Kn.jsx)("ul",{style:{marginTop:"0.5rem",marginBottom:0,paddingLeft:"1.5rem"},children:A().map((e,t)=>(0,Kn.jsx)("li",{children:e},t))})]})]})}),v&&j&&(0,Kn.jsx)("div",{className:"modal-overlay",children:(0,Kn.jsxs)("div",{className:"modal modal-large",children:[(0,Kn.jsx)("h3",{children:"Editar Tercero"}),(0,Kn.jsxs)("div",{className:"modal-content",children:[(0,Kn.jsxs)("div",{className:"form-section",children:[(0,Kn.jsx)("h4",{children:"Informaci\xf3n del Tercero"}),_.length>0&&(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Tipo de Tercero:"}),(0,Kn.jsxs)("select",{value:C.third_party_type,onChange:e=>{const t=e.target.value;if(!t)return void S(u(u({},C),{},{third_party_type:""}));const a=_.find(e=>e._id===t),n=null===a||void 0===a?void 0:a.default_identification_types;let r="CC";n&&Array.isArray(n)&&n.length>0&&(r=n[0]);const l="NIT"===r||"NIT"===r;console.log("=== CAMBIO DE TIPO DE TERCERO ==="),console.log("Tipo seleccionado:",null===a||void 0===a?void 0:a.label),console.log("allowedIdTypes:",n),console.log("newIdType asignado:",r),console.log("Es empresa:",l),S(u(u({},C),{},{third_party_type:t,identification_type:r,legal_name:l?C.legal_name:"",legal_name_short:l?C.legal_name_short:"",legal_representative_name:l?C.legal_representative_name:"",legal_representative_id_type:l?C.legal_representative_id_type:"CC",legal_representative_id_number:l?C.legal_representative_id_number:"",licensee_name:l?C.licensee_name:"",full_name:l?"":C.full_name}))},children:[(0,Kn.jsx)("option",{value:"",children:"Seleccione un tipo (opcional)"}),_.map(e=>(0,Kn.jsxs)("option",{value:e._id,children:[e.icon," ",e.label]},e._id))]}),C.third_party_type&&(0,Kn.jsx)("small",{style:{display:"block",marginTop:"0.5rem",color:"#7f8c8d"},children:null===(t=_.find(e=>e._id===C.third_party_type))||void 0===t?void 0:t.description})]}),(0,Kn.jsxs)("div",{className:"form-row",children:[(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Tipo de Identificaci\xf3n: *"}),(0,Kn.jsx)("select",{value:C.identification_type,onChange:e=>S(u(u({},C),{},{identification_type:e.target.value,legal_name:"",legal_name_short:"",full_name:"",legal_representative_name:"",legal_representative_id_type:"CC",legal_representative_id_number:"",licensee_name:""})),required:!0,children:(()=>{const e=_.find(e=>e._id===C.third_party_type),t=null===e||void 0===e?void 0:e.default_identification_types;return t&&t.length>0?t.map(e=>(0,Kn.jsx)("option",{value:e,children:e},e)):(0,Kn.jsxs)(Kn.Fragment,{children:[!C.identification_type&&(0,Kn.jsx)("option",{value:"",children:"Seleccione tipo de identificaci\xf3n"}),(0,Kn.jsx)("option",{value:"NIT",children:"NIT (Empresa)"}),(0,Kn.jsx)("option",{value:"CC",children:"C\xe9dula de Ciudadan\xeda"}),(0,Kn.jsx)("option",{value:"CE",children:"C\xe9dula de Extranjer\xeda"}),(0,Kn.jsx)("option",{value:"Pasaporte",children:"Pasaporte"})]})})()}),C.third_party_type&&(()=>{const e=_.find(e=>e._id===C.third_party_type),t=null===e||void 0===e?void 0:e.default_identification_types;return t&&t.length>0?(0,Kn.jsxs)("small",{style:{display:"block",marginTop:"0.25rem",color:"#2563eb",fontSize:"0.85rem"},children:["Tipos permitidos para este tipo de tercero: ",t.join(", ")]}):null})()]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"N\xfamero de Identificaci\xf3n: *"}),(0,Kn.jsx)("input",{type:"text",value:C.identification_number,onChange:e=>S(u(u({},C),{},{identification_number:e.target.value})),required:!0})]})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Ciudad de Expedici\xf3n:"}),(0,Kn.jsx)("input",{type:"text",value:C.id_issue_city,onChange:e=>S(u(u({},C),{},{id_issue_city:e.target.value})),placeholder:"Ej: Bogot\xe1, Medell\xedn, etc."})]}),"NIT"===C.identification_type&&(0,Kn.jsx)(Kn.Fragment,{children:"NIT"===C.identification_type?(0,Kn.jsxs)(Kn.Fragment,{children:[(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Nombre de la Propiedad Horizontal: *"}),(0,Kn.jsx)("input",{type:"text",value:C.legal_name,onChange:e=>S(u(u({},C),{},{legal_name:e.target.value,legal_name_short:e.target.value})),required:!0})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Nombre del Licenciatario:"}),(0,Kn.jsx)("input",{type:"text",value:C.licensee_name,onChange:e=>S(u(u({},C),{},{licensee_name:e.target.value}))})]})]}):(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Raz\xf3n Social / Nombre: *"}),(0,Kn.jsx)("input",{type:"text",value:C.legal_name,onChange:e=>S(u(u({},C),{},{legal_name:e.target.value,legal_name_short:e.target.value})),required:!0,placeholder:"Ej: Constructora ABC S.A.S."})]})}),"NIT"!==C.identification_type&&(0,Kn.jsx)("div",{className:"form-row",children:(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Nombre Completo: *"}),(0,Kn.jsx)("input",{type:"text",value:C.full_name,onChange:e=>S(u(u({},C),{},{full_name:e.target.value})),required:!0,placeholder:"Ej: Juan P\xe9rez Garc\xeda"})]})})]}),"NIT"===C.identification_type&&(0,Kn.jsxs)("div",{className:"form-section",children:[(0,Kn.jsx)("h4",{children:"Representante Legal"}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Nombre del Representante Legal: *"}),(0,Kn.jsx)("input",{type:"text",value:C.legal_representative_name,onChange:e=>S(u(u({},C),{},{legal_representative_name:e.target.value})),required:!0})]}),(0,Kn.jsxs)("div",{className:"form-row",children:[(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Tipo de Identificaci\xf3n: *"}),(0,Kn.jsxs)("select",{value:C.legal_representative_id_type,onChange:e=>S(u(u({},C),{},{legal_representative_id_type:e.target.value})),required:!0,children:[(0,Kn.jsx)("option",{value:"CC",children:"C\xe9dula de Ciudadan\xeda"}),(0,Kn.jsx)("option",{value:"CE",children:"C\xe9dula de Extranjer\xeda"}),(0,Kn.jsx)("option",{value:"Pasaporte",children:"Pasaporte"})]})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"N\xfamero de Identificaci\xf3n: *"}),(0,Kn.jsx)("input",{type:"text",value:C.legal_representative_id_number,onChange:e=>S(u(u({},C),{},{legal_representative_id_number:e.target.value})),required:!0})]})]})]}),(0,Kn.jsxs)("div",{className:"form-section",children:[(0,Kn.jsx)("h4",{children:"Informaci\xf3n de Contacto (Opcional)"}),(0,Kn.jsxs)("div",{className:"form-row",children:[(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Email:"}),(0,Kn.jsx)("input",{type:"email",value:C.email,onChange:e=>S(u(u({},C),{},{email:e.target.value}))})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Tel\xe9fono:"}),(0,Kn.jsx)("input",{type:"text",value:C.phone,onChange:e=>S(u(u({},C),{},{phone:e.target.value}))})]})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Direcci\xf3n:"}),(0,Kn.jsx)("input",{type:"text",value:C.address,onChange:e=>S(u(u({},C),{},{address:e.target.value}))})]}),(0,Kn.jsxs)("div",{className:"form-row",children:[(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Pa\xeds:"}),(0,Kn.jsx)("select",{value:C.country,onChange:e=>P(e.target.value),children:Object.keys(_r).map(e=>(0,Kn.jsx)("option",{value:e,children:e},e))})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Ciudad:"}),(0,Kn.jsxs)("select",{value:C.city,onChange:e=>S(u(u({},C),{},{city:e.target.value})),children:[(0,Kn.jsx)("option",{value:"",children:"Seleccione una ciudad"}),(_r[C.country||"Colombia"]||[]).map(e=>(0,Kn.jsx)("option",{value:e,children:e},e))]})]})]})]}),j._id&&(0,Kn.jsxs)("div",{className:"form-section",style:{marginTop:"2rem",borderTop:"2px solid #e0e0e0",paddingTop:"2rem"},children:[(0,Kn.jsx)("h4",{children:"Sugerencias de Campos"}),(0,Kn.jsx)(br,{supplierId:j._id,onFieldsAdded:async()=>{await T()}})]}),j._id&&j.custom_fields&&Object.keys(j.custom_fields).length>0&&(0,Kn.jsx)("div",{className:"form-section",style:{marginTop:"1rem"},children:(0,Kn.jsx)(jr,{supplierId:j._id,customFields:j.custom_fields,thirdPartyTypeId:null===(a=j.third_party_type)||void 0===a?void 0:a._id,onMergeComplete:async()=>{await T()}})})]}),(0,Kn.jsxs)("div",{className:"modal-actions",children:[(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>{x(!1),N(null),R()},children:"Cancelar"}),(0,Kn.jsx)("button",{className:"btn-primary",onClick:async()=>{if(!j)return;console.log("\ud83d\ude80 Iniciando actualizaci\xf3n de tercero"),console.log("\ud83d\udccb formData.custom_fields antes de enviar:",C.custom_fields);const e="NIT"===C.identification_type;if(e){if(!C.legal_name.trim())return void alert("La raz\xf3n social es requerida");if(!C.legal_representative_name.trim())return void alert("El nombre del representante legal es requerido")}else if(!C.full_name.trim())return void alert("El nombre completo es requerido");try{const t=u(u({},C),{},e?{full_name:void 0}:{legal_name:C.full_name,legal_name_short:C.full_name,legal_representative_name:void 0,legal_representative_id_type:void 0,legal_representative_id_number:void 0});console.log("\ud83d\udce4 dataToSend.custom_fields:",t.custom_fields),console.log("\ud83d\udd0d Todas las claves de custom_fields:",Object.keys(t.custom_fields||{}));const a=await Qn.put("/suppliers/".concat(j._id),t);console.log("\u2705 Tercero actualizado exitosamente"),console.log("\ud83d\udce4 Respuesta del servidor:",a.data),await E(),x(!1),N(null),R()}catch(n){var t,a;console.error("\u274c Error updating supplier:",n),alert((null===(t=n.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||"Error al actualizar proveedor")}},disabled:!L(),title:L()?"":"Campos faltantes: ".concat(A().join(", ")),children:"Actualizar Tercero"})]}),!L()&&(0,Kn.jsxs)("div",{style:{marginTop:"1rem",padding:"1rem",background:"#fff3cd",border:"1px solid #ffc107",borderRadius:"8px",color:"#856404"},children:[(0,Kn.jsx)("strong",{children:"\u26a0\ufe0f Campos obligatorios faltantes:"}),(0,Kn.jsxs)("div",{style:{fontSize:"0.85rem",marginTop:"0.5rem",color:"#666"},children:["Tipo de ID actual: ",(0,Kn.jsx)("strong",{children:C.identification_type||"(vac\xedo)"})]}),(0,Kn.jsx)("ul",{style:{marginTop:"0.5rem",marginBottom:0,paddingLeft:"1.5rem"},children:A().map((e,t)=>(0,Kn.jsx)("li",{children:e},t))})]})]})}),y&&(0,Kn.jsx)("div",{className:"modal-overlay",children:(0,Kn.jsx)("div",{className:"modal modal-xlarge",children:(0,Kn.jsx)(Nr,{onSuccess:async(e,t)=>{console.log("\u2705 Tercero creado:",e),console.log("\u2705 Perfil creado:",t),await E(),b(!1)},onCancel:()=>b(!1)})})})]})},Cr=()=>{const{user:e}=Yn(),[t,a]=(0,r.useState)([]),[n,l]=(0,r.useState)(!0),[s,i]=(0,r.useState)(!1),[o,c]=(0,r.useState)(null),[d,p]=(0,r.useState)([]),[m,h]=(0,r.useState)([]),[f,g]=(0,r.useState)({code:"",label:"",description:"",icon:"\ud83d\udcc4",fields:[],default_identification_types:[],isGeneric:!1,companies:[]}),[v,x]=(0,r.useState)({name:"",label:"",field_type:"text",options:[],required:!1,display_order:0,placeholder:""}),[y,b]=(0,r.useState)(null),[j,N]=(0,r.useState)(null),[_,w]=(0,r.useState)("");(0,r.useEffect)(()=>{C(),S(),"super_admin"!==(null===e||void 0===e?void 0:e.role)&&"admin"!==(null===e||void 0===e?void 0:e.role)||k()},[e]);const C=async()=>{try{const e=await Qn.get("/third-party-types");a(e.data)}catch(e){console.error("Error fetching third party types:",e)}finally{l(!1)}},S=async()=>{try{const e=await Qn.get("/third-party-types/config/field-options");p(e.data.field_types)}catch(e){console.error("Error fetching field options:",e)}},k=async()=>{try{const e=await Qn.get("/third-party-types/config/companies");h(e.data)}catch(e){console.error("Error fetching companies:",e)}},E=()=>{if(_.trim()){const e=_.trim().toUpperCase(),t=f.default_identification_types||[];t.includes(e)||g(u(u({},f),{},{default_identification_types:[...t,e]})),w("")}},T=(e,t)=>{const a=[...f.fields],n="up"===t?e-1:e+1;n<0||n>=a.length||([a[e],a[n]]=[a[n],a[e]],a.forEach((e,t)=>e.display_order=t),g(u(u({},f),{},{fields:a})))},P=()=>{b(null),N(null)},R=()=>{if(null===y||!j)return;if(!j.name||!j.label)return void alert("El nombre y etiqueta del campo son requeridos");const e=[...f.fields];e[y]=j,g(u(u({},f),{},{fields:e})),b(null),N(null)};return n?(0,Kn.jsx)("div",{className:"loading",children:"Cargando tipos de terceros..."}):(0,Kn.jsxs)("div",{className:"third-party-type-management",children:[(0,Kn.jsxs)("div",{className:"header",children:[(0,Kn.jsx)("h1",{children:"Gesti\xf3n de Tipos de Terceros"}),(0,Kn.jsx)("p",{children:"Configura qu\xe9 informaci\xf3n se solicita para cada tipo de tercero"}),(0,Kn.jsx)("button",{onClick:()=>{c(null),g({code:"",label:"",description:"",icon:"\ud83d\udcc4",fields:[],default_identification_types:[],isGeneric:!1,companies:[]}),i(!0)},className:"btn-create",children:"\u2795 Crear Nuevo Tipo"})]}),(0,Kn.jsx)("div",{className:"types-grid",children:t.map(e=>(0,Kn.jsxs)("div",{className:"type-card",children:[(0,Kn.jsxs)("div",{className:"type-header",children:[(0,Kn.jsxs)("div",{className:"type-title",children:[(0,Kn.jsx)("span",{className:"type-icon",children:e.icon}),(0,Kn.jsxs)("div",{children:[(0,Kn.jsx)("h3",{children:e.label}),(0,Kn.jsx)("span",{className:"type-code",children:e.code})]})]}),(0,Kn.jsxs)("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[e.is_system&&(0,Kn.jsx)("span",{className:"system-badge",children:"Sistema"}),e.isGeneric&&(0,Kn.jsx)("span",{className:"system-badge",style:{backgroundColor:"#10b981"},children:"Gen\xe9rico"})]})]}),(0,Kn.jsx)("p",{className:"type-description",children:e.description}),(0,Kn.jsxs)("div",{className:"type-stats",children:[(0,Kn.jsxs)("span",{children:[e.fields.length," campos configurados"]}),!e.isGeneric&&e.companies&&e.companies.length>0&&(0,Kn.jsxs)("span",{style:{color:"#3b82f6",fontSize:"0.85rem"},children:[e.companies.length," empresa",e.companies.length>1?"s":""]})]}),!e.isGeneric&&e.companies&&e.companies.length>0&&(0,Kn.jsxs)("div",{style:{marginTop:"0.5rem"},children:[(0,Kn.jsx)("strong",{style:{fontSize:"0.8rem",color:"#64748b"},children:"Empresas:"}),(0,Kn.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.25rem",marginTop:"0.25rem"},children:e.companies.map(e=>(0,Kn.jsx)("span",{style:{fontSize:"0.75rem",padding:"0.15rem 0.5rem",backgroundColor:"#e0f2fe",color:"#0369a1",borderRadius:"4px",border:"1px solid #bae6fd"},children:e.name},e._id))})]}),e.default_identification_types&&e.default_identification_types.length>0&&(0,Kn.jsxs)("div",{className:"type-id-types-preview",children:[(0,Kn.jsx)("strong",{style:{fontSize:"0.8rem",color:"#64748b"},children:"Tipos de ID:"}),(0,Kn.jsx)("div",{className:"id-types-badges",children:e.default_identification_types.map((e,t)=>(0,Kn.jsx)("span",{className:"id-type-badge-small",children:e},t))})]}),(0,Kn.jsxs)("div",{className:"type-actions",children:[(0,Kn.jsx)("button",{onClick:()=>(e=>{c(e),g({code:e.code,label:e.label,description:e.description,icon:e.icon,fields:e.fields,default_identification_types:e.default_identification_types||[],isGeneric:e.isGeneric||!1,companies:e.companies?e.companies.map(e=>e._id):[]}),i(!0)})(e),className:"btn-edit",children:"\u270f\ufe0f Editar"}),!e.is_system&&(0,Kn.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("\xbfEst\xe1s seguro de eliminar este tipo de tercero?"))try{await Qn.delete("/third-party-types/".concat(e)),alert("Tipo de tercero eliminado exitosamente"),await C()}catch(n){var t,a;console.error("Error deleting third party type:",n),alert((null===(t=n.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||"Error al eliminar tipo de tercero")}})(e._id),className:"btn-delete",children:"\ud83d\uddd1\ufe0f Eliminar"})]})]},e._id))}),s&&(0,Kn.jsx)("div",{className:"modal-overlay",onClick:()=>i(!1),children:(0,Kn.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,Kn.jsxs)("div",{className:"modal-header",children:[(0,Kn.jsx)("h2",{children:o?"Editar Tipo de Tercero":"Crear Nuevo Tipo de Tercero"}),(0,Kn.jsx)("button",{onClick:()=>i(!1),className:"btn-close",children:"\u2716"})]}),(0,Kn.jsxs)("div",{className:"modal-body",children:[(0,Kn.jsxs)("div",{className:"form-section",children:[(0,Kn.jsx)("h3",{children:"Informaci\xf3n General"}),(0,Kn.jsxs)("div",{className:"form-row",children:[(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"C\xf3digo *"}),(0,Kn.jsx)("input",{type:"text",value:f.code,onChange:e=>g(u(u({},f),{},{code:e.target.value.toLowerCase()})),placeholder:"ej: proveedor",disabled:!!o})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"\xcdcono"}),(0,Kn.jsx)("input",{type:"text",value:f.icon,onChange:e=>g(u(u({},f),{},{icon:e.target.value})),placeholder:"\ud83d\udce6"})]})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Nombre *"}),(0,Kn.jsx)("input",{type:"text",value:f.label,onChange:e=>g(u(u({},f),{},{label:e.target.value})),placeholder:"Proveedor"})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Descripci\xf3n"}),(0,Kn.jsx)("textarea",{value:f.description,onChange:e=>g(u(u({},f),{},{description:e.target.value})),placeholder:"Descripci\xf3n del tipo de tercero",rows:2})]})]}),("super_admin"===(null===e||void 0===e?void 0:e.role)||"admin"===(null===e||void 0===e?void 0:e.role))&&(0,Kn.jsxs)("div",{className:"form-section",children:[(0,Kn.jsx)("h3",{children:"Alcance del Tipo de Tercero"}),(0,Kn.jsx)("p",{className:"form-hint",children:"Define si este tipo aplica para todas las empresas o solo para empresas espec\xedficas"}),(0,Kn.jsx)("div",{className:"form-group",children:(0,Kn.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[(0,Kn.jsx)("input",{type:"checkbox",checked:f.isGeneric,onChange:e=>{return t=e.target.checked,void g(u(u({},f),{},{isGeneric:t,companies:t?[]:f.companies}));var t}}),(0,Kn.jsx)("span",{style:{fontWeight:500},children:"Gen\xe9rico (aplica para todas las empresas)"})]})}),!f.isGeneric&&(0,Kn.jsxs)("div",{className:"companies-selector",children:[(0,Kn.jsxs)("label",{style:{marginBottom:"0.5rem",fontWeight:500,display:"block"},children:["Seleccionar empresas (",f.companies.length," seleccionadas):"]}),0===m.length?(0,Kn.jsx)("p",{style:{color:"#64748b",fontSize:"0.9rem"},children:"No hay empresas disponibles"}):(0,Kn.jsx)("div",{className:"companies-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"0.5rem",maxHeight:"200px",overflowY:"auto",border:"1px solid #e2e8f0",borderRadius:"8px",padding:"1rem"},children:m.map(e=>(0,Kn.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem",border:"1px solid #e2e8f0",borderRadius:"6px",cursor:"pointer",backgroundColor:f.companies.includes(e._id)?"#e0f2fe":"white",transition:"all 0.2s"},children:[(0,Kn.jsx)("input",{type:"checkbox",checked:f.companies.includes(e._id),onChange:()=>(e=>{const t=f.companies||[];t.includes(e)?g(u(u({},f),{},{companies:t.filter(t=>t!==e)})):g(u(u({},f),{},{companies:[...t,e]}))})(e._id)}),(0,Kn.jsx)("span",{style:{fontSize:"0.9rem"},children:e.name})]},e._id))})]})]}),(0,Kn.jsxs)("div",{className:"form-section",children:[(0,Kn.jsx)("h3",{children:"Tipos de Identificaci\xf3n Permitidos"}),(0,Kn.jsx)("p",{className:"form-hint",children:"Selecciona los tipos de identificaci\xf3n que se usar\xe1n con este tipo de tercero"}),(0,Kn.jsxs)("div",{className:"id-types-common",children:[(0,Kn.jsx)("label",{style:{marginBottom:"0.5rem",fontWeight:500,display:"block"},children:"Tipos comunes:"}),(0,Kn.jsx)("div",{className:"id-types-grid",children:["NIT","CC","CE","TI","Pasaporte","PEP","RUT","DNI","RUC","CURP"].map(e=>(0,Kn.jsx)("button",{type:"button",className:"id-type-btn ".concat((f.default_identification_types||[]).includes(e)?"selected":""),onClick:()=>(e=>{const t=f.default_identification_types||[];t.includes(e)?g(u(u({},f),{},{default_identification_types:t.filter(t=>t!==e)})):g(u(u({},f),{},{default_identification_types:[...t,e]}))})(e),children:e},e))})]}),(0,Kn.jsxs)("div",{className:"custom-id-input-container",children:[(0,Kn.jsx)("label",{style:{marginBottom:"0.5rem",fontWeight:500,display:"block"},children:"Agregar tipo personalizado:"}),(0,Kn.jsxs)("div",{className:"custom-id-input-wrapper",children:[(0,Kn.jsx)("input",{type:"text",value:_,onChange:e=>w(e.target.value),placeholder:"Ej: RFC, CUIL, etc.",onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),E())},style:{flex:1}}),(0,Kn.jsx)("button",{type:"button",onClick:E,className:"btn-add-custom-id",children:"+ Agregar"})]})]}),f.default_identification_types&&f.default_identification_types.length>0&&(0,Kn.jsxs)("div",{className:"selected-id-types-container",children:[(0,Kn.jsxs)("label",{style:{marginBottom:"0.5rem",fontWeight:500,display:"block"},children:["Tipos seleccionados (",f.default_identification_types.length,"):"]}),(0,Kn.jsx)("div",{className:"selected-id-types-list",children:f.default_identification_types.map(e=>(0,Kn.jsxs)("span",{className:"selected-id-badge",children:[e,(0,Kn.jsx)("button",{type:"button",onClick:()=>(e=>{g(u(u({},f),{},{default_identification_types:(f.default_identification_types||[]).filter(t=>t!==e)}))})(e),className:"remove-id-btn",children:"\xd7"})]},e))})]})]}),(0,Kn.jsxs)("div",{className:"form-section",children:[(0,Kn.jsxs)("h3",{children:["Campos Personalizados (",f.fields.length,")"]}),(0,Kn.jsxs)("div",{className:"add-field-section",children:[(0,Kn.jsx)("h4",{children:"Agregar Campo"}),(0,Kn.jsxs)("div",{className:"form-row",children:[(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Nombre del campo *"}),(0,Kn.jsx)("input",{type:"text",value:v.name,onChange:e=>x(u(u({},v),{},{name:e.target.value.toLowerCase().replace(/\s/g,"_")})),placeholder:"nombre_campo"})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Etiqueta *"}),(0,Kn.jsx)("input",{type:"text",value:v.label,onChange:e=>x(u(u({},v),{},{label:e.target.value})),placeholder:"Etiqueta visible"})]})]}),(0,Kn.jsxs)("div",{className:"form-row",children:[(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Tipo de campo *"}),(0,Kn.jsx)("select",{value:v.field_type,onChange:e=>x(u(u({},v),{},{field_type:e.target.value})),children:d.map(e=>(0,Kn.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Placeholder"}),(0,Kn.jsx)("input",{type:"text",value:v.placeholder,onChange:e=>x(u(u({},v),{},{placeholder:e.target.value}))})]})]}),(0,Kn.jsx)("div",{className:"form-group",children:(0,Kn.jsxs)("label",{children:[(0,Kn.jsx)("input",{type:"checkbox",checked:v.required,onChange:e=>x(u(u({},v),{},{required:e.target.checked}))}),"Campo obligatorio"]})}),(0,Kn.jsx)("button",{onClick:()=>{v.name&&v.label?(g(u(u({},f),{},{fields:[...f.fields,u(u({},v),{},{display_order:f.fields.length})]})),x({name:"",label:"",field_type:"text",options:[],required:!1,display_order:0,placeholder:""})):alert("El nombre y etiqueta del campo son requeridos")},className:"btn-add-field",children:"\u2795 Agregar Campo"})]}),(0,Kn.jsx)("div",{className:"fields-list",children:f.fields.map((e,t)=>(0,Kn.jsx)("div",{className:"field-item",children:y===t?(0,Kn.jsxs)("div",{className:"field-edit-form",children:[(0,Kn.jsxs)("div",{className:"form-row",children:[(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Nombre del Campo (interno)"}),(0,Kn.jsx)("input",{type:"text",value:(null===j||void 0===j?void 0:j.name)||"",onChange:e=>N(u(u({},j),{},{name:e.target.value})),placeholder:"ej: nombre_completo"})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Etiqueta (visible)"}),(0,Kn.jsx)("input",{type:"text",value:(null===j||void 0===j?void 0:j.label)||"",onChange:e=>N(u(u({},j),{},{label:e.target.value})),placeholder:"ej: Nombre Completo"})]})]}),(0,Kn.jsxs)("div",{className:"form-row",children:[(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Tipo de Campo"}),(0,Kn.jsx)("select",{value:(null===j||void 0===j?void 0:j.field_type)||"text",onChange:e=>N(u(u({},j),{},{field_type:e.target.value})),children:d.map(e=>(0,Kn.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Placeholder"}),(0,Kn.jsx)("input",{type:"text",value:(null===j||void 0===j?void 0:j.placeholder)||"",onChange:e=>N(u(u({},j),{},{placeholder:e.target.value})),placeholder:"Texto de ayuda"})]})]}),(0,Kn.jsx)("div",{className:"form-group",children:(0,Kn.jsxs)("label",{children:[(0,Kn.jsx)("input",{type:"checkbox",checked:(null===j||void 0===j?void 0:j.required)||!1,onChange:e=>N(u(u({},j),{},{required:e.target.checked}))}),"Campo obligatorio"]})}),(0,Kn.jsxs)("div",{className:"field-edit-actions",children:[(0,Kn.jsx)("button",{onClick:R,className:"btn-save-field",children:"\u2705 Guardar"}),(0,Kn.jsx)("button",{onClick:P,className:"btn-cancel-field",children:"\u274c Cancelar"})]})]}):(0,Kn.jsxs)(Kn.Fragment,{children:[(0,Kn.jsxs)("div",{className:"field-info",children:[(0,Kn.jsx)("strong",{children:e.label}),(0,Kn.jsxs)("span",{className:"field-details",children:[e.name," \u2022 ",e.field_type,e.required&&" \u2022 Requerido"]})]}),(0,Kn.jsxs)("div",{className:"field-actions",children:[(0,Kn.jsx)("button",{onClick:()=>(e=>{b(e),N(u({},f.fields[e]))})(t),className:"btn-icon btn-edit",title:"Editar campo",children:(0,Kn.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,Kn.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,Kn.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})}),(0,Kn.jsx)("button",{onClick:()=>T(t,"up"),disabled:0===t,className:"btn-icon",title:"Mover arriba",children:(0,Kn.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:(0,Kn.jsx)("polyline",{points:"18 15 12 9 6 15"})})}),(0,Kn.jsx)("button",{onClick:()=>T(t,"down"),disabled:t===f.fields.length-1,className:"btn-icon",title:"Mover abajo",children:(0,Kn.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:(0,Kn.jsx)("polyline",{points:"6 9 12 15 18 9"})})}),(0,Kn.jsx)("button",{onClick:()=>(e=>{const t=f.fields.filter((t,a)=>a!==e);g(u(u({},f),{},{fields:t}))})(t),className:"btn-icon-delete",title:"Eliminar campo",children:(0,Kn.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,Kn.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,Kn.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})]})},t))})]})]}),(0,Kn.jsxs)("div",{className:"modal-footer",children:[(0,Kn.jsx)("button",{onClick:()=>i(!1),className:"btn-cancel",children:"Cancelar"}),(0,Kn.jsx)("button",{onClick:async()=>{try{if(!f.isGeneric&&0===f.companies.length&&("super_admin"===(null===e||void 0===e?void 0:e.role)||"admin"===(null===e||void 0===e?void 0:e.role)))return void alert("Debes seleccionar al menos una empresa o marcar el tipo como gen\xe9rico");o?(await Qn.put("/third-party-types/".concat(o._id),f),alert("Tipo de tercero actualizado exitosamente")):(await Qn.post("/third-party-types",f),alert("Tipo de tercero creado exitosamente")),await C(),i(!1)}catch(n){var t,a;console.error("Error saving third party type:",n),alert((null===(t=n.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||"Error al guardar tipo de tercero")}},className:"btn-save",children:o?"Actualizar":"Crear"})]})]})})]})},Sr=()=>{const[e,t]=(0,r.useState)([]),[a,n]=(0,r.useState)({suppliers_count:0,total_contracts:0,suppliers_with_contracts:0,suppliers_without_contracts:0}),[l,s]=(0,r.useState)(!0),[i,o]=(0,r.useState)(null),[c,d]=(0,r.useState)(""),[u,p]=(0,r.useState)("contract_count"),[m,h]=(0,r.useState)(!1),[f,g]=(0,r.useState)(!1),[v,x]=(0,r.useState)(null),[y,b]=(0,r.useState)(null),[j,N]=(0,r.useState)(!1),[_,w]=(0,r.useState)(new Set);(0,r.useEffect)(()=>{C()},[u,m,f]);const C=async()=>{try{s(!0),o(null);const e=await(async e=>{const t=new URLSearchParams;null!==e&&void 0!==e&&e.search&&t.append("search",e.search),null!==e&&void 0!==e&&e.includeInactive&&t.append("includeInactive","true"),null!==e&&void 0!==e&&e.withContractsOnly&&t.append("withContractsOnly","true"),null!==e&&void 0!==e&&e.sortBy&&t.append("sortBy",e.sortBy);const a=t.toString(),n="/suppliers/contracts/consolidated".concat(a?"?".concat(a):"");return(await $n.get(n)).data})({search:c.trim()||void 0,sortBy:u,withContractsOnly:m,includeInactive:f});t(e.data),n(e.totals)}catch(r){var e,a;console.error("Error fetching consolidated data:",r),o((null===(e=r.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.error)||"Error al cargar datos")}finally{s(!1)}},S=async e=>{try{x(e),N(!0);const t=await(async e=>(await $n.get("/suppliers/".concat(e,"/contracts"))).data)(e);b(t)}catch(t){console.error("Error fetching supplier detail:",t),o("Error al cargar detalle del tercero")}finally{N(!1)}},k=()=>{x(null),b(null)},E=e=>{switch(null===e||void 0===e?void 0:e.toLowerCase()){case"active":case"aprobado":case"firmado":return"status-badge-success";case"borrador":case"revision":return"status-badge-warning";case"terminated":case"expired":case"cancelado":return"status-badge-danger";default:return"status-badge-default"}},T=e=>new Date(e).toLocaleDateString("es-CO",{year:"numeric",month:"short",day:"numeric"});return l&&0===e.length?(0,Kn.jsx)("div",{className:"consolidated-container",children:(0,Kn.jsxs)("div",{className:"loading-state",children:[(0,Kn.jsx)("div",{className:"spinner"}),(0,Kn.jsx)("p",{children:"Cargando datos consolidados..."})]})}):(0,Kn.jsxs)("div",{className:"consolidated-container",children:[(0,Kn.jsx)("div",{className:"consolidated-header",children:(0,Kn.jsxs)("div",{className:"header-info",children:[(0,Kn.jsx)("h1",{children:"Contratos por Tercero"}),(0,Kn.jsx)("p",{children:"Vista consolidada de todos los contratos asociados a cada tercero"})]})}),(0,Kn.jsxs)("div",{className:"stats-cards",children:[(0,Kn.jsxs)("div",{className:"stat-card",children:[(0,Kn.jsx)("div",{className:"stat-icon",children:"\ud83d\udc65"}),(0,Kn.jsxs)("div",{className:"stat-content",children:[(0,Kn.jsx)("span",{className:"stat-value",children:a.suppliers_count}),(0,Kn.jsx)("span",{className:"stat-label",children:"Terceros"})]})]}),(0,Kn.jsxs)("div",{className:"stat-card",children:[(0,Kn.jsx)("div",{className:"stat-icon",children:"\ud83d\udcc4"}),(0,Kn.jsxs)("div",{className:"stat-content",children:[(0,Kn.jsx)("span",{className:"stat-value",children:a.total_contracts}),(0,Kn.jsx)("span",{className:"stat-label",children:"Contratos Totales"})]})]}),(0,Kn.jsxs)("div",{className:"stat-card stat-success",children:[(0,Kn.jsx)("div",{className:"stat-icon",children:"\u2713"}),(0,Kn.jsxs)("div",{className:"stat-content",children:[(0,Kn.jsx)("span",{className:"stat-value",children:a.suppliers_with_contracts}),(0,Kn.jsx)("span",{className:"stat-label",children:"Con Contratos"})]})]}),(0,Kn.jsxs)("div",{className:"stat-card stat-warning",children:[(0,Kn.jsx)("div",{className:"stat-icon",children:"\u25cb"}),(0,Kn.jsxs)("div",{className:"stat-content",children:[(0,Kn.jsx)("span",{className:"stat-value",children:a.suppliers_without_contracts}),(0,Kn.jsx)("span",{className:"stat-label",children:"Sin Contratos"})]})]})]}),(0,Kn.jsxs)("div",{className:"filters-section",children:[(0,Kn.jsxs)("form",{onSubmit:e=>{e.preventDefault(),C()},className:"search-form",children:[(0,Kn.jsx)("input",{type:"text",placeholder:"Buscar por nombre, ID o email...",value:c,onChange:e=>d(e.target.value),className:"search-input"}),(0,Kn.jsx)("button",{type:"submit",className:"btn-search",children:"Buscar"})]}),(0,Kn.jsxs)("div",{className:"filter-options",children:[(0,Kn.jsxs)("select",{value:u,onChange:e=>p(e.target.value),className:"filter-select",children:[(0,Kn.jsx)("option",{value:"contract_count",children:"M\xe1s contratos"}),(0,Kn.jsx)("option",{value:"name",children:"Por nombre"}),(0,Kn.jsx)("option",{value:"recent",children:"M\xe1s reciente"})]}),(0,Kn.jsxs)("label",{className:"filter-checkbox",children:[(0,Kn.jsx)("input",{type:"checkbox",checked:m,onChange:e=>h(e.target.checked)}),"Solo con contratos"]}),(0,Kn.jsxs)("label",{className:"filter-checkbox",children:[(0,Kn.jsx)("input",{type:"checkbox",checked:f,onChange:e=>g(e.target.checked)}),"Incluir inactivos"]})]})]}),i&&(0,Kn.jsxs)("div",{className:"error-alert",children:[i,(0,Kn.jsx)("button",{onClick:()=>o(null),children:"\u2715"})]}),(0,Kn.jsxs)("div",{className:"table-container",children:[(0,Kn.jsxs)("table",{className:"consolidated-table",children:[(0,Kn.jsx)("thead",{children:(0,Kn.jsxs)("tr",{children:[(0,Kn.jsx)("th",{className:"expand-col"}),(0,Kn.jsx)("th",{children:"Tercero"}),(0,Kn.jsx)("th",{children:"Tipo"}),(0,Kn.jsx)("th",{children:"Identificaci\xf3n"}),(0,Kn.jsx)("th",{children:"Contacto"}),(0,Kn.jsx)("th",{className:"contracts-col",children:"Contratos"}),(0,Kn.jsx)("th",{className:"profiles-col",children:"Perfiles"}),(0,Kn.jsx)("th",{children:"Acciones"})]})}),(0,Kn.jsx)("tbody",{children:e.map(e=>{return(0,Kn.jsxs)(r.Fragment,{children:[(0,Kn.jsxs)("tr",{className:e.supplier.active?"":"inactive-row",children:[(0,Kn.jsx)("td",{className:"expand-col",children:e.stats.total>0&&(0,Kn.jsx)("button",{className:"btn-expand",onClick:()=>(e=>{const t=new Set(_);t.has(e)?t.delete(e):t.add(e),w(t)})(e.supplier._id),children:_.has(e.supplier._id)?"\u25bc":"\u25b6"})}),(0,Kn.jsx)("td",{children:(0,Kn.jsxs)("div",{className:"supplier-info",children:[(0,Kn.jsx)("strong",{children:e.supplier.legal_name}),e.supplier.legal_name_short&&e.supplier.legal_name_short!==e.supplier.legal_name&&(0,Kn.jsx)("small",{children:e.supplier.legal_name_short})]})}),(0,Kn.jsx)("td",{children:e.supplier.third_party_type?(0,Kn.jsxs)("span",{className:"type-badge",children:[e.supplier.third_party_type.icon," ",e.supplier.third_party_type.label]}):"-"}),(0,Kn.jsx)("td",{children:(0,Kn.jsxs)("div",{className:"id-info",children:[(0,Kn.jsx)("span",{className:"id-type",children:e.supplier.identification_type}),(0,Kn.jsx)("span",{className:"id-number",children:e.supplier.identification_number})]})}),(0,Kn.jsx)("td",{children:(0,Kn.jsxs)("div",{className:"contact-info",children:[e.supplier.email&&(0,Kn.jsx)("span",{className:"email",children:e.supplier.email}),e.supplier.phone&&(0,Kn.jsx)("span",{className:"phone",children:e.supplier.phone}),!e.supplier.email&&!e.supplier.phone&&(0,Kn.jsx)("span",{className:"no-contact",children:"-"})]})}),(0,Kn.jsx)("td",{className:"contracts-col",children:(0,Kn.jsxs)("div",{className:"contract-count ".concat(e.stats.total>0?"has-contracts":""),children:[(0,Kn.jsx)("span",{className:"count-number",children:e.stats.total}),e.stats.total>0&&Object.keys(e.stats.by_status).length>0&&(0,Kn.jsx)("div",{className:"status-breakdown",children:Object.entries(e.stats.by_status).map(e=>{let[t,a]=e;return(0,Kn.jsxs)("span",{className:"mini-badge ".concat(E(t)),children:[a," ",t]},t)})})]})}),(0,Kn.jsx)("td",{className:"profiles-col",children:(0,Kn.jsx)("span",{className:"profile-count",children:e.profile_count})}),(0,Kn.jsx)("td",{children:(0,Kn.jsx)("div",{className:"action-buttons",children:(0,Kn.jsx)("button",{className:"btn-action btn-view",onClick:()=>S(e.supplier._id),title:"Ver detalle",children:"Ver"})})})]}),_.has(e.supplier._id)&&(0,Kn.jsx)("tr",{className:"expanded-row",children:(0,Kn.jsx)("td",{colSpan:8,children:(0,Kn.jsxs)("div",{className:"expanded-content",children:[(0,Kn.jsx)("h4",{children:"Contratos Recientes"}),(t=e.contracts,0===t.length?(0,Kn.jsx)("div",{className:"no-contracts",children:"Sin contratos asociados"}):(0,Kn.jsxs)("div",{className:"contracts-mini-list",children:[t.slice(0,5).map(e=>(0,Kn.jsxs)("div",{className:"contract-mini-item",children:[(0,Kn.jsx)("span",{className:"contract-number",children:e.contract_number}),(0,Kn.jsx)("span",{className:"status-badge ".concat(E(e.status)),children:e.status}),(0,Kn.jsx)("span",{className:"contract-date",children:T(e.createdAt)})]},e._id)),t.length>5&&(0,Kn.jsxs)("div",{className:"more-contracts",children:["+",t.length-5," contratos m\xe1s"]})]})),e.profiles.length>0&&(0,Kn.jsxs)(Kn.Fragment,{children:[(0,Kn.jsx)("h4",{children:"Perfiles de Plantilla"}),(0,Kn.jsx)("div",{className:"profiles-list",children:e.profiles.map(e=>{var t;return(0,Kn.jsxs)("div",{className:"profile-item",children:[(0,Kn.jsx)("span",{className:"profile-template",children:null===(t=e.template)||void 0===t?void 0:t.name}),(0,Kn.jsx)("span",{className:"profile-role",children:e.role_label||e.role_in_template}),(0,Kn.jsx)("span",{className:"profile-complete ".concat(e.is_complete?"complete":"incomplete"),children:e.is_complete?"\u2713 Completo":"\u25cb Incompleto"})]},e._id)})})]})]})})})]},e.supplier._id);var t})})]}),0===e.length&&!l&&(0,Kn.jsxs)("div",{className:"empty-state",children:[(0,Kn.jsx)("h3",{children:"No se encontraron terceros"}),(0,Kn.jsx)("p",{children:"Ajusta los filtros de b\xfasqueda o crea nuevos terceros"})]})]}),v&&(0,Kn.jsx)("div",{className:"modal-overlay",onClick:k,children:(0,Kn.jsxs)("div",{className:"modal-detail",onClick:e=>e.stopPropagation(),children:[(0,Kn.jsxs)("div",{className:"modal-header",children:[(0,Kn.jsx)("h2",{children:"Detalle de Contratos"}),(0,Kn.jsx)("button",{className:"btn-close",onClick:k,children:"\u2715"})]}),j?(0,Kn.jsxs)("div",{className:"loading-state",children:[(0,Kn.jsx)("div",{className:"spinner"}),(0,Kn.jsx)("p",{children:"Cargando..."})]}):y?(0,Kn.jsxs)("div",{className:"modal-content",children:[(0,Kn.jsxs)("div",{className:"detail-section",children:[(0,Kn.jsx)("h3",{children:"Informaci\xf3n del Tercero"}),(0,Kn.jsxs)("div",{className:"supplier-detail-card",children:[(0,Kn.jsxs)("div",{className:"detail-row",children:[(0,Kn.jsx)("span",{className:"label",children:"Nombre:"}),(0,Kn.jsx)("span",{className:"value",children:y.supplier.legal_name})]}),(0,Kn.jsxs)("div",{className:"detail-row",children:[(0,Kn.jsx)("span",{className:"label",children:"Identificaci\xf3n:"}),(0,Kn.jsxs)("span",{className:"value",children:[y.supplier.identification_type," ",y.supplier.identification_number]})]}),y.supplier.email&&(0,Kn.jsxs)("div",{className:"detail-row",children:[(0,Kn.jsx)("span",{className:"label",children:"Email:"}),(0,Kn.jsx)("span",{className:"value",children:y.supplier.email})]}),y.supplier.phone&&(0,Kn.jsxs)("div",{className:"detail-row",children:[(0,Kn.jsx)("span",{className:"label",children:"Tel\xe9fono:"}),(0,Kn.jsx)("span",{className:"value",children:y.supplier.phone})]})]})]}),(0,Kn.jsxs)("div",{className:"detail-section",children:[(0,Kn.jsx)("h3",{children:"Estad\xedsticas"}),(0,Kn.jsxs)("div",{className:"stats-grid",children:[(0,Kn.jsxs)("div",{className:"stat-item",children:[(0,Kn.jsx)("span",{className:"stat-number",children:y.stats.total_contracts}),(0,Kn.jsx)("span",{className:"stat-text",children:"Contratos Totales"})]}),Object.entries(y.stats.by_status).map(e=>{let[t,a]=e;return(0,Kn.jsxs)("div",{className:"stat-item",children:[(0,Kn.jsx)("span",{className:"stat-number",children:a}),(0,Kn.jsx)("span",{className:"stat-text",children:t})]},t)})]})]}),(0,Kn.jsxs)("div",{className:"detail-section",children:[(0,Kn.jsxs)("h3",{children:["Lista de Contratos (",y.contracts.length,")"]}),(0,Kn.jsx)("div",{className:"contracts-detail-list",children:0===y.contracts.length?(0,Kn.jsx)("p",{className:"no-data",children:"No hay contratos asociados"}):y.contracts.map(e=>{var t;return(0,Kn.jsxs)("div",{className:"contract-detail-card",children:[(0,Kn.jsxs)("div",{className:"contract-header",children:[(0,Kn.jsx)("span",{className:"contract-number",children:e.contract_number}),(0,Kn.jsx)("span",{className:"status-badge ".concat(E(e.status)),children:e.status})]}),(0,Kn.jsxs)("div",{className:"contract-body",children:[e.title&&(0,Kn.jsx)("p",{className:"contract-title",children:e.title}),(0,Kn.jsxs)("div",{className:"contract-meta",children:[(0,Kn.jsxs)("span",{children:["Plantilla: ",(null===(t=e.template)||void 0===t?void 0:t.name)||"N/A"]}),(0,Kn.jsxs)("span",{children:["Fecha: ",T(e.createdAt)]}),e.generated_by&&(0,Kn.jsxs)("span",{children:["Generado por: ",e.generated_by.name]})]})]})]},e._id)})})]}),y.profiles.length>0&&(0,Kn.jsxs)("div",{className:"detail-section",children:[(0,Kn.jsxs)("h3",{children:["Perfiles de Plantilla (",y.profiles.length,")"]}),(0,Kn.jsx)("div",{className:"profiles-detail-list",children:y.profiles.map(e=>{var t;return(0,Kn.jsxs)("div",{className:"profile-detail-card",children:[(0,Kn.jsx)("span",{className:"profile-template",children:null===(t=e.template)||void 0===t?void 0:t.name}),(0,Kn.jsx)("span",{className:"profile-role",children:e.role_label||e.role_in_template}),(0,Kn.jsx)("span",{className:"profile-status ".concat(e.is_complete?"complete":"incomplete"),children:e.is_complete?"Completo":"Incompleto"}),(0,Kn.jsxs)("span",{className:"profile-usage",children:["Usado ",e.usage_count," veces"]})]},e._id)})})]})]}):(0,Kn.jsx)("div",{className:"error-state",children:(0,Kn.jsx)("p",{children:"Error al cargar los datos"})})]})})]})},kr=()=>{const[e,t]=(0,r.useState)([]),[a,n]=(0,r.useState)([]),[l,s]=(0,r.useState)(!0),[i,o]=(0,r.useState)(!1),[c,d]=(0,r.useState)(null),[p,m]=(0,r.useState)({name:"",description:"",icon:"document",color:"#3B82F6",template:"",requires_approval:!0,auto_assign_lawyer:!1}),[h,f]=(0,r.useState)([]);(0,r.useEffect)(()=>{g(),v()},[]);const g=async()=>{try{const e=localStorage.getItem("selectedCompanyId");console.log("\ud83d\udd0d Fetching categories with companyId:",e);const a=await Qn.get("/contract-categories");console.log("\u2705 Categories received:",a.data.length),t(a.data),0===a.data.length&&(console.warn("\u26a0\ufe0f  No se encontraron categor\xedas. Verifica:"),console.warn("   - selectedCompanyId en localStorage:",e),console.warn("   - Que el usuario tenga acceso a la empresa"))}catch(l){var e,a,n,r;console.error("\u274c Error fetching categories:",l),console.error("   Response:",null===(e=l.response)||void 0===e?void 0:e.data),console.error("   Status:",null===(a=l.response)||void 0===a?void 0:a.status),alert((null===(n=l.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.error)||"Error al cargar las categor\xedas")}finally{s(!1)}},v=async()=>{try{const e=await Qn.get("/templates");n(e.data)}catch(e){console.error("Error fetching templates:",e)}},x=(e,t,a)=>{const n=[...h];n[e]=u(u({},n[e]),{},{[t]:a}),f(n)},y=(e,t)=>{if("up"===t&&0===e||"down"===t&&e===h.length-1)return;const a="up"===t?e-1:e+1,n=[...h];[n[e],n[a]]=[n[a],n[e]],n.forEach((e,t)=>{e.order=t+1}),f(n)};return l?(0,Kn.jsx)("div",{className:"loading",children:"Cargando categor\xedas..."}):(0,Kn.jsxs)("div",{className:"category-management",children:[(0,Kn.jsxs)("div",{className:"page-header",children:[(0,Kn.jsx)("h1",{children:"Gesti\xf3n de Categor\xedas de Contratos"}),(0,Kn.jsx)("button",{className:"btn-primary",onClick:()=>{d(null),m({name:"",description:"",icon:"document",color:"#3B82F6",template:"",requires_approval:!0,auto_assign_lawyer:!1}),f([]),o(!0)},children:"Nueva Categor\xeda"})]}),(0,Kn.jsx)("div",{className:"categories-grid",children:0===e.length?(0,Kn.jsxs)("div",{className:"empty-state",children:[(0,Kn.jsx)("h3",{children:"No hay categor\xedas"}),(0,Kn.jsx)("p",{children:"Crea la primera categor\xeda para comenzar"})]}):e.map(e=>(0,Kn.jsxs)("div",{className:"category-card",style:{borderLeftColor:e.color},children:[(0,Kn.jsxs)("div",{className:"category-header",children:[(0,Kn.jsx)("div",{className:"category-icon",style:{backgroundColor:e.color+"20",color:e.color},children:"\ud83d\udccb"}),(0,Kn.jsx)("h3",{children:e.name})]}),(0,Kn.jsx)("p",{className:"category-description",children:e.description}),(0,Kn.jsxs)("div",{className:"category-meta",children:[(0,Kn.jsxs)("span",{className:"badge",children:[e.questionnaire.length," preguntas"]}),e.requires_approval&&(0,Kn.jsx)("span",{className:"badge badge-warning",children:"Requiere aprobaci\xf3n"}),e.template&&(0,Kn.jsx)("span",{className:"badge badge-info",children:e.template.name})]}),(0,Kn.jsxs)("div",{className:"category-actions",children:[(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>(e=>{var t;d(e),m({name:e.name,description:e.description,icon:e.icon,color:e.color,template:(null===(t=e.template)||void 0===t?void 0:t._id)||"",requires_approval:e.requires_approval,auto_assign_lawyer:e.auto_assign_lawyer}),f([...e.questionnaire]),o(!0)})(e),children:"Editar"}),(0,Kn.jsx)("button",{className:"btn-danger",onClick:()=>(async e=>{if(window.confirm("\xbfEst\xe1 seguro de que desea desactivar esta categor\xeda?"))try{await Qn.delete("/contract-categories/".concat(e)),await g()}catch(t){console.error("Error deleting category:",t),alert("Error al eliminar la categor\xeda")}})(e._id),children:"Desactivar"})]})]},e._id))}),i&&(0,Kn.jsx)("div",{className:"modal-overlay",children:(0,Kn.jsxs)("div",{className:"modal modal-large",children:[(0,Kn.jsx)("h3",{children:c?"Editar Categor\xeda":"Nueva Categor\xeda"}),(0,Kn.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=u(u({},p),{},{questionnaire:h.sort((e,t)=>e.order-t.order)});c?await Qn.put("/contract-categories/".concat(c._id),e):await Qn.post("/contract-categories",e),await g(),o(!1)}catch(n){var t,a;console.error("Error saving category:",n),alert((null===(t=n.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||"Error al guardar la categor\xeda")}},children:[(0,Kn.jsxs)("div",{className:"form-row",children:[(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Nombre de la Categor\xeda *"}),(0,Kn.jsx)("input",{type:"text",value:p.name,onChange:e=>m(u(u({},p),{},{name:e.target.value})),required:!0,placeholder:"Ej: Contrato Laboral, NDA, Contrato Comercial"})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Color"}),(0,Kn.jsx)("input",{type:"color",value:p.color,onChange:e=>m(u(u({},p),{},{color:e.target.value}))})]})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Descripci\xf3n *"}),(0,Kn.jsx)("textarea",{value:p.description,onChange:e=>m(u(u({},p),{},{description:e.target.value})),required:!0,rows:3,placeholder:"Describe el tipo de contratos de esta categor\xeda"})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Plantilla Asociada"}),(0,Kn.jsxs)("select",{value:p.template,onChange:e=>m(u(u({},p),{},{template:e.target.value})),children:[(0,Kn.jsx)("option",{value:"",children:"Seleccionar plantilla..."}),a.map(e=>(0,Kn.jsx)("option",{value:e._id,children:e.name},e._id))]})]}),(0,Kn.jsxs)("div",{className:"form-row",children:[(0,Kn.jsx)("div",{className:"form-group checkbox-group",children:(0,Kn.jsxs)("label",{children:[(0,Kn.jsx)("input",{type:"checkbox",checked:p.requires_approval,onChange:e=>m(u(u({},p),{},{requires_approval:e.target.checked}))}),"Requiere aprobaci\xf3n de abogado"]})}),(0,Kn.jsx)("div",{className:"form-group checkbox-group",children:(0,Kn.jsxs)("label",{children:[(0,Kn.jsx)("input",{type:"checkbox",checked:p.auto_assign_lawyer,onChange:e=>m(u(u({},p),{},{auto_assign_lawyer:e.target.checked}))}),"Auto-asignar abogado disponible"]})})]}),(0,Kn.jsx)("hr",{}),(0,Kn.jsxs)("div",{className:"questionnaire-section",children:[(0,Kn.jsxs)("div",{className:"section-header",children:[(0,Kn.jsx)("h4",{children:"Cuestionario"}),(0,Kn.jsx)("button",{type:"button",className:"btn-secondary btn-sm",onClick:()=>{const e={question:"",field_name:"",type:"text",required:!0,order:h.length+1};f([...h,e])},children:"+ Agregar Pregunta"})]}),h.map((e,t)=>(0,Kn.jsxs)("div",{className:"question-editor",children:[(0,Kn.jsxs)("div",{className:"question-header",children:[(0,Kn.jsxs)("span",{className:"question-number",children:["Pregunta ",t+1]}),(0,Kn.jsxs)("div",{className:"question-controls",children:[(0,Kn.jsx)("button",{type:"button",onClick:()=>y(t,"up"),disabled:0===t,className:"btn-icon",children:"\u2191"}),(0,Kn.jsx)("button",{type:"button",onClick:()=>y(t,"down"),disabled:t===h.length-1,className:"btn-icon",children:"\u2193"}),(0,Kn.jsx)("button",{type:"button",onClick:()=>(e=>{f(h.filter((t,a)=>a!==e))})(t),className:"btn-icon btn-danger",children:"\ud83d\uddd1\ufe0f"})]})]}),(0,Kn.jsxs)("div",{className:"form-row",children:[(0,Kn.jsxs)("div",{className:"form-group flex-2",children:[(0,Kn.jsx)("label",{children:"Pregunta"}),(0,Kn.jsx)("input",{type:"text",value:e.question,onChange:e=>x(t,"question",e.target.value),placeholder:"\xbfCu\xe1l es...?"})]}),(0,Kn.jsxs)("div",{className:"form-group flex-1",children:[(0,Kn.jsx)("label",{children:"Nombre del campo"}),(0,Kn.jsx)("input",{type:"text",value:e.field_name,onChange:e=>x(t,"field_name",e.target.value),placeholder:"nombre_campo"})]})]}),(0,Kn.jsxs)("div",{className:"form-row",children:[(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Tipo de campo"}),(0,Kn.jsxs)("select",{value:e.type,onChange:e=>x(t,"type",e.target.value),children:[(0,Kn.jsx)("option",{value:"text",children:"Texto"}),(0,Kn.jsx)("option",{value:"textarea",children:"Texto largo"}),(0,Kn.jsx)("option",{value:"number",children:"N\xfamero"}),(0,Kn.jsx)("option",{value:"date",children:"Fecha"}),(0,Kn.jsx)("option",{value:"email",children:"Email"}),(0,Kn.jsx)("option",{value:"phone",children:"Tel\xe9fono"}),(0,Kn.jsx)("option",{value:"select",children:"Selecci\xf3n \xfanica"}),(0,Kn.jsx)("option",{value:"multiselect",children:"Selecci\xf3n m\xfaltiple"}),(0,Kn.jsx)("option",{value:"radio",children:"Radio buttons"}),(0,Kn.jsx)("option",{value:"checkbox",children:"Checkbox"})]})]}),(0,Kn.jsx)("div",{className:"form-group checkbox-group",children:(0,Kn.jsxs)("label",{children:[(0,Kn.jsx)("input",{type:"checkbox",checked:e.required,onChange:e=>x(t,"required",e.target.checked)}),"Campo obligatorio"]})})]}),["select","multiselect","radio"].includes(e.type)&&(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Opciones (una por l\xednea)"}),(0,Kn.jsx)("textarea",{value:(e.options||[]).join("\n"),onChange:e=>x(t,"options",e.target.value.split("\n").filter(e=>e.trim())),rows:3,placeholder:"Opci\xf3n 1\nOpci\xf3n 2\nOpci\xf3n 3"})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Texto de ayuda (opcional)"}),(0,Kn.jsx)("input",{type:"text",value:e.help_text||"",onChange:e=>x(t,"help_text",e.target.value),placeholder:"Informaci\xf3n adicional para el usuario"})]})]},t)),0===h.length&&(0,Kn.jsxs)("div",{className:"empty-questionnaire",children:[(0,Kn.jsx)("p",{children:"No hay preguntas en el cuestionario"}),(0,Kn.jsx)("p",{className:"text-muted",children:'Haz clic en "Agregar Pregunta" para comenzar'})]})]}),(0,Kn.jsxs)("div",{className:"modal-actions",children:[(0,Kn.jsx)("button",{type:"button",className:"btn-secondary",onClick:()=>o(!1),children:"Cancelar"}),(0,Kn.jsxs)("button",{type:"submit",className:"btn-primary",children:[c?"Actualizar":"Crear"," Categor\xeda"]})]})]})]})})]})},Er=()=>{const e=me(),t=ge(),a=()=>{const t=new URLSearchParams(e.search).get("tab");return"terceros"===t||"tipos"===t||"contratos"===t||"categorias"===t?t:"terceros"},[n,l]=(0,r.useState)(a()),s=e=>{l(e),t("?tab=".concat(e),{replace:!0})};(0,r.useEffect)(()=>{const e=a();e!==n&&l(e)},[e.search]);return(0,Kn.jsxs)("div",{className:"third-parties-hub",children:[(0,Kn.jsxs)("div",{className:"hub-header",children:[(0,Kn.jsx)("h1",{children:"Terceros"}),(0,Kn.jsx)("p",{children:"Gestion integral de terceros, contratos y categorias"})]}),(0,Kn.jsxs)("div",{className:"hub-tabs",children:[(0,Kn.jsxs)("button",{className:"hub-tab ".concat("terceros"===n?"active":""),onClick:()=>s("terceros"),children:[(0,Kn.jsx)("span",{className:"tab-icon",children:"\ud83d\udc65"}),(0,Kn.jsx)("span",{className:"tab-text",children:"Gestion de Terceros"})]}),(0,Kn.jsxs)("button",{className:"hub-tab ".concat("tipos"===n?"active":""),onClick:()=>s("tipos"),children:[(0,Kn.jsx)("span",{className:"tab-icon",children:"\u2699\ufe0f"}),(0,Kn.jsx)("span",{className:"tab-text",children:"Tipos de Terceros"})]}),(0,Kn.jsxs)("button",{className:"hub-tab ".concat("contratos"===n?"active":""),onClick:()=>s("contratos"),children:[(0,Kn.jsx)("span",{className:"tab-icon",children:"\ud83d\udcc4"}),(0,Kn.jsx)("span",{className:"tab-text",children:"Contratos por Tercero"})]}),(0,Kn.jsxs)("button",{className:"hub-tab ".concat("categorias"===n?"active":""),onClick:()=>s("categorias"),children:[(0,Kn.jsx)("span",{className:"tab-icon",children:"\ud83c\udff7\ufe0f"}),(0,Kn.jsx)("span",{className:"tab-text",children:"Categorias de Contratos"})]})]}),(0,Kn.jsx)("div",{className:"hub-content",children:(()=>{switch(n){case"terceros":default:return(0,Kn.jsx)(wr,{});case"tipos":return(0,Kn.jsx)(Cr,{});case"contratos":return(0,Kn.jsx)(Sr,{});case"categorias":return(0,Kn.jsx)(kr,{})}})()})]})},Tr=e=>{let{questions:t,answers:a,onChange:n,errors:r={},disabled:l=!1}=e;const s=e=>{var t,s,i,o,c;const d=a[e.field_name]||"",p=r[e.field_name],m={disabled:l,required:e.required,placeholder:e.placeholder||""};switch(e.type){case"text":case"email":case"phone":return(0,Kn.jsx)("input",u(u({type:e.type,value:d,onChange:t=>n(e.field_name,t.target.value)},m),{},{className:p?"input-error":""}));case"textarea":return(0,Kn.jsx)("textarea",u(u({value:d,onChange:t=>n(e.field_name,t.target.value),rows:4},m),{},{className:p?"input-error":""}));case"number":return(0,Kn.jsx)("input",u(u({type:"number",value:d,onChange:t=>{const a=t.target.value;n(e.field_name,a?parseInt(a,10):"")},min:null===(t=e.validation)||void 0===t?void 0:t.min,max:null===(s=e.validation)||void 0===s?void 0:s.max,step:"1"},m),{},{className:p?"input-error":""}));case"date":return(0,Kn.jsx)("input",u(u({type:"date",value:d,onChange:t=>n(e.field_name,t.target.value)},m),{},{className:p?"input-error":""}));case"select":return(0,Kn.jsxs)("select",{value:d,onChange:t=>n(e.field_name,t.target.value),disabled:l,required:e.required,className:p?"input-error":"",children:[(0,Kn.jsx)("option",{value:"",children:"Seleccionar..."}),null===(i=e.options)||void 0===i?void 0:i.map((e,t)=>(0,Kn.jsx)("option",{value:e,children:e},t))]});case"multiselect":return(0,Kn.jsx)("div",{className:"multiselect",children:null===(o=e.options)||void 0===o?void 0:o.map((t,a)=>(0,Kn.jsxs)("label",{className:"checkbox-label",children:[(0,Kn.jsx)("input",{type:"checkbox",checked:Array.isArray(d)&&d.includes(t),onChange:a=>{const r=Array.isArray(d)?[...d]:[];a.target.checked?n(e.field_name,[...r,t]):n(e.field_name,r.filter(e=>e!==t))},disabled:l}),(0,Kn.jsx)("span",{children:t})]},a))});case"radio":return(0,Kn.jsx)("div",{className:"radio-group",children:null===(c=e.options)||void 0===c?void 0:c.map((t,a)=>(0,Kn.jsxs)("label",{className:"radio-label",children:[(0,Kn.jsx)("input",{type:"radio",name:e.field_name,value:t,checked:d===t,onChange:t=>n(e.field_name,t.target.value),disabled:l,required:e.required}),(0,Kn.jsx)("span",{children:t})]},a))});case"checkbox":return(0,Kn.jsxs)("label",{className:"checkbox-label single",children:[(0,Kn.jsx)("input",{type:"checkbox",checked:!!d,onChange:t=>n(e.field_name,t.target.checked),disabled:l,required:e.required}),(0,Kn.jsx)("span",{children:e.placeholder||"Acepto"})]});default:return(0,Kn.jsx)("input",{type:"text",value:d,disabled:!0})}};return(0,Kn.jsx)("div",{className:"dynamic-questionnaire",children:t.map((e,t)=>(0,Kn.jsxs)("div",{className:"question-group",children:[(0,Kn.jsxs)("label",{className:"question-label",children:[e.question,e.required&&(0,Kn.jsx)("span",{className:"required",children:"*"})]}),e.help_text&&(0,Kn.jsx)("p",{className:"help-text",children:e.help_text}),s(e),r[e.field_name]&&(0,Kn.jsx)("span",{className:"error-message",children:r[e.field_name]})]},e.field_name))})},Pr=()=>{const[e,t]=(0,r.useState)([]),[a,n]=(0,r.useState)(null),[l,s]=(0,r.useState)(!0),[i,o]=(0,r.useState)(!1),[c,d]=(0,r.useState)(""),[p,m]=(0,r.useState)("medium"),[h,f]=(0,r.useState)({}),[g,v]=(0,r.useState)({});(0,r.useEffect)(()=>{x()},[]);const x=async()=>{try{const e=await Qn.get("/contract-categories");t(e.data)}catch(e){console.error("Error fetching categories:",e)}finally{s(!1)}},y=()=>{n(null),f({}),v({})};return l?(0,Kn.jsx)("div",{className:"loading",children:"Cargando categorias..."}):(0,Kn.jsx)("div",{className:"new-request-tab",children:a?(0,Kn.jsxs)("div",{className:"request-form-container",children:[(0,Kn.jsxs)("div",{className:"form-header",children:[(0,Kn.jsx)("button",{className:"btn-back",onClick:y,children:"\u2190 Cambiar categoria"}),(0,Kn.jsx)("div",{className:"selected-category",children:(0,Kn.jsx)("div",{className:"category-badge",style:{backgroundColor:a.color},children:a.name})})]}),(0,Kn.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return c&&""!==c.trim()||(e.title="El titulo es requerido"),!!a&&(a.questionnaire.forEach(t=>{const a=h[t.field_name];t.required&&(!a||""===a||Array.isArray(a)&&0===a.length)&&(e[t.field_name]="".concat(t.question," es obligatorio")),a&&"email"===t.type&&!a.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/)&&(e[t.field_name]="Email invalido")}),v(e),0===Object.keys(e).length)})()){o(!0);try{await Qn.post("/contract-requests-v2",{category_id:a._id,title:c.trim(),questionnaire_answers:h,field_data:h,priority:p}),alert("Solicitud enviada exitosamente!"),n(null),d(""),f({}),m("medium"),v({})}catch(l){var t,r;alert((null===(t=l.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.error)||"Error al enviar la solicitud")}finally{o(!1)}}},children:[(0,Kn.jsxs)("div",{className:"form-section",children:[(0,Kn.jsx)("h3",{children:"Informacion General"}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsxs)("label",{children:["Titulo de la Solicitud ",(0,Kn.jsx)("span",{className:"required",children:"*"})]}),(0,Kn.jsx)("input",{type:"text",value:c,onChange:e=>{if(d(e.target.value),g.title){const e=u({},g);delete e.title,v(e)}},placeholder:"Ej: ".concat(a.name," - Nombre del Cliente"),className:g.title?"input-error":""}),g.title&&(0,Kn.jsx)("span",{className:"error-message",children:g.title})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Prioridad"}),(0,Kn.jsxs)("select",{value:p,onChange:e=>m(e.target.value),children:[(0,Kn.jsx)("option",{value:"low",children:"Baja"}),(0,Kn.jsx)("option",{value:"medium",children:"Media"}),(0,Kn.jsx)("option",{value:"high",children:"Alta"}),(0,Kn.jsx)("option",{value:"urgent",children:"Urgente"})]})]})]}),(0,Kn.jsxs)("div",{className:"form-section",children:[(0,Kn.jsx)("h3",{children:"Informacion Especifica del Contrato"}),(0,Kn.jsx)(Tr,{questions:a.questionnaire,answers:h,onChange:(e,t)=>{if(f(u(u({},h),{},{[e]:t})),g[e]){const t=u({},g);delete t[e],v(t)}},errors:g})]}),(0,Kn.jsxs)("div",{className:"form-actions",children:[(0,Kn.jsx)("button",{type:"button",className:"btn-secondary",onClick:y,children:"Cancelar"}),(0,Kn.jsx)("button",{type:"submit",className:"btn-primary",disabled:i,children:i?"Enviando...":"Enviar Solicitud"})]})]})]}):(0,Kn.jsxs)("div",{className:"categories-selection",children:[(0,Kn.jsx)("h2",{children:"Selecciona el tipo de contrato"}),0===e.length?(0,Kn.jsxs)("div",{className:"empty-state",children:[(0,Kn.jsx)("h3",{children:"No hay categorias disponibles"}),(0,Kn.jsx)("p",{children:"Contacta a un administrador para crear categorias de contratos"})]}):(0,Kn.jsx)("div",{className:"categories-grid",children:e.map(e=>(0,Kn.jsxs)("div",{className:"category-option",style:{borderColor:e.color},onClick:()=>(e=>{n(e),f({}),v({}),d("".concat(e.name," - "))})(e),children:[(0,Kn.jsx)("div",{className:"category-icon",style:{backgroundColor:e.color+"20",color:e.color},children:e.icon||"\ud83d\udccb"}),(0,Kn.jsx)("h3",{children:e.name}),(0,Kn.jsx)("p",{children:e.description}),(0,Kn.jsx)("div",{className:"category-info",children:(0,Kn.jsxs)("span",{className:"badge",children:[e.questionnaire.length," preguntas"]})})]},e._id))})]})})},Rr=()=>{const[e,t]=(0,r.useState)([]),[a,n]=(0,r.useState)(null),[l,s]=(0,r.useState)(!0),[i,o]=(0,r.useState)("all");(0,r.useEffect)(()=>{c()},[i]);const c=async()=>{try{const e="all"!==i?{status:i}:{},a=await Qn.get("/contract-requests-v2",{params:e});t(a.data)}catch(e){console.error("Error fetching requests:",e)}finally{s(!1)}},d=e=>{const t={pending:{bg:"#fef3c7",color:"#92400e",text:"Pendiente",icon:"\u23f3"},in_review:{bg:"#dbeafe",color:"#1e40af",text:"En Revision",icon:"\ud83d\udc41\ufe0f"},approved:{bg:"#d1fae5",color:"#065f46",text:"Aprobado",icon:"\u2705"},rejected:{bg:"#fee2e2",color:"#991b1b",text:"Rechazado",icon:"\u274c"},completed:{bg:"#d1fae5",color:"#065f46",text:"Completado",icon:"\ud83c\udf89"}},a=t[e]||t.pending;return(0,Kn.jsxs)("span",{className:"status-badge",style:{background:a.bg,color:a.color},children:[a.icon," ",a.text]})},u=e=>{const t={low:{bg:"#e5e7eb",color:"#374151",text:"Baja"},medium:{bg:"#fef3c7",color:"#92400e",text:"Media"},high:{bg:"#fed7aa",color:"#9a3412",text:"Alta"},urgent:{bg:"#fecaca",color:"#991b1b",text:"Urgente"}},a=t[e]||t.medium;return(0,Kn.jsx)("span",{className:"priority-badge",style:{background:a.bg,color:a.color},children:a.text})};return l?(0,Kn.jsx)("div",{className:"loading",children:"Cargando solicitudes..."}):(0,Kn.jsxs)("div",{className:"my-requests-tab",children:[(0,Kn.jsxs)("div",{className:"filter-bar",children:[(0,Kn.jsx)("button",{className:"all"===i?"filter-btn active":"filter-btn",onClick:()=>o("all"),children:"Todas"}),(0,Kn.jsx)("button",{className:"pending"===i?"filter-btn active":"filter-btn",onClick:()=>o("pending"),children:"\u23f3 Pendientes"}),(0,Kn.jsx)("button",{className:"in_review"===i?"filter-btn active":"filter-btn",onClick:()=>o("in_review"),children:"\ud83d\udc41\ufe0f En Revision"}),(0,Kn.jsx)("button",{className:"approved"===i?"filter-btn active":"filter-btn",onClick:()=>o("approved"),children:"\u2705 Aprobadas"}),(0,Kn.jsx)("button",{className:"rejected"===i?"filter-btn active":"filter-btn",onClick:()=>o("rejected"),children:"\u274c Rechazadas"})]}),0===e.length?(0,Kn.jsxs)("div",{className:"empty-state",children:[(0,Kn.jsx)("h3",{children:"No hay solicitudes"}),(0,Kn.jsx)("p",{children:"all"===i?"Aun no has creado ninguna solicitud":'No tienes solicitudes con estado "'.concat(i,'"')})]}):(0,Kn.jsx)("div",{className:"requests-grid",children:e.map(e=>(0,Kn.jsxs)("div",{className:"request-card","data-status":e.status,children:[(0,Kn.jsxs)("div",{className:"card-header",children:[(0,Kn.jsx)("div",{className:"category-badge",style:{backgroundColor:e.category.color+"20",color:e.category.color},children:e.category.name}),d(e.status)]}),(0,Kn.jsx)("h3",{className:"request-title",children:e.title}),(0,Kn.jsxs)("div",{className:"request-meta",children:[(0,Kn.jsxs)("div",{className:"meta-item",children:[(0,Kn.jsx)("span",{className:"meta-label",children:"Prioridad:"}),u(e.priority)]}),(0,Kn.jsxs)("div",{className:"meta-item",children:[(0,Kn.jsx)("span",{className:"meta-label",children:"Fecha:"}),(0,Kn.jsx)("span",{children:new Date(e.createdAt).toLocaleDateString("es-ES")})]})]}),e.rejection_reason&&(0,Kn.jsxs)("div",{className:"rejection-notice",children:[(0,Kn.jsx)("strong",{children:"Razon del rechazo:"})," ",e.rejection_reason]}),e.generated_contract&&(0,Kn.jsxs)("div",{className:"contract-notice",children:[(0,Kn.jsx)("strong",{children:"\u2705 Contrato:"})," ",e.generated_contract.contract_number]}),(0,Kn.jsx)("div",{className:"card-actions",children:(0,Kn.jsx)("button",{className:"btn-view",onClick:()=>n(e),children:"Ver Detalles"})})]},e._id))}),a&&(0,Kn.jsx)("div",{className:"modal-overlay",onClick:()=>n(null),children:(0,Kn.jsxs)("div",{className:"modal modal-large",onClick:e=>e.stopPropagation(),children:[(0,Kn.jsxs)("div",{className:"modal-header",children:[(0,Kn.jsxs)("div",{children:[(0,Kn.jsx)("h3",{children:a.title}),(0,Kn.jsx)("div",{style:{marginTop:"0.5rem"},children:d(a.status)})]}),(0,Kn.jsx)("button",{className:"modal-close",onClick:()=>n(null),children:"\xd7"})]}),(0,Kn.jsxs)("div",{className:"modal-body",children:[(0,Kn.jsxs)("div",{className:"detail-section",children:[(0,Kn.jsx)("h4",{children:"Informacion General"}),(0,Kn.jsxs)("div",{className:"detail-grid",children:[(0,Kn.jsxs)("div",{children:[(0,Kn.jsx)("label",{children:"Categoria:"}),(0,Kn.jsx)("span",{children:a.category.name})]}),(0,Kn.jsxs)("div",{children:[(0,Kn.jsx)("label",{children:"Prioridad:"}),u(a.priority)]}),(0,Kn.jsxs)("div",{children:[(0,Kn.jsx)("label",{children:"Fecha:"}),(0,Kn.jsx)("span",{children:new Date(a.createdAt).toLocaleDateString("es-ES")})]})]})]}),(0,Kn.jsxs)("div",{className:"detail-section",children:[(0,Kn.jsx)("h4",{children:"Informacion Proporcionada"}),(0,Kn.jsx)("div",{className:"answers-list",children:Object.entries(a.questionnaire_answers).map(e=>{let[t,a]=e;return(0,Kn.jsxs)("div",{className:"answer-item",children:[(0,Kn.jsxs)("label",{children:[t.replace(/_/g," "),":"]}),(0,Kn.jsx)("span",{children:Array.isArray(a)?a.join(", "):"boolean"===typeof a?a?"Si":"No":a||"N/A"})]},t)})})]}),a.legal_notes&&(0,Kn.jsxs)("div",{className:"detail-section",children:[(0,Kn.jsx)("h4",{children:"Notas Legales"}),(0,Kn.jsx)("p",{children:a.legal_notes})]})]}),(0,Kn.jsx)("div",{className:"modal-footer",children:(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>n(null),children:"Cerrar"})})]})})]})},Lr=()=>{const[e,t]=(0,r.useState)([]),[a,n]=(0,r.useState)("pending"),[l,s]=(0,r.useState)(!0),[i,o]=(0,r.useState)(null),[c,d]=(0,r.useState)("");(0,r.useEffect)(()=>{u()},[a]);const u=async()=>{try{const e="pending"===a?"/supplier-approvals/pending":"/supplier-approvals/all",n=await Qn.get(e);t(n.data)}catch(e){console.error("Error fetching suppliers:",e)}finally{s(!1)}},p=e=>{const t={pending:{bg:"#fef3c7",color:"#92400e",text:"Pendiente"},approved:{bg:"#d1fae5",color:"#065f46",text:"Aprobado"},rejected:{bg:"#fee2e2",color:"#991b1b",text:"Rechazado"}},a=t[e]||t.pending;return(0,Kn.jsx)("span",{className:"status-badge",style:{background:a.bg,color:a.color},children:a.text})};return l?(0,Kn.jsx)("div",{className:"loading",children:"Cargando terceros..."}):(0,Kn.jsxs)("div",{className:"supplier-approvals-tab",children:[(0,Kn.jsxs)("div",{className:"filter-buttons",children:[(0,Kn.jsx)("button",{onClick:()=>n("pending"),className:"pending"===a?"btn-primary":"btn-secondary",children:"Pendientes"}),(0,Kn.jsx)("button",{onClick:()=>n("all"),className:"all"===a?"btn-primary":"btn-secondary",children:"Todos"})]}),0===e.length?(0,Kn.jsxs)("div",{className:"empty-state",children:[(0,Kn.jsxs)("h3",{children:["No hay terceros ","pending"===a?"pendientes":""]}),(0,Kn.jsx)("p",{children:"pending"===a?"Todos los terceros han sido revisados":"No hay terceros registrados"})]}):(0,Kn.jsx)("div",{className:"approvals-table-wrapper",children:(0,Kn.jsxs)("table",{className:"approvals-table",children:[(0,Kn.jsx)("thead",{children:(0,Kn.jsxs)("tr",{children:[(0,Kn.jsx)("th",{children:"Tercero"}),(0,Kn.jsx)("th",{children:"Identificacion"}),(0,Kn.jsx)("th",{children:"Representante"}),(0,Kn.jsx)("th",{children:"Contacto"}),(0,Kn.jsx)("th",{children:"Creado Por"}),(0,Kn.jsx)("th",{children:"Estado"}),(0,Kn.jsx)("th",{children:"Acciones"})]})}),(0,Kn.jsx)("tbody",{children:e.map(e=>(0,Kn.jsxs)("tr",{className:"approval-row status-".concat(e.approval_status),children:[(0,Kn.jsx)("td",{children:(0,Kn.jsxs)("div",{className:"supplier-name-info",children:[(0,Kn.jsx)("strong",{children:e.legal_name}),e.rejection_reason&&(0,Kn.jsxs)("small",{className:"inline-rejection",children:["Rechazado: ",e.rejection_reason]})]})}),(0,Kn.jsx)("td",{children:(0,Kn.jsxs)("div",{className:"id-badge",children:[(0,Kn.jsx)("span",{className:"id-type",children:e.identification_type}),(0,Kn.jsx)("span",{className:"id-number",children:e.identification_number})]})}),(0,Kn.jsx)("td",{children:e.legal_representative_name}),(0,Kn.jsx)("td",{children:(0,Kn.jsxs)("div",{className:"contact-info",children:[e.email&&(0,Kn.jsxs)("span",{className:"contact-item",children:["\ud83d\udce7 ",e.email]}),e.phone&&(0,Kn.jsxs)("span",{className:"contact-item",children:["\ud83d\udcde ",e.phone]}),!e.email&&!e.phone&&(0,Kn.jsx)("span",{className:"no-contact",children:"N/A"})]})}),(0,Kn.jsx)("td",{children:(0,Kn.jsxs)("div",{className:"creator-info",children:[(0,Kn.jsx)("span",{children:e.created_by.name}),(0,Kn.jsx)("small",{children:new Date(e.createdAt).toLocaleDateString("es-ES")})]})}),(0,Kn.jsx)("td",{children:p(e.approval_status)}),(0,Kn.jsx)("td",{children:(0,Kn.jsxs)("div",{className:"action-buttons",children:["pending"===e.approval_status&&!i&&(0,Kn.jsxs)(Kn.Fragment,{children:[(0,Kn.jsx)("button",{className:"btn-action btn-approve-action",onClick:()=>(async e=>{if(window.confirm("Aprobar este tercero?"))try{await Qn.post("/supplier-approvals/".concat(e,"/approve")),alert("Tercero aprobado exitosamente"),u()}catch(n){var t,a;alert((null===(t=n.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||"Error al aprobar")}})(e._id),title:"Aprobar",children:"\u2713"}),(0,Kn.jsx)("button",{className:"btn-action btn-reject-action",onClick:()=>o(e._id),title:"Rechazar",children:"\u2715"})]}),i===e._id&&(0,Kn.jsxs)("div",{className:"inline-rejection-form",children:[(0,Kn.jsx)("textarea",{value:c,onChange:e=>d(e.target.value),rows:2,placeholder:"Razon del rechazo...",className:"inline-textarea"}),(0,Kn.jsxs)("div",{className:"inline-buttons",children:[(0,Kn.jsx)("button",{className:"btn-action btn-danger-sm",onClick:()=>(async e=>{if(c.trim())try{await Qn.post("/supplier-approvals/".concat(e,"/reject"),{rejection_reason:c}),alert("Tercero rechazado"),o(null),d(""),u()}catch(n){var t,a;alert((null===(t=n.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||"Error al rechazar")}else alert("Debes proporcionar una razon del rechazo")})(e._id),children:"\u2713"}),(0,Kn.jsx)("button",{className:"btn-action btn-cancel-sm",onClick:()=>{o(null),d("")},children:"\u2715"})]})]})]})})]},e._id))})]})})]})},Ar=()=>{var e,t;const[a,n]=(0,r.useState)([]),[l,s]=(0,r.useState)(null),[i,o]=(0,r.useState)(!0),[c,d]=(0,r.useState)(""),[u,p]=(0,r.useState)("");(0,r.useEffect)(()=>{m()},[]);const m=async()=>{try{const e=await Qn.get("/contract-requests-v2");n(e.data)}catch(e){console.error("Error fetching requests:",e)}finally{o(!1)}},h=e=>{const t={pending:{bg:"#fef3c7",color:"#92400e",text:"Pendiente"},in_review:{bg:"#dbeafe",color:"#1e40af",text:"En Revision"},approved:{bg:"#d1fae5",color:"#065f46",text:"Aprobado"},rejected:{bg:"#fee2e2",color:"#991b1b",text:"Rechazado"},completed:{bg:"#d1fae5",color:"#065f46",text:"Completado"}},a=t[e]||t.pending;return(0,Kn.jsx)("span",{className:"status-badge",style:{background:a.bg,color:a.color},children:a.text})},f=e=>{const t={low:{bg:"#e5e7eb",color:"#374151",text:"Baja"},medium:{bg:"#fef3c7",color:"#92400e",text:"Media"},high:{bg:"#fed7aa",color:"#9a3412",text:"Alta"},urgent:{bg:"#fecaca",color:"#991b1b",text:"Urgente"}},a=t[e]||t.medium;return(0,Kn.jsx)("span",{className:"priority-badge",style:{background:a.bg,color:a.color},children:a.text})};return i?(0,Kn.jsx)("div",{className:"loading",children:"Cargando solicitudes..."}):(0,Kn.jsxs)("div",{className:"contract-approvals-tab",children:[0===a.length?(0,Kn.jsxs)("div",{className:"empty-state",children:[(0,Kn.jsx)("h3",{children:"No hay solicitudes"}),(0,Kn.jsx)("p",{children:"Las solicitudes apareceran aqui cuando sean creadas"})]}):(0,Kn.jsx)("div",{className:"requests-table-wrapper",children:(0,Kn.jsxs)("table",{className:"requests-table",children:[(0,Kn.jsx)("thead",{children:(0,Kn.jsxs)("tr",{children:[(0,Kn.jsx)("th",{children:"Solicitud"}),(0,Kn.jsx)("th",{children:"Categoria"}),(0,Kn.jsx)("th",{children:"Prioridad"}),(0,Kn.jsx)("th",{children:"Solicitante"}),(0,Kn.jsx)("th",{children:"Fecha"}),(0,Kn.jsx)("th",{children:"Asignado"}),(0,Kn.jsx)("th",{children:"Estado"}),(0,Kn.jsx)("th",{children:"Acciones"})]})}),(0,Kn.jsx)("tbody",{children:a.map(e=>{var t,a;return(0,Kn.jsxs)("tr",{className:"request-row status-".concat(e.status),children:[(0,Kn.jsx)("td",{children:(0,Kn.jsx)("strong",{children:e.title})}),(0,Kn.jsx)("td",{children:(0,Kn.jsx)("span",{className:"category-badge-compact",style:{background:e.category.color+"20",color:e.category.color},children:e.category.name})}),(0,Kn.jsx)("td",{children:f(e.priority)}),(0,Kn.jsx)("td",{children:(null===(t=e.requester)||void 0===t?void 0:t.name)||"N/A"}),(0,Kn.jsx)("td",{children:new Date(e.createdAt).toLocaleDateString("es-ES")}),(0,Kn.jsx)("td",{children:(null===(a=e.assigned_lawyer)||void 0===a?void 0:a.name)||(0,Kn.jsx)("span",{className:"not-assigned",children:"No asignado"})}),(0,Kn.jsx)("td",{children:h(e.status)}),(0,Kn.jsx)("td",{children:(0,Kn.jsxs)("div",{className:"action-buttons",children:["pending"===e.status&&(0,Kn.jsx)("button",{className:"btn-action btn-assign",onClick:()=>(async e=>{try{await Qn.post("/contract-requests-v2/".concat(e,"/assign"),{}),alert("Solicitud asignada a ti"),m()}catch(n){var t,a;alert((null===(t=n.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||"Error al asignar")}})(e._id),title:"Asignarme",children:"\ud83d\udc64+"}),(0,Kn.jsx)("button",{className:"btn-action btn-view",onClick:()=>s(e),title:"Ver detalles",children:"\ud83d\udc41\ufe0f"})]})})]},e._id)})})]})}),l&&(0,Kn.jsx)("div",{className:"modal-overlay",onClick:()=>s(null),children:(0,Kn.jsxs)("div",{className:"modal modal-large",onClick:e=>e.stopPropagation(),children:[(0,Kn.jsxs)("div",{className:"modal-header",children:[(0,Kn.jsx)("h3",{children:l.title}),(0,Kn.jsx)("button",{className:"modal-close",onClick:()=>s(null),children:"\xd7"})]}),(0,Kn.jsxs)("div",{className:"modal-body",children:[(0,Kn.jsxs)("div",{className:"request-detail-section",children:[(0,Kn.jsx)("h4",{children:"Informacion General"}),(0,Kn.jsxs)("div",{className:"detail-grid",children:[(0,Kn.jsxs)("div",{children:[(0,Kn.jsx)("label",{children:"Categoria:"}),(0,Kn.jsx)("span",{children:l.category.name})]}),(0,Kn.jsxs)("div",{children:[(0,Kn.jsx)("label",{children:"Prioridad:"}),f(l.priority)]}),(0,Kn.jsxs)("div",{children:[(0,Kn.jsx)("label",{children:"Estado:"}),h(l.status)]}),(0,Kn.jsxs)("div",{children:[(0,Kn.jsx)("label",{children:"Solicitante:"}),(0,Kn.jsx)("span",{children:(null===(e=l.requester)||void 0===e?void 0:e.name)||"N/A"})]})]})]}),(0,Kn.jsxs)("div",{className:"request-detail-section",children:[(0,Kn.jsx)("h4",{children:"Respuestas del Cuestionario"}),(0,Kn.jsx)("div",{className:"questionnaire-answers",children:null===(t=l.category.questionnaire)||void 0===t?void 0:t.map(e=>{const t=l.questionnaire_answers[e.field_name];return(0,Kn.jsxs)("div",{className:"answer-row",children:[(0,Kn.jsxs)("label",{children:[e.question,":"]}),(0,Kn.jsx)("span",{children:Array.isArray(t)?t.join(", "):"boolean"===typeof t?t?"Si":"No":t||"N/A"})]},e.field_name)})})]}),l.rejection_reason&&(0,Kn.jsxs)("div",{className:"rejection-notice",children:[(0,Kn.jsx)("strong",{children:"Razon del rechazo:"})," ",l.rejection_reason]}),("in_review"===l.status||"pending"===l.status)&&(0,Kn.jsxs)("div",{className:"approval-section",children:[(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Notas Legales (opcional):"}),(0,Kn.jsx)("textarea",{value:u,onChange:e=>p(e.target.value),rows:3,placeholder:"Agrega notas o comentarios legales..."})]}),(0,Kn.jsxs)("div",{className:"form-group",children:[(0,Kn.jsx)("label",{children:"Razon del Rechazo (si aplica):"}),(0,Kn.jsx)("textarea",{value:c,onChange:e=>d(e.target.value),rows:3,placeholder:"Explica por que se rechaza..."})]}),(0,Kn.jsxs)("div",{className:"modal-actions",children:[(0,Kn.jsx)("button",{className:"btn-approve",onClick:()=>(async e=>{if(window.confirm("Aprobar y generar contrato automaticamente?"))try{await Qn.post("/contract-requests-v2/".concat(e,"/approve"),{legal_notes:u}),alert("Contrato generado exitosamente!"),s(null),p(""),m()}catch(n){var t,a;alert((null===(t=n.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||"Error al aprobar")}})(l._id),children:"\u2713 Aprobar y Generar Contrato"}),(0,Kn.jsx)("button",{className:"btn-danger",onClick:()=>(async e=>{if(c.trim())try{await Qn.post("/contract-requests-v2/".concat(e,"/reject"),{rejection_reason:c}),alert("Solicitud rechazada"),s(null),d(""),m()}catch(n){var t,a;alert((null===(t=n.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||"Error al rechazar")}else alert("Proporciona una razon del rechazo")})(l._id),disabled:!c.trim(),children:"\xd7 Rechazar Solicitud"})]})]}),("completed"===l.status||"approved"===l.status)&&(0,Kn.jsx)("div",{className:"success-notice",children:"\u2713 Esta solicitud ya fue aprobada y el contrato fue generado"})]}),(0,Kn.jsx)("div",{className:"modal-footer",children:(0,Kn.jsx)("button",{className:"btn-secondary",onClick:()=>s(null),children:"Cerrar"})})]})})]})},zr=()=>{const{user:e}=Yn(),t=me(),a=ge(),n="requester"===(null===e||void 0===e?void 0:e.role),l=["super_admin","admin","lawyer"].includes((null===e||void 0===e?void 0:e.role)||""),s=()=>{const e=new URLSearchParams(t.search).get("tab");return"new-request"===e||"my-requests"===e||"supplier-approvals"===e||"contract-approvals"===e?e:n?"my-requests":l?"contract-approvals":"my-requests"},[i,o]=(0,r.useState)(s()),c=e=>{o(e),a("?tab=".concat(e),{replace:!0})};(0,r.useEffect)(()=>{const e=s();e!==i&&o(e)},[t.search]);return(0,Kn.jsxs)("div",{className:"requests-approvals-container",children:[(0,Kn.jsxs)("div",{className:"page-header",children:[(0,Kn.jsx)("h1",{children:"Solicitudes y Aprobaciones"}),(0,Kn.jsx)("p",{className:"subtitle",children:"Gestiona solicitudes de contratos y aprobaciones de terceros"})]}),(0,Kn.jsxs)("div",{className:"tabs-container",children:[(0,Kn.jsxs)("div",{className:"tabs-nav",children:[(n||l)&&(0,Kn.jsxs)("button",{className:"tab-btn ".concat("new-request"===i?"active":""),onClick:()=>c("new-request"),children:[(0,Kn.jsx)("span",{className:"tab-icon",children:"\ud83d\udcdd"}),"Nueva Solicitud"]}),(0,Kn.jsxs)("button",{className:"tab-btn ".concat("my-requests"===i?"active":""),onClick:()=>c("my-requests"),children:[(0,Kn.jsx)("span",{className:"tab-icon",children:"\ud83d\udccb"}),"Mis Solicitudes"]}),l&&(0,Kn.jsxs)(Kn.Fragment,{children:[(0,Kn.jsxs)("button",{className:"tab-btn ".concat("supplier-approvals"===i?"active":""),onClick:()=>c("supplier-approvals"),children:[(0,Kn.jsx)("span",{className:"tab-icon",children:"\ud83d\udc65"}),"Aprobar Terceros"]}),(0,Kn.jsxs)("button",{className:"tab-btn ".concat("contract-approvals"===i?"active":""),onClick:()=>c("contract-approvals"),children:[(0,Kn.jsx)("span",{className:"tab-icon",children:"\u2705"}),"Aprobar Solicitudes"]})]})]}),(0,Kn.jsx)("div",{className:"tab-content",children:(()=>{switch(i){case"new-request":return(0,Kn.jsx)(Pr,{});case"my-requests":return(0,Kn.jsx)(Rr,{});case"supplier-approvals":return(0,Kn.jsx)(Lr,{});case"contract-approvals":return(0,Kn.jsx)(Ar,{});default:return null}})()})]})]})},Or=()=>{const{selectedCompanyId:e,selectedCompanyName:t,userCompanies:a,selectCompany:n,currentRoles:l}=tr(),[s,i]=(0,r.useState)(!1),o=l.includes("super_admin");return a.length<=1&&!o?(0,Kn.jsx)("div",{className:"company-switcher-single",children:(0,Kn.jsx)("span",{className:"menu-icon",children:"\u2630"})}):(0,Kn.jsxs)("div",{className:"company-switcher",children:[(0,Kn.jsx)("button",{className:"company-switcher-button",onClick:()=>i(!s),"aria-expanded":s,title:"Cambiar empresa",children:(0,Kn.jsx)("span",{className:"menu-icon",children:"\u2630"})}),s&&(0,Kn.jsxs)("div",{className:"company-dropdown",children:[(0,Kn.jsxs)("div",{className:"dropdown-header",children:[(0,Kn.jsxs)("div",{className:"dropdown-header-content",children:[(0,Kn.jsx)("span",{className:"dropdown-title",children:"Empresas"}),(0,Kn.jsx)("span",{className:"dropdown-current",children:t})]}),(0,Kn.jsx)("button",{className:"close-button",onClick:()=>i(!1),children:"\u2715"})]}),(0,Kn.jsxs)("div",{className:"company-list",children:[l.includes("super_admin")&&(0,Kn.jsxs)("button",{className:"company-item ".concat("ALL"===e?"active":""),onClick:()=>{n("ALL"),i(!1)},children:[(0,Kn.jsxs)("div",{className:"company-item-details",children:[(0,Kn.jsx)("span",{className:"company-item-name",children:"\ud83c\udf10 Todas las empresas"}),(0,Kn.jsx)("span",{className:"company-item-roles",children:"Vista Global"})]}),"ALL"===e&&(0,Kn.jsx)("span",{className:"check-icon",children:"\u2713"})]},"ALL"),a.map(t=>(0,Kn.jsxs)("button",{className:"company-item ".concat(e===t.companyId?"active":""),onClick:()=>{n(t.companyId),i(!1)},children:[(0,Kn.jsxs)("div",{className:"company-item-details",children:[(0,Kn.jsx)("span",{className:"company-item-name",children:t.companyName}),(0,Kn.jsx)("span",{className:"company-item-roles",children:t.roles.join(", ")})]}),e===t.companyId&&(0,Kn.jsx)("span",{className:"check-icon",children:"\u2713"})]},t.companyId))]})]}),s&&(0,Kn.jsx)("div",{className:"company-dropdown-overlay",onClick:()=>i(!1)})]})},Dr=()=>{const{user:e,logout:t}=Yn(),a=me(),[n,l]=(0,r.useState)(!1),s=(0,r.useRef)(null),i=e=>a.pathname===e;(0,r.useEffect)(()=>{const e=e=>{s.current&&!s.current.contains(e.target)&&l(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const o=["/companies","/user-management","/company-users","/admin"].some(e=>a.pathname===e),c="/terceros"===a.pathname;return(0,Kn.jsxs)("nav",{className:"navbar",children:[(0,Kn.jsxs)("div",{className:"navbar-left",children:[(0,Kn.jsx)(Or,{}),(0,Kn.jsx)("div",{className:"navbar-brand",children:(0,Kn.jsx)(vt,{to:"/dashboard",children:"Legal Bot"})})]}),(0,Kn.jsxs)("div",{className:"navbar-links",children:[(0,Kn.jsx)(vt,{to:"/dashboard",className:i("/dashboard")?"active":"",children:"Dashboard"}),(0,Kn.jsx)(nr,{allowedRoles:["super_admin","admin","lawyer"],children:(0,Kn.jsx)(vt,{to:"/unified-templates",className:i("/unified-templates")?"active":"",children:"\ud83d\ude80 Contratos"})}),(0,Kn.jsx)(vt,{to:"/requests-approvals",className:i("/requests-approvals")?"active":"",children:"\ud83d\udccb Solicitudes"}),(0,Kn.jsx)(nr,{allowedRoles:["super_admin","admin","lawyer"],children:(0,Kn.jsx)(vt,{to:"/terceros",className:c?"active":"",children:"\ud83d\udc65 Terceros"})}),(0,Kn.jsx)(nr,{allowedRoles:["super_admin"],children:(0,Kn.jsxs)("div",{className:"navbar-dropdown",ref:s,children:[(0,Kn.jsxs)("button",{className:"navbar-dropdown-button ".concat(o?"active":""),onClick:()=>l(!n),children:["Administracion",(0,Kn.jsx)("span",{className:"dropdown-arrow ".concat(n?"open":""),children:"\u25bc"})]}),n&&(0,Kn.jsxs)("div",{className:"navbar-dropdown-menu",children:[(0,Kn.jsx)(vt,{to:"/companies",className:i("/companies")?"active":"",onClick:()=>l(!1),children:"Empresas"}),(0,Kn.jsx)(vt,{to:"/user-management",className:i("/user-management")?"active":"",onClick:()=>l(!1),children:"Gestion de Usuarios"}),(0,Kn.jsx)(vt,{to:"/company-users",className:i("/company-users")?"active":"",onClick:()=>l(!1),children:"Relaciones Empresa-Usuario"})]})]})})]}),(0,Kn.jsxs)("div",{className:"navbar-user",children:[(0,Kn.jsxs)("span",{children:["Hola, ",(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.email)]}),(0,Kn.jsx)("button",{onClick:t,className:"logout-btn",children:"Cerrar Sesi\xf3n"})]})]})},Ir=e=>{let{children:t}=e;const{isAuthenticated:a}=Yn();return a?(0,Kn.jsx)(Kn.Fragment,{children:t}):(0,Kn.jsx)(Ae,{to:"/login"})},Fr=()=>{const{isAuthenticated:e}=Yn();return(0,Kn.jsxs)("div",{className:"App",children:[e&&(0,Kn.jsx)(Dr,{}),(0,Kn.jsx)("main",{className:"main-content",children:(0,Kn.jsxs)(De,{children:[(0,Kn.jsx)(ze,{path:"/login",element:e?(0,Kn.jsx)(Ae,{to:"/dashboard"}):(0,Kn.jsx)(Zn,{})}),(0,Kn.jsx)(ze,{path:"/dashboard",element:(0,Kn.jsx)(Ir,{children:(0,Kn.jsx)(rr,{})})}),(0,Kn.jsx)(ze,{path:"/contracts",element:(0,Kn.jsx)(Ir,{children:(0,Kn.jsx)(lr,{})})}),(0,Kn.jsx)(ze,{path:"/contract-generator",element:(0,Kn.jsx)(Ir,{children:(0,Kn.jsx)(ir,{})})}),(0,Kn.jsx)(ze,{path:"/templates",element:(0,Kn.jsx)(Ir,{children:(0,Kn.jsx)(pr,{})})}),(0,Kn.jsx)(ze,{path:"/unified-templates",element:(0,Kn.jsx)(Ir,{children:(0,Kn.jsx)(fr,{})})}),(0,Kn.jsx)(ze,{path:"/companies",element:(0,Kn.jsx)(Ir,{children:(0,Kn.jsx)(gr,{})})}),(0,Kn.jsx)(ze,{path:"/user-management",element:(0,Kn.jsx)(Ir,{children:(0,Kn.jsx)(vr,{})})}),(0,Kn.jsx)(ze,{path:"/company-users",element:(0,Kn.jsx)(Ir,{children:(0,Kn.jsx)(xr,{})})}),(0,Kn.jsx)(ze,{path:"/terceros",element:(0,Kn.jsx)(Ir,{children:(0,Kn.jsx)(Er,{})})}),(0,Kn.jsx)(ze,{path:"/requests-approvals",element:(0,Kn.jsx)(Ir,{children:(0,Kn.jsx)(zr,{})})}),(0,Kn.jsx)(ze,{path:"/contract-request",element:(0,Kn.jsx)(Ae,{to:"/requests-approvals",replace:!0})}),(0,Kn.jsx)(ze,{path:"/my-requests",element:(0,Kn.jsx)(Ae,{to:"/requests-approvals",replace:!0})}),(0,Kn.jsx)(ze,{path:"/supplier-approvals",element:(0,Kn.jsx)(Ae,{to:"/requests-approvals",replace:!0})}),(0,Kn.jsx)(ze,{path:"/contract-approvals",element:(0,Kn.jsx)(Ae,{to:"/requests-approvals",replace:!0})}),(0,Kn.jsx)(ze,{path:"/third-parties",element:(0,Kn.jsx)(Ae,{to:"/terceros?tab=terceros",replace:!0})}),(0,Kn.jsx)(ze,{path:"/suppliers",element:(0,Kn.jsx)(Ae,{to:"/terceros?tab=terceros",replace:!0})}),(0,Kn.jsx)(ze,{path:"/third-party-types",element:(0,Kn.jsx)(Ae,{to:"/terceros?tab=tipos",replace:!0})}),(0,Kn.jsx)(ze,{path:"/supplier-contracts",element:(0,Kn.jsx)(Ae,{to:"/terceros?tab=contratos",replace:!0})}),(0,Kn.jsx)(ze,{path:"/contract-categories",element:(0,Kn.jsx)(Ae,{to:"/terceros?tab=categorias",replace:!0})}),(0,Kn.jsx)(ze,{path:"/",element:(0,Kn.jsx)(Ae,{to:e?"/dashboard":"/login"})})]})})]})},qr=()=>(0,Kn.jsx)(Xn,{children:(0,Kn.jsx)(ar,{children:(0,Kn.jsx)(ft,{children:(0,Kn.jsx)(Fr,{})})})});l.createRoot(document.getElementById("root")).render((0,Kn.jsx)(r.StrictMode,{children:(0,Kn.jsx)(qr,{})}))})();
//# sourceMappingURL=main.5664bfbb.js.map